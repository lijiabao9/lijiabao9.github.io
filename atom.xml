<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gabrielçš„åšå®¢</title>
  
  <subtitle>åœ¨ä»£ç ä¸æ–‡å­—ä¹‹é—´</subtitle>
  <link href="https://lijiabao9.github.io/atom.xml" rel="self"/>
  
  <link href="https://lijiabao9.github.io/"/>
  <updated>2025-12-17T17:57:48.698Z</updated>
  <id>https://lijiabao9.github.io/</id>
  
  <author>
    <name>Gabriel</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MIND éƒ¨ç½²æŒ‡å—ï¼šåŸºäº Docker æ­å»ºå¾…åŠäº‹é¡¹é€šçŸ¥ç®¡ç†</title>
    <link href="https://lijiabao9.github.io/posts/ff7a46e6.html"/>
    <id>https://lijiabao9.github.io/posts/ff7a46e6.html</id>
    <published>2025-12-17T17:42:13.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/Casvt/MIND">Mind</a> æ˜¯ä¸€ä¸ªè½»é‡çº§ã€è‡ªæ‰˜ç®¡çš„æ¶ˆæ¯å‘é€ä¸é€šçŸ¥ç®¡ç†æœåŠ¡ã€‚</p><p>å®ƒé›†æˆäº†å¼ºå¤§çš„ <a href="https://github.com/caronc/apprise">Apprise</a> åº“ï¼Œæ”¯æŒé€šè¿‡å•ä¸€çš„ API æ¥å£ï¼Œå°†æ¶ˆæ¯æ¨é€åˆ° Telegramã€Discordã€Slackã€Email ç­‰æ•°åç§æ¸ é“ã€‚<br>å¯¹äºæ‹¥æœ‰ NAS æˆ–äº‘æœåŠ¡å™¨çš„ç©å®¶æ¥è¯´ï¼Œå®ƒæ˜¯ç»Ÿä¸€ç®¡ç†è„šæœ¬é€šçŸ¥ã€ç³»ç»ŸæŠ¥è­¦çš„ç»ä½³å·¥å…·ã€‚</p><p>æœ¬æ–‡å°†æŒ‡å¯¼ä½ å®Œæˆ MIND çš„æ­å»ºã€åå‘ä»£ç†é…ç½®åŠä¸»æµé€šçŸ¥æ¸ é“çš„æ¥å…¥ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šåŸºäº-Docker-éƒ¨ç½²"><a href="#ç¬¬ä¸€æ­¥ï¼šåŸºäº-Docker-éƒ¨ç½²" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåŸºäº Docker éƒ¨ç½²"></a>ç¬¬ä¸€æ­¥ï¼šåŸºäº Docker éƒ¨ç½²</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨ Docker Compose å¿«é€Ÿæ‹‰èµ·æœåŠ¡ã€‚</p><ol><li><strong>åˆ›å»ºç›®å½•</strong>ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /app/mind</span><br><span class="line"><span class="built_in">cd</span> /app/mind</span><br></pre></td></tr></table></figure></li><li><strong>ç¼–å†™é…ç½®æ–‡ä»¶</strong>ï¼š<br>åˆ›å»º <code>docker-compose.yml</code> æ–‡ä»¶ã€‚ <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi docker-compose.yml</span><br></pre></td></tr></table></figure> å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">mind:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">mind</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mrcas/mind:latest</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./mind-db:/app/db</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Europe/Amsterdam</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">20005</span><span class="string">:8080</span></span><br></pre></td></tr></table></figure></li><li><strong>å¯åŠ¨æœåŠ¡</strong>ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="ç¬¬äºŒæ­¥ï¼šé…ç½®-Nginx-åå‘ä»£ç†"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½® Nginx åå‘ä»£ç†"></a>ç¬¬äºŒæ­¥ï¼šé…ç½® Nginx åå‘ä»£ç†</h2><p>ä¸ºäº†é€šè¿‡ HTTPS å®‰å…¨è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® Nginx åä»£ã€‚</p><ol><li><strong>æ·»åŠ  DNS è§£æ</strong>ï¼š<br>å°†åŸŸåï¼ˆå¦‚ <code>mind.131495.xyz</code>ï¼‰è§£æåˆ°æœåŠ¡å™¨ IPã€‚</li><li><strong>åˆ›å»º Nginx é…ç½®</strong>ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nginx/sites-available/mind.131495.xyz</span><br></pre></td></tr></table></figure> <strong>æ³¨æ„</strong>ï¼šä»¥ä¸‹é…ç½®åŒ…å«è‡ªåŠ¨ HTTPS è·³è½¬åŠå®Œæ•´çš„ SSL è·¯å¾„è®¾ç½®ã€‚ <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> mind.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span></span><br><span class="line">    <span class="attribute">server_name</span> mind.<span class="number">131495</span>.xyz;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/mind.access.log proxy_json;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/mind.<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†è®¾ç½®</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:20005;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><strong>å¯ç”¨å¹¶é‡è½½</strong>ï¼š <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/mind.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line">nginx -t &amp;&amp; nginx -s reload</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="ç¬¬ä¸‰æ­¥ï¼šç³»ç»Ÿåˆå§‹åŒ–ä¸å®‰å…¨è®¾ç½®"><a href="#ç¬¬ä¸‰æ­¥ï¼šç³»ç»Ÿåˆå§‹åŒ–ä¸å®‰å…¨è®¾ç½®" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç³»ç»Ÿåˆå§‹åŒ–ä¸å®‰å…¨è®¾ç½®"></a>ç¬¬ä¸‰æ­¥ï¼šç³»ç»Ÿåˆå§‹åŒ–ä¸å®‰å…¨è®¾ç½®</h2><p>è®¿é—® <code>https://mind.131495.xyz</code> è¿›å…¥ç®¡ç†é¢æ¿ã€‚</p><ol><li><strong>åˆå§‹ç™»å½•</strong>ï¼š<br>ä½¿ç”¨é»˜è®¤è´¦å· <code>admin</code>ï¼Œå¯†ç  <code>admin</code> ç™»å½•ã€‚</li><li><strong>å®‰å…¨åŠ å›º (å…³é”®)</strong>ï¼š<ul><li>è¿›å…¥ <strong>Authentication</strong> èœå•ï¼Œå…³é—­ <span class='p red'>Allow New Accounts</span> é€‰é¡¹ï¼Œç¦æ­¢å¤–éƒ¨æ³¨å†Œã€‚</li><li>è¿›å…¥ <strong>User Management</strong>ï¼Œç¼–è¾‘ <code>admin</code> ç”¨æˆ·ï¼Œè¾“å…¥æ–°å¯†ç å¹¶å›è½¦ç¡®è®¤ä¿®æ”¹ã€‚</li></ul></li><li><strong>åˆ›å»ºæ—¥å¸¸è´¦å·</strong>ï¼š<br>ä¸ºäº†å®‰å…¨èµ·è§ï¼Œå»ºè®®åˆ›å»ºä¸€ä¸ªæ™®é€šæƒé™çš„ç”¨æˆ·ï¼ˆUser Roleï¼‰ï¼Œåç»­å‡ä½¿ç”¨è¯¥è´¦å·è¿›è¡Œæ“ä½œã€‚</li><li><strong>ç•Œé¢æ±‰åŒ–</strong>ï¼š<br>ç™»å½•æ™®é€šè´¦å·ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ åº•éƒ¨çš„ <strong>Settings (è®¾ç½®)</strong> å›¾æ ‡ï¼Œå°† Locale ä¿®æ”¹ä¸º <code>zh-CN</code>ã€‚</li></ol><hr><h2 id="ç¬¬å››æ­¥ï¼šé…ç½®é€šçŸ¥æ¸ é“-Apprise"><a href="#ç¬¬å››æ­¥ï¼šé…ç½®é€šçŸ¥æ¸ é“-Apprise" class="headerlink" title="ç¬¬å››æ­¥ï¼šé…ç½®é€šçŸ¥æ¸ é“ (Apprise)"></a>ç¬¬å››æ­¥ï¼šé…ç½®é€šçŸ¥æ¸ é“ (Apprise)</h2><p>MIND çš„æ ¸å¿ƒåœ¨äºå…¶å¼ºå¤§çš„é€šçŸ¥è½¬å‘èƒ½åŠ›ã€‚ç‚¹å‡»å·¦ä¾§ <strong>Notification Services</strong> å›¾æ ‡å³å¯æ·»åŠ ã€‚</p><h3 id="1-Telegram-é€šçŸ¥"><a href="#1-Telegram-é€šçŸ¥" class="headerlink" title="1. Telegram é€šçŸ¥"></a>1. Telegram é€šçŸ¥</h3><p>æœ€å¸¸ç”¨çš„å³æ—¶é€šçŸ¥æ–¹å¼ã€‚</p><ul><li><strong>è·å– Token</strong>ï¼šåœ¨ Telegram æœç´¢ <code>@BotFather</code>ï¼Œå‘é€ <code>/newbot</code> åˆ›å»ºæœºå™¨äººï¼Œè·å– <code>API Token</code>ã€‚</li><li><strong>è·å– User ID</strong>ï¼šæœç´¢ <code>@userinfobot</code>ï¼Œè·å–ä½ ä¸ªäººçš„ <code>Chat ID</code>ã€‚</li><li><strong>MIND é…ç½®</strong>ï¼š<ul><li><strong>Service Title</strong>: <code>My Telegram</code></li><li><strong>Bot Token</strong>: å¡«å…¥ API Token</li><li><strong>Target</strong>: å¡«å…¥ Chat ID</li></ul></li></ul><h3 id="2-QQ-é‚®ç®±é€šçŸ¥"><a href="#2-QQ-é‚®ç®±é€šçŸ¥" class="headerlink" title="2. QQ é‚®ç®±é€šçŸ¥"></a>2. QQ é‚®ç®±é€šçŸ¥</h3><p>ä½¿ç”¨ QQ é‚®ç®±çš„ SMTP æœåŠ¡å‘é€é€šçŸ¥ã€‚</p><ul><li><strong>å‡†å¤‡å·¥ä½œ</strong><ul><li>ç™»å½• QQ é‚®ç®±ç½‘é¡µç‰ˆ -&gt; è®¾ç½® -&gt; è´¦å·ï¼Œå¼€å¯ SMTP æœåŠ¡å¹¶ç”Ÿæˆ <code>æˆæƒç </code>ã€‚</li><li>å¯å‚è€ƒ <a href="https://wx.mail.qq.com/list/readtemplate?name=app_intro.html#/agreement/authorizationCode">QQ é‚®ç®± SMTP/IMAP æœåŠ¡</a></li></ul></li><li><strong>MIND é…ç½®</strong>ï¼š<ul><li><strong>Schema</strong>: <code>mailtos</code></li><li><strong>Domain</strong>: <code>qq.com</code></li><li><strong>Username</strong>: å¡«å†™ QQ å·ï¼ˆ<strong>æ³¨æ„</strong>ï¼šä¸è¦å¸¦ <code>@qq.com</code> åç¼€ï¼‰</li><li><strong>Password</strong>: å¡«å†™åˆšæ‰ç”Ÿæˆçš„ <strong>æˆæƒç </strong>ï¼ˆé QQ ç™»å½•å¯†ç ï¼‰</li><li><strong>Port</strong>ï¼š<code>587</code></li><li><strong>Target Email</strong>: å¡«å†™å®Œæ•´çš„æ”¶ä»¶åœ°å€ï¼ˆå¦‚ <code>123456@qq.com</code>ï¼‰</li></ul></li></ul><h3 id="3-Microsoft-365-Office-365-é€šçŸ¥"><a href="#3-Microsoft-365-Office-365-é€šçŸ¥" class="headerlink" title="3. Microsoft 365 (Office 365) é€šçŸ¥"></a>3. Microsoft 365 (Office 365) é€šçŸ¥</h3><p>åˆ©ç”¨ä¼ä¸šçº§ E3 è®¢é˜…çš„é«˜æƒé‡å‘ä¿¡ã€‚è¯¦ç»†çš„å‰ç½®é…ç½®è¯·å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š<br>ğŸ‘‰ <a href="/posts/57b282c7.html">Microsoft 365 E3 è¿›é˜¶æŒ‡å—ï¼šç»‘å®šè‡ªå®šä¹‰åŸŸåå¹¶é…ç½®ä¼ä¸šçº§ SMTP å‘ä¿¡</a></p><p>æˆ‘ä»¬éœ€è¦ç”¨åˆ° <strong>Microsoft Graph API</strong> çš„å‚æ•°ï¼š</p><ul><li><strong>MIND é…ç½®</strong>ï¼š<ul><li><strong>Tenant Domain</strong>: å¡«å…¥ <code>Directory (tenant) ID</code></li><li><strong>Account Email</strong>: å¡«å…¥æ‹¥æœ‰å‘é€æƒé™çš„å®Œæ•´é‚®ç®±åœ°å€ï¼ˆå¦‚ <code>noreply@gabriel.edu.kg</code>ï¼‰</li><li><strong>Client ID</strong>: å¡«å…¥ <code>Application (client) ID</code></li><li><strong>Client Secret</strong>: å¡«æ³¨å†Œç”Ÿæˆçš„ Secret Value</li><li><strong>Target Email</strong>: å¡«å†™å®Œæ•´çš„æ”¶ä»¶åœ°å€ï¼ˆå¦‚ <code>123456@qq.com</code>ï¼‰</li></ul></li></ul><div class="note info flat"><p><strong>æµ‹è¯•æç¤ºï¼š</strong><br>é…ç½®å®Œæˆåï¼Œå¯ä»¥åœ¨ MIND çš„ â€œTest Serviceâ€ æŒ‰é’®å‘é€ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œç¡®è®¤æ‰‹æœºæˆ–é‚®ç®±æ˜¯å¦èƒ½æ­£å¸¸æ”¶åˆ°æ¨é€ã€‚</p></div>]]></content>
    
    
    <summary type="html">è¯¦è§£å¦‚ä½•ä½¿ç”¨ Docker éƒ¨ç½² MIND æ¶ˆæ¯æ¨é€æœåŠ¡ï¼Œé…ç½® Nginx åå‘ä»£ç†ï¼Œå¹¶åˆ©ç”¨å†…ç½®çš„ Apprise é›†æˆå®ç° Telegramã€QQ é‚®ç®±åŠ Office 365 çš„å…¨æ¸ é“æ¶ˆæ¯é€šçŸ¥ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="æœåŠ¡æ­å»º" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Docker" scheme="https://lijiabao9.github.io/tags/Docker/"/>
    
    <category term="MIND" scheme="https://lijiabao9.github.io/tags/MIND/"/>
    
    <category term="Apprise" scheme="https://lijiabao9.github.io/tags/Apprise/"/>
    
    <category term="æ¶ˆæ¯æ¨é€" scheme="https://lijiabao9.github.io/tags/%E6%B6%88%E6%81%AF%E6%8E%A8%E9%80%81/"/>
    
  </entry>
  
  <entry>
    <title>LunaTV éƒ¨ç½²æŒ‡å—ï¼šåŸºäº Docker æ­å»ºé«˜é¢œå€¼çš„ä¸ªäººå½±è§†èšåˆå¹³å°</title>
    <link href="https://lijiabao9.github.io/posts/fd912215.html"/>
    <id>https://lijiabao9.github.io/posts/fd912215.html</id>
    <published>2025-12-14T15:55:44.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/MoonTechLab/LunaTV"><strong>LunaTV</strong></a> æ˜¯ä¸€ä¸ªé«˜é¢œå€¼çš„ä¸ªäººåª’ä½“åº“èšåˆé¡¹ç›®ï¼Œæ”¯æŒ IPTV ç›´æ’­æºç®¡ç†ã€å½±è§†ç‚¹æ’­ç­‰åŠŸèƒ½ã€‚<br>ç›¸æ¯”äºä¼ ç»Ÿçš„æ’­æ”¾å™¨ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªä¼˜é›…çš„ Web ç•Œé¢ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡åç«¯æœåŠ¡ç»Ÿä¸€ç®¡ç†é…ç½®ã€‚</p><p>æœ¬æ–‡å°†æŒ‡å¯¼ä½ åˆ©ç”¨ Docker å¿«é€Ÿéƒ¨ç½² LunaTVï¼Œå¹¶ç»“åˆ Nginx å’Œ Cloudflare Workers å®ç°å¤–ç½‘è®¿é—®ä¸è·¨åŸŸæµåª’ä½“ä»£ç†ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸-Docker-éƒ¨ç½²"><a href="#ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸-Docker-éƒ¨ç½²" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸ Docker éƒ¨ç½²"></a>ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡ä¸ Docker éƒ¨ç½²</h2><p>æˆ‘ä»¬å°†ä½¿ç”¨ Docker Compose æ¥ç¼–æ’æœåŠ¡ï¼ŒåŒ…æ‹¬ LunaTV æ ¸å¿ƒæœåŠ¡ (<code>moontv-core</code>) å’ŒæŒä¹…åŒ–å­˜å‚¨ (<code>kvrocks</code>)ã€‚</p><ol><li><p><strong>åˆ›å»ºç›®å½•</strong></p><p>åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºå­˜æ”¾é…ç½®æ–‡ä»¶çš„ç›®å½•ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /app/moontv</span><br><span class="line"><span class="built_in">cd</span> /app/moontv</span><br></pre></td></tr></table></figure></li><li><p><strong>ç¼–å†™é…ç½®æ–‡ä»¶</strong></p><p>åˆ›å»º <code>docker-compose.yml</code> æ–‡ä»¶ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi docker-compose.yml</span><br></pre></td></tr></table></figure><p>å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">moontv-core:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">ghcr.io/moontechlab/lunatv:latest</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">moontv-core</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">on-failure</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&#x27;20004:3000&#x27;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="comment"># å¿…å¡«ï¼šç®¡ç†å‘˜è´¦å·</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">USERNAME=admin@example.com</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">PASSWORD=your_password</span></span><br><span class="line">      <span class="comment"># å¿…å¡«ï¼šå­˜å‚¨é…ç½® (ä½¿ç”¨ kvrocks)</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NEXT_PUBLIC_STORAGE_TYPE=kvrocks</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">KVROCKS_URL=redis://moontv-kvrocks:6666</span></span><br><span class="line">      <span class="comment"># å¯é€‰ï¼šç«™ç‚¹é…ç½®</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">SITE_BASE=https://moontv.131495.xyz</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NEXT_PUBLIC_SITE_NAME=Luna</span> <span class="string">Home</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ANNOUNCEMENT=ğŸ‘‹</span> <span class="string">æ¬¢è¿å›å®¶ï¼è¿™é‡Œæ˜¯</span> <span class="string">Luna</span> <span class="string">Home</span> <span class="string">ä¸ªäººåª’ä½“åº“ï¼Œç¥æ‚¨ä»Šæ™šè§‚å½±æ„‰å¿«ï¼ğŸ¿</span></span><br><span class="line">      <span class="comment"># å¯é€‰ï¼šè±†ç“£ä»£ç†é…ç½®ï¼ˆæ¨èï¼‰</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NEXT_PUBLIC_DOUBAN_PROXY_TYPE=cmliussss-cdn-tencent</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">NEXT_PUBLIC_DOUBAN_IMAGE_PROXY_TYPE=cmliussss-cdn-tencent</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">moontv-network</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">moontv-kvrocks</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">moontv-kvrocks:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">apache/kvrocks</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">moontv-kvrocks</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">kvrocks-data:/var/lib/kvrocks</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">moontv-network</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">moontv-network:</span></span><br><span class="line">    <span class="attr">driver:</span> <span class="string">bridge</span></span><br><span class="line"></span><br><span class="line"><span class="attr">volumes:</span></span><br><span class="line">  <span class="attr">kvrocks-data:</span></span><br></pre></td></tr></table></figure></li><li><p><strong>å¯åŠ¨æœåŠ¡</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure></li></ol><p><strong>æ ¸å¿ƒå˜é‡è¯´æ˜</strong>ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">å˜é‡å</th><th style="text-align:left">ç¤ºä¾‹å€¼</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><code>USERNAME</code></td><td style="text-align:left"><code>admin@example.com</code></td><td style="text-align:left">ç®¡ç†åå°ç™»å½•è´¦å·</td></tr><tr><td style="text-align:left"><code>PASSWORD</code></td><td style="text-align:left"><code>your_password</code></td><td style="text-align:left">ç™»å½•å¯†ç ï¼Œ<span class='p red'>å»ºè®®ä¿®æ”¹</span></td></tr><tr><td style="text-align:left"><code>SITE_BASE</code></td><td style="text-align:left"><code>https://moontv.131495.xyz</code></td><td style="text-align:left">ä½ çš„å¤–éƒ¨è®¿é—®åŸŸå</td></tr><tr><td style="text-align:left"><code>KVROCKS_URL</code></td><td style="text-align:left"><code>redis://moontv-kvrocks:6666</code></td><td style="text-align:left">æ•°æ®åº“è¿æ¥ä¸² (æ— éœ€ä¿®æ”¹)</td></tr></tbody></table></div><hr><h2 id="ç¬¬äºŒæ­¥ï¼šé…ç½®-Nginx-åå‘ä»£ç†"><a href="#ç¬¬äºŒæ­¥ï¼šé…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé…ç½® Nginx åå‘ä»£ç†"></a>ç¬¬äºŒæ­¥ï¼šé…ç½® Nginx åå‘ä»£ç†</h2><p>ä¸ºäº†é€šè¿‡ HTTPS å®‰å…¨è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® Nginx åä»£ã€‚</p><ol><li><p><strong>æ·»åŠ  DNS è§£æ</strong>ï¼š<br>å°†ä½ çš„åŸŸåï¼ˆå¦‚ <code>moontv.131495.xyz</code>ï¼‰è§£æåˆ°æœåŠ¡å™¨ IPã€‚</p></li><li><p><strong>åˆ›å»º Nginx é…ç½®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/nginx/sites-available/moontv.131495.xyz</span><br></pre></td></tr></table></figure><p>å†™å…¥ä»¥ä¸‹é…ç½®ï¼ˆè¯·æ›¿æ¢ä¸ºä½ è‡ªå·±çš„åŸŸåå’Œæ—¥å¿—è·¯å¾„ï¼‰ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> moontv.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">server_name</span> moontv.<span class="number">131495</span>.xyz;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/moontv.access.log;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/moontv.<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†è®¾ç½®</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:20004;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><strong>å¯ç”¨å¹¶é‡è½½</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/moontv.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line">nginx -t &amp;&amp; nginx -s reload</span><br></pre></td></tr></table></figure></li></ol><p>æ­¤æ—¶ï¼Œè®¿é—® <code>https://moontv.131495.xyz</code> å¹¶è¾“å…¥ç¬¬ä¸€æ­¥ä¸­è®¾ç½®çš„è´¦å·å¯†ç ï¼Œå³å¯è¿›å…¥ç®¡ç†é¢æ¿ã€‚</p><hr><h2 id="ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§†é¢‘è®¢é˜…æº"><a href="#ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§†é¢‘è®¢é˜…æº" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§†é¢‘è®¢é˜…æº"></a>ç¬¬ä¸‰æ­¥ï¼šé…ç½®è§†é¢‘è®¢é˜…æº</h2><p>è¿›å…¥åå°åï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥è§†é¢‘æºã€‚è¿™é‡Œæ¨èä½¿ç”¨å¼€æºé¡¹ç›® <a href="https://github.com/hafrey1/LunaTV-config">hafrey1/LunaTV-config</a> æä¾›çš„é…ç½®ã€‚</p><p>ä½ æœ‰ä¸¤ç§æ–¹å¼å¯¼å…¥ï¼š</p><ul><li><strong>é™æ€å¯¼å…¥</strong>ï¼šç›´æ¥å¤åˆ¶é¡¹ç›®ä¸­çš„ <code>jin18.txt</code> æˆ– <code>jingjian.txt</code> å†…å®¹ï¼Œç²˜è´´åˆ°åå°çš„é…ç½®æ–‡æœ¬æ¡†ä¸­ã€‚</li><li><strong>è®¢é˜…é“¾æ¥ (æ¨è)</strong>ï¼šä½¿ç”¨ Raw æ–‡ä»¶åœ°å€ä½œä¸ºè®¢é˜… URLï¼Œæ”¯æŒä¸€é”®æ›´æ–°ã€‚</li></ul><hr><h2 id="ç¬¬å››æ­¥ï¼šè¿›é˜¶-Cloudflare-Workers-è·¨åŸŸä»£ç†"><a href="#ç¬¬å››æ­¥ï¼šè¿›é˜¶-Cloudflare-Workers-è·¨åŸŸä»£ç†" class="headerlink" title="ç¬¬å››æ­¥ï¼šè¿›é˜¶ - Cloudflare Workers è·¨åŸŸä»£ç†"></a>ç¬¬å››æ­¥ï¼šè¿›é˜¶ - Cloudflare Workers è·¨åŸŸä»£ç†</h2><p>ä¸ºäº†è§£å†³éƒ¨åˆ†è§†é¢‘æºçš„ CORS è·¨åŸŸé—®é¢˜ï¼Œä»¥åŠé˜²æ­¢ç›´æ¥è¯·æ±‚æºç«™å¯¼è‡´çš„é™åˆ¶ï¼Œå¼ºçƒˆå»ºè®®è‡ªè¡Œéƒ¨ç½² Cloudflare Workers ä»£ç†ã€‚</p><ol><li><p><strong>åˆ›å»º Worker</strong>ï¼š<br>ç™»å½• <a href="https://www.cloudflare.com/zh-cn/">Cloudflare</a>ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Workerã€‚</p></li><li><p><strong>å¤åˆ¶ä»£ç </strong>ï¼š<br>å¤åˆ¶ Github é¡¹ç›®ä¸­ <a href="https://github.com/hafrey1/LunaTV-config/blob/main/CORSAPI/_worker.js">_worker.js</a> çš„å…¨éƒ¨ä»£ç ã€‚</p></li><li><p><strong>å…³é”®ä¿®æ”¹ (é‡è¦)</strong>ï¼š<br>åŸä»£ç ä¸­çš„ä¸­è½¬ä»£ç†åœ°å€å¯èƒ½ä¸å®Œæ•´ï¼Œ<span class='p red'>åŠ¡å¿…æ‰‹åŠ¨ä¿®æ”¹ JS ä»£ç </span> ä¸­çš„ HTML ç”Ÿæˆéƒ¨åˆ†ã€‚<br>æ‰¾åˆ°ç”Ÿæˆé¡µé¢ HTML çš„ä»£ç æ®µï¼Œç¡®ä¿ä»£ç†çš„è®¢é˜…åœ°å€åŠ ä¸Š <code>&amp;prefix=$&#123;currentOrigin&#125;?url=</code>ã€‚</p><p><strong>ä¿®æ”¹å (å‚è€ƒ)ï¼š</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;section&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>ğŸ“¦ ç²¾ç®€ç‰ˆï¼ˆjin18ï¼‰<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸­è½¬ä»£ç† JSONï¼š<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">&quot;copyable&quot;</span>&gt;</span>$&#123;currentOrigin&#125;?format=1&amp;source=jin18&amp;prefix=$&#123;currentOrigin&#125;?url=<span class="tag">&lt;/<span class="name">code</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;copy-btn&quot;</span>&gt;</span>å¤åˆ¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>ä¸­è½¬ Base58ï¼š<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">&quot;copyable&quot;</span>&gt;</span>$&#123;currentOrigin&#125;?format=3&amp;source=jin18&amp;prefix=$&#123;currentOrigin&#125;?url=<span class="tag">&lt;/<span class="name">code</span>&gt;</span> <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;copy-btn&quot;</span>&gt;</span>å¤åˆ¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p><strong>è·å–è®¢é˜…åœ°å€</strong>ï¼š<br>éƒ¨ç½²å®Œæˆåï¼Œè®¿é—®ä½ çš„ Worker åŸŸåï¼ˆå¦‚ <code>https://luna-proxy.yourname.workers.dev</code>ï¼‰ã€‚<br>é¡µé¢ä¼šæ˜¾ç¤ºå¤„ç†å¥½çš„è®¢é˜…é“¾æ¥ï¼Œç›´æ¥å¤åˆ¶ <strong>ä¸­è½¬ Base58</strong> é“¾æ¥å¡«å…¥ LunaTV åå°å³å¯ã€‚</p></li></ol><div class="note warning flat"><p><strong>ä½¿ç”¨æç¤ºï¼š</strong><br>Cloudflare Workers å…è´¹ç‰ˆæ¯æ—¥è¯·æ±‚é™åˆ¶ä¸º <strong>10ä¸‡æ¬¡</strong>ã€‚<br>æ­¤å¤–ï¼Œè¯·å‹¿æ»¥ç”¨ä»£ç†ä¸‹è½½å¤§æ–‡ä»¶ï¼Œä»¥å…å¯¼è‡´è´¦å·å°ç¦é£é™©ã€‚</p></div>]]></content>
    
    
    <summary type="html">è¯¦è§£å¦‚ä½•ä½¿ç”¨ Docker Compose éƒ¨ç½² LunaTV ä¸ªäººåª’ä½“åº“ï¼Œé…åˆ Nginx åå‘ä»£ç†ä¸ Cloudflare Workers è§£å†³è·¨åŸŸæ’­æ”¾é—®é¢˜ï¼Œæ‰“é€ æµç•…çš„åœ¨çº¿è§‚å½±ä½“éªŒã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="æœåŠ¡æ­å»º" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Docker" scheme="https://lijiabao9.github.io/tags/Docker/"/>
    
    <category term="LunaTV" scheme="https://lijiabao9.github.io/tags/LunaTV/"/>
    
    <category term="Cloudflare" scheme="https://lijiabao9.github.io/tags/Cloudflare/"/>
    
  </entry>
  
  <entry>
    <title>3X-UI é¢æ¿æ­å»ºæŒ‡å—ï¼šå¯è§†åŒ–ç®¡ç† VLESS / Reality / Trojan èŠ‚ç‚¹</title>
    <link href="https://lijiabao9.github.io/posts/e8898327.html"/>
    <id>https://lijiabao9.github.io/posts/e8898327.html</id>
    <published>2025-12-12T12:36:08.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/MHSanaei/3x-ui">3X-UI</a> æ˜¯ X-UI çš„ä¸€ä¸ªä¼˜ç§€åˆ†æ”¯ï¼Œæ”¯æŒ Xray å†…æ ¸çš„ç»å¤§å¤šæ•°æ–°ç‰¹æ€§ï¼ˆå¦‚ Realityã€Vision æµæ§ç­‰ï¼‰ï¼Œå¹¶æä¾›äº†ç¾è§‚çš„æ•°æ®ç»Ÿè®¡é¢æ¿ã€‚</p><p>æœ¬æ–‡å°†å¸¦ä½ æ­å»ºä¸€å¥—æ—¢æ–¹ä¾¿ç®¡ç†ï¼Œåˆå…·å¤‡æé«˜éšè”½æ€§çš„ä»£ç†ç³»ç»Ÿã€‚</p><h2 id="ä¸€ã€ä¸€é”®å®‰è£…é¢æ¿"><a href="#ä¸€ã€ä¸€é”®å®‰è£…é¢æ¿" class="headerlink" title="ä¸€ã€ä¸€é”®å®‰è£…é¢æ¿"></a>ä¸€ã€ä¸€é”®å®‰è£…é¢æ¿</h2><p>ä½¿ç”¨å®˜æ–¹æä¾›çš„ä¸€é”®è„šæœ¬è¿›è¡Œå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt update -y &amp;&amp; apt install git -y</span><br><span class="line"></span><br><span class="line">bash &lt; (curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh))</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œç»ˆç«¯ä¼šè¾“å‡ºåˆå§‹çš„ç™»å½•ä¿¡æ¯ï¼š</p><blockquote><p>Username: UtgyyYgtJw  (éšæœºç”Ÿæˆ)<br>Password: JgaAcZYsVQ  (éšæœºç”Ÿæˆ)<br>Port:     18857       (éšæœºç”Ÿæˆ)<br>Access URL: <a href="http://ä½ çš„IP:18857/éšæœºè·¯å¾„">http://ä½ çš„IP:18857/éšæœºè·¯å¾„</a></p></blockquote><h3 id="æ¨èçš„åˆå§‹åŒ–è®¾ç½®"><a href="#æ¨èçš„åˆå§‹åŒ–è®¾ç½®" class="headerlink" title="æ¨èçš„åˆå§‹åŒ–è®¾ç½®"></a>æ¨èçš„åˆå§‹åŒ–è®¾ç½®</h3><p>åœ¨ç»ˆç«¯è¾“å…¥ <code>x-ui</code> è¿›å…¥ç®¡ç†èœå•ï¼š</p><ol><li>è¾“å…¥ <code>23</code>ï¼šå®‰è£… BBR æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼ˆæ¨è BBR+FQï¼‰ï¼Œæ˜¾è‘—æå‡é€Ÿåº¦ã€‚</li><li>è¾“å…¥ <code>6</code>ï¼šä¿®æ”¹ç®¡ç†å‘˜è´¦å·å’Œå¯†ç ï¼ˆå»ºè®®æ”¹ä¸ªå¥½è®°çš„ï¼Œä½†ä¸è¦å¤ªç®€å•ï¼‰ã€‚</li></ol><hr><h2 id="äºŒã€é¢æ¿å®‰å…¨é…ç½®-Nginx-åä»£"><a href="#äºŒã€é¢æ¿å®‰å…¨é…ç½®-Nginx-åä»£" class="headerlink" title="äºŒã€é¢æ¿å®‰å…¨é…ç½® (Nginx åä»£)"></a>äºŒã€é¢æ¿å®‰å…¨é…ç½® (Nginx åä»£)</h2><p>ä¸ºäº†å®‰å…¨ï¼Œæˆ‘ä»¬ä¸åº”ç›´æ¥å°†é¢æ¿ç«¯å£æš´éœ²åœ¨å…¬ç½‘ï¼Œè€Œæ˜¯å°†å…¶éšè—åœ¨ Nginx çš„ 443 ç«¯å£ä¸‹ï¼Œé€šè¿‡ç‰¹å®šè·¯å¾„è®¿é—®ã€‚</p><h3 id="1-ä¿®æ”¹é¢æ¿ç›‘å¬é…ç½®"><a href="#1-ä¿®æ”¹é¢æ¿ç›‘å¬é…ç½®" class="headerlink" title="1. ä¿®æ”¹é¢æ¿ç›‘å¬é…ç½®"></a>1. ä¿®æ”¹é¢æ¿ç›‘å¬é…ç½®</h3><p>ç™»å½•é¢æ¿ï¼ˆä½¿ç”¨å®‰è£…æ—¶æä¾›çš„ IP:ç«¯å£ï¼‰ï¼Œè¿›å…¥ <strong>é¢æ¿è®¾ç½®</strong> -> <strong>å¸¸è§„é…ç½®</strong>ï¼š</p><ul><li><strong>é¢æ¿ç›‘å¬ IP</strong>ï¼šæ”¹ä¸º <code>127.0.0.1</code> (åªå…è®¸æœ¬æœºè®¿é—®)</li><li><strong>é¢æ¿ URL æ ¹è·¯å¾„</strong>ï¼šæ”¹ä¸º <code>/xui/</code> (æˆ–è€…ä½ å–œæ¬¢çš„å…¶ä»–è·¯å¾„ï¼Œ<strong>æ³¨æ„å‰åéƒ½è¦æœ‰æ–œæ </strong>)</li><li><strong>ä¿å­˜å¹¶é‡å¯é¢æ¿</strong>ã€‚</li></ul><p><em>æ³¨æ„ï¼šé‡å¯åï¼Œä½ å°†æ— æ³•ç›´æ¥é€šè¿‡ IP:ç«¯å£ è®¿é—®é¢æ¿ï¼Œå¿…é¡»è¿›è¡Œä¸‹ä¸€æ­¥ Nginx é…ç½®ã€‚</em></p><h3 id="2-é…ç½®-Nginx-åå‘ä»£ç†"><a href="#2-é…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="2. é…ç½® Nginx åå‘ä»£ç†"></a>2. é…ç½® Nginx åå‘ä»£ç†</h3><p>ç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ï¼š<code>vi /etc/nginx/sites-available/gfw.131495.xyz</code></p><p>æˆ‘ä»¬å°†é¢æ¿ç®¡ç†å’ŒèŠ‚ç‚¹ä»£ç†éƒ½æ•´åˆåœ¨è¿™ä¸ªé…ç½®ä¸­ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æ—¥å¿—</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/gfw.access.log;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/gfw.<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1. é»˜è®¤ä¼ªè£… (Bing é•œåƒ)</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> https://www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host www.bing.com;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 2. é¢æ¿ç®¡ç†å…¥å£ (è®¿é—® https://åŸŸå/xui/ è¿›å…¥é¢æ¿)</span></span><br><span class="line">    <span class="section">location</span> /xui/ &#123;</span><br><span class="line">        <span class="comment"># æ³¨æ„ï¼šç«¯å£è¦å’Œé¢æ¿è®¾ç½®çš„ä¸€è‡´</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:18857/xui/; </span><br><span class="line">        </span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 3. èŠ‚ç‚¹æµé‡è½¬å‘ (VLESS+WS)</span></span><br><span class="line">    <span class="section">location</span> /ray &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:21001;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># WebSocket å…³é”®å¤´</span></span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡è½½ Nginxï¼š<code>nginx -t &amp;&amp; systemctl reload nginx</code><br>ç°åœ¨ï¼Œè®¿é—® <code>https://gfw.131495.xyz/xui/</code> å³å¯å®‰å…¨ç®¡ç†é¢æ¿ã€‚</p><hr><h2 id="ä¸‰ã€åˆ›å»ºèŠ‚ç‚¹ï¼šCDN-éšåŒ¿æ¨¡å¼-VLess-WS-TLS"><a href="#ä¸‰ã€åˆ›å»ºèŠ‚ç‚¹ï¼šCDN-éšåŒ¿æ¨¡å¼-VLess-WS-TLS" class="headerlink" title="ä¸‰ã€åˆ›å»ºèŠ‚ç‚¹ï¼šCDN éšåŒ¿æ¨¡å¼ (VLess+WS+TLS)"></a>ä¸‰ã€åˆ›å»ºèŠ‚ç‚¹ï¼šCDN éšåŒ¿æ¨¡å¼ (VLess+WS+TLS)</h2><p>è¿™ç§æ¨¡å¼é€‚åˆéœ€è¦éšè— IP æˆ–æ­é… Cloudflare CDN ä½¿ç”¨çš„åœºæ™¯ã€‚</p><h3 id="1-é¢æ¿ç«¯è®¾ç½®"><a href="#1-é¢æ¿ç«¯è®¾ç½®" class="headerlink" title="1. é¢æ¿ç«¯è®¾ç½®"></a>1. é¢æ¿ç«¯è®¾ç½®</h3><p>åœ¨ <strong>å…¥ç«™åˆ—è¡¨</strong> ç‚¹å‡» <strong>æ·»åŠ å…¥ç«™</strong>ï¼š</p><ul><li><strong>å¤‡æ³¨</strong>ï¼š<code>VLess-WS-TLS</code></li><li><strong>åè®®</strong>ï¼š<code>vless</code></li><li><strong>ç›‘å¬ IP</strong>ï¼š<code>127.0.0.1</code> (ä»…å…è®¸ Nginx è½¬å‘)</li><li><strong>ç«¯å£</strong>ï¼š<code>21001</code> (éœ€ä¸ Nginx é…ç½®ä¸€è‡´)</li><li><strong>ä¼ è¾“é…ç½®</strong>ï¼š<ul><li><strong>ä¼ è¾“åè®®</strong>ï¼š<code>ws</code></li><li><strong>è·¯å¾„</strong>ï¼š<code>/ray</code> (éœ€ä¸ Nginx é…ç½®ä¸€è‡´)</li><li><strong>Host</strong>ï¼šç•™ç©ºæˆ–å¡«å†™åŸŸå</li></ul></li><li><strong>TLS</strong>ï¼š<code>å…³é—­</code> (TLS ç”± Nginx å¤„ç†)</li></ul><h3 id="2-å®¢æˆ·ç«¯é…ç½®æ³¨æ„"><a href="#2-å®¢æˆ·ç«¯é…ç½®æ³¨æ„" class="headerlink" title="2. å®¢æˆ·ç«¯é…ç½®æ³¨æ„"></a>2. å®¢æˆ·ç«¯é…ç½®æ³¨æ„</h3><p>ç”±äºç»è¿‡äº† Nginx è½¬å‘ï¼Œå®¢æˆ·ç«¯æ— æ³•è‡ªåŠ¨è¯†åˆ«è¿™ç§å¤æ‚çš„æ‹“æ‰‘ï¼Œé€šå¸¸éœ€è¦<strong>æ‰‹åŠ¨ä¿®æ”¹</strong>å¯¼å…¥åçš„é…ç½®ï¼š</p><ul><li><strong>åœ°å€</strong>ï¼šä½ çš„åŸŸå</li><li><strong>ç«¯å£</strong>ï¼š<code>443</code></li><li><strong>ä¼ è¾“å±‚å®‰å…¨ (TLS)</strong>ï¼š<code>å¼€å¯</code></li></ul><hr><h2 id="å››ã€åˆ›å»ºèŠ‚ç‚¹ï¼šç›´è¿æ€§èƒ½æ¨¡å¼-VLess-Reality"><a href="#å››ã€åˆ›å»ºèŠ‚ç‚¹ï¼šç›´è¿æ€§èƒ½æ¨¡å¼-VLess-Reality" class="headerlink" title="å››ã€åˆ›å»ºèŠ‚ç‚¹ï¼šç›´è¿æ€§èƒ½æ¨¡å¼ (VLess+Reality)"></a>å››ã€åˆ›å»ºèŠ‚ç‚¹ï¼šç›´è¿æ€§èƒ½æ¨¡å¼ (VLess+Reality)</h2><p>è¿™ç§æ¨¡å¼ä¸éœ€è¦åŸŸåè¯ä¹¦ï¼Œä¸éœ€è¦ Nginxï¼Œé€Ÿåº¦æœ€å¿«ï¼Œæ˜¯ç›®å‰å¯¹æŠ— GFW çš„ä¸»æµæ–¹æ¡ˆã€‚</p><h3 id="1-é¢æ¿ç«¯è®¾ç½®-1"><a href="#1-é¢æ¿ç«¯è®¾ç½®-1" class="headerlink" title="1. é¢æ¿ç«¯è®¾ç½®"></a>1. é¢æ¿ç«¯è®¾ç½®</h3><p>åœ¨ <strong>å…¥ç«™åˆ—è¡¨</strong> ç‚¹å‡» <strong>æ·»åŠ å…¥ç«™</strong>ï¼š</p><ul><li><strong>å¤‡æ³¨</strong>ï¼š<code>VLess-Reality</code></li><li><strong>åè®®</strong>ï¼š<code>vless</code></li><li><strong>ç›‘å¬ IP</strong>ï¼š<code>0.0.0.0</code> (å¿…é¡»æš´éœ²ç»™å…¬ç½‘)</li><li><strong>ç«¯å£</strong>ï¼š<code>20443</code> (æˆ–è€…å…¶ä»–æœªè¢«å ç”¨çš„ç«¯å£ï¼Œæ³¨æ„ Nginx å·²ç»å ç”¨äº† 443)</li><li><strong>ç”¨æˆ·è®¾ç½®</strong>ï¼š<ul><li><strong>Flow</strong>ï¼š<code>xtls-rprx-vision</code> (å…³é”®ï¼å¯ç”¨æµæ§)</li></ul></li><li><strong>ä¼ è¾“é…ç½®</strong>ï¼š<ul><li><strong>ä¼ è¾“åè®®</strong>ï¼š<code>tcp</code></li></ul></li><li><strong>Reality è®¾ç½®</strong>ï¼š<ul><li><strong>Reality</strong>ï¼š<code>å¼€å¯</code></li><li><strong>uTLS</strong>ï¼š<code>chrome</code></li><li><strong>Dest (ç›®æ ‡)</strong>ï¼š<code>tesla.com:443</code></li><li><strong>SNI</strong>ï¼š<code>tesla.com</code> (éœ€ä¸ Dest å¯¹åº”)</li><li>ç‚¹å‡» <strong>Get New Cert</strong> ç”Ÿæˆå¯†é’¥å¯¹ã€‚</li></ul></li></ul><h3 id="2-è¿æ¥æµ‹è¯•"><a href="#2-è¿æ¥æµ‹è¯•" class="headerlink" title="2. è¿æ¥æµ‹è¯•"></a>2. è¿æ¥æµ‹è¯•</h3><ul><li>åœ¨äº‘æœåŠ¡å™¨é˜²ç«å¢™æ”¾è¡Œç«¯å£ï¼ˆå¦‚ <code>20443</code>ï¼‰ã€‚</li><li>å¦‚æœæœ¬åœ° Ping ä¸é€šåŸŸåï¼Œå®¢æˆ·ç«¯åœ°å€æ å¯ç›´æ¥å¡«å†™ <strong>æœåŠ¡å™¨ IP</strong>ã€‚</li><li>SNI å¿…é¡»å¡«å†™æ­£ç¡®ï¼Œè¿™æ˜¯ Reality ä¼ªè£…çš„å…³é”®ã€‚</li></ul><hr><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><div class="note success flat"><p><strong>æ€»ç»“ï¼š</strong></p><ul><li><strong>æ—¥å¸¸æµè§ˆ/å¤‡ç”¨</strong>ï¼šä½¿ç”¨ <code>VLESS+WS+TLS</code> (èµ° Nginx)ï¼Œéšè”½æ€§å¥½ï¼Œå¯å¥— CDNã€‚</li><li><strong>çœ‹è§†é¢‘/å¤§æµé‡</strong>ï¼šä½¿ç”¨ <code>VLESS+Reality</code> (èµ°ç‹¬ç«‹ç«¯å£)ï¼Œé€Ÿåº¦æœ€å¿«ï¼Œå»¶è¿Ÿæœ€ä½ã€‚</li></ul></div>]]></content>
    
    
    <summary type="html">è¿™æ˜¯ä¸€ä¸ªæ–°æ‰‹å‹å¥½çš„èŠ‚ç‚¹æ­å»ºæ•™ç¨‹ã€‚åˆ©ç”¨ 3X-UI é¢æ¿å¯è§†åŒ–ç®¡ç†èŠ‚ç‚¹ï¼Œé€šè¿‡ Nginx åä»£å®ç°é¢æ¿éšè—ï¼Œå¹¶è¯¦è§£ VLESS + WS + TLS å’Œ VLESS + Reality ä¸¤ç§ä¸»æµèŠ‚ç‚¹çš„é…ç½®æ–¹æ³•ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="ç½‘ç»œä»£ç†" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86/"/>
    
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="3X-UI" scheme="https://lijiabao9.github.io/tags/3X-UI/"/>
    
    <category term="Xray" scheme="https://lijiabao9.github.io/tags/Xray/"/>
    
  </entry>
  
  <entry>
    <title>Xray éƒ¨ç½²å®æˆ˜ï¼šVLESS åè®®ä» XTLS-Vision ç›´è¿åˆ° Nginx + WebSocket éšåŒ¿æ¨¡å¼</title>
    <link href="https://lijiabao9.github.io/posts/64f6dbdf.html"/>
    <id>https://lijiabao9.github.io/posts/64f6dbdf.html</id>
    <published>2025-12-10T15:28:53.000Z</published>
    <updated>2025-12-17T17:57:48.699Z</updated>
    
    <content type="html"><![CDATA[<p><strong>VLESS</strong> æ˜¯ Xray å†…æ ¸çš„ä¸“å±åè®®ï¼Œå®ƒæ˜¯ä¸€ç§æ— çŠ¶æ€çš„è½»é‡çº§ä¼ è¾“åè®®ã€‚<br>ä¸ VMess ä¸åŒï¼ŒVLESS ä¸å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼ˆå› ä¸ºå®ƒä¾èµ–å¤–å±‚ TLS åŠ å¯†ï¼‰ï¼Œå› æ­¤åè®®å¤´æå…¶ç²¾ç®€ï¼Œæ€§èƒ½æ›´é«˜ã€‚</p><p>æœ¬æ–‡å°†ä»‹ç»ä¸¤ç§ä¸»æµæ¶æ„ï¼š</p><ol><li><strong>æ€§èƒ½ä¹‹é€‰</strong>ï¼šVLESS + TCP + TLS + XTLS-Visionï¼ˆç›´è¿æŠ—å°é”æœ€å¼ºï¼‰ã€‚</li><li><strong>éšåŒ¿ä¹‹é€‰</strong>ï¼šVLESS + WS + Nginx + TLSï¼ˆæ”¯æŒ CDNï¼‰ã€‚</li></ol><h2 id="å®‰è£…-Xray"><a href="#å®‰è£…-Xray" class="headerlink" title="å®‰è£… Xray"></a>å®‰è£… Xray</h2><p>æ¨èä½¿ç”¨å®˜æ–¹è„šæœ¬å®‰è£…ï¼Œæ–¹ä¾¿ç®¡ç†å’Œæ›´æ–°ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å®‰è£…/æ›´æ–° Xray</span></span><br><span class="line">bash -c <span class="string">&quot;<span class="subst">$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)</span>&quot;</span> @ install</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. ç”Ÿæˆ UUID (å¤åˆ¶å¤‡ç”¨)</span></span><br><span class="line">xray uuid</span><br></pre></td></tr></table></figure><p><em>å¸¸ç”¨å‘½ä»¤ï¼š</em></p><ul><li>æ›´æ–° GeoIP åº“ï¼š<code>bash -c &quot;$(curl -L .../install-release.sh)&quot; @ install-geodata</code></li><li>å¸è½½ï¼š<code>bash -c &quot;$(curl -L .../install-release.sh)&quot; @ remove</code></li></ul><hr><h2 id="åœºæ™¯ä¸€ï¼šXTLS-Vision-ç›´è¿æ¨¡å¼-æ¨è"><a href="#åœºæ™¯ä¸€ï¼šXTLS-Vision-ç›´è¿æ¨¡å¼-æ¨è" class="headerlink" title="åœºæ™¯ä¸€ï¼šXTLS-Vision ç›´è¿æ¨¡å¼ (æ¨è)"></a>åœºæ™¯ä¸€ï¼šXTLS-Vision ç›´è¿æ¨¡å¼ (æ¨è)</h2><p>è¿™æ˜¯ç›®å‰ Xray æœ€å¼ºå¤§çš„æ¨¡å¼ï¼Œåˆ©ç”¨ <code>XTLS-Vision</code> æµæ§æŠ€æœ¯ï¼Œåœ¨æå‡é€Ÿåº¦çš„åŒæ—¶ï¼Œèƒ½ææœ‰æ•ˆåœ°å¯¹æŠ— GFW çš„ä¸»åŠ¨æ¢æµ‹å’Œé‡æ”¾æ”»å‡»ã€‚</p><h3 id="1-ä¿®æ”¹é…ç½®"><a href="#1-ä¿®æ”¹é…ç½®" class="headerlink" title="1. ä¿®æ”¹é…ç½®"></a>1. ä¿®æ”¹é…ç½®</h3><p>ç¼–è¾‘ <code>/usr/local/etc/xray/config.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;log&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;loglevel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">2443</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vless&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;clients&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„UUID&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;flow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xtls-rprx-vision&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;decryption&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;fallbacks&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;dest&quot;</span><span class="punctuation">:</span> <span class="number">80</span> </span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;streamSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tcp&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;security&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tls&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;tlsSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;certificates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                        <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;certificateFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/cert/acme_131495.xyz/cert.pem&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;keyFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/cert/acme_131495.xyz/key.pem&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">]</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;freedom&quot;</span> <span class="punctuation">&#125;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p><strong>å…³äº Fallback (å›è½)</strong>ï¼š<br>é…ç½®ä¸­çš„ <code>dest: 80</code> æ„å‘³ç€ï¼Œå¦‚æœæœ‰äººè®¿é—®ä½ çš„ 2443 ç«¯å£ä½†ä¸æ˜¯ VLESS åè®®ï¼ˆæ¯”å¦‚æµè§ˆå™¨ç›´æ¥è®¿é—®ï¼‰ï¼ŒXray ä¼šæŠŠæµé‡è½¬å‘åˆ°æœ¬æœºçš„ 80 ç«¯å£ã€‚<br>å»ºè®®æœ¬æœºå®‰è£…ä¸€ä¸ª Nginx ç›‘å¬ 80 ç«¯å£å¹¶å±•ç¤ºä¸€ä¸ªé™æ€ç½‘é¡µï¼Œä»¥é˜²æ¢æµ‹ã€‚</p></div><h3 id="2-è§£å†³æƒé™é—®é¢˜-å…³é”®"><a href="#2-è§£å†³æƒé™é—®é¢˜-å…³é”®" class="headerlink" title="2. è§£å†³æƒé™é—®é¢˜ (å…³é”®)"></a>2. è§£å†³æƒé™é—®é¢˜ (å…³é”®)</h3><p>Xray é»˜è®¤ä½¿ç”¨ <code>nobody</code> ç”¨æˆ·ï¼Œæ— æ³•è¯»å–ä½äº <code>/root/</code> æˆ– <code>/cert/</code> ç­‰ç›®å½•ä¸‹çš„è¯ä¹¦æ–‡ä»¶ï¼Œå¯¼è‡´å¯åŠ¨å¤±è´¥ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl edit xray</span><br></pre></td></tr></table></figure><p>åœ¨ç¼–è¾‘å™¨ä¸­å¡«å…¥ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"><span class="attr">Group</span>=root</span><br></pre></td></tr></table></figure><p><code>Ctrl + O</code>, <code>Enter</code>, <code>Ctrl + X</code> ä¿å­˜é€€å‡ºåï¼Œé‡å¯æœåŠ¡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart xray</span><br><span class="line">systemctl status xray</span><br></pre></td></tr></table></figure><hr><h2 id="åœºæ™¯äºŒï¼šNginx-åä»£-WebSocket-æ¨¡å¼"><a href="#åœºæ™¯äºŒï¼šNginx-åä»£-WebSocket-æ¨¡å¼" class="headerlink" title="åœºæ™¯äºŒï¼šNginx åä»£ + WebSocket æ¨¡å¼"></a>åœºæ™¯äºŒï¼šNginx åä»£ + WebSocket æ¨¡å¼</h2><p>å¦‚æœä½ éœ€è¦ä½¿ç”¨ Cloudflare CDNï¼Œæˆ–è€…å¸Œæœ›å°†ä»£ç†æœåŠ¡éšè—åœ¨æ­£å¸¸çš„ Nginx ç½‘ç«™åé¢ï¼Œè¯·é€‰æ‹©æ­¤æ¨¡å¼ã€‚</p><h3 id="1-ä¿®æ”¹-Xray-é…ç½®"><a href="#1-ä¿®æ”¹-Xray-é…ç½®" class="headerlink" title="1. ä¿®æ”¹ Xray é…ç½®"></a>1. ä¿®æ”¹ Xray é…ç½®</h3><p><strong>æ³¨æ„</strong>ï¼š</p><ol><li><strong>ç›‘å¬æœ¬åœ°</strong>ï¼š<code>listen</code> æ”¹ä¸º <code>127.0.0.1</code>ã€‚</li><li><strong>ç§»é™¤æµæ§</strong>ï¼š<code>flow</code> å¿…é¡»ç•™ç©ºï¼ˆWS ä¸æ”¯æŒ Visionï¼‰ã€‚</li><li><strong>ç§»é™¤ TLS</strong>ï¼šTLS äº¤ç»™ Nginx å¤„ç†ï¼ŒXray å†…éƒ¨å¤„ç†æ˜æ–‡ã€‚</li><li><strong>WebSocket é…ç½®</strong>ï¼š<code>network</code> æ”¹ä¸º <code>ws</code>ï¼Œ<code>path</code> å¡«å†™ <code>/ray</code>ã€‚</li></ol><p>ç¼–è¾‘ <code>/usr/local/etc/xray/config.json</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;log&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;loglevel&quot;</span><span class="punctuation">:</span> <span class="string">&quot;warning&quot;</span> <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;listen&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">2443</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vless&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;clients&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„UUID&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;flow&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span> </span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;decryption&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;streamSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ws&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;wsSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/ray&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;freedom&quot;</span> <span class="punctuation">&#125;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><em>é‡å¯ Xrayï¼š<code>systemctl restart xray</code></em></p><h3 id="2-é…ç½®-Nginx-åå‘ä»£ç†"><a href="#2-é…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="2. é…ç½® Nginx åå‘ä»£ç†"></a>2. é…ç½® Nginx åå‘ä»£ç†</h3><p>ç¼–è¾‘ Nginx é…ç½®æ–‡ä»¶ <code>vi /etc/nginx/sites-available/gfw.131495.xyz</code>ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl; </span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span></span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/gfw.access.log proxy_json;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/gfw.<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é»˜è®¤ä»£ç†ï¼ˆé˜²æ­¢æ¢æµ‹ï¼‰</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> https://www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    &#125;   </span><br><span class="line">    </span><br><span class="line">    <span class="section">location</span> /ray &#123;</span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:2443;</span><br><span class="line"></span><br><span class="line">        <span class="comment"># Websocket ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åº”ç”¨é…ç½®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/gfw.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line">nginx -t &amp;&amp; systemctl reload nginx</span><br></pre></td></tr></table></figure><hr><h2 id="å®¢æˆ·ç«¯é…ç½®å¯¹æ¯”"><a href="#å®¢æˆ·ç«¯é…ç½®å¯¹æ¯”" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®å¯¹æ¯”"></a>å®¢æˆ·ç«¯é…ç½®å¯¹æ¯”</h2><p>æ ¹æ®ä½ é€‰æ‹©çš„åœºæ™¯ï¼Œå®¢æˆ·ç«¯ï¼ˆ<strong>v2rayN</strong> / Shadowrocket / Nekorayï¼‰çš„é…ç½®æœ‰æ‰€ä¸åŒï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">é…ç½®é¡¹</th><th style="text-align:left">åœºæ™¯ä¸€ (Vision)</th><th style="text-align:left">åœºæ™¯äºŒ (Nginx+WS)</th></tr></thead><tbody><tr><td style="text-align:left"><strong>åœ°å€ (Address)</strong></td><td style="text-align:left">ä½ çš„åŸŸå</td><td style="text-align:left">ä½ çš„åŸŸå</td></tr><tr><td style="text-align:left"><strong>ç«¯å£ (Port)</strong></td><td style="text-align:left"><code>2443</code> (Xray ç«¯å£)</td><td style="text-align:left"><code>443</code> (Nginx ç«¯å£)</td></tr><tr><td style="text-align:left"><strong>ç”¨æˆ· ID (UUID)</strong></td><td style="text-align:left">ä½ çš„ UUID</td><td style="text-align:left">ä½ çš„ UUID</td></tr><tr><td style="text-align:left"><strong>æµæ§ (Flow)</strong></td><td style="text-align:left"><code>xtls-rprx-vision</code></td><td style="text-align:left"><strong>ç©º</strong></td></tr><tr><td style="text-align:left"><strong>ä¼ è¾“åè®® (Network)</strong></td><td style="text-align:left"><code>tcp</code></td><td style="text-align:left"><code>ws</code></td></tr><tr><td style="text-align:left"><strong>ä¼ªè£…è·¯å¾„ (Path)</strong></td><td style="text-align:left">ç©º</td><td style="text-align:left"><code>/ray</code></td></tr><tr><td style="text-align:left"><strong>TLS</strong></td><td style="text-align:left">å¼€å¯ (<code>tls</code>)</td><td style="text-align:left">å¼€å¯ (<code>tls</code>)</td></tr><tr><td style="text-align:left"><strong>uTLS (æŒ‡çº¹)</strong></td><td style="text-align:left"><code>chrome</code> (æ¨è)</td><td style="text-align:left"><code>chrome</code></td></tr></tbody></table></div><div class="note success flat"><p><strong>æ€»ç»“ï¼š</strong></p><ul><li>è¿½æ±‚æè‡´é€Ÿåº¦å’Œç›´è¿ç¨³å®šæ€§ -> é€‰ <strong>åœºæ™¯ä¸€</strong>ã€‚</li><li>éœ€è¦éšè— IPã€ä½¿ç”¨ CDN æˆ–é…åˆå»ºç«™ -> é€‰ <strong>åœºæ™¯äºŒ</strong>ã€‚</li></ul></div>]]></content>
    
    
    <summary type="html">è¯¦è§£ Xray çš„ VLESS åè®®éƒ¨ç½²ã€‚æ¶µç›–ç›®å‰æœ€å¼ºçš„ XTLS-Vision ç›´è¿æµæ§æ¨¡å¼ï¼Œä»¥åŠé…åˆ Nginx åå‘ä»£ç†å®ç° CDN å…¼å®¹çš„ WebSocket æ¨¡å¼ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="ç½‘ç»œä»£ç†" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86/"/>
    
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="Xray" scheme="https://lijiabao9.github.io/tags/Xray/"/>
    
    <category term="VLESS" scheme="https://lijiabao9.github.io/tags/VLESS/"/>
    
    <category term="XTLS" scheme="https://lijiabao9.github.io/tags/XTLS/"/>
    
  </entry>
  
  <entry>
    <title>V2Ray éƒ¨ç½²å®æˆ˜ï¼šä» VMess è£¸å¥”åˆ° Nginx+WebSocket+TLS å®Œç¾ä¼ªè£…</title>
    <link href="https://lijiabao9.github.io/posts/630f476f.html"/>
    <id>https://lijiabao9.github.io/posts/630f476f.html</id>
    <published>2025-12-09T17:19:57.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><strong>VMess</strong> æ˜¯ V2Ray åŸåˆ›çš„åŠ å¯†ä¼ è¾“åè®®ã€‚è™½ç„¶ç°åœ¨æœ‰äº†æ›´å…ˆè¿›çš„ VLESSï¼Œä½† VMess å‡­å€Ÿå…¶æˆç†Ÿçš„ç”Ÿæ€ï¼Œä¾ç„¶æ˜¯ç›®å‰æœ€å¹¿æ³›ä½¿ç”¨çš„åè®®ä¹‹ä¸€ã€‚</p><p>æœ¬æ–‡å°†å¸¦ä½ ä¸€æ­¥æ­¥æ­å»ºæœ€ç¨³å¥çš„ <strong>VMess + WebSocket + TLS + Nginx</strong> æ¶æ„ã€‚</p><h2 id="ä¸€é”®å®‰è£…-V2Fly-å®˜æ–¹è„šæœ¬"><a href="#ä¸€é”®å®‰è£…-V2Fly-å®˜æ–¹è„šæœ¬" class="headerlink" title="ä¸€é”®å®‰è£… (V2Fly å®˜æ–¹è„šæœ¬)"></a>ä¸€é”®å®‰è£… (V2Fly å®˜æ–¹è„šæœ¬)</h2><p>ä½¿ç”¨å®˜æ–¹æä¾›çš„ FHS è§„èŒƒè„šæœ¬è¿›è¡Œå®‰è£…ï¼Œæ–‡ä»¶è·¯å¾„æ ‡å‡†ï¼Œä¾¿äºç®¡ç†ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å®‰è£…/æ›´æ–° V2Ray</span></span><br><span class="line">bash &lt;(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. è®¾ç½®å¼€æœºè‡ªå¯ï¼Œå¹¶å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl <span class="built_in">enable</span> v2ray</span><br><span class="line">systemctl start v2ray</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. ç”Ÿæˆä¸€ä¸ªç”¨æˆ· UUID (å¤åˆ¶å¤‡ç”¨)</span></span><br><span class="line">uuidgen</span><br></pre></td></tr></table></figure><p><em>å¸¸ç”¨å‘½ä»¤å¤‡å¿˜ï¼š</em></p><ul><li>ä»…æ›´æ–° .dat è·¯ç”±åº“ï¼š<code>bash &lt;(curl -L .../install-dat-release.sh)</code></li><li>å¸è½½ï¼š<code>bash &lt;(curl -L .../install-release.sh) --remove</code></li></ul><hr><h2 id="ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½²-TCPç›´è¿"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½²-TCPç›´è¿" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½² (TCPç›´è¿)"></a>ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½² (TCPç›´è¿)</h2><p>æ­¤æ¨¡å¼ä»…ç”¨äºæµ‹è¯•è¿é€šæ€§ï¼Œ<strong>ææ˜“è¢«å¢™</strong>ï¼Œä¸¥ç¦é•¿æœŸä½¿ç”¨ã€‚</p><h3 id="1-ä¿®æ”¹-V2Ray-é…ç½®"><a href="#1-ä¿®æ”¹-V2Ray-é…ç½®" class="headerlink" title="1. ä¿®æ”¹ V2Ray é…ç½®"></a>1. ä¿®æ”¹ V2Ray é…ç½®</h3><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š<code>vi /usr/local/etc/v2ray/config.json</code></p><figure class="highlight json"><figcaption><span>config.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">2443</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vmess&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;clients&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„UUID&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;alterId&quot;</span><span class="punctuation">:</span> <span class="number">0</span> <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;freedom&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p><strong>å…³äº alterId</strong>ï¼š<br>æ–°ç‰ˆ V2Ray é»˜è®¤å¯ç”¨äº† <strong>AEAD</strong> aead éªŒè¯æœºåˆ¶ï¼Œ<code>alterId</code> åªéœ€è®¾ç½®ä¸º <code>0</code> å³å¯ã€‚è¿™å¤§å¤§é™ä½äº†æœåŠ¡å™¨è´Ÿè½½å¹¶æé«˜äº†å®‰å…¨æ€§ã€‚</p></div><p>å¯åŠ¨æœåŠ¡ï¼š<code>systemctl restart v2ray</code></p><h3 id="2-å®¢æˆ·ç«¯é…ç½®"><a href="#2-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="2. å®¢æˆ·ç«¯é…ç½®"></a>2. å®¢æˆ·ç«¯é…ç½®</h3><p>åœ¨ v2rayN / Shadowrocket / Clash ç­‰å®¢æˆ·ç«¯ä¸­å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li><strong>åœ°å€ (Address)</strong>: ä½ çš„åŸŸåæˆ–è€… IP åœ°å€</li><li><strong>ç«¯å£ (Port)</strong>: <code>port</code></li><li><strong>ç”¨æˆ· ID (UUID)</strong>: <code>ä½ çš„UUID</code></li><li><strong>é¢å¤– ID (AlterId)</strong>: <code>0</code></li><li><strong>åŠ å¯†æ–¹å¼ (Security)</strong>: <code>auto</code></li><li><strong>ä¼ è¾“åè®® (Network)</strong>: <code>tcp</code></li></ul><hr><h2 id="ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ä¼ªè£…-VMess-WS-TLS"><a href="#ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ä¼ªè£…-VMess-WS-TLS" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ä¼ªè£… (VMess + WS + TLS)"></a>ç¬¬äºŒé˜¶æ®µï¼šè¿›é˜¶ä¼ªè£… (VMess + WS + TLS)</h2><p>ä¸ºäº†æŠµæŠ—æµé‡è¯†åˆ«ï¼Œæˆ‘ä»¬å¼•å…¥ <strong>WebSocket (WS)</strong> æ¥æ¨¡æ‹Ÿç½‘é¡µæµè§ˆæµé‡ï¼Œå¹¶å¥—ä¸Š <strong>TLS</strong> åŠ å¯†ã€‚</p><h3 id="1-å‡†å¤‡è¯ä¹¦"><a href="#1-å‡†å¤‡è¯ä¹¦" class="headerlink" title="1. å‡†å¤‡è¯ä¹¦"></a>1. å‡†å¤‡è¯ä¹¦</h3><p>è¯·ç¡®ä¿ä½ å·²ç»ç”³è¯·äº†è¯ä¹¦ï¼ˆå‚è€ƒ <a href="/posts/e94f4538.html">ä»é›¶å¼€å§‹ï¼šåŸŸåè´­ä¹°ã€Cloudflare æ‰˜ç®¡ä¸ Nginx è‡ªåŠ¨åŒ– HTTPS é…ç½®å…¨æŒ‡å—</a>ï¼‰ã€‚<br>å‡è®¾è¯ä¹¦è·¯å¾„ä¸ºï¼š<code>/cert/acme_131495.xyz/cert.pem</code> å’Œ <code>/cert/acme_131495.xyz/key.pem</code>ã€‚</p><h3 id="2-ä¿®æ”¹-V2Ray-é…ç½®"><a href="#2-ä¿®æ”¹-V2Ray-é…ç½®" class="headerlink" title="2. ä¿®æ”¹ V2Ray é…ç½®"></a>2. ä¿®æ”¹ V2Ray é…ç½®</h3><p>ä¿®æ”¹ <code>config.json</code>ï¼Œåœ¨ <code>inbounds</code> ä¸­å¢åŠ  <code>streamSettings</code>ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">2443</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vmess&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;clients&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„UUID&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;alterId&quot;</span><span class="punctuation">:</span> <span class="number">0</span> <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;streamSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ws&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;security&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tls&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;tlsSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;certificates&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">              <span class="attr">&quot;certificateFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/cert/acme_131495.xyz/cert.pem&quot;</span><span class="punctuation">,</span></span><br><span class="line">              <span class="attr">&quot;keyFile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/cert/acme_131495.xyz/key.pem&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">          <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;freedom&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p><strong>æƒé™é™·é˜± (Permission Denied)</strong>ï¼š<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒV2Ray ä»¥ <code>nobody</code> ç”¨æˆ·è¿è¡Œï¼Œæ— æ³•è¯»å– <code>/root/</code> æˆ– <code>/cert/</code> ç›®å½•ä¸‹çš„è¯ä¹¦æ–‡ä»¶ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¿®æ”¹æœåŠ¡è¿è¡Œç”¨æˆ·ä¸º rootã€‚<br>æ‰§è¡Œ <code>systemctl edit v2ray</code>ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"><span class="attr">Group</span>=root</span><br></pre></td></tr></table></figure><p><code>Ctrl + O</code>ï¼Œ<code>Enter</code>ï¼Œ<code>Ctrl + X</code> ä¿å­˜é€€å‡ºåï¼Œæ‰§è¡Œ <code>systemctl restart v2ray</code>ã€‚</p></div><h3 id="3-å®¢æˆ·ç«¯é…ç½®"><a href="#3-å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="3. å®¢æˆ·ç«¯é…ç½®"></a>3. å®¢æˆ·ç«¯é…ç½®</h3><p>åœ¨ v2rayN / Shadowrocket / Clash ç­‰å®¢æˆ·ç«¯ä¸­å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li><strong>åœ°å€ (Address)</strong>: ä½ çš„åŸŸåæˆ–è€… IP åœ°å€</li><li><strong>ç«¯å£ (Port)</strong>: <code>port</code></li><li><strong>ç”¨æˆ· ID (UUID)</strong>: <code>ä½ çš„UUID</code></li><li><strong>é¢å¤– ID (AlterId)</strong>: <code>0</code></li><li><strong>åŠ å¯†æ–¹å¼ (Security)</strong>: <code>zero</code>ï¼ˆæ³¨æ„ï¼šå¯ç”¨äº† tls åŠ å¯†ï¼Œæ— éœ€å†åŠ å¯†ï¼‰</li><li><strong>ä¼ è¾“åè®® (Network)</strong>: <code>ws</code>ï¼ˆæ³¨æ„ï¼Œæ”¹ä¸ºäº† wsï¼‰</li><li><strong>ä¼ è¾“å±‚å®‰å…¨ (TLS)</strong>: <code>tls</code> (å¼€å¯)</li><li><strong>SNI</strong>: å¦‚æœ <em>åœ°å€</em> å¡«å†™çš„æ˜¯åŸŸåï¼Œåˆ™æ­¤å¤„ä¸ç”¨å¡«å†™</li></ul><hr><h2 id="ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ-Nginx-åä»£"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ-Nginx-åä»£" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ (Nginx åä»£)"></a>ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ (Nginx åä»£)</h2><p>è¿™æ˜¯ç”Ÿäº§ç¯å¢ƒçš„æœ€ä½³å®è·µã€‚</p><ul><li><strong>åˆ†æµ</strong>ï¼šNginx å¤„ç† 443 ç«¯å£æµé‡ï¼Œæ­£å¸¸çš„è®¿é—®è¿”å›ä¼ªè£…ç½‘é¡µï¼Œ<code>/vmess</code> è·¯å¾„çš„æµé‡è½¬å‘ç»™ V2Rayã€‚</li><li><strong>è§£è€¦</strong>ï¼šTLS åŠ å¯†è§£å¯†äº¤ç»™ä¸“ä¸šçš„ Nginxï¼ŒV2Ray åªè´Ÿè´£å¤„ç†æ˜æ–‡ WS æµé‡ã€‚</li></ul><h3 id="1-ä¿®æ”¹-V2Ray-é…ç½®-1"><a href="#1-ä¿®æ”¹-V2Ray-é…ç½®-1" class="headerlink" title="1. ä¿®æ”¹ V2Ray é…ç½®"></a>1. ä¿®æ”¹ V2Ray é…ç½®</h3><p><strong>æ³¨æ„</strong>ï¼š</p><ol><li>å»æ‰ TLS é…ç½®ï¼ˆäº¤ç»™ Nginx äº†ï¼‰ã€‚</li><li>ç›‘å¬ <code>127.0.0.1</code>ï¼ˆä¸æš´éœ²åœ¨å…¬ç½‘ï¼Œæ›´å®‰å…¨ï¼‰ã€‚</li><li>å¢åŠ  <code>path</code> è·¯å¾„éªŒè¯ã€‚</li></ol><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;inbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;listen&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span> </span><br><span class="line">      <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">2443</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vmess&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;clients&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="punctuation">&#123;</span> <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„UUID&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;alterId&quot;</span><span class="punctuation">:</span> <span class="number">0</span> <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;streamSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;network&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ws&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;wsSettings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/ray&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outbounds&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;protocol&quot;</span><span class="punctuation">:</span> <span class="string">&quot;freedom&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;settings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span> <span class="punctuation">&#125;</span> <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®-Nginx-åå‘ä»£ç†"><a href="#2-é…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="2. é…ç½® Nginx åå‘ä»£ç†"></a>2. é…ç½® Nginx åå‘ä»£ç†</h3><p>åˆ›å»º Nginx é…ç½®æ–‡ä»¶ï¼š<code>vi /etc/nginx/sites-available/gfw.131495.xyz</code></p><figure class="highlight nginx"><figcaption><span>/etc/nginx/sites-available/gfw.131495.xyz</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span></span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/gfw.access.log proxy_json;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/gfw.<span class="literal">error</span>.log;</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line">       </span><br><span class="line">    <span class="comment"># é»˜è®¤ä»£ç†ï¼ˆé˜²æ­¢æ¢æµ‹ï¼‰</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> https://www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†è®¾ç½®</span></span><br><span class="line">    <span class="section">location</span> /ray &#123;</span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:2443;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Websocket ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‡å¯ Nginx å’Œ V2Rayï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿˜åŸä¹‹å‰çš„ systemctl edit ä¿®æ”¹ï¼Œæ¨èç”¨æ™®é€šç”¨æˆ·è¿è¡Œ</span></span><br><span class="line">systemctl revert v2ray</span><br><span class="line"></span><br><span class="line">systemctl restart v2ray</span><br><span class="line">systemctl reload nginx</span><br></pre></td></tr></table></figure><h3 id="3-å®¢æˆ·ç«¯é…ç½®-1"><a href="#3-å®¢æˆ·ç«¯é…ç½®-1" class="headerlink" title="3. å®¢æˆ·ç«¯é…ç½®"></a>3. å®¢æˆ·ç«¯é…ç½®</h3><p>åœ¨ v2rayN / Shadowrocket / Clash ç­‰å®¢æˆ·ç«¯ä¸­å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li><strong>åœ°å€ (Address)</strong>: ä½ çš„åŸŸåæˆ–è€… IP åœ°å€</li><li><strong>ç«¯å£ (Port)</strong>: <code>443</code>ï¼ˆæ³¨æ„ï¼šæ”¹æˆäº† 443ï¼‰</li><li><strong>ç”¨æˆ· ID (UUID)</strong>: <code>ä½ çš„UUID</code></li><li><strong>é¢å¤– ID (AlterId)</strong>: <code>0</code></li><li><strong>åŠ å¯†æ–¹å¼ (Security)</strong>: <code>zero</code></li><li><strong>ä¼ è¾“åè®® (Network)</strong>: <code>ws</code></li><li><strong>ä¼ªè£…è·¯å¾„ (Path)</strong>: <code>/ray</code>ï¼ˆæ³¨æ„ï¼šå¢åŠ è·¯å¾„ï¼‰</li><li><strong>ä¼ è¾“å±‚å®‰å…¨ (TLS)</strong>: <code>tls</code></li><li><strong>SNI</strong>: å¦‚æœ <em>åœ°å€</em> å¡«å†™çš„æ˜¯åŸŸåï¼Œåˆ™æ­¤å¤„ä¸ç”¨å¡«å†™</li></ul><hr><p>è‡³æ­¤ï¼Œä½ çš„æµé‡çœ‹èµ·æ¥å°±åƒæ˜¯åœ¨è®¿é—®ä¸€ä¸ªæ™®é€šçš„ HTTPS ç½‘ç«™ï¼Œéšè”½æ€§æé«˜ã€‚</p>]]></content>
    
    
    <summary type="html">è¯¦è§£ V2Ray çš„ VMess åè®®éƒ¨ç½²æµç¨‹ã€‚ä»æœ€åŸºç¡€çš„ TCP ç›´è¿ï¼Œè¿›é˜¶åˆ° WebSocket ä¼ è¾“ï¼Œæœ€ç»ˆå®ç°åŸºäº Nginx åå‘ä»£ç†çš„ TLS åŠ å¯†ä¸ Web ä¼ªè£…ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="ç½‘ç»œä»£ç†" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86/"/>
    
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="V2Ray" scheme="https://lijiabao9.github.io/tags/V2Ray/"/>
    
    <category term="VMess" scheme="https://lijiabao9.github.io/tags/VMess/"/>
    
    <category term="WebSocket" scheme="https://lijiabao9.github.io/tags/WebSocket/"/>
    
  </entry>
  
  <entry>
    <title>Trojan-Go è½»é‡éƒ¨ç½²æŒ‡å—ï¼šé«˜æ•ˆéšåŒ¿çš„ TLS ä»£ç†æœåŠ¡</title>
    <link href="https://lijiabao9.github.io/posts/1e76d4d4.html"/>
    <id>https://lijiabao9.github.io/posts/1e76d4d4.html</id>
    <published>2025-12-09T15:33:25.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://github.com/p4gefau1t/trojan-go">Trojan-Go</a> æ˜¯ Trojan åè®®çš„ä¸€ä¸ª Go è¯­è¨€å®ç°ç‰ˆæœ¬ï¼Œæ€§èƒ½å¼ºåŠ²ä¸”æ”¯æŒå¤šè·¯å¤ç”¨ã€‚<br>å®ƒçš„æ ¸å¿ƒé€»è¾‘æ˜¯ï¼š<strong>çœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ­£å¸¸çš„ HTTPS ç½‘ç«™</strong>ã€‚</p><ul><li>å¦‚æœæ˜¯æ­£å¸¸çš„ HTTPS è¯·æ±‚ï¼ˆæ— å¯†ç ï¼‰ï¼Œå®ƒä¼šè½¬å‘åˆ°ä¼ªè£…ç½‘ç«™ï¼ˆå¦‚ Bingï¼‰ã€‚</li><li>å¦‚æœæ˜¯åˆæ³•çš„ Trojan è¯·æ±‚ï¼ˆæœ‰å¯†ç ï¼‰ï¼Œå®ƒä¼šè¿›è¡Œä»£ç†è½¬å‘ã€‚</li></ul><hr><h2 id="ä¸€ã€ä¸‹è½½ä¸å®‰è£…"><a href="#ä¸€ã€ä¸‹è½½ä¸å®‰è£…" class="headerlink" title="ä¸€ã€ä¸‹è½½ä¸å®‰è£…"></a>ä¸€ã€ä¸‹è½½ä¸å®‰è£…</h2><h3 id="1-ç¡®è®¤-CPU-æ¶æ„"><a href="#1-ç¡®è®¤-CPU-æ¶æ„" class="headerlink" title="1. ç¡®è®¤ CPU æ¶æ„"></a>1. ç¡®è®¤ CPU æ¶æ„</h3><p>åœ¨ä¸‹è½½å‰ï¼Œè¯·å…ˆç¡®è®¤æœåŠ¡å™¨çš„æ¶æ„ï¼Œå¦åˆ™ä¼šæŠ¥é”™ <code>Exec format error</code>ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span> -m</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœè¾“å‡º <code>x86_64</code>ï¼šè¯·ä¸‹è½½ <code>linux-amd64.zip</code></li><li>å¦‚æœè¾“å‡º <code>aarch64</code>ï¼šè¯·ä¸‹è½½ <code>linux-armv8.zip</code> (Oracle ARM æœºå™¨é€‰è¿™ä¸ª)</li></ul><h3 id="2-ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶"><a href="#2-ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶" class="headerlink" title="2. ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶"></a>2. ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶</h3><p>ä»¥ä¸‹ä»¥ <strong>ARM æ¶æ„</strong> ä¸ºä¾‹ï¼ˆGitHub æœ€æ–°ç‰ˆï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /app/trojan-go</span><br><span class="line"><span class="built_in">cd</span> /app/trojan-go/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½ (è¯·æ ¹æ®ä¸Šä¸€æ­¥ç»“æœæ›¿æ¢é“¾æ¥ä¸­çš„ linux-armv8 æˆ– linux-amd64)</span></span><br><span class="line">wget https://github.com/p4gefau1t/trojan-go/releases/download/v0.10.6/trojan-go-linux-armv8.zip</span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">apt install unzip -y</span><br><span class="line">unzip trojan-go-linux-armv8.zip</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…ç†å‹ç¼©åŒ…</span></span><br><span class="line"><span class="built_in">rm</span> -f trojan-go-linux-armv8.zip</span><br></pre></td></tr></table></figure><hr><h2 id="äºŒã€é…ç½®æœåŠ¡"><a href="#äºŒã€é…ç½®æœåŠ¡" class="headerlink" title="äºŒã€é…ç½®æœåŠ¡"></a>äºŒã€é…ç½®æœåŠ¡</h2><h3 id="1-ç”Ÿæˆå¼ºå¯†ç "><a href="#1-ç”Ÿæˆå¼ºå¯†ç " class="headerlink" title="1. ç”Ÿæˆå¼ºå¯†ç "></a>1. ç”Ÿæˆå¼ºå¯†ç </h3><p>Trojan åè®®ä¾èµ–å¯†ç è¿›è¡Œè®¤è¯ï¼Œå»ºè®®ç”Ÿæˆä¸€ä¸ªå¤æ‚çš„ Base64 å­—ç¬¦ä¸²ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl rand -<span class="built_in">base64</span> 32 | <span class="built_in">tr</span> <span class="string">&#x27;+/&#x27;</span> <span class="string">&#x27;-_&#x27;</span> | <span class="built_in">tr</span> -d <span class="string">&#x27;=&#x27;</span></span><br></pre></td></tr></table></figure><p><em>å¤åˆ¶è¾“å‡ºçš„å­—ç¬¦ä¸²å¤‡ç”¨ã€‚</em></p><h3 id="2-ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#2-ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="2. ç¼–å†™é…ç½®æ–‡ä»¶"></a>2. ç¼–å†™é…ç½®æ–‡ä»¶</h3><blockquote><p>åŸŸåå’Œè¯ä¹¦çš„è·å–ï¼Œå¯å‚è€ƒæˆ‘çš„æ–‡ç«  <a href="/posts/e94f4538.html">ä»é›¶å¼€å§‹ï¼šåŸŸåè´­ä¹°ã€Cloudflare æ‰˜ç®¡ä¸ Nginx è‡ªåŠ¨åŒ– HTTPS é…ç½®å…¨æŒ‡å—</a></p></blockquote><p>åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š<code>vi /app/trojan-go/config.json</code></p><figure class="highlight json"><figcaption><span>config.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;run_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_addr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_port&quot;</span><span class="punctuation">:</span> <span class="number">2443</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote_addr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote_port&quot;</span><span class="punctuation">:</span> <span class="number">80</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="string">&quot;æ­¤å¤„å¡«å…¥ä¸Šé¢ç”Ÿæˆçš„å¯†ç &quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ssl&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;cert&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/cert/acme_131495.xyz/cert.pem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/cert/acme_131495.xyz/key.pem&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;sni&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gfw.131495.xyz&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;fallback_port&quot;</span><span class="punctuation">:</span> <span class="number">443</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>é…ç½®è¯¦è§£ï¼š</strong></p><ul><li><code>local_port</code>: <strong>2443</strong>ã€‚Trojan-Go ç›‘å¬çš„ç«¯å£ï¼Œå®¢æˆ·ç«¯è¿æ¥è¿™ä¸ªç«¯å£ã€‚</li><li><code>remote_addr</code>: <strong>å›è½åœ°å€</strong>ã€‚å½“æœ‰äººæ¢æµ‹ä½ çš„ç«¯å£æˆ–ç›´æ¥æµè§ˆå™¨è®¿é—®æ—¶ï¼ŒTrojan ä¼šå°†æµé‡è½¬å‘åˆ°æ­¤ï¼Œä¼ªè£…æˆä½ åœ¨åå‘ä»£ç†ã€‚</li><li><code>ssl</code>: å¿…é¡»æŒ‡å®šæœ‰æ•ˆçš„è¯ä¹¦è·¯å¾„ã€‚</li><li><code>sni</code>: ä½ çš„åŸŸåã€‚</li></ul><hr><h2 id="ä¸‰ã€Systemd-æœåŠ¡åŒ–ç®¡ç†"><a href="#ä¸‰ã€Systemd-æœåŠ¡åŒ–ç®¡ç†" class="headerlink" title="ä¸‰ã€Systemd æœåŠ¡åŒ–ç®¡ç†"></a>ä¸‰ã€Systemd æœåŠ¡åŒ–ç®¡ç†</h2><p>æ‰‹åŠ¨è¿è¡Œ <code>./trojan-go</code> ä¼šå ç”¨ç»ˆç«¯ï¼Œä¸”æ— æ³•å¼€æœºè‡ªå¯ã€‚æˆ‘ä»¬éœ€è¦å°†å…¶æ³¨å†Œä¸ºç³»ç»ŸæœåŠ¡ã€‚</p><h3 id="1-åˆ›å»º-Service-æ–‡ä»¶"><a href="#1-åˆ›å»º-Service-æ–‡ä»¶" class="headerlink" title="1. åˆ›å»º Service æ–‡ä»¶"></a>1. åˆ›å»º Service æ–‡ä»¶</h3><p>æ–°å»ºæ–‡ä»¶ï¼š<code>vi /etc/systemd/system/trojan-go.service</code></p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Trojan-Go - An unidentifiable mechanism that helps you bypass GFW</span><br><span class="line"><span class="attr">Documentation</span>=https://p4gefau1t.github.io/trojan-go</span><br><span class="line"><span class="attr">After</span>=network.target nss-lookup.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"><span class="comment"># å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="attr">ExecStart</span>=/app/trojan-go/trojan-go -config /app/trojan-go/config.json</span><br><span class="line"><span class="attr">Restart</span>=<span class="literal">on</span>-failure</span><br><span class="line"><span class="attr">RestartSec</span>=<span class="number">10</span>s</span><br><span class="line"><span class="attr">LimitNOFILE</span>=infinity</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br></pre></td></tr></table></figure><h3 id="2-å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯"><a href="#2-å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯" class="headerlink" title="2. å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯"></a>2. å¯åŠ¨å¹¶è®¾ç½®å¼€æœºè‡ªå¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é‡è½½ç³»ç»ŸæœåŠ¡é…ç½®</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨æœåŠ¡</span></span><br><span class="line">systemctl start trojan-go</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¼€æœºè‡ªå¯</span></span><br><span class="line">systemctl <span class="built_in">enable</span> trojan-go</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹è¿è¡ŒçŠ¶æ€</span></span><br><span class="line">systemctl status trojan-go</span><br></pre></td></tr></table></figure><p>å¦‚æœçŠ¶æ€æ˜¾ç¤º <span class='p green'>Active: active (running)</span>ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸã€‚</p><hr><h2 id="å››ã€å®¢æˆ·ç«¯è¿æ¥"><a href="#å››ã€å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="å››ã€å®¢æˆ·ç«¯è¿æ¥"></a>å››ã€å®¢æˆ·ç«¯è¿æ¥</h2><p>é…ç½®å®¢æˆ·ç«¯ï¼ˆ<strong>v2rayN</strong>, Clash ç­‰ï¼‰æ—¶ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li><strong>ç±»å‹ (Type)</strong>: Trojan</li><li><strong>åœ°å€ (Address)</strong>: <code>gfw.131495.xyz</code> (ä½ çš„åŸŸå)</li><li><strong>ç«¯å£ (Port)</strong>: <code>2443</code> (é…ç½®ä¸­çš„ local_port)</li><li><strong>å¯†ç  (Password)</strong>: ä½ ç”Ÿæˆçš„å¯†ç </li><li><strong>ä¼ è¾“å±‚åè®®</strong>: <code>tcp</code></li><li><strong>ä¼ è¾“å±‚å®‰å…¨</strong>: <code>tls</code></li></ul><div class="note warning flat"><p><strong>é˜²ç«å¢™æé†’ï¼š</strong><br>åˆ«å¿˜äº†åœ¨äº‘æœåŠ¡å™¨çš„å®‰å…¨ç»„æˆ– UFW ä¸­æ”¾è¡Œ <strong>2443</strong> ç«¯å£ï¼<br><code>ufw allow 2443/tcp</code></p></div>]]></content>
    
    
    <summary type="html">è¯¦è§£å¦‚ä½•åœ¨ Linux (ARM/AMD) ç¯å¢ƒä¸‹éƒ¨ç½² Trojan-Go æœåŠ¡ã€‚åŒ…å«äºŒè¿›åˆ¶æ–‡ä»¶å®‰è£…ã€Config é…ç½®è¯¦è§£ã€ä»¥åŠé€šè¿‡ Systemd å®ç°æœåŠ¡è‡ªå¯ä¸å®ˆæŠ¤ç®¡ç†ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="ç½‘ç»œä»£ç†" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86/"/>
    
    
    <category term="Trojan-Go" scheme="https://lijiabao9.github.io/tags/Trojan-Go/"/>
    
    <category term="SSL/TLS" scheme="https://lijiabao9.github.io/tags/SSL-TLS/"/>
    
  </entry>
  
  <entry>
    <title>Shadowsocks-libev éƒ¨ç½²å…¨æŒ‡å—ï¼šä»è£¸å¥”åˆ° Nginx + TLS + WebSocket å®Œç¾ä¼ªè£…</title>
    <link href="https://lijiabao9.github.io/posts/ba9f85ec.html"/>
    <id>https://lijiabao9.github.io/posts/ba9f85ec.html</id>
    <published>2025-12-08T16:23:49.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Shadowsocks (SS)</strong> æ˜¯ä¸€ç§åŸºäºè½»é‡çº§å¯¹ç§°åŠ å¯†çš„ä»£ç†åè®®ã€‚</p><ul><li><strong>ä¼˜ç‚¹</strong>ï¼šèµ„æºå ç”¨æä½ï¼Œé…ç½®ç®€å•ï¼Œé€‚åˆä½æ€§èƒ½æœºå™¨ã€‚</li><li><strong>ç¼ºç‚¹</strong>ï¼šåœ¨æ²¡æœ‰ä»»ä½•ä¼ªè£…çš„æƒ…å†µä¸‹ï¼Œå…¶æµé‡ç‰¹å¾éå¸¸æ˜æ˜¾ï¼Œææ˜“è¢«é˜²ç«å¢™ï¼ˆGFWï¼‰è¯†åˆ«å¹¶é˜»æ–­ã€‚</li></ul><p>æœ¬æ–‡å°†ç”±æµ…å…¥æ·±ï¼Œä»‹ç»å¦‚ä½•éƒ¨ç½² SSï¼Œå¹¶ä¸€æ­¥æ­¥ä¸ºå…¶ç©¿ä¸Šâ€œéšèº«è¡£â€ã€‚</p><h2 id="ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½²-è£¸å¥”æ¨¡å¼"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½²-è£¸å¥”æ¨¡å¼" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½² (è£¸å¥”æ¨¡å¼)"></a>ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€éƒ¨ç½² (è£¸å¥”æ¨¡å¼)</h2><p>æ­¤æ¨¡å¼ä»…å…·å¤‡åŠ å¯†ä¼ è¾“åŠŸèƒ½ï¼Œæ— ä¼ªè£…ï¼Œå®¹æ˜“è¢«å¢™ï¼Œä»…å»ºè®®ç”¨äºä¸­è½¬æˆ–å†…ç½‘ç¯å¢ƒã€‚</p><h3 id="1-å®‰è£…æœåŠ¡"><a href="#1-å®‰è£…æœåŠ¡" class="headerlink" title="1. å®‰è£…æœåŠ¡"></a>1. å®‰è£…æœåŠ¡</h3><p>Ubuntu å®˜æ–¹ä»“åº“å·²æ”¶å½• <code>libev</code> ç‰ˆæœ¬ï¼Œç›´æ¥å®‰è£…å³å¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt install shadowsocks-libev</span><br></pre></td></tr></table></figure><h3 id="2-ç”Ÿæˆé«˜å¼ºåº¦å¯†é’¥"><a href="#2-ç”Ÿæˆé«˜å¼ºåº¦å¯†é’¥" class="headerlink" title="2. ç”Ÿæˆé«˜å¼ºåº¦å¯†é’¥"></a>2. ç”Ÿæˆé«˜å¼ºåº¦å¯†é’¥</h3><p>SS çš„æ–°åŠ å¯†ç®—æ³•ï¼ˆå¦‚ <code>chacha20-ietf-poly1305</code>ï¼‰éœ€è¦ base64 ç¼–ç çš„ 32 å­—èŠ‚å¯†é’¥ã€‚ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²å¯†ç ä¼šæŠ¥é”™ã€‚</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆå¯†é’¥ï¼Œå¹¶å¤åˆ¶è¾“å‡ºç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl rand -<span class="built_in">base64</span> 32 | <span class="built_in">tr</span> <span class="string">&#x27;+/&#x27;</span> <span class="string">&#x27;-_&#x27;</span> | <span class="built_in">tr</span> -d <span class="string">&#x27;=&#x27;</span></span><br></pre></td></tr></table></figure><h3 id="3-ä¿®æ”¹é…ç½®"><a href="#3-ä¿®æ”¹é…ç½®" class="headerlink" title="3. ä¿®æ”¹é…ç½®"></a>3. ä¿®æ”¹é…ç½®</h3><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š<code>vi /etc/shadowsocks-libev/config.json</code></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tcp_and_udp&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">8388</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;local_port&quot;</span><span class="punctuation">:</span> <span class="number">1080</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;æ­¤å¤„å¡«å†™ä¸Šé¢ç”Ÿæˆçš„Base64å¯†é’¥&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timeout&quot;</span><span class="punctuation">:</span> <span class="number">86400</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chacha20-ietf-poly1305&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="4-å¯åŠ¨æœåŠ¡"><a href="#4-å¯åŠ¨æœåŠ¡" class="headerlink" title="4. å¯åŠ¨æœåŠ¡"></a>4. å¯åŠ¨æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart shadowsocks-libev</span><br></pre></td></tr></table></figure><hr><h2 id="ç¬¬äºŒé˜¶æ®µï¼šæµé‡ä¼ªè£…-v2ray-plugin"><a href="#ç¬¬äºŒé˜¶æ®µï¼šæµé‡ä¼ªè£…-v2ray-plugin" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šæµé‡ä¼ªè£… (v2ray-plugin)"></a>ç¬¬äºŒé˜¶æ®µï¼šæµé‡ä¼ªè£… (v2ray-plugin)</h2><p>ä¸ºäº†å¯¹æŠ—æµé‡è¯†åˆ«ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ’ä»¶ï¼Œå°† SS æµé‡ä¼ªè£…æˆæ™®é€šçš„ HTTP æˆ– HTTPS æµé‡ã€‚<br>è¿™é‡Œä½¿ç”¨å®˜æ–¹æ¨èçš„ <strong>v2ray-plugin</strong>ã€‚</p><h3 id="1-å®‰è£…æ’ä»¶"><a href="#1-å®‰è£…æ’ä»¶" class="headerlink" title="1. å®‰è£…æ’ä»¶"></a>1. å®‰è£…æ’ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install shadowsocks-v2ray-plugin</span><br></pre></td></tr></table></figure><p><em>æ³¨ï¼šå®‰è£…åæ’ä»¶äºŒè¿›åˆ¶æ–‡ä»¶é€šå¸¸ä½äº <code>/usr/bin/ss-v2ray-plugin</code>ã€‚</em></p><h3 id="2-Windows-å®¢æˆ·ç«¯å‡†å¤‡-å…³é”®"><a href="#2-Windows-å®¢æˆ·ç«¯å‡†å¤‡-å…³é”®" class="headerlink" title="2. Windows å®¢æˆ·ç«¯å‡†å¤‡ (å…³é”®)"></a>2. Windows å®¢æˆ·ç«¯å‡†å¤‡ (å…³é”®)</h3><p>åœ¨ç”µè„‘ç«¯ä½¿ç”¨æ’ä»¶æ¨¡å¼ï¼Œéœ€è¦æ‰‹åŠ¨ä¸‹è½½æ’ä»¶ç¨‹åºã€‚</p><ol><li>ä¸‹è½½ <a href="https://github.com/shadowsocks/v2ray-plugin/releases">v2ray-plugin-windows-amd64</a>ã€‚</li><li>è§£å‹å¹¶å°†æ–‡ä»¶åä¿®æ”¹ä¸º <strong>v2ray-plugin.exe</strong>ã€‚</li><li>å°†è¯¥æ–‡ä»¶æ”¾å…¥ Shadowsocks å®¢æˆ·ç«¯ï¼ˆShadowsocks.exeï¼‰çš„åŒçº§ç›®å½•ä¸‹ã€‚</li></ol><h3 id="æ¨¡å¼-Aï¼šHTTP-ä¼ªè£…-ç®€å•"><a href="#æ¨¡å¼-Aï¼šHTTP-ä¼ªè£…-ç®€å•" class="headerlink" title="æ¨¡å¼ Aï¼šHTTP ä¼ªè£… (ç®€å•)"></a>æ¨¡å¼ Aï¼šHTTP ä¼ªè£… (ç®€å•)</h3><p>ä»…è¿›è¡Œ HTTP æ··æ·†ï¼Œæ²¡æœ‰ TLS åŠ å¯†ï¼Œä¾ç„¶å¯èƒ½è¢«æ¢æµ‹ã€‚</p><p><strong>æœåŠ¡ç«¯é…ç½®ï¼š</strong></p><figure class="highlight json"><figcaption><span>/etc/shadowsocks-libev/config.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">8388</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„å¯†é’¥&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chacha20-ietf-poly1305&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ss-v2ray-plugin&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugin_opts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>å®¢æˆ·ç«¯é…ç½®ï¼š</strong></p><ul><li><strong>æ’ä»¶ç¨‹åº</strong>ï¼š<code>v2ray-plugin.exe</code></li><li><strong>æ’ä»¶é€‰é¡¹</strong>ï¼šç•™ç©º</li></ul><h3 id="æ¨¡å¼-Bï¼šHTTPS-TLS-ä¼ªè£…-ç›´è¿"><a href="#æ¨¡å¼-Bï¼šHTTPS-TLS-ä¼ªè£…-ç›´è¿" class="headerlink" title="æ¨¡å¼ Bï¼šHTTPS/TLS ä¼ªè£… (ç›´è¿)"></a>æ¨¡å¼ Bï¼šHTTPS/TLS ä¼ªè£… (ç›´è¿)</h3><p>ç”± SS æœåŠ¡ç›´æ¥åŠ è½½è¯ä¹¦ï¼Œå¤„ç† TLSã€‚</p><blockquote><p>åŸŸåå’Œè¯ä¹¦çš„è·å–ï¼Œå¯å‚è€ƒæˆ‘çš„æ–‡ç«  <a href="/posts/e94f4538.html">ä»é›¶å¼€å§‹ï¼šåŸŸåè´­ä¹°ã€Cloudflare æ‰˜ç®¡ä¸ Nginx è‡ªåŠ¨åŒ– HTTPS é…ç½®å…¨æŒ‡å—</a></p></blockquote><p><strong>æœåŠ¡ç«¯é…ç½®ï¼š</strong></p><figure class="highlight json"><figcaption><span>/etc/shadowsocks-libev/config.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">8388</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„å¯†é’¥&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chacha20-ietf-poly1305&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ss-v2ray-plugin&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugin_opts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server;tls;host=gfw.131495.xyz;cert=/cert/acme_131495.xyz/cert.pem;key=/cert/acme_131495.xyz/key.pem&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note warning flat"><p><strong>æƒé™é™·é˜±</strong>ï¼š<br>SS é»˜è®¤ä»¥ <code>shadowsocks</code> ç”¨æˆ·è¿è¡Œï¼Œè€Œè¯ä¹¦æ–‡ä»¶ï¼ˆå°¤å…¶æ˜¯ acme.sh ç”Ÿæˆçš„ keyï¼‰é€šå¸¸åªæœ‰ root æˆ–ç‰¹å®šç»„æœ‰æƒé™è¯»å–ï¼Œå¯¼è‡´å¯åŠ¨å¤±è´¥ <code>permission denied</code>ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä¿®æ”¹æœåŠ¡ä»¥ root èº«ä»½è¿è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl edit shadowsocks-libev</span><br></pre></td></tr></table></figure><p>åœ¨ç¼–è¾‘å™¨ä¸­å¡«å…¥ï¼š</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">DynamicUser</span>=<span class="literal">false</span></span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"><span class="attr">Group</span>=root</span><br></pre></td></tr></table></figure><p>ä¿å­˜åé‡å¯æœåŠ¡ã€‚(<code>Ctrl + o</code> ä¿å­˜ï¼Œ<code>Enter</code> ç¡®è®¤ä¿å­˜ï¼Œ<code>Ctrl + x</code> é€€å‡º)</p></div><hr><h2 id="ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ-Nginx-åä»£-WebSocket-TLS"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ-Nginx-åä»£-WebSocket-TLS" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ (Nginx åä»£ + WebSocket + TLS)"></a>ç¬¬ä¸‰é˜¶æ®µï¼šç»ˆææ–¹æ¡ˆ (Nginx åä»£ + WebSocket + TLS)</h2><p>è¿™æ˜¯ç›®å‰æœ€ç¨³å¥çš„æ–¹æ¡ˆã€‚</p><ul><li><strong>éšè”½æ€§é«˜</strong>ï¼šSS èº²åœ¨ Nginx åé¢ï¼Œå¯¹å¤–åªæš´éœ² 443 ç«¯å£ï¼Œçœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ­£å¸¸çš„ç½‘ç«™ã€‚</li><li><strong>CDN å…¼å®¹</strong>ï¼šæ”¯æŒå¥— Cloudflare CDNã€‚</li><li><strong>å®‰å…¨æ€§å¥½</strong>ï¼šSS ç›‘å¬æœ¬åœ°å›ç¯åœ°å€ï¼Œä¸ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ã€‚</li></ul><h3 id="1-ä¿®æ”¹-SS-é…ç½®"><a href="#1-ä¿®æ”¹-SS-é…ç½®" class="headerlink" title="1. ä¿®æ”¹ SS é…ç½®"></a>1. ä¿®æ”¹ SS é…ç½®</h3><p><strong>æ³¨æ„</strong>ï¼šå°† <code>server</code> æ”¹ä¸º <code>127.0.0.1</code>ï¼Œä»…å…è®¸æœ¬æœºè®¿é—®ã€‚</p><p><code>vi /etc/shadowsocks-libev/config.json</code></p><figure class="highlight json"><figcaption><span>/etc/shadowsocks-libev/config.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;127.0.0.1&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mode&quot;</span><span class="punctuation">:</span> <span class="string">&quot;tcp_and_udp&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;server_port&quot;</span><span class="punctuation">:</span> <span class="number">8388</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ä½ çš„å¯†é’¥&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;method&quot;</span><span class="punctuation">:</span> <span class="string">&quot;chacha20-ietf-poly1305&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugin&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ss-v2ray-plugin&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;plugin_opts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server;host=gfw.131495.xyz;path=/ray&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><em>é…ç½®è§£é‡Šï¼šSS ç›‘å¬æœ¬æœºçš„ 8388 ç«¯å£ï¼Œç­‰å¾… Nginx è½¬å‘è¿‡æ¥çš„ <code>/ray</code> è·¯å¾„çš„æµé‡ã€‚</em></p><p>é‡å¯ SS æœåŠ¡ï¼š(è®°å¾—å…ˆè¿˜åŸä¹‹å‰çš„ systemctl edit ä¿®æ”¹ï¼Œæ¨èç”¨æ™®é€šç”¨æˆ·è¿è¡Œ)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl revert shadowsocks-libev</span><br><span class="line">systemctl restart shadowsocks-libev</span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®-Nginx-åå‘ä»£ç†"><a href="#2-é…ç½®-Nginx-åå‘ä»£ç†" class="headerlink" title="2. é…ç½® Nginx åå‘ä»£ç†"></a>2. é…ç½® Nginx åå‘ä»£ç†</h3><p>åˆ›å»º Nginx é…ç½®æ–‡ä»¶ï¼š<code>vi /etc/nginx/sites-available/gfw.131495.xyz</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span></span><br><span class="line">    <span class="attribute">server_name</span> gfw.<span class="number">131495</span>.xyz;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/gfw.access.log proxy_json;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/gfw.<span class="literal">error</span>.log;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é»˜è®¤ä»£ç†ï¼ˆé˜²æ­¢æ¢æµ‹ï¼‰</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span> https://www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_server_name</span> <span class="literal">on</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host www.bing.com;</span><br><span class="line">        <span class="attribute">proxy_ssl_protocols</span> TLSv1.<span class="number">2</span> TLSv1.<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†è®¾ç½®</span></span><br><span class="line">    <span class="section">location</span> /ray &#123;</span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:8388;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># Websocket ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_http_version</span> <span class="number">1</span>.<span class="number">1</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Upgrade <span class="variable">$http_upgrade</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Connection <span class="string">&quot;upgrade&quot;</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-ç”Ÿæ•ˆä¸éªŒè¯"><a href="#3-ç”Ÿæ•ˆä¸éªŒè¯" class="headerlink" title="3. ç”Ÿæ•ˆä¸éªŒè¯"></a>3. ç”Ÿæ•ˆä¸éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/gfw.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line">nginx -t</span><br><span class="line">systemctl reload nginx</span><br></pre></td></tr></table></figure><h3 id="4-å®¢æˆ·ç«¯é…ç½®-ç»ˆæç‰ˆ"><a href="#4-å®¢æˆ·ç«¯é…ç½®-ç»ˆæç‰ˆ" class="headerlink" title="4. å®¢æˆ·ç«¯é…ç½® (ç»ˆæç‰ˆ)"></a>4. å®¢æˆ·ç«¯é…ç½® (ç»ˆæç‰ˆ)</h3><p>åœ¨ Windows/Android/iOS å®¢æˆ·ç«¯ä¸­ï¼š</p><ul><li><strong>æœåŠ¡å™¨åœ°å€</strong>ï¼š<code>gfw.131495.xyz</code> (ä½ çš„åŸŸå)</li><li><strong>ç«¯å£</strong>ï¼š<code>443</code> (Nginx çš„ç«¯å£)</li><li><strong>å¯†ç </strong>ï¼š<code>ä½ çš„å¯†é’¥</code></li><li><strong>åŠ å¯†</strong>ï¼š<code>chacha20-ietf-poly1305</code></li><li><strong>æ’ä»¶ç¨‹åº</strong>ï¼š<code>v2ray-plugin</code></li><li><strong>æ’ä»¶é€‰é¡¹</strong>ï¼š<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tls;host=gfw.131495.xyz;path=/ray</span><br></pre></td></tr></table></figure></li></ul><p>ç°åœ¨ï¼Œä½ çš„æµé‡çœ‹èµ·æ¥å°±åƒæ˜¯åœ¨è®¿é—®ä¸€ä¸ªæ™®é€šçš„ HTTPS ç½‘ç«™ï¼Œæä¸ºéšè”½ã€‚</p>]]></content>
    
    
    <summary type="html">è¯¦è§£ Shadowsocks-libev çš„å®‰è£…ä¸é…ç½®ã€‚ä»åŸºç¡€çš„ TCP/UDP æ¨¡å¼ï¼Œåˆ°ä½¿ç”¨ v2ray-plugin è¿›è¡Œæµé‡ä¼ªè£…ï¼Œæœ€ç»ˆå®ç°åŸºäº Nginx åå‘ä»£ç†çš„ TLS + WebSocket é«˜çº§éšåŒ¿æ–¹æ¡ˆã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="ç½‘ç»œä»£ç†" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E7%BD%91%E7%BB%9C%E4%BB%A3%E7%90%86/"/>
    
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="Shadowsocks" scheme="https://lijiabao9.github.io/tags/Shadowsocks/"/>
    
    <category term="V2Ray-Plugin" scheme="https://lijiabao9.github.io/tags/V2Ray-Plugin/"/>
    
    <category term="ç§‘å­¦ä¸Šç½‘" scheme="https://lijiabao9.github.io/tags/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>Microsoft 365 E3 è¿›é˜¶æŒ‡å—ï¼šç»‘å®šè‡ªå®šä¹‰åŸŸåå¹¶é…ç½®ä¼ä¸šçº§ SMTP å‘ä¿¡</title>
    <link href="https://lijiabao9.github.io/posts/57b282c7.html"/>
    <id>https://lijiabao9.github.io/posts/57b282c7.html</id>
    <published>2025-12-06T16:15:50.000Z</published>
    <updated>2025-12-17T17:57:48.700Z</updated>
    
    <content type="html"><![CDATA[<p>æ‹¥æœ‰äº† Microsoft 365 E3 è®¢é˜…åï¼Œæˆ‘ä»¬ä¸ä»…è·å¾—äº† Office å…¨å®¶æ¡¶ï¼Œè¿˜è§£é”äº†ä¼ä¸šçº§çš„ <strong>Exchange Online</strong> æœåŠ¡ã€‚</p><p>ç›¸æ¯”äºä¸ªäººç‰ˆ Outlook æˆ– Gmailï¼Œä¼ä¸šç‰ˆ Exchange å…è®¸æˆ‘ä»¬ç»‘å®š<strong>è‡ªå®šä¹‰åŸŸå</strong>ï¼ˆå¦‚ <code>admin@yourname.com</code>ï¼‰ï¼Œå¹¶æä¾›æé«˜çš„å‘ä¿¡æƒé‡ã€‚</p><p>æœ¬æ–‡å°†æŒ‡å¯¼ä½ å°†å…¶é…ç½®ä¸ºé«˜é€è¾¾ç‡çš„ SMTP æœåŠ¡ï¼Œç”¨äºåšå®¢é€šçŸ¥ã€Alist æ¶ˆæ¯æ¨é€ç­‰åœºæ™¯ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šåŸŸåç»‘å®šï¼ˆæ¨èï¼‰"><a href="#ç¬¬ä¸€æ­¥ï¼šåŸŸåç»‘å®šï¼ˆæ¨èï¼‰" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåŸŸåç»‘å®šï¼ˆæ¨èï¼‰"></a>ç¬¬ä¸€æ­¥ï¼šåŸŸåç»‘å®šï¼ˆæ¨èï¼‰</h2><h3 id="1-ç»‘å®šè‡ªå®šä¹‰åŸŸå"><a href="#1-ç»‘å®šè‡ªå®šä¹‰åŸŸå" class="headerlink" title="1. ç»‘å®šè‡ªå®šä¹‰åŸŸå"></a>1. ç»‘å®šè‡ªå®šä¹‰åŸŸå</h3><p>ä¸ºäº†è®©å‘å‡ºçš„é‚®ä»¶çœ‹èµ·æ¥æ›´ä¸“ä¸šï¼ˆè€Œä¸æ˜¯æ˜¾ç¤º <code>xxx.onmicrosoft.com</code>ï¼‰ï¼Œæˆ‘ä»¬éœ€è¦ç»‘å®šè‡ªå·±çš„åŸŸåã€‚</p><ol><li><p><strong>è¿›å…¥ç®¡ç†ä¸­å¿ƒ</strong>ï¼š<br>è®¿é—® <a href="https://admin.cloud.microsoft/">M365 Admin Center</a>ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ çš„ <strong>Settings (è®¾ç½®)</strong> -&gt; <strong>Domains (åŸŸ)</strong>ã€‚</p></li><li><p><strong>æ·»åŠ åŸŸå</strong>ï¼š<br>ç‚¹å‡» <strong>Add domain</strong>ï¼Œè¾“å…¥ä½ è´­ä¹°çš„åŸŸåï¼ˆå¦‚ <code>gabriel.edu.kg</code>ï¼‰ã€‚</p></li><li><p><strong>éªŒè¯åŸŸå</strong>ï¼š</p><ul><li><strong>è‡ªåŠ¨éªŒè¯ (æ¨è)</strong>ï¼šå¦‚æœä½ çš„åŸŸåæ‰˜ç®¡åœ¨ Cloudflareã€GoDaddy ç­‰ä¸»æµå¹³å°ï¼Œé€‰æ‹© â€œSign in toâ€¦â€ å¯è‡ªåŠ¨æ·»åŠ  DNS è®°å½•ã€‚</li><li><strong>æ‰‹åŠ¨éªŒè¯</strong>ï¼šé€‰æ‹© â€œAdd a TXT recordâ€ï¼Œå°†ç”Ÿæˆçš„ TXT è®°å½•æ·»åŠ åˆ°ä½ çš„ DNS è§£æä¸­ã€‚</li></ul></li><li><p><strong>é…ç½®æœåŠ¡è®°å½•</strong>ï¼š<br>éªŒè¯é€šè¿‡åï¼Œç³»ç»Ÿä¼šè¦æ±‚é…ç½® Exchange å’Œå…¶ä»–æœåŠ¡çš„ DNS è®°å½•ã€‚</p><ul><li>å»ºè®®<strong>å…¨é€‰</strong> (Exchange, Skype, DKIM ç­‰)ã€‚</li><li>ï¼ˆæ‰‹åŠ¨éªŒè¯ï¼‰æŒ‰ç…§æç¤ºåœ¨ DNS æœåŠ¡å•†å¤„æ·»åŠ ç”Ÿæˆçš„ <strong>MX</strong>, <strong>CNAME</strong>, <strong>TXT</strong> è®°å½•ã€‚</li><li>å¾…çŠ¶æ€æ˜¾ç¤ºä¸º <span class='p green'>Healthy</span> å³ä¸ºæˆåŠŸã€‚</li></ul></li></ol><hr><h3 id="2-é…ç½®-DKIM-é˜²æ­¢è¿›åƒåœ¾ç®±-é‡è¦"><a href="#2-é…ç½®-DKIM-é˜²æ­¢è¿›åƒåœ¾ç®±-é‡è¦" class="headerlink" title="2. é…ç½® DKIM é˜²æ­¢è¿›åƒåœ¾ç®± (é‡è¦)"></a>2. é…ç½® DKIM é˜²æ­¢è¿›åƒåœ¾ç®± (é‡è¦)</h3><p>ä¸ºäº†é˜²æ­¢ Gmailã€Outlook ç­‰æ”¶ä»¶æ–¹å°†ä½ çš„é‚®ä»¶æ ‡è®°ä¸ºåƒåœ¾é‚®ä»¶ï¼Œå¿…é¡»é…ç½® <strong>DKIM (åŸŸåå¯†é’¥è¯†åˆ«é‚®ä»¶)</strong>ã€‚</p><ol><li><p><strong>è®¿é—® Defender é˜²æŠ¤ä¸­å¿ƒ</strong>ï¼š<br><a href="https://security.microsoft.com/dkimv2">ç‚¹å‡»è·³è½¬ DKIM é…ç½®é¡µé¢</a></p></li><li><p><strong>å¯ç”¨ DKIM</strong>ï¼š</p><ul><li>åœ¨åˆ—è¡¨ä¸­ç‚¹å‡»ä½ çš„<strong>è‡ªå®šä¹‰åŸŸå</strong>ã€‚</li><li>å°† <strong>Sign messages for this domain with DKIM signatures</strong> çš„æ»‘å—åˆ‡æ¢ä¸º <strong>Enable (å¼€å¯)</strong>ã€‚</li></ul></li><li><p><strong>æ·»åŠ  CNAME è®°å½•</strong>ï¼š</p><ul><li>å¦‚æœç³»ç»Ÿæç¤º â€œYou need to create CNAME recordsâ€¦â€ï¼Œè¯·æŒ‰ç…§æç¤ºåœ¨ä½ çš„ DNS æœåŠ¡å•†å¤„æ·»åŠ  2 æ¡ CNAME è®°å½•ã€‚</li><li><em>è®°å½•åé€šå¸¸ä¸º <code>selector1._domainkey</code> æ ¼å¼ã€‚</em></li></ul></li><li><p><strong>å†æ¬¡å¯ç”¨</strong>ï¼š</p><ul><li>DNS ç”Ÿæ•ˆåï¼ˆé€šå¸¸å‡ åˆ†é’Ÿï¼‰ï¼Œå›åˆ°æ­¤é¡µé¢å†æ¬¡ç‚¹å‡»å¼€å¯æ»‘å—ã€‚</li><li>ç›´åˆ°çŠ¶æ€æ˜¾ç¤ºä¸ºç»¿è‰²çš„ <span class='p green'>Status: Enabled</span>ã€‚</li></ul></li></ol><hr><h2 id="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸“ç”¨å‘ä¿¡è´¦æˆ·"><a href="#ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸“ç”¨å‘ä¿¡è´¦æˆ·" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸“ç”¨å‘ä¿¡è´¦æˆ·"></a>ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä¸“ç”¨å‘ä¿¡è´¦æˆ·</h2><h3 id="1-æ–°å»ºç”¨æˆ·"><a href="#1-æ–°å»ºç”¨æˆ·" class="headerlink" title="1. æ–°å»ºç”¨æˆ·"></a>1. æ–°å»ºç”¨æˆ·</h3><p>ä¸ºäº†å®‰å…¨èµ·è§ï¼Œ<strong>ä¸è¦ç›´æ¥ä½¿ç”¨å…¨å±€ç®¡ç†å‘˜è´¦å·è¿›è¡Œ SMTP å‘ä¿¡</strong>ã€‚å»ºè®®åˆ›å»ºä¸€ä¸ªæƒé™å—é™çš„ä¸“ç”¨è´¦æˆ·ï¼ˆService Accountï¼‰ã€‚</p><ol><li><p>è®¿é—® <a href="https://admin.cloud.microsoft/">M365 Admin Center</a>ï¼Œç‚¹å‡» <strong>Users (ç”¨æˆ·)</strong> -&gt; <strong>Active users (æ´»è·ƒç”¨æˆ·)</strong>ã€‚</p></li><li><p>ç‚¹å‡» <strong>Add a user</strong>ï¼š</p><ul><li><strong>First/Last name</strong>: éšæ„ï¼ˆå¦‚ Notification Botï¼‰ã€‚</li><li><strong>Username</strong>: å»ºè®®ä½¿ç”¨ <code>noreply</code> æˆ– <code>mailer</code>ã€‚</li><li><strong>Domain</strong>: ä¸‹æ‹‰é€‰æ‹©åˆšæ‰ç»‘å®šçš„<strong>è‡ªå®šä¹‰åŸŸå</strong>ã€‚</li><li><strong>Password</strong>: è‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨è®¾ç½®ï¼Œ<span class='p red'>åŠ¡å¿…è®°ä¸‹æ­¤å¯†ç ï¼Œä¸”åç»­ä¸è¦ä¿®æ”¹</span>ã€‚</li><li><strong>Licenses</strong>: å¿…é¡»å‹¾é€‰ <strong>Office 365 E3 Developer</strong> (å¦åˆ™æ²¡æœ‰ Exchange é‚®ç®±åŠŸèƒ½)ã€‚</li></ul></li></ol><hr><h3 id="2-ä¸ºç”¨æˆ·å¼€å¯-SMTP"><a href="#2-ä¸ºç”¨æˆ·å¼€å¯-SMTP" class="headerlink" title="2. ä¸ºç”¨æˆ·å¼€å¯ SMTP"></a>2. ä¸ºç”¨æˆ·å¼€å¯ SMTP</h3><p>æ–°åˆ›å»ºçš„ç”¨æˆ·ï¼Œé»˜è®¤å¯èƒ½æœªå¼€å¯ SMTP ä¼ è¾“æƒé™ï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨ã€‚</p><ol><li><p>åœ¨ç”¨æˆ·åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»åˆšæ‰åˆ›å»ºçš„ <code>noreply</code> ç”¨æˆ·ã€‚</p></li><li><p>åœ¨å³ä¾§å¼¹å‡ºçš„è¯¦æƒ…é¡µä¸­ï¼Œåˆ‡æ¢åˆ° <strong>Mail (é‚®ä»¶)</strong> é€‰é¡¹å¡ã€‚</p></li><li><p>ç‚¹å‡» <strong>Manage email apps (ç®¡ç†ç”µå­é‚®ä»¶åº”ç”¨)</strong> é“¾æ¥ã€‚</p></li><li><p>å‹¾é€‰æœ€åº•éƒ¨çš„ <strong>Authenticated SMTP (ç»è¿‡èº«ä»½éªŒè¯çš„ SMTP)</strong>ã€‚</p></li><li><p>ç‚¹å‡» <strong>Save changes</strong> ä¿å­˜ã€‚</p></li></ol><div class="note warning flat"><p><strong>ç”Ÿæ•ˆæ—¶é—´æç¤ºï¼š</strong><br>å¾®è½¯å…¨çƒæœåŠ¡å™¨åŒæ­¥å¯èƒ½éœ€è¦æ—¶é—´ã€‚æ­¤å¤„çš„ä¿®æ”¹é€šå¸¸ <strong>15 ~ 60 åˆ†é’Ÿ</strong> åæ‰ä¼šå®Œå…¨ç”Ÿæ•ˆã€‚å¦‚æœé…ç½®å®Œç«‹å³æµ‹è¯•è¿æ¥å¤±è´¥ï¼Œè¯·å–æ¯å’–å•¡ç¨åå†è¯•ã€‚</p></div><hr><h2 id="æ–¹å¼ä¸€ï¼šé…ç½®-SMTP-å‘ä¿¡"><a href="#æ–¹å¼ä¸€ï¼šé…ç½®-SMTP-å‘ä¿¡" class="headerlink" title="æ–¹å¼ä¸€ï¼šé…ç½® SMTP å‘ä¿¡"></a>æ–¹å¼ä¸€ï¼šé…ç½® SMTP å‘ä¿¡</h2><h3 id="1-å…³é—­å®‰å…¨é»˜è®¤å€¼-å…³é”®"><a href="#1-å…³é—­å®‰å…¨é»˜è®¤å€¼-å…³é”®" class="headerlink" title="1. å…³é—­å®‰å…¨é»˜è®¤å€¼ (å…³é”®)"></a>1. å…³é—­å®‰å…¨é»˜è®¤å€¼ (å…³é”®)</h3><p>Microsoft Entra IDï¼ˆåŸ Azure ADï¼‰é»˜è®¤çš„å®‰å…¨ç­–ç•¥ä¼š <strong>å…¨å±€é˜»æ­¢ SMTP åŸºç¡€è®¤è¯</strong>ï¼ˆLegacy Authenticationï¼‰ã€‚å¦‚æœä¸å…³é—­æ­¤é€‰é¡¹ï¼ŒSMTP æ¡æ‰‹å°†ä¸€ç›´å¤±è´¥ã€‚</p><ol><li><p><strong>è®¿é—® Azure é—¨æˆ·</strong>ï¼š<br><a href="https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/Overview">ç‚¹å‡»è·³è½¬ Microsoft Entra ID æ¦‚è§ˆé¡µ</a></p></li><li><p><strong>ç™»å½•è´¦å·</strong>ï¼š<br>ä½¿ç”¨ä½ çš„ <strong>E3 å…¨å±€ç®¡ç†å‘˜è´¦å·</strong>ï¼ˆ<code>admin@xxxx.onmicrosoft.com</code>ï¼‰ç™»å½•ã€‚</p></li><li><p><strong>ä¿®æ”¹å±æ€§</strong>ï¼š<br>åœ¨ä¸Šæ–¹èœå•æ ç‚¹å‡» <strong>Properties (å±æ€§)</strong>ã€‚</p></li><li><p><strong>ç®¡ç†å®‰å…¨é»˜è®¤å€¼</strong>ï¼š<br>æ»šåŠ¨åˆ°é¡µé¢æœ€åº•éƒ¨ï¼Œç‚¹å‡»è“è‰²é“¾æ¥ <strong>Manage security defaults (ç®¡ç†å®‰å…¨é»˜è®¤å€¼)</strong>ã€‚</p></li><li><p><strong>ç¦ç”¨ç­–ç•¥</strong>ï¼š<br>åœ¨å³ä¾§å¼¹å‡ºçš„é¢æ¿ä¸­ï¼Œå°† <strong>Security defaults</strong> åˆ‡æ¢ä¸º <span class='p red'>Disabled (ç¦ç”¨)</span>ã€‚</p><ul><li><em>Reason for disabling</em>: éšæ„é€‰æ‹©ï¼Œä¾‹å¦‚ â€œApplication requires legacy authenticationâ€ã€‚</li><li>ç‚¹å‡» <strong>Save</strong> ä¿å­˜ã€‚</li></ul></li></ol><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251207002143028.webp" alt=""></p><hr><h3 id="2-SMTP-é…ç½®å‚æ•°é€ŸæŸ¥"><a href="#2-SMTP-é…ç½®å‚æ•°é€ŸæŸ¥" class="headerlink" title="2. SMTP é…ç½®å‚æ•°é€ŸæŸ¥"></a>2. SMTP é…ç½®å‚æ•°é€ŸæŸ¥</h3><p>ç°åœ¨ï¼Œä½ å¯ä»¥å°†ä»¥ä¸‹ä¿¡æ¯å¡«å…¥ Artalkã€WordPressã€UptimeKuma ç­‰æœåŠ¡çš„é‚®ä»¶é€šçŸ¥é…ç½®ä¸­ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">é…ç½®é¡¹</th><th style="text-align:left">å€¼</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><strong>SMTP Host</strong></td><td style="text-align:left"><code>smtp.office365.com</code></td><td style="text-align:left">å‘ä¿¡æœåŠ¡å™¨åœ°å€</td></tr><tr><td style="text-align:left"><strong>SMTP Port</strong></td><td style="text-align:left"><code>587</code></td><td style="text-align:left">ç«¯å£ (æ¨è)</td></tr><tr><td style="text-align:left"><strong>Encryption</strong></td><td style="text-align:left"><code>STARTTLS</code> æˆ– <code>TLS</code></td><td style="text-align:left">åŠ å¯†æ–¹å¼</td></tr><tr><td style="text-align:left"><strong>Username</strong></td><td style="text-align:left"><code>noreply@gabriel.edu.kg</code></td><td style="text-align:left">ä½ çš„å®Œæ•´é‚®ç®±åœ°å€</td></tr><tr><td style="text-align:left"><strong>Password</strong></td><td style="text-align:left"><code>********</code></td><td style="text-align:left">è¯¥ç”¨æˆ·çš„ç™»å½•å¯†ç </td></tr></tbody></table></div><hr><p>è‡³æ­¤ï¼Œä¸€ä¸ªé«˜æƒé‡ã€é«˜é€è¾¾ç‡ä¸”å¸¦æœ‰è‡ªå®šä¹‰åŸŸåçš„ä¼ä¸šçº§ SMTP æœåŠ¡å°±æ­å»ºå®Œæˆäº†ã€‚</p><h2 id="æ–¹å¼äºŒï¼šé…ç½®-Azure-åº”ç”¨-OAuth2-å‡­è¯"><a href="#æ–¹å¼äºŒï¼šé…ç½®-Azure-åº”ç”¨-OAuth2-å‡­è¯" class="headerlink" title="æ–¹å¼äºŒï¼šé…ç½® Azure åº”ç”¨ (OAuth2 å‡­è¯)"></a>æ–¹å¼äºŒï¼šé…ç½® Azure åº”ç”¨ (OAuth2 å‡­è¯)</h2><p>å¦‚æœä½ è®¡åˆ’ä½¿ç”¨ <strong>Microsoft Graph API</strong> å‘ä¿¡ï¼ˆå¦‚ <strong>Apprise</strong>, LobeChat, Alistï¼‰ï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹åº”ç”¨æ”¯æŒ OAuth2 ç™»å½•ï¼Œ<br>ä½ éœ€è¦æ³¨å†Œä¸€ä¸ª Azure åº”ç”¨æ¥è·å– <code>Client ID</code> å’Œ <code>Client Secret</code>ã€‚</p><h3 id="1-æ³¨å†Œåº”ç”¨"><a href="#1-æ³¨å†Œåº”ç”¨" class="headerlink" title="1. æ³¨å†Œåº”ç”¨"></a>1. æ³¨å†Œåº”ç”¨</h3><ol><li>è®¿é—® <a href="https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/RegisteredApps">Azure AD åº”ç”¨æ³¨å†Œé¡µé¢</a>ã€‚</li><li>ç‚¹å‡» <strong>New registration</strong>ã€‚</li><li><strong>Name</strong>: å¡«å†™åº”ç”¨åï¼ˆå¦‚ <code>MailBot</code>ï¼‰ï¼Œå…¶ä»–ä¿æŒé»˜è®¤ï¼Œç‚¹å‡» <strong>Register</strong>ã€‚</li><li>åœ¨ <strong>Overview (æ¦‚è§ˆ)</strong> é¡µï¼Œå¤åˆ¶å¹¶ä¿å­˜ï¼š<span class='p red'>Application (client) ID</span>, <span class='p red'>Directory (tenant) ID</span></li></ol><h3 id="2-ç”Ÿæˆå®¢æˆ·ç«¯å¯†é’¥"><a href="#2-ç”Ÿæˆå®¢æˆ·ç«¯å¯†é’¥" class="headerlink" title="2. ç”Ÿæˆå®¢æˆ·ç«¯å¯†é’¥"></a>2. <strong>ç”Ÿæˆå®¢æˆ·ç«¯å¯†é’¥</strong></h3><ol><li>ç‚¹å‡»å·¦ä¾§ <strong>Certificates &amp; secrets (è¯ä¹¦å’Œå¯†ç )</strong> -&gt; <strong>Client secrets</strong>ã€‚</li><li>ç‚¹å‡» <strong>New client secret</strong>ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆæ¨è 24 ä¸ªæœˆï¼‰ã€‚<blockquote><p><span class='p red'>åŠ¡å¿…ç«‹å³å¤åˆ¶ Value å­—æ®µ</span>ï¼ˆåˆ·æ–°åå°†ä¸å¯è§ï¼‰ã€‚<br><em>æ³¨ï¼šè‹¥å¯†é’¥å«ç‰¹æ®Šå­—ç¬¦ï¼Œä½¿ç”¨å‰å»ºè®®è¿›è¡Œ URL Encodeã€‚</em></p></blockquote></li></ol><h3 id="3-é…ç½®-API-æƒé™"><a href="#3-é…ç½®-API-æƒé™" class="headerlink" title="3. é…ç½® API æƒé™"></a>3. <strong>é…ç½® API æƒé™</strong></h3><ol><li>ç‚¹å‡»å·¦ä¾§ <strong>API permissions</strong> -&gt; <strong>Add a permission</strong> -&gt; <strong>Microsoft Graph</strong>ã€‚</li><li>é€‰æ‹© <strong>Application permissions</strong> (åº”ç”¨çº§æƒé™)ã€‚</li><li>æœç´¢å¹¶å‹¾é€‰ <strong>Mail.Send</strong>, <strong>Mail.ReadWrite</strong>ï¼Œç‚¹å‡» <strong>Add permissions</strong>ã€‚</li><li>å›åˆ°æƒé™åˆ—è¡¨ï¼ŒçŠ¶æ€æ ä¼šæ˜¾ç¤º â€œNot granted forâ€¦â€ï¼Œ </li><li>ç‚¹å‡»åˆ—è¡¨ä¸Šæ–¹çš„ <strong>Grant admin consent for &lt;ç»„ç»‡å&gt;</strong> æŒ‰é’®å¹¶ç¡®è®¤ã€‚</li><li>çœ‹åˆ°çŠ¶æ€å˜ä¸ºç»¿è‰²çš„ <span class='p green'>Granted</span> å³ä¸ºé…ç½®æˆåŠŸã€‚</li></ol><hr><p>è‡³æ­¤ï¼Œä½ å·²ç»æ‹¥æœ‰äº† SMTP å’Œ API ä¸¤ç§å¼ºå¤§çš„å‘ä¿¡æ–¹å¼ã€‚</p><h2 id="æ¨èï¼šé…ç½®-Catch-all-æ— é™é‚®ç®±"><a href="#æ¨èï¼šé…ç½®-Catch-all-æ— é™é‚®ç®±" class="headerlink" title="æ¨èï¼šé…ç½® Catch-all æ— é™é‚®ç®±"></a>æ¨èï¼šé…ç½® Catch-all æ— é™é‚®ç®±</h2><p>é™¤äº†åŸºç¡€å‘ä¿¡ï¼ŒExchange è¿˜æ”¯æŒé€šè¿‡è§„åˆ™å®ç°â€œæ— é™åˆ«åâ€åŠŸèƒ½ã€‚<br>é…ç½®åï¼Œä½ å¯ä»¥éšæ„ç¼–é€ é‚®ç®±åœ°å€ï¼ˆå¦‚ <code>test001@gabriel.edu.kg</code>ï¼‰ç”¨äºæ³¨å†Œä¸å—ä¿¡ä»»çš„ç½‘ç«™ï¼Œæ‰€æœ‰é‚®ä»¶éƒ½ä¼šè‡ªåŠ¨è½¬å‘åˆ°ä½ çš„ä¸»é‚®ç®±ã€‚</p><ol><li><p><strong>è®¿é—® Exchange ç®¡ç†ä¸­å¿ƒ</strong>ï¼š<br>ç‚¹å‡»è·³è½¬ <a href="https://admin.exchange.microsoft.com/">Exchange Admin Center</a>ã€‚</p></li><li><p><strong>ä¿®æ”¹åŸŸåç±»å‹</strong>ï¼š</p><ul><li>åœ¨å·¦ä¾§å¯¼èˆªæ ç‚¹å‡» <strong>Mail flow (é‚®ä»¶æµ)</strong> -&gt; <strong>Accepted domains (æ¥å—çš„åŸŸ)</strong>ã€‚</li><li>ç‚¹å‡»ä½ çš„ä¸»åŸŸåè¿›å…¥è¯¦æƒ…é¡µã€‚</li><li>å°† <strong>This accepted domain is</strong> é€‰é¡¹ä» <strong>Authoritative</strong> åˆ‡æ¢ä¸º <span class='p red'>Internal relay (å†…éƒ¨ä¸­ç»§)</span>ã€‚</li><li>ç‚¹å‡» <strong>Save</strong> ä¿å­˜ã€‚</li></ul></li><li><p><strong>åˆ›å»ºè½¬å‘è§„åˆ™</strong>ï¼š</p><ul><li>ç‚¹å‡»å·¦ä¾§å¯¼èˆªæ  <strong>Mail flow (é‚®ä»¶æµ)</strong> -&gt; <strong>Rules (è§„åˆ™)</strong>ã€‚</li><li>ç‚¹å‡» <strong>Add a rule</strong> -&gt; <strong>Create a new rule</strong>ã€‚</li><li><strong>Name</strong>: éšæ„å¡«å†™ï¼Œæ¯”å¦‚ <code>Catch-all</code>ã€‚</li><li><strong>Apply this rule if</strong>: é€‰æ‹© <strong>The recipient</strong> -&gt; <strong>address matches any of these text patterns</strong>ã€‚<blockquote><p><strong>specify text patterns</strong>: è¾“å…¥æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ <code>^test.*@gabriel\.edu\.kg$</code>ã€‚<br><em>æ³¨ï¼šæ­¤æ­£åˆ™è¡¨ç¤ºåŒ¹é…æ‰€æœ‰ä»¥ <code>test</code> å¼€å¤´ï¼ˆå¦‚ <code>test-app</code>, <code>test01</code>ï¼‰çš„é‚®ç®±åœ°å€ã€‚</em></p></blockquote></li><li><strong>Do the following</strong>: é€‰æ‹© <strong>Redirect the message to</strong> -&gt; <strong>these recipients</strong>ï¼Œå¹¶åœ¨åˆ—è¡¨ä¸­é€‰æ‹©ä½ çš„ä¸»è´¦å·ã€‚</li><li>åç»­ Settings ä¿æŒé»˜è®¤ï¼Œç‚¹å‡» Finishã€‚</li></ul></li><li><p><strong>å¯ç”¨è§„åˆ™</strong>ï¼š</p><ul><li>æ–°åˆ›å»ºçš„è§„åˆ™é»˜è®¤å¤„äº <strong>Disabled</strong> çŠ¶æ€ã€‚</li><li>ç‚¹å‡»è§„åˆ™åç§°ï¼Œåœ¨è¯¦æƒ…é¢æ¿ä¸­å°†æ»‘å—åˆ‡æ¢ä¸º <span class='p green'>Enabled</span>ã€‚</li></ul></li></ol><div class="note info flat"><p><strong>é…ç½®å®Œæˆï¼š</strong><br>ç°åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>test001@gabriel.edu.kg</code> æˆ– <code>test-anything@gabriel.edu.kg</code> è¿›è¡Œæ³¨å†Œï¼Œé‚®ä»¶å°†è‡ªåŠ¨æŠ•é€’åˆ°ä½ çš„æ”¶ä»¶ç®±ã€‚</p></div>]]></content>
    
    
    <summary type="html">æ‰¿æ¥ Microsoft 365 E3 å…è´¹è®¢é˜…æ•™ç¨‹ï¼Œè¯¦è§£å¦‚ä½•å…³é—­ Azure å®‰å…¨é»˜è®¤å€¼ã€ç»‘å®šè‡ªæœ‰åŸŸåã€å¼€å¯ SMTP Authï¼Œå¹¶é…ç½® DKIM ç­¾åï¼Œæ‰“é€ é«˜é€è¾¾ç‡çš„ä¼ä¸šçº§é‚®ä»¶æ¨é€æœåŠ¡ã€‚</summary>
    
    
    
    <category term="èµ„æºåˆ†äº«" scheme="https://lijiabao9.github.io/categories/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/"/>
    
    <category term="è¿›é˜¶æ•™ç¨‹" scheme="https://lijiabao9.github.io/categories/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/%E8%BF%9B%E9%98%B6%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Microsoft365" scheme="https://lijiabao9.github.io/tags/Microsoft365/"/>
    
    <category term="SMTP" scheme="https://lijiabao9.github.io/tags/SMTP/"/>
    
    <category term="Exchange" scheme="https://lijiabao9.github.io/tags/Exchange/"/>
    
  </entry>
  
  <entry>
    <title>ç™½å«–æŒ‡å—ï¼šå…è´¹è·å– Microsoft 365 E3 å¼€å‘è€…è®¢é˜… (å« 5TB OneDrive)</title>
    <link href="https://lijiabao9.github.io/posts/93201920.html"/>
    <id>https://lijiabao9.github.io/posts/93201920.html</id>
    <published>2025-12-06T15:52:08.000Z</published>
    <updated>2025-12-17T17:57:48.700Z</updated>
    
    <content type="html"><![CDATA[<p>Microsoft 365 E3 è®¢é˜…é€šå¸¸æ˜¯ä¼ä¸šçº§çš„ä»˜è´¹æœåŠ¡ï¼Œä½†é€šè¿‡ç‰¹å®šçš„å¼€å‘è€…è®¡åˆ’æˆ– Symphony è¯•ç”¨é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å…è´¹è·å–ã€‚</p><p><strong>æ ¸å¿ƒæƒç›Šï¼š</strong></p><ul><li><strong>Office 365 å…¨å®¶æ¡¶</strong>ï¼šæ”¯æŒæ¿€æ´»æœ¬åœ°æ¡Œé¢ç‰ˆ Word, Excel, PPT ç­‰ã€‚</li><li><strong>25 ä¸ªè®¸å¯è¯</strong>ï¼šå¯ä»¥åˆ›å»º 25 ä¸ªå­è´¦å·ï¼Œåˆ†å‘ç»™äº²å‹ä½¿ç”¨ã€‚</li><li><strong>5TB OneDrive</strong>ï¼šæ¯ä¸ªè´¦å·å‡å¯äº«å—æœ€é«˜ 5TB çš„äº‘å­˜å‚¨ç©ºé—´ã€‚</li><li><strong>è‡ªåŠ¨ç»­æœŸ</strong>ï¼šä¿æŒè´¦å·æ´»è·ƒï¼ˆå¦‚ API è°ƒç”¨ï¼‰ï¼Œå¾®è½¯é€šå¸¸ä¼šæŒ‰å¹´è‡ªåŠ¨ç»­æœŸã€‚</li></ul><div class="note danger flat"><p><strong>å…è´£å£°æ˜ï¼š</strong><br>æœ¬æ•™ç¨‹åˆ©ç”¨çš„æ˜¯å¾®è½¯å…¬å¼€çš„è¯•ç”¨/å¼€å‘è€…é“¾æ¥ï¼ˆå¦‚ Symphony/Dev æ¸ é“ï¼‰ã€‚æ­¤ç±»è®¢é˜…å­˜åœ¨ä¸ç¡®å®šæ€§ï¼Œå¾®è½¯éšæ—¶å¯èƒ½æ”¶å›æƒç›Šæˆ–å°ç¦è´¦å·ã€‚<br><strong>è¯·å‹¿åœ¨ OneDrive ä¸­å­˜å‚¨æ²¡æœ‰ä»»ä½•å¤‡ä»½çš„é‡è¦æ•°æ®ï¼å»ºè®®ä»…ä½œä¸ºä»å±/å¤‡ç”¨ç½‘ç›˜æˆ–ç”¨äºæ¿€æ´» Office è½¯ä»¶ã€‚</strong></p></div><hr><h2 id="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç©ºå…¨å±€ç®¡ç†å‘˜"><a href="#ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç©ºå…¨å±€ç®¡ç†å‘˜" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç©ºå…¨å±€ç®¡ç†å‘˜"></a>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç©ºå…¨å±€ç®¡ç†å‘˜</h2><p>æˆ‘ä»¬éœ€è¦å…ˆæ³¨å†Œä¸€ä¸ªæ²¡æœ‰ç»‘å®šä»»ä½•è®¢é˜…çš„â€œç©ºå£³â€å¾®è½¯ä¼ä¸šè´¦å·ã€‚</p><ol><li><p><strong>è®¿é—®æ³¨å†Œé“¾æ¥</strong>ï¼š<br><a href="https://signup.microsoft.com/get-started/signup?products=35dffc92-9eb4-4d5c-82c2-2582b37bb9c4&amp;culture=zh-cn&amp;country=cn&amp;ali=1">ç‚¹å‡»æ­¤å¤„è·³è½¬æ³¨å†Œé¡µé¢</a></p></li><li><p><strong>éªŒè¯é‚®ç®±</strong>ï¼š<br>è¾“å…¥ä»»æ„<strong>ç”µå­é‚®ä»¶</strong>ï¼Œç‚¹å‡» <strong>ä¸‹ä¸€æ­¥</strong>ï¼Œå¦‚æœæç¤ºè´¦å·ä¸å­˜åœ¨ï¼Œç‚¹å‡» <strong>åˆ›å»ºè´¦å·</strong>ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206221511839.webp" alt=""></p></li><li><p><strong>å¡«å†™ä¿¡æ¯</strong>ï¼š</p><ul><li><em>åŸºæœ¬æƒ…å†µ</em>ï¼šéšæ„å¡«å†™ï¼Œç‚¹å‡» <strong>ä¸‹ä¸€æ­¥</strong>ã€‚</li><li><em>ç™»å½•æ–¹æ³•</em>ï¼šè®¾ç½®ä½ çš„<strong>å…¨å±€ç®¡ç†å‘˜å‰ç¼€</strong>ï¼ˆå¦‚ <code>admin</code>ï¼‰å’Œ <strong>ä¸“ç”¨åŸŸå</strong>ï¼ˆ<code>xxxx.onmicrosoft.com</code>ï¼‰ã€‚</li><li><span class='p red'>é‡è¦ï¼šè¯·åŠ¡å¿…ç‰¢è®°æ­¤å¤„çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œè¿™æ˜¯ä½ çš„æœ€é«˜æƒé™è´¦å·ã€‚</span><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206221912207.webp" alt=""></li></ul></li><li><p><strong>è·³è¿‡æ— å…³é¡¹</strong>ï¼š</p><ul><li><em>åœ°å€</em>ï¼šéšæ„å¡«å†™ï¼ˆæç¤ºæ— æ³•è®¤è¯ä¹Ÿä¸ç”¨ç®¡ï¼‰ã€‚</li><li><em>çº³ç¨äººè¯†åˆ«å·</em>ï¼šéšæ„å¡«å†™ä¸€ä¸ªèº«ä»½è¯å·ã€‚</li><li><strong>å…³é”®ç‚¹</strong>ï¼šå½“æµç¨‹è¿›è¡Œåˆ° <strong>ä»˜æ¬¾</strong> æˆ– <strong>æ·»åŠ æ”¯ä»˜æ–¹å¼</strong> é¡µé¢æ—¶ï¼Œ<strong>ç›´æ¥å…³é—­ç½‘é¡µ</strong>ï¼Œä¸è¦å¡«å†™ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206222433419.webp" alt=""></li></ul></li></ol><p>æ­¤æ—¶ï¼Œä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªç©ºçš„å…¨å±€ç®¡ç†å‘˜è´¦å·ï¼š<code>admin@xxxx.onmicrosoft.com</code>ã€‚</p><hr><h2 id="ç¬¬äºŒæ­¥ï¼šæ¿€æ´»-E3-è®¢é˜…"><a href="#ç¬¬äºŒæ­¥ï¼šæ¿€æ´»-E3-è®¢é˜…" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ¿€æ´» E3 è®¢é˜…"></a>ç¬¬äºŒæ­¥ï¼šæ¿€æ´» E3 è®¢é˜…</h2><p>åˆ©ç”¨ç‰¹å®šçš„ Promo é“¾æ¥ï¼Œå°† E3 è®¢é˜…æŒ‚è½½åˆ°åˆšæ‰åˆ›å»ºçš„è´¦å·ä¸Šã€‚</p><ol><li><p><strong>è®¿é—®è´­ä¹°é“¾æ¥</strong>ï¼š<br><a href="https://admin.cloud.microsoft/?pid=C69E7747-2566-4897-8CBA-B998ED3BAB88&amp;quan=25&amp;bc=1&amp;sku=189a915c-fe4f-4ffa-bde4-85b9628d07a0&amp;ru=PDP#/Purchase/checkout">ç‚¹å‡»æ­¤å¤„è·³è½¬ E3 Dev è®¢é˜…ä¸‹å•é¡µ</a><br><em>(å¦‚æœæç¤ºç™»å½•ï¼Œè¯·ä½¿ç”¨ç¬¬ä¸€æ­¥åˆ›å»ºçš„ç®¡ç†å‘˜è´¦å·ç™»å½•)</em></p></li><li><p><strong>é…ç½®æ”¯ä»˜æ–¹å¼</strong>ï¼š<br>åœ¨è´­ç‰©è½¦é¡µé¢ï¼Œå°†ä»˜æ¬¾æ–¹å¼åˆ‡æ¢ä¸º <strong>Alipay (æ”¯ä»˜å®)</strong>ï¼Œç‚¹å‡» <strong>Save</strong>ã€‚</p><div class="note info flat"><p><strong>æç¤º</strong>ï¼šè¿™é‡Œè™½ç„¶æ˜¾ç¤ºé‡‘é¢ä¸º 0 å…ƒï¼Œä½†ä»éœ€éªŒè¯æ”¯ä»˜æ–¹å¼ã€‚é€‰æ‹©æ”¯ä»˜å®æ˜¯ä¸ºäº†ç»•è¿‡ä¿¡ç”¨å¡éªŒè¯ï¼Œ<strong>å®é™…ä¸ä¼šæ‰£è´¹</strong>ï¼Œä¹Ÿæ— éœ€æ‰«ç æ”¯ä»˜ã€‚</p></div></li><li><p><strong>å®Œæˆä¸‹å•</strong>ï¼š<br>ç‚¹å‡»å³ä¾§çš„ <strong>Place order</strong>ã€‚å½“çœ‹åˆ°å¦‚ä¸‹å›¾æç¤ºï¼Œå³è¡¨ç¤ºâ€œç™½å«–â€æˆåŠŸï¼<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206223119617.webp" alt=""></p></li><li><p><strong>éªŒè¯è®¸å¯è¯</strong>ï¼š<br>ç™»å½• <a href="https://admin.microsoft.com/">Microsoft Admin Center</a>ï¼Œåœ¨é¦–é¡µå³å¯çœ‹åˆ° <strong>Office 365 E3 Developer</strong> è®¢é˜…å·²æ¿€æ´»ï¼ŒåŒ…å« <strong>25</strong> ä¸ªè®¸å¯è¯ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206223327776.webp" alt=""></p></li><li><p><strong>å¡ BUG ç»­æœŸ (è½¬ä¸ºå¹´ä»˜)</strong>ï¼š</p><ul><li>è¿›å…¥ <strong>Billing (è´¦å•)</strong> -&gt; <strong>Your products (ä½ çš„äº§å“)</strong>ã€‚</li><li>ç‚¹å‡» <em>Office 365 E3 Develop</em> åçš„ä¸‰ä¸ªç‚¹ -&gt; <strong>Edit billing frequency (ç¼–è¾‘è´¦å•é¢‘ç‡)</strong>ã€‚</li><li>åˆ‡æ¢ä¸º <strong>Pay yearly (æŒ‰å¹´ä»˜è´¹)</strong>ï¼Œç‚¹å‡»ä¿å­˜ã€‚</li><li><em>æ•ˆæœï¼šè®¢é˜…ç»“æŸæ—¶é—´é€šå¸¸ä¼šè‡ªåŠ¨å»¶é•¿è‡³ä¸€å¹´åã€‚</em><br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206223451928.webp" alt=""></li></ul></li></ol><div class="note success flat"><p><strong>è¿›é˜¶ç©æ³• (å¤‡ç”¨é“¾æ¥)ï¼š</strong><br>å¦‚æœä¸æ»¡è¶³äº 25 ä¸ªè´¦å·ï¼ŒåŒä¸€è´¦å·å¯ä»¥é‡å¤è´­ä¹°å åŠ ã€‚<br>è¿˜å¯ä»¥å°è¯•ä»¥ä¸‹ <strong>200 ä¸‡ä¸ªè®¸å¯è¯</strong> çš„ Symphony è®¢é˜…ï¼ˆåŒä¸€è´¦å·äº’æ–¥ï¼Œåªèƒ½é€‰ä¸€ç§ï¼‰ï¼š</p><ul><li><strong>E1 Symphony (åç»­å¯åœ¨äº§å“ä¸­å‡çº§ä¸º E3)</strong>: <a href="https://admin.cloud.microsoft/?pid=A89F6463-1F7B-4F51-90DD-8C182637B002&amp;quan=2000000&amp;bc=1&amp;sku=18181a46-0d4e-45cd-891e-60aabd171b4e&amp;ru=PDP#/Purchase/checkout">ç‚¹å‡»è·³è½¬</a></li><li><strong>E3 Symphony (æ¨è)</strong>: <a href="https://admin.cloud.microsoft/?pid=C18B235E-8366-48B8-AE41-6E596C44944D&amp;quan=2000000&amp;bc=1&amp;sku=6fd2c87f-b296-42f0-b197-1e91e994b900&amp;ru=PDP#/Purchase/checkout">ç‚¹å‡»è·³è½¬</a></li></ul></div><hr><h2 id="ç¬¬ä¸‰æ­¥ï¼šæ‰©å®¹-OneDrive-è‡³-5TB"><a href="#ç¬¬ä¸‰æ­¥ï¼šæ‰©å®¹-OneDrive-è‡³-5TB" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šæ‰©å®¹ OneDrive è‡³ 5TB"></a>ç¬¬ä¸‰æ­¥ï¼šæ‰©å®¹ OneDrive è‡³ 5TB</h2><p>é»˜è®¤ç©ºé—´ä¸º 1TBï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä¿®æ”¹å…¨å±€è®¾ç½®ä»¥è§£é” 5TB æƒé™ã€‚</p><ol><li><p>åœ¨ Admin Center å·¦ä¾§å¯¼èˆªæ ï¼Œç‚¹å‡» <strong>SharePoint</strong> è¿›å…¥ç‹¬ç«‹ç®¡ç†åå°ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206225759887.webp" alt=""></p></li><li><p>ç‚¹å‡» <strong>Settings</strong> -&gt; <strong>OneDrive</strong> -&gt; <strong>Storage limit</strong>ã€‚</p></li><li><p>å°†é»˜è®¤å­˜å‚¨é™åˆ¶ä¿®æ”¹ä¸º <strong>5120</strong> (GB)ï¼Œç‚¹å‡»ä¿å­˜ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206225911266.webp" alt=""></p></li></ol><hr><h2 id="ç¬¬å››æ­¥ï¼šåˆ›å»ºå­ç”¨æˆ·-é™ä½é£é™©"><a href="#ç¬¬å››æ­¥ï¼šåˆ›å»ºå­ç”¨æˆ·-é™ä½é£é™©" class="headerlink" title="ç¬¬å››æ­¥ï¼šåˆ›å»ºå­ç”¨æˆ· (é™ä½é£é™©)"></a>ç¬¬å››æ­¥ï¼šåˆ›å»ºå­ç”¨æˆ· (é™ä½é£é™©)</h2><p><strong>å¼ºçƒˆå»ºè®®ä¸è¦ç›´æ¥ä½¿ç”¨å…¨å±€ç®¡ç†å‘˜è´¦å·è¿›è¡Œæ—¥å¸¸ä½¿ç”¨</strong>ï¼Œä»¥é™ä½é£æ§æ¦‚ç‡ã€‚è¯·åˆ›å»ºå­ç”¨æˆ·ç”¨äºæ¿€æ´» Office å’Œå­˜å‚¨æ•°æ®ã€‚</p><ol><li><p>å›åˆ° Admin Centerï¼Œç‚¹å‡» <strong>Users</strong> -&gt; <strong>Active users</strong> -&gt; <strong>Add a user</strong>ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206231129025.webp" alt=""></p></li><li><p>å¡«å†™å§“åã€ç”¨æˆ·åï¼Œ<strong>å‹¾é€‰åˆ†é… Office 365 E3 è®¸å¯è¯</strong>ï¼Œè§’è‰²ä¿æŒé»˜è®¤ï¼ˆUserï¼‰å³å¯ã€‚è®°å¾—å¤åˆ¶ä¿å­˜ç”Ÿæˆçš„å­ç”¨æˆ·å¯†ç ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206232010026.webp" alt=""></p></li><li><p><strong>æ£€æŸ¥ç©ºé—´</strong>ï¼š<br>åˆ›å»ºå®Œæˆåï¼Œç‚¹å‡»è¯¥ç”¨æˆ· -&gt; <strong>OneDrive</strong> é€‰é¡¹å¡ï¼ŒæŸ¥çœ‹ â€œStorage usedâ€ã€‚</p><ul><li>å¦‚æœæ˜¾ç¤º 1024GBï¼Œç‚¹å‡» <strong>Edit</strong> æ‰‹åŠ¨æ”¹ä¸º 5120GBã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206232508951.webp" alt=""></li><li>å¦‚æœæ˜¾ç¤ºâ€œæœªåˆå§‹åŒ–â€ï¼Œè¯·ä½¿ç”¨è¯¥å­è´¦å·ç™»å½•ä¸€æ¬¡ <a href="https://mysignins.microsoft.com">MySignins</a> å³å¯è§¦å‘åˆå§‹åŒ–ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206233457161.webp" alt=""></li></ul></li></ol><hr><h2 id="ç¬¬äº”æ­¥ï¼šåœ¨-Windows-ä¸Šä½¿ç”¨"><a href="#ç¬¬äº”æ­¥ï¼šåœ¨-Windows-ä¸Šä½¿ç”¨" class="headerlink" title="ç¬¬äº”æ­¥ï¼šåœ¨ Windows ä¸Šä½¿ç”¨"></a>ç¬¬äº”æ­¥ï¼šåœ¨ Windows ä¸Šä½¿ç”¨</h2><p>ç°åœ¨çš„å­è´¦å·å·²ç»æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„â€œå·¥ä½œè´¦å·â€äº†ï¼Œå¯ä»¥ä¸ä½ åŸæœ¬çš„â€œä¸ªäººè´¦å·â€å®Œç¾å…±å­˜ã€‚</p><h3 id="1-ç³»ç»Ÿçº§æ¥å…¥"><a href="#1-ç³»ç»Ÿçº§æ¥å…¥" class="headerlink" title="1. ç³»ç»Ÿçº§æ¥å…¥"></a>1. ç³»ç»Ÿçº§æ¥å…¥</h3><p>æ‰“å¼€ Windows <strong>è®¾ç½®</strong> -&gt; <strong>è´¦æˆ·</strong> -&gt; <strong>ç™»å½•å·¥ä½œæˆ–å­¦æ ¡è´¦å·</strong>ã€‚<br>ç‚¹å‡» <strong>è¿æ¥</strong>ï¼Œè¾“å…¥å­è´¦å·å’Œå¯†ç ç™»å½•ï¼Œè¿™å°†å…è®¸è¯¥è´¦å· SSO ç™»å½•ç³»ç»Ÿå†…çš„ Office åº”ç”¨ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206234015365.webp" alt=""></p><h3 id="2-æ¿€æ´»-Office"><a href="#2-æ¿€æ´»-Office" class="headerlink" title="2. æ¿€æ´» Office"></a>2. æ¿€æ´» Office</h3><p>æ‰“å¼€ Word æˆ– Excelï¼Œç‚¹å‡»å·¦ä¸‹è§’çš„ <strong>è´¦å·</strong> -&gt; <strong>åˆ‡æ¢è®¸å¯è¯</strong> -&gt; é€‰æ‹©åˆšåˆšæ·»åŠ çš„ E3 å­è´¦å·ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206234325170.webp" alt=""></p><h3 id="3-æŒ‚è½½-OneDrive"><a href="#3-æŒ‚è½½-OneDrive" class="headerlink" title="3. æŒ‚è½½ OneDrive"></a>3. æŒ‚è½½ OneDrive</h3><p>å³é”®ä»»åŠ¡æ  OneDrive å›¾æ ‡ -&gt; <strong>è®¾ç½®</strong>ã€‚<br>é€‰æ‹© <strong>è´¦æˆ·</strong> -&gt; <strong>æ·»åŠ è´¦æˆ·</strong>ï¼Œç™»å½•å­è´¦å·åï¼Œä½ çš„æ–‡ä»¶èµ„æºç®¡ç†å™¨ä¸­ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„ <code>OneDrive - &lt;ä½ çš„ç»„ç»‡å&gt;</code> æ–‡ä»¶å¤¹ï¼Œç‹¬äº« 5TB ç©ºé—´ã€‚<br><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251206234944249.webp" alt=""></p>]]></content>
    
    
    <summary type="html">è¯¦è§£å¦‚ä½•é€šè¿‡ç‰¹å®šæ¸ é“ç”³è¯· Microsoft 365 E3 å¼€å‘è€…è®¢é˜…ï¼Œå…è´¹è·å– 25 ä¸ªå­è´¦å·åŠ Office æ¡Œé¢ç‰ˆå…¨å®¶æ¡¶ï¼Œå¹¶æ•™ä½ å¦‚ä½•å°† OneDrive äº‘å­˜å‚¨ç©ºé—´æ‰©å®¹è‡³ 5TBã€‚</summary>
    
    
    
    <category term="èµ„æºåˆ†äº«" scheme="https://lijiabao9.github.io/categories/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/"/>
    
    <category term="ç¦åˆ©æ•™ç¨‹" scheme="https://lijiabao9.github.io/categories/%E8%B5%84%E6%BA%90%E5%88%86%E4%BA%AB/%E7%A6%8F%E5%88%A9%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Microsoft365" scheme="https://lijiabao9.github.io/tags/Microsoft365/"/>
    
    <category term="OneDrive" scheme="https://lijiabao9.github.io/tags/OneDrive/"/>
    
    <category term="ç™½å«–æŒ‡å—" scheme="https://lijiabao9.github.io/tags/%E7%99%BD%E5%AB%96%E6%8C%87%E5%8D%97/"/>
    
  </entry>
  
  <entry>
    <title>RustDesk è‡ªå»ºè¿œç¨‹æ¡Œé¢æœåŠ¡ï¼šå‘Šåˆ« TeamViewerï¼Œæ‹¥æŠ±å¼€æºä¸é€Ÿåº¦</title>
    <link href="https://lijiabao9.github.io/posts/aed46d6a.html"/>
    <id>https://lijiabao9.github.io/posts/aed46d6a.html</id>
    <published>2025-12-06T13:05:22.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://rustdesk.com/">RustDesk</a> æ˜¯ä¸€æ¬¾å¼€æºçš„è¿œç¨‹æ¡Œé¢è½¯ä»¶ï¼Œæ—¨åœ¨æˆä¸º TeamViewer å’Œ AnyDesk çš„æ›¿ä»£å“ã€‚</p><p>å®ƒæœ€å¤§çš„ä¼˜åŠ¿åœ¨äº<strong>æ”¯æŒè‡ªå»ºæœåŠ¡å™¨</strong>ã€‚é€šè¿‡è‡ªå»ºæœåŠ¡å™¨ï¼Œä½ å¯ä»¥æ‹¥æœ‰å®Œå…¨çš„æ•°æ®æŒæ§æƒï¼Œäº«å—å±€åŸŸç½‘èˆ¬çš„ä½å»¶è¿Ÿä½“éªŒï¼Œä¸”æ— éœ€æ”¯ä»˜æ˜‚è´µçš„å•†ä¸šæˆæƒè´¹ç”¨ã€‚</p><h2 id="æ ¸å¿ƒç»„ä»¶è§£æ"><a href="#æ ¸å¿ƒç»„ä»¶è§£æ" class="headerlink" title="æ ¸å¿ƒç»„ä»¶è§£æ"></a>æ ¸å¿ƒç»„ä»¶è§£æ</h2><p>åœ¨éƒ¨ç½²ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ RustDesk æœåŠ¡ç«¯çš„ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶ï¼š</p><ul><li><p><strong>hbbs (RustDesk ID/Rendezvous Server)</strong></p><ul><li><strong>å¿ƒè·³ä¸ä¿¡ä»¤æœåŠ¡å™¨</strong>ã€‚</li><li>ä¸»è¦è´Ÿè´£è®¾å¤‡çš„å¿ƒè·³ä¿æ´»ã€P2P è¿æ¥çš„æ‰“æ´ï¼ˆNAT ç©¿é€ï¼‰ã€ä»¥åŠè®¾å¤‡ ID çš„æ³¨å†Œä¸å‘ç°ã€‚</li><li>å®¢æˆ·ç«¯é€šè¿‡å®ƒæ¥â€œæ‰¾åˆ°â€å¯¹æ–¹ã€‚</li></ul></li><li><p><strong>hbbr (RustDesk Relay Server)</strong></p><ul><li><strong>ä¸­ç»§æœåŠ¡å™¨</strong>ã€‚</li><li>å½“ä¸¤ä¸ªå®¢æˆ·ç«¯æ— æ³•å»ºç«‹ç›´æ¥çš„ P2P è¿æ¥ï¼ˆä¾‹å¦‚éƒ½åœ¨ä¸¥æ ¼çš„ NAT åï¼‰æ—¶ï¼Œæ•°æ®å°†é€šè¿‡æ­¤æœåŠ¡å™¨è¿›è¡Œè½¬å‘ã€‚</li><li>è¿™æ˜¯ä¿è¯è¿æ¥æˆåŠŸç‡çš„å…œåº•æ–¹æ¡ˆã€‚</li></ul></li></ul><h2 id="éƒ¨ç½²æµç¨‹"><a href="#éƒ¨ç½²æµç¨‹" class="headerlink" title="éƒ¨ç½²æµç¨‹"></a>éƒ¨ç½²æµç¨‹</h2><p>æœ¬æ•™ç¨‹åŸºäº <strong>Docker Compose</strong> éƒ¨ç½²ï¼Œå¯å‚è€ƒï¼š<a href="/posts/3c32210.html">Ubuntu ç³»ç»Ÿ Docker å®‰è£…å…¨æŒ‡å—ï¼šå®˜æ–¹æºä¸å›½å†…é•œåƒåŠ é€Ÿ</a>ã€‚<br>ä½¿ç”¨ <code>network_mode: &quot;host&quot;</code> æ¨¡å¼ï¼Œè¿™æ˜¯å®˜æ–¹æ¨èçš„æœ€ç®€é…ç½®ï¼Œæ— éœ€ç¹ççš„ç«¯å£æ˜ å°„ã€‚</p><h3 id="1-åˆ›å»ºå·¥ä½œç›®å½•"><a href="#1-åˆ›å»ºå·¥ä½œç›®å½•" class="headerlink" title="1. åˆ›å»ºå·¥ä½œç›®å½•"></a>1. åˆ›å»ºå·¥ä½œç›®å½•</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /app/rustdesk</span><br><span class="line"><span class="built_in">cd</span> /app/rustdesk</span><br><span class="line"><span class="built_in">touch</span> docker-compose.yml</span><br></pre></td></tr></table></figure><h3 id="2-ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#2-ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="2. ç¼–å†™é…ç½®æ–‡ä»¶"></a>2. ç¼–å†™é…ç½®æ–‡ä»¶</h3><p>ç¼–è¾‘ <code>docker-compose.yml</code>ï¼š</p><figure class="highlight yaml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">hbbs:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">rustdesk/rustdesk-server:latest</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">hbbs</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/root</span></span><br><span class="line">    <span class="attr">network_mode:</span> <span class="string">&quot;host&quot;</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">hbbr</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">hbbr:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">rustdesk/rustdesk-server:latest</span></span><br><span class="line">    <span class="attr">command:</span> <span class="string">hbbr</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/root</span></span><br><span class="line">    <span class="attr">network_mode:</span> <span class="string">&quot;host&quot;</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br></pre></td></tr></table></figure><h3 id="3-å¯åŠ¨æœåŠ¡"><a href="#3-å¯åŠ¨æœåŠ¡" class="headerlink" title="3. å¯åŠ¨æœåŠ¡"></a>3. å¯åŠ¨æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><h2 id="é˜²ç«å¢™é…ç½®ï¼ˆå…³é”®ï¼‰"><a href="#é˜²ç«å¢™é…ç½®ï¼ˆå…³é”®ï¼‰" class="headerlink" title="é˜²ç«å¢™é…ç½®ï¼ˆå…³é”®ï¼‰"></a>é˜²ç«å¢™é…ç½®ï¼ˆå…³é”®ï¼‰</h2><p>RustDesk æ¶‰åŠçš„ç«¯å£è¾ƒå¤šï¼Œ<strong>é˜²ç«å¢™é…ç½®é”™è¯¯æ˜¯å¯¼è‡´æ— æ³•è¿æ¥çš„æœ€å¸¸è§åŸå› </strong>ã€‚</p><p>è¯·åœ¨äº‘æœåŠ¡å™¨çš„å®‰å…¨ç»„æˆ–é˜²ç«å¢™ï¼ˆUFW/IPTablesï¼‰ä¸­æ”¾è¡Œä»¥ä¸‹ç«¯å£ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">ç«¯å£</th><th style="text-align:left">åè®®</th><th style="text-align:left">ç”¨é€”</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><strong>21115</strong></td><td style="text-align:left">TCP</td><td style="text-align:left">HBBS</td><td style="text-align:left">NAT ç±»å‹æµ‹è¯•</td></tr><tr><td style="text-align:left"><strong>21116</strong></td><td style="text-align:left"><strong>TCP</strong></td><td style="text-align:left">HBBS</td><td style="text-align:left">ID æ³¨å†Œä¸å¿ƒè·³æœåŠ¡</td></tr><tr><td style="text-align:left"><strong>21116</strong></td><td style="text-align:left"><strong>UDP</strong></td><td style="text-align:left">HBBS</td><td style="text-align:left"><strong>é‡è¦ï¼š</strong> ID æ³¨å†Œä¸å¿ƒè·³ï¼ˆå¿…é¡»æ”¾è¡Œï¼‰</td></tr><tr><td style="text-align:left"><strong>21117</strong></td><td style="text-align:left">TCP</td><td style="text-align:left">HBBR</td><td style="text-align:left">ä¸­ç»§æœåŠ¡ï¼ˆæ•°æ®è½¬å‘ï¼‰</td></tr></tbody></table></div><div class="note info flat"><p><strong>è¡¥å……è¯´æ˜ï¼š</strong></p><ul><li><strong>21114</strong>ï¼šä»… Pro ç‰ˆæœ¬ï¼ˆä»˜è´¹ç‰ˆï¼‰çš„ API ç«¯å£ï¼Œå¼€æºç‰ˆæ— éœ€æ”¾è¡Œã€‚</li><li><strong>21118 - 21119</strong>ï¼šç”¨äºæ”¯æŒç½‘é¡µç‰ˆå®¢æˆ·ç«¯ï¼ˆWeb Clientï¼‰ï¼Œå¦‚æœä¸éœ€è¦ç½‘é¡µç‰ˆå¯ä¸æ”¾è¡Œã€‚</li></ul></div><h2 id="è·å–è¿æ¥å¯†é’¥-Key"><a href="#è·å–è¿æ¥å¯†é’¥-Key" class="headerlink" title="è·å–è¿æ¥å¯†é’¥ (Key)"></a>è·å–è¿æ¥å¯†é’¥ (Key)</h2><p>ä¸ºäº†é˜²æ­¢æœªç»æˆæƒçš„äººä½¿ç”¨ä½ çš„ä¸­ç»§æœåŠ¡å™¨æ¶ˆè€—æµé‡ï¼Œæˆ‘ä»¬éœ€è¦è·å–æœåŠ¡å™¨è‡ªåŠ¨ç”Ÿæˆçš„å…¬é’¥ã€‚</p><p>æœåŠ¡å¯åŠ¨åï¼Œå¯†é’¥æ–‡ä»¶ä½äºæŒ‚è½½çš„ <code>./data</code> ç›®å½•ä¸­ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹å…¬é’¥ï¼ˆæ³¨æ„æ˜¯ .pub ç»“å°¾çš„æ–‡ä»¶ï¼‰</span></span><br><span class="line"><span class="built_in">cat</span> /app/rustdesk/data/id_ed25519.pub</span><br></pre></td></tr></table></figure><p>è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼ˆå¦‚ <code>8B/x+...=</code>ï¼‰å³ä¸º Keyï¼Œå¤åˆ¶ä¿å­˜ã€‚</p><h2 id="å®¢æˆ·ç«¯é…ç½®"><a href="#å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å®¢æˆ·ç«¯é…ç½®"></a>å®¢æˆ·ç«¯é…ç½®</h2><p>ä¸‹è½½ <a href="https://github.com/rustdesk/rustdesk/releases">RustDesk å®¢æˆ·ç«¯</a>ï¼ˆæ”¯æŒ Windows, Mac, Linux, Android, iOSï¼‰ã€‚</p><ol><li>æ‰“å¼€å®¢æˆ·ç«¯ï¼Œç‚¹å‡» <strong>è®¾ç½®</strong>ï¼ˆå³ä¸Šè§’ä¸‰æ¡æ¨ªçº¿å›¾æ ‡ï¼‰ -> <strong>ç½‘ç»œ</strong>ã€‚</li><li>æ‰¾åˆ°é¡¶éƒ¨ <strong>ID / ä¸­ç»§æœåŠ¡å™¨</strong> é€‰é¡¹ã€‚</li><li>å¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š<ul><li><strong>ID æœåŠ¡å™¨</strong>ï¼šå¡«å…¥ä½ çš„æœåŠ¡å™¨ IPï¼ˆæˆ–åŸŸåï¼‰ã€‚</li><li><strong>ä¸­ç»§æœåŠ¡å™¨</strong>ï¼šå¡«å…¥ä½ çš„æœåŠ¡å™¨ IPï¼ˆæˆ–åŸŸåï¼‰ã€‚</li><li>API æœåŠ¡å™¨ï¼šç•™ç©ºï¼ˆé™¤éä½¿ç”¨ Pro ç‰ˆï¼‰ã€‚</li><li><strong>Key</strong>ï¼šå¡«å…¥ä¸Šä¸€æ­¥è·å–çš„å…¬é’¥å­—ç¬¦ä¸²ã€‚</li></ul></li></ol><p>ç‚¹å‡» <strong>åº”ç”¨</strong>ã€‚</p><p>å›åˆ°ä¸»ç•Œé¢ï¼Œå¦‚æœåº•éƒ¨çŠ¶æ€æ æ˜¾ç¤º <strong>â€œå°±ç»ªâ€</strong>ï¼Œä¸”æ²¡æœ‰æŠ¥é”™æç¤ºï¼Œè¯´æ˜è¿æ¥è‡ªå»ºæœåŠ¡å™¨æˆåŠŸã€‚ç°åœ¨ä½ å¯ä»¥äº«å—é«˜æ¸…ã€æµç•…çš„è¿œç¨‹æ§åˆ¶ä½“éªŒäº†ï¼</p>]]></content>
    
    
    <summary type="html">è¯¦è§£å¦‚ä½•é€šè¿‡ Docker Compose éƒ¨ç½² RustDesk ç§æœ‰æœåŠ¡å™¨ï¼ˆID æœåŠ¡å™¨ + ä¸­ç»§æœåŠ¡å™¨ï¼‰ï¼Œå½»åº•è§£å†³è¿œç¨‹æ¡Œé¢å¡é¡¿ã€ç”»è´¨å·®å’Œä»˜è´¹é™åˆ¶é—®é¢˜ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="æœåŠ¡æ­å»º" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Docker" scheme="https://lijiabao9.github.io/tags/Docker/"/>
    
    <category term="è¿ç»´" scheme="https://lijiabao9.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
    <category term="RustDesk" scheme="https://lijiabao9.github.io/tags/RustDesk/"/>
    
    <category term="è¿œç¨‹æ¡Œé¢" scheme="https://lijiabao9.github.io/tags/%E8%BF%9C%E7%A8%8B%E6%A1%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>æç®€ä¸»ä¹‰ç»Ÿè®¡ï¼šUmami ç§æœ‰åŒ–éƒ¨ç½²ä¸ Hexo åšå®¢é›†æˆæŒ‡å—</title>
    <link href="https://lijiabao9.github.io/posts/fdad30aa.html"/>
    <id>https://lijiabao9.github.io/posts/fdad30aa.html</id>
    <published>2025-12-05T15:15:49.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://umami.is/">Umami</a> æ˜¯ä¸€ä¸ªç®€å•ã€æ˜“ç”¨ä¸”æ³¨é‡éšç§çš„å¼€æºç½‘ç«™åˆ†ææ›¿ä»£æ–¹æ¡ˆã€‚ç›¸æ¯” Google Analyticsï¼Œå®ƒæ›´è½»é‡ï¼Œä¸”å®Œå…¨ç”±ä½ è‡ªå·±æŒæ¡æ•°æ®ã€‚</p><p>æœ¬æ–‡å°†å¸¦ä½ é€šè¿‡ <strong>Docker Compose</strong> å®Œæˆå…¨æµç¨‹éƒ¨ç½²ã€‚</p><h2 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h2><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„æœåŠ¡å™¨å·²å°±ç»ªï¼š</p><ol><li><strong>æœåŠ¡å™¨ç¯å¢ƒ</strong>ï¼šå·²å®‰è£… Docker å’Œ Docker Composeã€‚<ul><li>å‚è€ƒï¼š<a href="/posts/3c32210.html">Ubuntu ç³»ç»Ÿ Docker å®‰è£…å…¨æŒ‡å—ï¼šå®˜æ–¹æºä¸å›½å†…é•œåƒåŠ é€Ÿ</a></li></ul></li><li><strong>åŸŸåä¸è¯ä¹¦</strong>ï¼šæ‹¥æœ‰ä¸€ä¸ªåŸŸåå¹¶å®Œæˆäº† SSL è¯ä¹¦ç”³è¯·ã€‚<ul><li>å‚è€ƒï¼š<a href="/posts/e94f4538.html">ä»é›¶å¼€å§‹ï¼šåŸŸåè´­ä¹°ã€Cloudflare æ‰˜ç®¡ä¸ Nginx è‡ªåŠ¨åŒ– HTTPS é…ç½®å…¨æŒ‡å—</a></li></ul></li></ol><hr><h2 id="äºŒã€Docker-æœåŠ¡éƒ¨ç½²"><a href="#äºŒã€Docker-æœåŠ¡éƒ¨ç½²" class="headerlink" title="äºŒã€Docker æœåŠ¡éƒ¨ç½²"></a>äºŒã€Docker æœåŠ¡éƒ¨ç½²</h2><h3 id="1-åˆ›å»ºå·¥ä½œç›®å½•"><a href="#1-åˆ›å»ºå·¥ä½œç›®å½•" class="headerlink" title="1. åˆ›å»ºå·¥ä½œç›®å½•"></a>1. åˆ›å»ºå·¥ä½œç›®å½•</h3><p>ç™»å½•æœåŠ¡å™¨ï¼Œå»ºç«‹ Umami çš„æ•°æ®å­˜å‚¨ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /app/umami</span><br><span class="line"><span class="built_in">cd</span> /app/umami</span><br></pre></td></tr></table></figure><h3 id="2-ç¼–å†™é…ç½®-docker-compose-yml"><a href="#2-ç¼–å†™é…ç½®-docker-compose-yml" class="headerlink" title="2. ç¼–å†™é…ç½® (docker-compose.yml)"></a>2. ç¼–å†™é…ç½® (docker-compose.yml)</h3><p>åˆ›å»ºå¹¶ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure><p>å†™å…¥ä»¥ä¸‹å†…å®¹ã€‚è¯·æ³¨æ„ï¼š</p><ul><li><strong>APP_SECRET</strong>ï¼šè¿™æ˜¯åŠ å¯†ç›å€¼ï¼ŒåŠ¡å¿…ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²ï¼ˆå¯åœ¨ç»ˆç«¯è¿è¡Œ <code>openssl rand -hex 32</code> ç”Ÿæˆï¼‰ã€‚</li><li><strong>ç«¯å£æ˜ å°„</strong>ï¼šå°†å®¿ä¸»æœºçš„ <code>20001</code> æ˜ å°„åˆ°å®¹å™¨çš„ <code>3000</code>ã€‚</li></ul><figure class="highlight yaml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">umami:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">ghcr.io/umami-software/umami:latest</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;20002:3000&quot;</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">DATABASE_URL:</span> <span class="string">postgresql://umami:umami@db:5432/umami</span></span><br><span class="line">      <span class="attr">APP_SECRET:</span> <span class="string">replace-me-with-a-random-string</span>  <span class="comment"># &lt;--- åŠ¡å¿…ä¿®æ”¹è¿™é‡Œ</span></span><br><span class="line">    <span class="attr">depends_on:</span></span><br><span class="line">      <span class="attr">db:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">service_healthy</span></span><br><span class="line">    <span class="attr">init:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD-SHELL&quot;</span>, <span class="string">&quot;curl http://localhost:3000/api/heartbeat&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">5s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">5s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">db:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">postgres:15-alpine</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">POSTGRES_DB:</span> <span class="string">umami</span></span><br><span class="line">      <span class="attr">POSTGRES_USER:</span> <span class="string">umami</span></span><br><span class="line">      <span class="attr">POSTGRES_PASSWORD:</span> <span class="string">umami</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./umami-db-data:/var/lib/postgresql/data</span> <span class="comment"># æ•°æ®æŒä¹…åŒ–æŒ‚è½½</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">healthcheck:</span></span><br><span class="line">      <span class="attr">test:</span> [<span class="string">&quot;CMD-SHELL&quot;</span>, <span class="string">&quot;pg_isready -U $$&#123;POSTGRES_USER&#125; -d $$&#123;POSTGRES_DB&#125;&quot;</span>]</span><br><span class="line">      <span class="attr">interval:</span> <span class="string">5s</span></span><br><span class="line">      <span class="attr">timeout:</span> <span class="string">5s</span></span><br><span class="line">      <span class="attr">retries:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><h3 id="3-å¯åŠ¨æœåŠ¡"><a href="#3-å¯åŠ¨æœåŠ¡" class="headerlink" title="3. å¯åŠ¨æœåŠ¡"></a>3. å¯åŠ¨æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>http://æœåŠ¡å™¨IP:20002</code> è®¿é—®åå°ã€‚ä½†ä¸ºäº†å®‰å…¨ï¼Œæˆ‘ä»¬æ¥ä¸‹é…ç½® Nginx åå‘ä»£ç†ã€‚</p><hr><h2 id="ä¸‰ã€Nginx-åå‘ä»£ç†ä¸-HTTPS"><a href="#ä¸‰ã€Nginx-åå‘ä»£ç†ä¸-HTTPS" class="headerlink" title="ä¸‰ã€Nginx åå‘ä»£ç†ä¸ HTTPS"></a>ä¸‰ã€Nginx åå‘ä»£ç†ä¸ HTTPS</h2><p>ä¸ºäº†é€šè¿‡åŸŸåå®‰å…¨è®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® Nginx åå‘ä»£ç†ã€‚</p><h3 id="1-ç¼–å†™-Nginx-é…ç½®"><a href="#1-ç¼–å†™-Nginx-é…ç½®" class="headerlink" title="1. ç¼–å†™ Nginx é…ç½®"></a>1. ç¼–å†™ Nginx é…ç½®</h3><p>åˆ›å»ºé…ç½®æ–‡ä»¶ <code>vi /etc/nginx/sites-available/umami.131495.xyz</code>ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> umami.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span></span><br><span class="line">    <span class="attribute">server_name</span> umami.<span class="number">131495</span>.xyz;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/umami.access.log proxy_json;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/umami.<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†è®¾ç½®</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:20002;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å¯ç”¨å¹¶é‡è½½"><a href="#2-å¯ç”¨å¹¶é‡è½½" class="headerlink" title="2. å¯ç”¨å¹¶é‡è½½"></a>2. å¯ç”¨å¹¶é‡è½½</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè½¯é“¾æ¥</span></span><br><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/umami.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å¹¶é‡å¯</span></span><br><span class="line">nginx -t &amp;&amp; systemctl reload nginx</span><br></pre></td></tr></table></figure><h3 id="3-åŸŸåDNSè®°å½•"><a href="#3-åŸŸåDNSè®°å½•" class="headerlink" title="3. åŸŸåDNSè®°å½•"></a>3. åŸŸåDNSè®°å½•</h3><p>ç»™åŸŸåæ·»åŠ å¯¹åº”çš„ A è®°å½•ï¼Œå°† <code>umami.131495.xyz</code> è§£æåˆ°æœåŠ¡å™¨çš„ IP åœ°å€ã€‚</p><p>ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ <code>https://umami.131495.xyz</code> è®¿é—®äº†ã€‚</p><hr><h2 id="å››ã€åˆå§‹åŒ–é…ç½®"><a href="#å››ã€åˆå§‹åŒ–é…ç½®" class="headerlink" title="å››ã€åˆå§‹åŒ–é…ç½®"></a>å››ã€åˆå§‹åŒ–é…ç½®</h2><h3 id="1-ä¿®æ”¹é»˜è®¤å¯†ç "><a href="#1-ä¿®æ”¹é»˜è®¤å¯†ç " class="headerlink" title="1. ä¿®æ”¹é»˜è®¤å¯†ç "></a>1. ä¿®æ”¹é»˜è®¤å¯†ç </h3><p>è®¿é—® <code>https://umami.131495.xyz</code>ã€‚</p><ul><li>é»˜è®¤è´¦å·ï¼š<code>admin</code></li><li>é»˜è®¤å¯†ç ï¼š<code>umami</code></li></ul><p><strong>é‡è¦</strong>ï¼šç™»å½•åï¼Œç«‹å³ç‚¹å‡»å·¦ä¸Šè§’å¤´åƒ -> <strong>Settings</strong> -> <strong>Profile</strong> -> <strong>Change password</strong> ä¿®æ”¹å¯†ç ã€‚</p><h3 id="2-æ·»åŠ ç½‘ç«™"><a href="#2-æ·»åŠ ç½‘ç«™" class="headerlink" title="2. æ·»åŠ ç½‘ç«™"></a>2. æ·»åŠ ç½‘ç«™</h3><p>åœ¨ <strong>Websites</strong> é¡µé¢ç‚¹å‡» <strong>Add website</strong>ï¼Œå¡«å…¥ä½ çš„ <code>ç½‘ç«™åç§°</code> å’Œ <code>ç½‘ç«™ç½‘å€</code>ã€‚</p><p>ä¿å­˜åï¼Œç‚¹å‡»åˆ—è¡¨ä¸­çš„ <strong>Edit</strong> æŒ‰é’®ï¼Œè·å– <strong>Website ID</strong>ï¼ˆä¸€ä¸² UUIDï¼‰ã€‚</p><hr><h2 id="äº”ã€é›†æˆåˆ°-Hexo-Butterfly-ä¸»é¢˜"><a href="#äº”ã€é›†æˆåˆ°-Hexo-Butterfly-ä¸»é¢˜" class="headerlink" title="äº”ã€é›†æˆåˆ° Hexo (Butterfly ä¸»é¢˜)"></a>äº”ã€é›†æˆåˆ° Hexo (Butterfly ä¸»é¢˜)</h2><p>Butterfly ä¸»é¢˜åŸç”Ÿæ”¯æŒ Umami ç»Ÿè®¡ï¼Œé…ç½®éå¸¸ç®€å•ã€‚</p><h3 id="1-ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#1-ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="1. ä¿®æ”¹ä¸»é¢˜é…ç½®"></a>1. ä¿®æ”¹ä¸»é¢˜é…ç½®</h3><p>ç¼–è¾‘ <code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><figcaption><span>_config.butterfly.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…³é—­ä¸è’œå­ (å¯é€‰ï¼Œé¿å…åŠŸèƒ½é‡å¤)</span></span><br><span class="line"><span class="attr">busuanzi:</span></span><br><span class="line">  <span class="attr">site_uv:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">site_pv:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">page_pv:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯ç”¨ Umami</span></span><br><span class="line"><span class="attr">umami_analytics:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">serverURL:</span> <span class="string">https://umami.131495.xyz</span>  <span class="comment"># ä½ çš„ Umami åŸŸå</span></span><br><span class="line">  <span class="attr">website_id:</span> <span class="string">xxxxx-xxxx-xxxx-xxxx-xxxxxxx</span> <span class="comment"># åˆšåˆšè·å–çš„ UUID</span></span><br><span class="line">  <span class="attr">script_name:</span> <span class="string">script.js</span></span><br><span class="line">  <span class="attr">option:</span></span><br><span class="line">  <span class="comment"># å¼€å¯ PV/UV å±•ç¤º (éœ€è¦ Token)</span></span><br><span class="line">  <span class="attr">UV_PV:</span></span><br><span class="line">    <span class="attr">site_uv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">site_pv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">page_pv:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">token:</span> <span class="string">å¡«å†™è®¿é—®ä»¤ç‰Œ</span> <span class="comment"># ä¸‹æ–‡è¯´æ˜å¦‚ä½•è·å–</span></span><br></pre></td></tr></table></figure><h3 id="2-è·å–-Access-Token-ç¡¬æ ¸æ–¹æ³•"><a href="#2-è·å–-Access-Token-ç¡¬æ ¸æ–¹æ³•" class="headerlink" title="2. è·å– Access Token (ç¡¬æ ¸æ–¹æ³•)"></a>2. è·å– Access Token (ç¡¬æ ¸æ–¹æ³•)</h3><p>Butterfly ä¸»é¢˜é€šè¿‡è°ƒç”¨ Umami API æ¥å±•ç¤ºé¡µé¢è®¿é—®é‡ï¼Œè¿™éœ€è¦é€šè¿‡ Token è¿›è¡Œé‰´æƒã€‚</p><p>ç›®å‰æœ€å¿«æ·çš„è·å–æ–¹æ³•ï¼ˆé’ˆå¯¹è‡ªæ‰˜ç®¡ç‰ˆï¼‰ï¼š</p><ol><li>ç”¨ Chrome æµè§ˆå™¨ç™»å½•ä½ çš„ Umami åå°ã€‚</li><li>æŒ‰ <code>F12</code> æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ° <strong>Network (ç½‘ç»œ)</strong> æ ‡ç­¾ã€‚</li><li>åˆ·æ–°é¡µé¢ï¼Œéšä¾¿ç‚¹å‡»ä¸€ä¸ª API è¯·æ±‚ï¼ˆå¦‚ <code>stats</code> æˆ– <code>websites</code>ï¼‰ã€‚</li><li>åœ¨ <strong>Request Headers (è¯·æ±‚å¤´)</strong> ä¸­æ‰¾åˆ° <code>Authorization</code> å­—æ®µã€‚</li><li>å¤åˆ¶ <code>Bearer</code> åé¢çš„ä¸€é•¿ä¸²å­—ç¬¦ï¼Œè¿™å°±æ˜¯ä½ çš„ Tokenã€‚</li></ol><p>æˆ–è€…é€šè¿‡è°ƒç”¨ç™»å½• API è·å–ï¼šå‚è€ƒ <a href="https://umami.is/docs/api/authentication">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h3 id="3-éƒ¨ç½²åšå®¢"><a href="#3-éƒ¨ç½²åšå®¢" class="headerlink" title="3. éƒ¨ç½²åšå®¢"></a>3. éƒ¨ç½²åšå®¢</h3><p>é‡æ–°éƒ¨ç½²åšå®¢åï¼Œæ­¤æ—¶çš„è®¿é—®é‡æ•°æ®å°†ç”± Umami æ¥ç®¡ã€‚</p>]]></content>
    
    
    <summary type="html">æ‘’å¼ƒ Google Analyticsï¼Œæ‹¥æŠ±éšç§ä¿æŠ¤ã€‚æœ¬æ–‡è¯¦è§£å¦‚ä½•é€šè¿‡ Docker Compose éƒ¨ç½² Umami ç»Ÿè®¡æœåŠ¡ï¼Œé…ç½® Nginx HTTPS åä»£ï¼Œå¹¶å°†å…¶æ— ç¼é›†æˆåˆ° Hexo Butterfly ä¸»é¢˜ä¸­ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="æœåŠ¡æ­å»º" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://lijiabao9.github.io/tags/Hexo/"/>
    
    <category term="Docker" scheme="https://lijiabao9.github.io/tags/Docker/"/>
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="Umami" scheme="https://lijiabao9.github.io/tags/Umami/"/>
    
  </entry>
  
  <entry>
    <title>Artalk ç§æœ‰åŒ–éƒ¨ç½²å…¨æŒ‡å—ï¼šDocker + Nginx + Cloudflare æ‰“é€ ç‹¬ç«‹è¯„è®ºç³»ç»Ÿ</title>
    <link href="https://lijiabao9.github.io/posts/1b40d3bb.html"/>
    <id>https://lijiabao9.github.io/posts/1b40d3bb.html</id>
    <published>2025-12-05T13:04:00.000Z</published>
    <updated>2025-12-17T17:57:48.698Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://artalk.js.org/">Artalk</a> æ˜¯ä¸€æ¬¾ç®€æ´ã€è½»é‡ä¸”åŠŸèƒ½å¼ºå¤§çš„è‡ªæ‰˜ç®¡è¯„è®ºç³»ç»Ÿã€‚ç›¸æ¯”äº Valine æˆ– Gitalkï¼Œå®ƒæä¾›äº†æ›´å®Œå–„çš„ç®¡ç†åå°å’Œæ•°æ®éšç§æŒæ§æƒã€‚</p><p>æœ¬æ–‡å°†æ¼”ç¤ºå¦‚ä½•é€šè¿‡ Docker Compose éƒ¨ç½² Artalkï¼Œå¹¶å°†å…¶é›†æˆåˆ° Hexo åšå®¢ï¼ˆButterfly ä¸»é¢˜ï¼‰ä¸­ã€‚</p><h2 id="ä¸€ã€å‰ç½®å‡†å¤‡"><a href="#ä¸€ã€å‰ç½®å‡†å¤‡" class="headerlink" title="ä¸€ã€å‰ç½®å‡†å¤‡"></a>ä¸€ã€å‰ç½®å‡†å¤‡</h2><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å®Œæˆäº†ä»¥ä¸‹åŸºç¡€ç¯å¢ƒçš„æ­å»ºï¼š</p><ol><li><strong>æœåŠ¡å™¨ç¯å¢ƒ</strong>ï¼šå·²å®‰è£… Docker å’Œ Docker Composeã€‚<ul><li>å‚è€ƒï¼š<a href="/posts/3c32210.html">Ubuntu ç³»ç»Ÿ Docker å®‰è£…å…¨æŒ‡å—ï¼šå®˜æ–¹æºä¸å›½å†…é•œåƒåŠ é€Ÿ</a></li></ul></li><li><strong>åŸŸåä¸è¯ä¹¦</strong>ï¼šæ‹¥æœ‰ä¸€ä¸ªåŸŸåå¹¶å®Œæˆäº† SSL è¯ä¹¦ç”³è¯·ã€‚<ul><li>å‚è€ƒï¼š<a href="/posts/e94f4538.html">ä»é›¶å¼€å§‹ï¼šåŸŸåè´­ä¹°ã€Cloudflare æ‰˜ç®¡ä¸ Nginx è‡ªåŠ¨åŒ– HTTPS é…ç½®å…¨æŒ‡å—</a></li></ul></li></ol><hr><h2 id="äºŒã€æœåŠ¡ç«¯éƒ¨ç½²"><a href="#äºŒã€æœåŠ¡ç«¯éƒ¨ç½²" class="headerlink" title="äºŒã€æœåŠ¡ç«¯éƒ¨ç½²"></a>äºŒã€æœåŠ¡ç«¯éƒ¨ç½²</h2><h3 id="1-åˆ›å»ºå·¥ä½œç›®å½•"><a href="#1-åˆ›å»ºå·¥ä½œç›®å½•" class="headerlink" title="1. åˆ›å»ºå·¥ä½œç›®å½•"></a>1. åˆ›å»ºå·¥ä½œç›®å½•</h3><p>ç™»å½•æœåŠ¡å™¨ï¼Œå»ºç«‹ Artalk çš„æ•°æ®å­˜å‚¨ç›®å½•ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /app/artalk</span><br><span class="line"><span class="built_in">cd</span> /app/artalk</span><br></pre></td></tr></table></figure><h3 id="2-ç¼–å†™-Docker-Compose"><a href="#2-ç¼–å†™-Docker-Compose" class="headerlink" title="2. ç¼–å†™ Docker Compose"></a>2. ç¼–å†™ Docker Compose</h3><p>åˆ›å»º <code>docker-compose.yml</code> æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim docker-compose.yml</span><br></pre></td></tr></table></figure><p>å†™å…¥ä»¥ä¸‹é…ç½®ï¼ˆ<strong>æ³¨æ„ä¿®æ”¹ <code>ATK_SITE_URL</code> ä¸ºä½ çš„åšå®¢åœ°å€</strong>ï¼‰ï¼š</p><figure class="highlight yaml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">artalk:</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">artalk</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">artalk/artalk-go</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">unless-stopped</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">20001</span><span class="string">:23366</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/data</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">TZ=Asia/Shanghai</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ATK_LOCALE=zh-CN</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ATK_SITE_DEFAULT=Gabrielçš„åšå®¢</span>    <span class="comment"># é»˜è®¤ç«™ç‚¹åç§°</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">ATK_SITE_URL=https://lijiabao9.github.io</span>  <span class="comment"># ä½ çš„åšå®¢å‰ç«¯åœ°å€ï¼ˆç”¨äºè·¨åŸŸä¿¡ä»»ï¼‰</span></span><br></pre></td></tr></table></figure><h3 id="3-å¯åŠ¨æœåŠ¡"><a href="#3-å¯åŠ¨æœåŠ¡" class="headerlink" title="3. å¯åŠ¨æœåŠ¡"></a>3. å¯åŠ¨æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker compose up -d</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å®¹å™¨å¯åŠ¨åï¼Œåˆ›å»ºç®¡ç†å‘˜è´¦å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it artalk artalk admin</span><br></pre></td></tr></table></figure><p><em>æŒ‰æç¤ºè¾“å…¥ç®¡ç†å‘˜æ˜µç§°ã€é‚®ç®±å’Œå¯†ç ã€‚</em><br>è´¦å·ä¿¡æ¯åç»­å¯è¿›è¡Œä¿®æ”¹ã€‚</p><p>æ­¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>http://æœåŠ¡å™¨IP:20001</code> è®¿é—®åå°ã€‚ä½†ä¸ºäº†å®‰å…¨ï¼Œæˆ‘ä»¬æ¥ä¸‹é…ç½® Nginx åå‘ä»£ç†ã€‚</p><hr><h2 id="ä¸‰ã€Nginx-åå‘ä»£ç†ä¸-HTTPS"><a href="#ä¸‰ã€Nginx-åå‘ä»£ç†ä¸-HTTPS" class="headerlink" title="ä¸‰ã€Nginx åå‘ä»£ç†ä¸ HTTPS"></a>ä¸‰ã€Nginx åå‘ä»£ç†ä¸ HTTPS</h2><p>ä¸ºäº†å¯ç”¨ HTTPS å¹¶éšè—éæ ‡å‡†ç«¯å£ï¼Œæˆ‘ä»¬éœ€è¦é…ç½® Nginxã€‚</p><h3 id="1-ç¼–å†™-Nginx-é…ç½®"><a href="#1-ç¼–å†™-Nginx-é…ç½®" class="headerlink" title="1. ç¼–å†™ Nginx é…ç½®"></a>1. ç¼–å†™ Nginx é…ç½®</h3><p>åˆ›å»ºé…ç½®æ–‡ä»¶ <code>vi /etc/nginx/sites-available/artalk.131495.xyz</code>ï¼š</p><figure class="highlight nginx"><figcaption><span>artalk.131495.xyz</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> artalk.<span class="number">131495</span>.xyz;</span><br><span class="line">    <span class="attribute">return</span> <span class="number">301</span> https://<span class="variable">$host</span><span class="variable">$request_uri</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">443</span> ssl;</span><br><span class="line">    <span class="attribute">listen</span> [::]:<span class="number">443</span> ssl;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span></span><br><span class="line">    <span class="attribute">server_name</span> artalk.<span class="number">131495</span>.xyz;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># è¯ä¹¦é…ç½®</span></span><br><span class="line">    <span class="attribute">ssl_certificate</span> /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">    <span class="attribute">ssl_certificate_key</span> /cert/acme_131495.xyz/key.pem;</span><br><span class="line">    <span class="attribute">ssl_ciphers</span> HIGH:!aNULL:!MD5;</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># <span class="doctag">TODO:</span> ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span></span><br><span class="line">    <span class="attribute">access_log</span> /var/log/nginx/artalk.access.log proxy_json;</span><br><span class="line">    <span class="attribute">error_log</span> /var/log/nginx/artalk.<span class="literal">error</span>.log;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åå‘ä»£ç†è®¾ç½®</span></span><br><span class="line">    <span class="section">location</span> / &#123;</span><br><span class="line">        <span class="comment"># <span class="doctag">TODO:</span> ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span></span><br><span class="line">        <span class="attribute">proxy_pass</span> http://127.0.0.1:20001;</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># ä»£ç†å‚æ•°</span></span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-å¯ç”¨é…ç½®"><a href="#2-å¯ç”¨é…ç½®" class="headerlink" title="2. å¯ç”¨é…ç½®"></a>2. å¯ç”¨é…ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè½¯é“¾æ¥</span></span><br><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/artalk.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æµ‹è¯•å¹¶é‡å¯</span></span><br><span class="line">nginx -t &amp;&amp; systemctl reload nginx</span><br></pre></td></tr></table></figure><h3 id="3-åŸŸåDNSè®°å½•"><a href="#3-åŸŸåDNSè®°å½•" class="headerlink" title="3. åŸŸåDNSè®°å½•"></a>3. åŸŸåDNSè®°å½•</h3><p>ç»™åŸŸåæ·»åŠ å¯¹åº”çš„ A è®°å½•ï¼Œå°† <code>artalk.131495.xyz</code> è§£æåˆ°æœåŠ¡å™¨çš„ IP åœ°å€ã€‚</p><p>ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ <code>https://artalk.131495.xyz</code> è®¿é—® Artalk æ§åˆ¶ä¸­å¿ƒäº†ã€‚</p><hr><h2 id="å››ã€å‰ç«¯æ¥å…¥-Hexo-Butterfly"><a href="#å››ã€å‰ç«¯æ¥å…¥-Hexo-Butterfly" class="headerlink" title="å››ã€å‰ç«¯æ¥å…¥ (Hexo Butterfly)"></a>å››ã€å‰ç«¯æ¥å…¥ (Hexo Butterfly)</h2><h3 id="1-ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#1-ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="1. ä¿®æ”¹ä¸»é¢˜é…ç½®"></a>1. ä¿®æ”¹ä¸»é¢˜é…ç½®</h3><p>ç¼–è¾‘ Hexo çš„ä¸»é¢˜é…ç½®æ–‡ä»¶ <code>_config.butterfly.yml</code>ï¼š</p><figure class="highlight yaml"><figcaption><span>_config.butterfly.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">Artalk</span></span><br><span class="line"></span><br><span class="line"><span class="attr">artalk:</span></span><br><span class="line">  <span class="attr">server:</span> <span class="string">https://artalk.131495.xyz</span>   <span class="comment"># ä½ çš„ Artalk åç«¯åœ°å€</span></span><br><span class="line">  <span class="attr">site:</span> <span class="string">Gabrielçš„åšå®¢</span>                  <span class="comment"># å¿…é¡»ä¸åå°åˆ›å»ºçš„ç«™ç‚¹åç§°ä¸€è‡´</span></span><br></pre></td></tr></table></figure><h3 id="2-é‡æ–°éƒ¨ç½²"><a href="#2-é‡æ–°éƒ¨ç½²" class="headerlink" title="2. é‡æ–°éƒ¨ç½²"></a>2. é‡æ–°éƒ¨ç½²</h3><p>æ‰§è¡Œ <code>hexo s</code> é‡æ–°å¯åŠ¨åšå®¢ã€‚</p><p>è®¿é—®åšå®¢æ–‡ç« é¡µé¢ï¼Œè¯„è®ºåŒºåº”å·²æ­£å¸¸åŠ è½½ã€‚</p><hr><h2 id="äº”ã€æ•…éšœæ’æŸ¥-Troubleshooting"><a href="#äº”ã€æ•…éšœæ’æŸ¥-Troubleshooting" class="headerlink" title="äº”ã€æ•…éšœæ’æŸ¥ (Troubleshooting)"></a>äº”ã€æ•…éšœæ’æŸ¥ (Troubleshooting)</h2><p>åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­ï¼Œç‰¹åˆ«æ˜¯é…åˆ Cloudflare ä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p><h3 id="1-è·¨åŸŸé—®é¢˜-CORS"><a href="#1-è·¨åŸŸé—®é¢˜-CORS" class="headerlink" title="1. è·¨åŸŸé—®é¢˜ (CORS)"></a>1. è·¨åŸŸé—®é¢˜ (CORS)</h3><ul><li><strong>ç°è±¡</strong>ï¼šF12 æ§åˆ¶å°æŠ¥é”™ <code>No &#39;Access-Control-Allow-Origin&#39; header</code>ã€‚</li><li><strong>åŸå› </strong>ï¼šArtalk é»˜è®¤å¼€å¯è·¨åŸŸé™åˆ¶ã€‚</li><li><strong>è§£å†³</strong>ï¼šç™»å½• Artalk åå° -> <strong>è®¾ç½®</strong> -> <strong>å¯ä¿¡åŸŸå</strong>ï¼Œæ·»åŠ ä½ çš„åšå®¢åŸŸåï¼ˆå¦‚ <code>https://localhost:4000</code>ï¼‰ã€‚</li></ul><h3 id="2-æ··åˆå†…å®¹é”™è¯¯-Mixed-Content"><a href="#2-æ··åˆå†…å®¹é”™è¯¯-Mixed-Content" class="headerlink" title="2. æ··åˆå†…å®¹é”™è¯¯ (Mixed Content)"></a>2. æ··åˆå†…å®¹é”™è¯¯ (Mixed Content)</h3><ul><li><strong>ç°è±¡</strong>ï¼šGitHub Pages (HTTPS) æ— æ³•åŠ è½½ Artalk (HTTP) èµ„æºã€‚</li><li><strong>è§£å†³</strong>ï¼šç¡®ä¿ Artalk <strong>Server URL</strong> å¡«å†™çš„æ˜¯ <code>https://</code> å¼€å¤´çš„åœ°å€ã€‚</li></ul><h3 id="3-Cloudflare-ç‰¹æœ‰å‘ç‚¹"><a href="#3-Cloudflare-ç‰¹æœ‰å‘ç‚¹" class="headerlink" title="3. Cloudflare ç‰¹æœ‰å‘ç‚¹"></a>3. Cloudflare ç‰¹æœ‰å‘ç‚¹</h3><p>å¦‚æœä½ å¼€å¯äº† Cloudflare çš„å°é»„äº‘ï¼ˆä»£ç†æ¨¡å¼ï¼‰ï¼Œè¯·æ³¨æ„ï¼š</p><div class="note warning flat"><p><strong>1. ç«¯å£é™åˆ¶</strong><br>CF ä»…ä»£ç† 443, 8443, 2053 ç­‰ç‰¹å®šç«¯å£ã€‚å¦‚æœç›´æ¥ä½¿ç”¨ IP:20002 è®¿é—®ä¼šå¤±è´¥ã€‚<strong>è¯·åŠ¡å¿…ä½¿ç”¨ Nginx åä»£åçš„ 443 ç«¯å£ã€‚</strong></p></div><div class="note warning flat"><p><strong>2. æ§åˆ¶å°æ— æ³•åŠ è½½ (X-Frame-Options)</strong><br>CF é»˜è®¤å¯èƒ½ä¼šæ·»åŠ å®‰å…¨æ ‡å¤´ï¼Œå¯¼è‡´ Artalk iframe åŠ è½½å¤±è´¥ã€‚<br><strong>è§£å†³</strong>ï¼šåœ¨ CF åå° -> è§„åˆ™ -> è½¬æ¢è§„åˆ™ -> HTTP å“åº”å¤´ -> <strong>å…³é—­</strong> <code>æ·»åŠ å®‰å…¨æ€§æ ‡å¤´</code>ã€‚</p></div><div class="note warning flat"><p><strong>3. IP å±åœ°ä¸æ˜¾ç¤º</strong><br>CF å¯èƒ½ä¼šéšè—çœŸå® IPã€‚<br><strong>è§£å†³</strong>ï¼šåœ¨ CF åå° -> è§„åˆ™ -> è½¬æ¢è§„åˆ™ -> HTTP è¯·æ±‚å¤´ -> <strong>å…³é—­</strong> <code>åˆ é™¤è®¿é—®è€… IP æ ‡å¤´</code>ã€‚<br>åŒæ—¶ï¼ŒArtalk åå° -> è®¾ç½® -> æœåŠ¡å™¨ -> ä»£ç†æ ‡å¤´åï¼Œå¡«å…¥ <code>X-Forwarded-For</code>ã€‚</p></div><div class="note warning flat"><p><strong>4. å›¾ç‰‡ä¸Šä¼ å¤±è´¥ (403 Forbidden)</strong><br><strong>è§£å†³</strong>ï¼šåœ¨ CF åå° -> Scrape Shield -> <strong>å…³é—­</strong> <code>Hotlink ä¿æŠ¤</code>ã€‚</p></div><hr><h2 id="å…­ã€é«˜çº§åŠŸèƒ½å®šåˆ¶"><a href="#å…­ã€é«˜çº§åŠŸèƒ½å®šåˆ¶" class="headerlink" title="å…­ã€é«˜çº§åŠŸèƒ½å®šåˆ¶"></a>å…­ã€é«˜çº§åŠŸèƒ½å®šåˆ¶</h2><h3 id="1-ç•Œé¢ä¸ªæ€§åŒ–"><a href="#1-ç•Œé¢ä¸ªæ€§åŒ–" class="headerlink" title="1. ç•Œé¢ä¸ªæ€§åŒ–"></a>1. ç•Œé¢ä¸ªæ€§åŒ–</h3><p>åœ¨ Artalk åå° -&gt; <strong>è®¾ç½®</strong> -&gt; <strong>ç•Œé¢é…ç½®</strong>ï¼Œå¯è¿›è¡Œä¸ªæ€§åŒ–é…ç½®ã€‚</p><ul><li>è¯„è®ºæ¡†å ä½æ–‡å­—ï¼š<code>è®©æ€ç»ªåœ¨æ­¤åœæ³Šï¼Œæˆ–å¦‚é£ï¼Œæˆ–å¦‚è¯—â€¦</code></li><li>æ— è¯„è®ºæ˜¾ç¤ºæ–‡å­—ï¼š<code>æ­¤å¤„é™é»˜ï¼Œå´ç­‰å¾…ä½ çš„ç¬¬ä¸€ç¬”å¿ƒåŠ¨ã€‚</code></li><li>å‘é€æŒ‰é’®æ–‡å­—ï¼›<code>å¯„å¾€å…‰çš„æ·±å¤„</code></li><li><strong>è¡¨æƒ…åŒ…</strong>ï¼š<ul><li>é»˜è®¤çš„æ˜¯ï¼š<code>https://cdn.jsdelivr.net/gh/ArtalkJS/Emoticons/grps/default.json</code></li><li>æ”¹ç”¨ï¼š<code>https://cdn.jsdelivr.net/gh/eryajf/emotion_generate/dist/artalk.json</code></li></ul></li><li>é»˜è®¤å‹¾é€‰ <strong>æŠ•ç¥¨æŒ‰é’®</strong>ï¼›</li><li>é»˜è®¤ä¸å‹¾é€‰ <strong>è¿”å›æŒ‰é’®</strong>ï¼›</li><li>å‹¾é€‰ <strong>ç”¨æˆ·UAå¾½æ ‡</strong>ï¼›ï¼ˆå‹¾é€‰åï¼Œä¼šæ˜¾ç¤ºæ¯”å¦‚ Edge137ï¼ŒWindows11ï¼‰</li></ul><h3 id="2-IP-å±åœ°æ˜¾ç¤º"><a href="#2-IP-å±åœ°æ˜¾ç¤º" class="headerlink" title="2. IP å±åœ°æ˜¾ç¤º"></a>2. IP å±åœ°æ˜¾ç¤º</h3><ol><li>ä¸‹è½½ IP æ•°æ®åº“ï¼š<a href="https://github.com/lionsoul2014/ip2region/tree/v2.12.0/data">ip2region.xdb</a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -O /app/artalk/data/ip2region.xdb https://raw.githubusercontent.com/lionsoul2014/ip2region/v2.12.0/data/ip2region.xdb</span><br></pre></td></tr></table></figure></li><li>åœ¨ Artalk åå° -&gt; <strong>è®¾ç½®</strong> -&gt; <strong>IPå±åœ°</strong>ï¼Œå‹¾é€‰ <strong>å¼€å¯ IP å±åœ°å±•ç¤º</strong>ã€‚</li><li>å¦‚æœç½‘ç«™ä½¿ç”¨äº† CDN ä»£ç†ï¼Œåœ¨ Artalk åå° -&gt; <strong>è®¾ç½®</strong> -&gt; <strong>æœåŠ¡å™¨</strong> -&gt; <strong>ä»£ç†æ ‡å¤´å</strong>ï¼Œå¡«å†™ <code>X-Forwarded-For</code>ã€‚</li></ol><h3 id="3-UpGit-å›¾ç‰‡ä¸Šä¼ -GitHub-å›¾åºŠ"><a href="#3-UpGit-å›¾ç‰‡ä¸Šä¼ -GitHub-å›¾åºŠ" class="headerlink" title="3. UpGit å›¾ç‰‡ä¸Šä¼  (GitHub å›¾åºŠ)"></a>3. UpGit å›¾ç‰‡ä¸Šä¼  (GitHub å›¾åºŠ)</h3><p>Artalk é»˜è®¤æ”¯æŒè°ƒç”¨æœ¬åœ°ç¨‹åºä¸Šä¼ å›¾ç‰‡ã€‚<br>ä¸ºäº†èŠ‚çœæœåŠ¡å™¨ç£ç›˜ç©ºé—´ï¼Œæˆ‘ä»¬å¯ä»¥é›†æˆ <a href="https://github.com/pluveto/upgit">UpGit</a> å°†å›¾ç‰‡è½¬å­˜ GitHubã€‚</p><h4 id="æ­¥éª¤-A-å®‰è£…-UpGit"><a href="#æ­¥éª¤-A-å®‰è£…-UpGit" class="headerlink" title="æ­¥éª¤ A: å®‰è£… UpGit"></a>æ­¥éª¤ A: å®‰è£… UpGit</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½ upgit ç¨‹åº</span></span><br><span class="line">wget  -O /app/artalk/upgit https://github.com/pluveto/upgit/releases/download/v0.2.25/upgit_linux_arm64</span><br><span class="line"><span class="comment"># è®¾ç½®å¯æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="built_in">chmod</span> 775 /app/artalk/upgit</span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤-B-é…ç½®-UpGit"><a href="#æ­¥éª¤-B-é…ç½®-UpGit" class="headerlink" title="æ­¥éª¤ B: é…ç½® UpGit"></a>æ­¥éª¤ B: é…ç½® UpGit</h4><p>åˆ›å»º <code>vi /app/artalk/data/config.upgit.toml</code>ï¼Œå¡«å…¥ä½ çš„ GitHub Token å’Œä»“åº“ä¿¡æ¯ï¼ˆè¯¦è§<a href="https://github.com/pluveto/upgit">UpGitæ–‡æ¡£</a>ï¼‰ã€‚</p><figure class="highlight toml"><figcaption><span>config.upgit.toml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"><span class="comment"># UPGIT é…ç½®</span></span><br><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># é»˜è®¤ä¸Šä¼ å™¨</span></span><br><span class="line"><span class="attr">default_uploader</span> = <span class="string">&quot;github&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šä¼ æ–‡ä»¶åçš„æ ¼å¼æ¨¡æ¿ï¼ˆä»…ç‰¹å®šä¸Šä¼ å™¨é€‚é…ï¼‰</span></span><br><span class="line"><span class="comment">#   / ç›®å½•åˆ†éš”ç¬¦, ä½œç”¨: æ˜¯åŒºåˆ†ç›®å½•</span></span><br><span class="line"><span class="comment">#   &#123;year&#125; å¹´ä»½, ä¾‹å¦‚: 2022</span></span><br><span class="line"><span class="comment">#   &#123;month&#125; æœˆä»½, ä¾‹å¦‚: 02</span></span><br><span class="line"><span class="comment">#   &#123;day&#125; å¤©, ä¾‹å¦‚: 01</span></span><br><span class="line"><span class="comment">#   &#123;unix_ts&#125; æ—¶é—´æˆ³, ä¾‹å¦‚: 1643617626</span></span><br><span class="line"><span class="comment">#   &#123;fname&#125; åŸå§‹æ–‡ä»¶åï¼Œå¦‚ logo (ä¸å«åç¼€å)</span></span><br><span class="line"><span class="comment">#   &#123;fname_hash&#125; &#123;fname&#125;çš„ MD5 æ•£åˆ—å€¼</span></span><br><span class="line"><span class="comment">#   &#123;ext&#125; æ–‡ä»¶åç¼€å, ä¾‹å¦‚.png</span></span><br><span class="line"><span class="comment">#   ä¸‹é¢çš„ä¾‹å­ç”Ÿæˆçš„æ–‡ä»¶åé¢„è§ˆ: 2022/01/upgit_20220131_1643617626.png</span></span><br><span class="line"><span class="comment">#   å¦‚æœç›®å½•ä¸å­˜åœ¨å°†ä¼šè¢«ç¨‹åºè‡ªåŠ¨åˆ›å»º</span></span><br><span class="line"><span class="attr">rename</span> = <span class="string">&quot;artalk/&#123;year&#125;/&#123;month&#125;/upgit_&#123;year&#125;&#123;month&#125;&#123;day&#125;_&#123;unix_ts&#125;&#123;ext&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#   &#123;url&#125; å›¾ç‰‡æ–‡ä»¶çš„ç½‘ç»œURLåœ°å€</span></span><br><span class="line"><span class="section">[output_formats]</span></span><br><span class="line"><span class="attr">&quot;bbcode&quot;</span> = <span class="string">&quot;[img]&#123;url&#125;[/img]&quot;</span></span><br><span class="line"><span class="attr">&quot;html&quot;</span> = <span class="string">&#x27;&lt;img src=&quot;&#123;url&#125;&quot; /&gt;&#x27;</span></span><br><span class="line"><span class="attr">&quot;markdown-simple&quot;</span> = <span class="string">&quot;![](&#123;url&#125;)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># ç›´é“¾æ›¿æ¢è§„åˆ™ RawUrl -[replace]-&gt; Url</span></span><br><span class="line"><span class="comment"># -----------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¦‚æœæ‚¨çš„ç½‘ç»œè®¿é—®Githubå¼‚å¸¸æˆ–è€…ç¼“æ…¢ï¼Œæ‚¨å¯ä»¥å°è¯•ä¸‹é¢çš„é…ç½®ä»¥å¼€å¯CDNåŠ é€Ÿ</span></span><br><span class="line"><span class="comment"># [replacements]</span></span><br><span class="line"><span class="attr">&quot;raw.githubusercontent.com&quot;</span> = <span class="string">&quot;cdn.jsdelivr.net/gh&quot;</span></span><br><span class="line"><span class="attr">&quot;/main&quot;</span> = <span class="string">&quot;@main&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"><span class="comment"># ä»¥ä¸‹ä¸ºå„ä¸ªä¸Šä¼ å™¨çš„é…ç½®ç¤ºä¾‹. ç”¨ä¸åˆ°çš„ç•™ç©ºå³å¯</span></span><br><span class="line"><span class="comment"># =============================================================================</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Github ä¸Šä¼ å™¨</span></span><br><span class="line"><span class="section">[uploaders.github]</span></span><br><span class="line"><span class="comment"># ä¿å­˜æ–‡ä»¶çš„åˆ†æ”¯ï¼Œä¾‹å¦‚ master æˆ– main</span></span><br><span class="line"><span class="attr">branch</span> = <span class="string">&quot;main&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‚¨çš„æ‹¥æœ‰&quot;repo&quot;æƒé™çš„ Github ä»¤ç‰Œ</span></span><br><span class="line"><span class="comment"># è·å–Github Tokenè¿æ¥: https://github.com/settings/tokens</span></span><br><span class="line"><span class="attr">pat</span> = <span class="string">&quot;ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‚¨çš„å…¬å…±Githubå­˜å‚¨åº“çš„åç§°</span></span><br><span class="line"><span class="comment"># æ³¨æ„: ä¸ºäº†è®©æ‚¨å’Œä»–äººå¯ä»¥è®¿é—®åˆ°å›¾ç‰‡èµ„æº, æ‚¨çš„Githubä»“åº“ä¸€å®šè¦æ˜¯å…¬å¼€çš„, </span></span><br><span class="line"><span class="comment">#       åœ¨ç§æœ‰ä»“åº“ä¸­Githubä¼šæ‹¦æˆªæœªæˆæƒçš„è¯·æ±‚,ä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ª404.</span></span><br><span class="line"><span class="attr">repo</span> = <span class="string">&quot;pic.cloud&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‚¨çš„ Gtihub ç”¨æˆ·å </span></span><br><span class="line"><span class="attr">username</span> = <span class="string">&quot;lijiabao9&quot;</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤-C-ä¿®æ”¹-Docker-Compose"><a href="#æ­¥éª¤-C-ä¿®æ”¹-Docker-Compose" class="headerlink" title="æ­¥éª¤ C: ä¿®æ”¹ Docker Compose"></a>æ­¥éª¤ C: ä¿®æ”¹ Docker Compose</h4><p>æˆ‘ä»¬éœ€è¦å°†å®¿ä¸»æœºä¸Šçš„ <code>upgit</code> ç¨‹åºæŒ‚è½½åˆ°å®¹å™¨å†…éƒ¨ã€‚</p><figure class="highlight yaml"><figcaption><span>docker-compose.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">artalk:</span></span><br><span class="line">    <span class="comment"># ... å…¶ä»–é…ç½®ä¿æŒä¸å˜</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./data:/data</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">./upgit:/usr/bin/upgit</span>  <span class="comment"># æ–°å¢æŒ‚è½½</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤-D-å¯ç”¨é›†æˆ"><a href="#æ­¥éª¤-D-å¯ç”¨é›†æˆ" class="headerlink" title="æ­¥éª¤ D: å¯ç”¨é›†æˆ"></a>æ­¥éª¤ D: å¯ç”¨é›†æˆ</h4><ol><li>é‡å»ºå®¹å™¨ï¼š<code>docker compose down &amp;&amp; docker compose up -d</code></li><li>Artalk åå° -> å›¾ç‰‡ä¸Šä¼  -> -&gt; Upgité…ç½® -&gt; <strong>å¯ç”¨ Upgit</strong>ã€‚</li><li>ä¸Šä¼ å‘½ä»¤å¡«å†™ï¼š<code>upgit -c /data/config.upgit.toml</code>ã€‚</li></ol><hr><p>æ­¤æ—¶ï¼Œä¸Šä¼ çš„å›¾ç‰‡ï¼Œä¼šè¢«ä¸Šä¼ åˆ° GitHubã€‚</p><h3 id="4-ç²¾ç¾é‚®ä»¶é€šçŸ¥æ¨¡æ¿"><a href="#4-ç²¾ç¾é‚®ä»¶é€šçŸ¥æ¨¡æ¿" class="headerlink" title="4. ç²¾ç¾é‚®ä»¶é€šçŸ¥æ¨¡æ¿"></a>4. ç²¾ç¾é‚®ä»¶é€šçŸ¥æ¨¡æ¿</h3><p>Artalk æ”¯æŒè‡ªå®šä¹‰é‚®ä»¶æ¨¡æ¿ã€‚ä»¥ä¸‹æ˜¯å‡ æ¬¾ç²¾é€‰çš„æ¨¡æ¿ä»£ç ï¼Œå¤åˆ¶å³å¯ä½¿ç”¨ã€‚</p><div class="tabs"><div class="nav-tabs"><button type="button" class="tab">ä»¿AppèŠå¤©ç•Œé¢</button><button type="button" class="tab">å·¦ä¾§è§†è§‰åˆ†æ </button><button type="button" class="tab active">å­Ÿè²æ–¯</button><button type="button" class="tab">æ•…éšœç¥¨æ®</button><button type="button" class="tab">VSCodeä»£ç ç¼–è¾‘å™¨</button><button type="button" class="tab">å¤å¤æ‰“å­—æœº</button></div><div class="tab-contents"><div class="tab-item-content"><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251205223757537.webp" alt=""></p><figure class="highlight html"><figcaption><span>./data/mail_tpl/Chat-UI.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f2f2f7; padding: 40px 0; font-family: -apple-system, BlinkMacSystemFont, &#x27;Segoe UI&#x27;, Roboto, Helvetica, Arial, sans-serif;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 400px; margin: 0 auto; background-color: #ffffff; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.15); border: 8px solid #1c1c1e;&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f9f9f9; padding: 15px 20px; border-bottom: 1px solid #e5e5ea; display: flex; align-items: center; justify-content: space-between;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px; font-weight: 600; color: #000;&quot;</span>&gt;</span>&#123;&#123;site_name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 10px; color: #8e8e93;&quot;</span>&gt;</span>åˆšåˆš<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 20px; background-color: #ffffff; min-height: 250px;&quot;</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-bottom: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f2f2f7; color: #8e8e93; font-size: 10px; padding: 4px 8px; border-radius: 4px;&quot;</span>&gt;</span>æ”¶åˆ°æ–°å›å¤<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: inline-block; text-align: left;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #e5e5ea; color: #000; padding: 10px 14px; border-radius: 18px 18px 4px 18px; font-size: 13px; max-width: 240px; margin-bottom: 4px;&quot;</span>&gt;</span></span><br><span class="line">                                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:10px; color:#666; display:block; margin-bottom:2px;&quot;</span>&gt;</span>æˆ‘<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                                &#123;&#123;content&#125;&#125;</span><br><span class="line">                            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;40&quot;</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;bottom&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 8px;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cravatar.cn/avatar/&#123;&#123;parent_comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=80&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 30px; height: 30px; border-radius: 50%; background: #ccc;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;40&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;bottom&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-right: 8px;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=80&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 36px; height: 36px; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.1);&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px; color: #8e8e93; margin-left: 4px; margin-bottom: 2px;&quot;</span>&gt;</span>&#123;&#123;reply_nick&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #007aff; color: #ffffff; padding: 12px 16px; border-radius: 18px 18px 18px 4px; font-size: 14px; line-height: 1.5; box-shadow: 0 2px 8px rgba(0,122,255,0.25);&quot;</span>&gt;</span></span><br><span class="line">                            &#123;&#123;reply_content&#125;&#125;</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 12px 15px 20px 15px; background-color: #f9f9f9; border-top: 1px solid #e5e5ea;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block; text-decoration: none;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #ffffff; border: 1px solid #e5e5ea; border-radius: 20px; padding: 10px 15px; color: #007aff; font-size: 14px; text-align: center; font-weight: 500;&quot;</span>&gt;</span></span><br><span class="line">                    ç‚¹å‡»æ­¤å¤„å›å¤æ¶ˆæ¯...</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-top: 10px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;page_url&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 10px; color: #c7c7cc; text-decoration: none;&quot;</span>&gt;</span>æ¥æºæ–‡ç« : &#123;&#123;page_title&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251205223949926.webp" alt=""></p><figure class="highlight html"><figcaption><span>./data/mail_tpl/Magazine-Split.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #e9ecef; padding: 40px 0; font-family: &#x27;Helvetica Neue&#x27;, Helvetica, Arial, sans-serif;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 600px; margin: 0 auto; background-color: #ffffff; box-shadow: 0 15px 30px rgba(0,0,0,0.1);&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;35%&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #212529; color: #ffffff; padding: 40px 20px; text-align: center;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=120&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80px; height: 80px; border-radius: 50%; border: 3px solid #495057; margin-bottom: 15px;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 18px; font-weight: bold; letter-spacing: 1px;&quot;</span>&gt;</span>&#123;&#123;reply_nick&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 10px; text-transform: uppercase; color: #adb5bd; margin-top: 5px; letter-spacing: 2px;&quot;</span>&gt;</span>Replied To You<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 40px; border-top: 1px solid #343a40; padding-top: 20px;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #ffd43b; color: #212529; padding: 10px 20px; text-decoration: none; font-size: 12px; font-weight: bold; display: inline-block; border-radius: 2px;&quot;</span>&gt;</span></span><br><span class="line">                            æŸ¥çœ‹è¯¦æƒ… <span class="symbol">&amp;rarr;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                </span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">width</span>=<span class="string">&quot;65%&quot;</span> <span class="attr">valign</span>=<span class="string">&quot;top&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding: 40px 30px; background-color: #ffffff;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 10px; color: #868e96; letter-spacing: 1px; margin-bottom: 20px;&quot;</span>&gt;</span>IN ARTICLE: <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;page_url&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #868e96; text-decoration: none; border-bottom: 1px dotted #ccc;&quot;</span>&gt;</span>&#123;&#123;page_title&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    </span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-left: 2px solid #dee2e6; padding-left: 15px; margin-bottom: 25px;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px; color: #adb5bd; margin-bottom: 5px;&quot;</span>&gt;</span>YOU SAID:<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 13px; color: #868e96; font-style: italic;&quot;</span>&gt;</span>&quot;&#123;&#123;content&#125;&#125;&quot;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-family: Georgia, &#x27;Times New Roman&#x27;, serif; font-size: 16px; line-height: 1.6; color: #212529;&quot;</span>&gt;</span></span><br><span class="line">                        &#123;&#123;reply_content&#125;&#125;</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 50px; font-size: 10px; color: #ced4da; text-align: right;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;site_url&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #ced4da; text-decoration: none;&quot;</span>&gt;</span>&#123;&#123;site_name&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span> Notification System</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content active"><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251205224149287.webp" alt=""></p><figure class="highlight html"><figcaption><span>./data/mail_tpl/Neo-Brutalism.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #fff4e0; padding: 50px 0; font-family: Helvetica, Arial, sans-serif;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 500px; margin: 0 auto;&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #a388ee; border: 3px solid #000; box-shadow: 6px 6px 0px #000; padding: 15px; margin-bottom: 20px; text-align: center;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0; font-size: 28px; font-weight: 900; color: #000; text-transform: uppercase; font-style: italic;&quot;</span>&gt;</span></span><br><span class="line">                Hey! Wake Up!</span><br><span class="line">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #fff; border: 3px solid #000; box-shadow: 6px 6px 0px #000; padding: 30px;&quot;</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-top: -60px; margin-bottom: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=100&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 80px; height: 80px; border: 3px solid #000; background-color: #ff90e8; border-radius: 50%;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: 700; font-size: 18px; text-align: center; margin: 0 0 20px 0;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #ff90e8; padding: 2px 5px; border: 1px solid #000;&quot;</span>&gt;</span>&#123;&#123;reply_nick&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> åˆšåˆšå›å¤äº†ä½ ï¼š</span><br><span class="line">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #f0f0f0; border: 2px solid #000; padding: 15px; font-size: 16px; font-weight: 500; line-height: 1.5; color: #000;&quot;</span>&gt;</span></span><br><span class="line">                &quot;&#123;&#123;reply_content&#125;&#125;&quot;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 20px; font-size: 12px; color: #666; border-left: 4px solid #000; padding-left: 10px;&quot;</span>&gt;</span></span><br><span class="line">                Target: &quot;&#123;&#123;page_title&#125;&#125;&quot;<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                Your text: &#123;&#123;content&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 30px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block; background-color: #000; color: #fff; text-decoration: none; text-align: center; padding: 15px; font-weight: 900; text-transform: uppercase; font-size: 16px; transition: all 0.2s;&quot;</span>&gt;</span></span><br><span class="line">                    Go To Reply -&gt;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-top: 20px; font-weight: 700; font-size: 12px;&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;site_name&#125;&#125; // NO_SPAM</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251205224218660.webp" alt=""></p><figure class="highlight html"><figcaption><span>./data/mail_tpl/Ticket.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #000000; padding: 40px 10px; font-family: &#x27;Courier New&#x27;, Courier, monospace;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 480px; margin: 0 auto; background-color: #ffffff; position: relative;&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;height: 8px; background: repeating-linear-gradient(45deg, #000, #000 10px, #f4d03f 10px, #f4d03f 20px);&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 25px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border-bottom: 2px dashed #000; padding-bottom: 15px; margin-bottom: 15px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-weight: 900; font-size: 24px; letter-spacing: -1px;&quot;</span>&gt;</span>NEW REPLY<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">&quot;right&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;background: #000; color: #fff; padding: 2px 6px; font-size: 12px;&quot;</span>&gt;</span>#ID_&#123;&#123;comment.id&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-bottom: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px; color: #666; text-transform: uppercase;&quot;</span>&gt;</span>From / Sender<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; align-items: center; margin-top: 5px;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=80&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 40px; height: 40px; border-radius: 0; border: 2px solid #000; margin-right: 15px;&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 18px; font-weight: 700;&quot;</span>&gt;</span>&#123;&#123;reply_nick&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border: 2px solid #000; padding: 15px; margin-bottom: 20px; background-color: #f8f8f8;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin: 0; font-size: 14px; line-height: 1.5;&quot;</span>&gt;</span>&#123;&#123;reply_content&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 12px; color: #666; margin-bottom: 20px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;background: #ccc; color: #000; padding: 0 4px;&quot;</span>&gt;</span>REF<span class="tag">&lt;/<span class="name">span</span>&gt;</span> Your comment in &quot;&#123;&#123;page_title&#125;&#125;&quot;:<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-style: italic;&quot;</span>&gt;</span>&quot;&#123;&#123;content&#125;&#125;&quot;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;border-top: 2px dashed #000; background-color: #f4d03f; padding: 20px; text-align: center;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block; width: 100%; text-decoration: none; color: #000; font-weight: 900; font-size: 16px; letter-spacing: 1px; text-transform: uppercase;&quot;</span>&gt;</span></span><br><span class="line">                [ CLICK TO VIEW REPLY ]</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 10px; margin-top: 10px; opacity: 0.6;&quot;</span>&gt;</span></span><br><span class="line">                &#123;&#123;site_url&#125;&#125; // AUTO_GENERATED_MSG</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251205224319655.webp" alt=""></p><figure class="highlight html"><figcaption><span>./data/mail_tpl/VSCode.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #1e1e1e; padding: 40px 0; font-family: Consolas, &#x27;Courier New&#x27;, monospace; color: #d4d4d4;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 600px; margin: 0 auto; background-color: #252526; border-radius: 6px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.5); border: 1px solid #3c3c3c;&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #2d2d2d; padding: 10px 15px; display: flex; align-items: center; border-bottom: 1px solid #1e1e1e;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: flex; gap: 6px; margin-right: 15px;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 10px; height: 10px; border-radius: 50%; background-color: #ff5f56;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 10px; height: 10px; border-radius: 50%; background-color: #ffbd2e;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 10px; height: 10px; border-radius: 50%; background-color: #27c93f;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #1e1e1e; padding: 5px 15px; border-radius: 4px 4px 0 0; font-size: 12px; color: #9cdcfe;&quot;</span>&gt;</span></span><br><span class="line">                reply_notification.js</span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding: 20px; font-size: 13px; line-height: 1.6;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;100%&quot;</span> <span class="attr">cellpadding</span>=<span class="string">&quot;0&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">border</span>=<span class="string">&quot;0&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">&quot;top&quot;</span> <span class="attr">width</span>=<span class="string">&quot;30&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #858585; text-align: right; padding-right: 15px; border-right: 1px solid #404040; user-select: none;&quot;</span>&gt;</span></span><br><span class="line">                        1<span class="tag">&lt;<span class="name">br</span>&gt;</span>2<span class="tag">&lt;<span class="name">br</span>&gt;</span>3<span class="tag">&lt;<span class="name">br</span>&gt;</span>4<span class="tag">&lt;<span class="name">br</span>&gt;</span>5<span class="tag">&lt;<span class="name">br</span>&gt;</span>6<span class="tag">&lt;<span class="name">br</span>&gt;</span>7<span class="tag">&lt;<span class="name">br</span>&gt;</span>8<span class="tag">&lt;<span class="name">br</span>&gt;</span>9<span class="tag">&lt;<span class="name">br</span>&gt;</span>10<span class="tag">&lt;<span class="name">br</span>&gt;</span>11</span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">td</span> <span class="attr">valign</span>=<span class="string">&quot;top&quot;</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 15px;&quot;</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #c586c0;&quot;</span>&gt;</span>import<span class="tag">&lt;/<span class="name">span</span>&gt;</span> &#123; Notification &#125; <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #c586c0;&quot;</span>&gt;</span>from<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #ce9178;&quot;</span>&gt;</span>&#x27;&#123;&#123;site_name&#125;&#125;&#x27;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #6a9955;&quot;</span>&gt;</span>// @Author: You (Original Comment)<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #6a9955;&quot;</span>&gt;</span>// Content: &quot;&#123;&#123;content&#125;&#125;&quot;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #569cd6;&quot;</span>&gt;</span>const<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #9cdcfe;&quot;</span>&gt;</span>reply<span class="tag">&lt;/<span class="name">span</span>&gt;</span> = <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #c586c0;&quot;</span>&gt;</span>new<span class="tag">&lt;/<span class="name">span</span>&gt;</span> <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #4ec9b0;&quot;</span>&gt;</span>Message<span class="tag">&lt;/<span class="name">span</span>&gt;</span>(&#123;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 20px;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #9cdcfe;&quot;</span>&gt;</span>from<span class="tag">&lt;/<span class="name">span</span>&gt;</span>: <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #ce9178;&quot;</span>&gt;</span>&quot;&#123;&#123;reply_nick&#125;&#125;&quot;<span class="tag">&lt;/<span class="name">span</span>&gt;</span>,</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 20px;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #9cdcfe;&quot;</span>&gt;</span>content<span class="tag">&lt;/<span class="name">span</span>&gt;</span>: <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #ce9178;&quot;</span>&gt;</span>`&#123;&#123;reply_content&#125;&#125;`<span class="tag">&lt;/<span class="name">span</span>&gt;</span>,</span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 20px;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #9cdcfe;&quot;</span>&gt;</span>action<span class="tag">&lt;/<span class="name">span</span>&gt;</span>: () <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #569cd6;&quot;</span>&gt;</span>=&gt;<span class="tag">&lt;/<span class="name">span</span>&gt;</span> &#123;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 40px;&quot;</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #ce9178; text-decoration: underline;&quot;</span>&gt;</span>window.open(url);<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;padding-left: 20px;&quot;</span>&gt;</span>&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#125;);<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #1e1e1e; border-top: 1px solid #3c3c3c; padding: 10px 15px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 11px; color: #858585; margin-bottom: 8px;&quot;</span>&gt;</span>TERMINAL<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block; background-color: #0e639c; color: #fff; text-decoration: none; padding: 8px; text-align: center; font-size: 12px; font-weight: bold; font-family: sans-serif;&quot;</span>&gt;</span></span><br><span class="line">                &gt; npm run view-reply</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="tab-item-content"><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251205224351230.webp" alt=""></p><figure class="highlight html"><figcaption><span>./data/mail_tpl/Typewriter.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;background-color: #fdfbf7; padding: 60px 0; font-family: Georgia, &#x27;Times New Roman&#x27;, serif; color: #4a4a4a;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 560px; margin: 0 auto; border: 1px solid #e0dcd3; background-color: #ffffff; padding: 60px 50px;&quot;</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; border-bottom: 2px solid #4a4a4a; padding-bottom: 20px; margin-bottom: 40px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 24px; letter-spacing: 2px; text-transform: uppercase; font-weight: bold;&quot;</span>&gt;</span>&#123;&#123;site_name&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 16px; line-height: 1.8;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>Dear <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123;nick&#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span>,<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span>You have received a new correspondence regarding your note on &quot;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;page_url&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;color: #4a4a4a; text-decoration: underline;&quot;</span>&gt;</span>&#123;&#123;page_title&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&quot;.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">            </span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin: 40px 0; text-align: center;&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-style: italic; font-size: 18px; color: #000;&quot;</span>&gt;</span></span><br><span class="line">                    â€œ &#123;&#123;reply_content&#125;&#125; â€</span><br><span class="line">                <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 15px; font-size: 14px; color: #888;&quot;</span>&gt;</span></span><br><span class="line">                    â€” Signed by &#123;&#123;reply_nick&#125;&#125;</span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;font-size: 14px; color: #888;&quot;</span>&gt;</span></span><br><span class="line">                Reference to your original thought:<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-style: italic;&quot;</span>&gt;</span>&quot;&#123;&#123;content&#125;&#125;&quot;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align: center; margin-top: 50px;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&#123;&#123;link_to_reply&#125;&#125;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: inline-block; padding: 10px 30px; border: 1px solid #4a4a4a; color: #4a4a4a; text-decoration: none; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; hover: background-color: #4a4a4a; hover: color: #fff;&quot;</span>&gt;</span></span><br><span class="line">                Read Full Discussion</span><br><span class="line">            <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: 60px; text-align: center; font-size: 11px; color: #b0b0b0;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="symbol">&amp;copy;</span> &#123;&#123;site_name&#125;&#125;. All rights reserved.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div><h3 id="5-é‚®ä»¶é€šçŸ¥"><a href="#5-é‚®ä»¶é€šçŸ¥" class="headerlink" title="5. é‚®ä»¶é€šçŸ¥"></a>5. é‚®ä»¶é€šçŸ¥</h3><p>Artalk æ”¯æŒé€šè¿‡ <strong>SMTP åè®®</strong>ã€é˜¿é‡Œäº‘é‚®ä»¶æ¨é€ã€è°ƒç”¨ç³»ç»Ÿ Sendmail å‘½ä»¤ç­‰æ–¹å¼å‘ç”¨æˆ·å‘é€é‚®ä»¶é€šçŸ¥ã€‚</p><p>åœ¨ Artalk åå°ï¼Œ<strong>è®¾ç½® -&gt; é‚®ä»¶é€šçŸ¥</strong>ï¼Œå‹¾é€‰ <strong>å¯ç”¨é‚®ä»¶é€šçŸ¥</strong>ã€‚</p><ul><li><strong>å‘é€æ–¹å¼</strong>ï¼š<code>smtp</code></li><li><strong>å‘é€äººæ˜µç§°</strong>ï¼š<code>&#123;&#123;reply_nick&#125;&#125;</code></li><li><strong>å‘é€äººåœ°å€</strong>ï¼š<code>noreply@example.com</code></li><li><strong>é‚®ä»¶æ ‡é¢˜</strong>ï¼š<code>[&#123;&#123;site_name&#125;&#125;] æ‚¨æ”¶åˆ°äº†æ¥è‡ª @&#123;&#123;reply_nick&#125;&#125; çš„å›å¤</code></li><li><strong>é‚®ä»¶æ¨¡æ¿æ–‡ä»¶</strong>ï¼š<code>/data/mail_tpl/Neo-Brutalism.html</code></li></ul><p>åœ¨ <strong>SMTP å‘é€</strong>ï¼Œé…ç½®ç”¨äºå‘é€é‚®ä»¶çš„è´¦å·æˆæƒä¿¡æ¯ï¼š</p><ul><li>å¯¹äº <strong>QQ é‚®ç®±</strong><ul><li><strong>å‘ä»¶åœ°å€</strong>ï¼š<code>smtp.qq.com</code></li><li><strong>å‘ä»¶ç«¯å£</strong>ï¼š<code>587</code></li><li><strong>ç”¨æˆ·å</strong>ï¼š <code>your_email@qq.com</code></li><li><strong>å¯†ç </strong>ï¼šï¼ˆæ³¨æ„ï¼šæ˜¯é¢å¤–ç”Ÿæˆçš„æˆæƒç ï¼Œä¸æ˜¯é‚®ç®±çš„ç™»å½•å¯†ç ï¼‰ <code>your_email_authcode</code></li></ul></li><li>å¯¹äº <strong>Microsoft é‚®ç®±</strong><ul><li><strong>å‘ä»¶åœ°å€</strong>ï¼š<code>smtp.office365.com</code></li><li><strong>å‘ä»¶ç«¯å£</strong>ï¼š<code>587</code></li><li><strong>ç”¨æˆ·å</strong>ï¼š <code>your_email@xxx.onmicrosoft.com</code></li><li><strong>å¯†ç </strong>ï¼šï¼ˆæ³¨æ„ï¼šç™»å½•å¯†ç ï¼‰ <code>your_email_password</code></li></ul></li></ul><h3 id="6-ç¤¾äº¤ç™»å½•"><a href="#6-ç¤¾äº¤ç™»å½•" class="headerlink" title="6. ç¤¾äº¤ç™»å½•"></a>6. ç¤¾äº¤ç™»å½•</h3><p>åœ¨ Artalk åå°ï¼Œ<strong>è®¾ç½® -&gt; ç¤¾äº¤ç™»å½•</strong>ï¼Œå‹¾é€‰ <strong>å¯ç”¨ç¤¾äº¤ç™»å½•</strong>ï¼Œ<strong>å…è®¸åŒ¿åè¯„è®º</strong>ã€‚</p>]]></content>
    
    
    <summary type="html">åŸºäº Docker Compose ç§æœ‰åŒ–éƒ¨ç½² Artalk è¯„è®ºç³»ç»Ÿï¼Œè¯¦è§£ Nginx åä»£ã€HTTPS é…ç½®ã€Cloudflare é¿å‘æŒ‡å—ï¼Œä»¥åŠé‚®ä»¶é€šçŸ¥å’Œ UpGit å›¾åºŠé›†æˆçš„é«˜çº§ç©æ³•ã€‚</summary>
    
    
    
    <category term="åˆ›æ„å·¥åŠ" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/"/>
    
    <category term="æœåŠ¡æ­å»º" scheme="https://lijiabao9.github.io/categories/%E5%88%9B%E6%84%8F%E5%B7%A5%E5%9D%8A/%E6%9C%8D%E5%8A%A1%E6%90%AD%E5%BB%BA/"/>
    
    
    <category term="Hexo" scheme="https://lijiabao9.github.io/tags/Hexo/"/>
    
    <category term="Artalk" scheme="https://lijiabao9.github.io/tags/Artalk/"/>
    
    <category term="Docker" scheme="https://lijiabao9.github.io/tags/Docker/"/>
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="UpGit" scheme="https://lijiabao9.github.io/tags/UpGit/"/>
    
  </entry>
  
  <entry>
    <title>ä»é›¶å¼€å§‹ï¼šåŸŸåè´­ä¹°ã€Cloudflare æ‰˜ç®¡ä¸ Nginx è‡ªåŠ¨åŒ– HTTPS é…ç½®å…¨æŒ‡å—</title>
    <link href="https://lijiabao9.github.io/posts/e94f4538.html"/>
    <id>https://lijiabao9.github.io/posts/e94f4538.html</id>
    <published>2025-12-04T16:32:58.000Z</published>
    <updated>2025-12-17T17:57:48.700Z</updated>
    
    <content type="html"><![CDATA[<p>æ­å»ºä¸€ä¸ªå®‰å…¨çš„ç½‘ç«™ï¼Œä»æ‹¥æœ‰ä¸€ä¸ªåŸŸåå¼€å§‹ã€‚æœ¬æ–‡å°†å¸¦ä½ èµ°å®Œï¼š<strong>åŸŸåè´­ä¹° -&gt; æ¥å…¥ Cloudflare CDN -&gt; æœåŠ¡å™¨è·å– SSL è¯ä¹¦ -&gt; Nginx åå‘ä»£ç†</strong> çš„å…¨å¥—æµç¨‹ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šåŸŸåè´­ä¹°-SpaceShip"><a href="#ç¬¬ä¸€æ­¥ï¼šåŸŸåè´­ä¹°-SpaceShip" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šåŸŸåè´­ä¹° (SpaceShip)"></a>ç¬¬ä¸€æ­¥ï¼šåŸŸåè´­ä¹° (SpaceShip)</h2><p>æ¨èä½¿ç”¨ <a href="https://www.spaceship.com/">SpaceShip</a>ï¼Œå®ƒæ˜¯ Namecheap æ——ä¸‹çš„æ–°å¹³å°ï¼Œç•Œé¢ç°ä»£ä¸”ä»·æ ¼é€æ˜ã€‚</p><h3 id="1-é€‰è´­æŠ€å·§"><a href="#1-é€‰è´­æŠ€å·§" class="headerlink" title="1. é€‰è´­æŠ€å·§"></a>1. é€‰è´­æŠ€å·§</h3><ul><li><strong>æœç´¢ç­–ç•¥</strong>ï¼šåœ¨é¦–é¡µæœç´¢ <strong>6ä½æ•°å­—</strong> çš„ <code>.xyz</code> åŸŸåï¼ˆä¾‹å¦‚ <code>131495.xyz</code>ï¼‰ã€‚</li><li><strong>ä»·æ ¼é™·é˜±</strong>ï¼šç¡®ä¿é¦–å¹´ä»·æ ¼æ˜¾ç¤ºä¸º <strong>$0.67</strong> å·¦å³ã€‚</li><li><strong>æ”¯ä»˜æ–¹å¼</strong>ï¼šæ”¯æŒ Visa/MasterCard ä¿¡ç”¨å¡ã€æ”¯ä»˜å®ç­‰ã€‚</li></ul><div class="note warning flat"><p><strong>æ³¨æ„ç»­è´¹ä»·æ ¼</strong>ï¼šè´­ä¹°å‰è¯·ç•™æ„ <em>Renewal Price</em>ã€‚å»ºè®®åœ¨ç»“è´¦æ—¶ç›´æ¥ç‚¹å‡» <strong>Extend subscription</strong>ï¼Œå‹¾é€‰ <strong>9 years</strong>ï¼Œä¸€æ¬¡æ€§ä¹°æ–­ 10 å¹´ï¼Œé¿å…åç»­æ¶¨ä»·çƒ¦æ¼ã€‚</p></div><p>è´­ä¹°å®Œæˆåï¼Œç‚¹å‡»å³ä¸Šè§’ <strong>Launchpad</strong> -&gt; <strong>Domain Manager</strong> å³å¯çœ‹åˆ°ä½ çš„åŸŸåã€‚</p><hr><h2 id="ç¬¬äºŒæ­¥ï¼šæ‰˜ç®¡åˆ°-Cloudflare"><a href="#ç¬¬äºŒæ­¥ï¼šæ‰˜ç®¡åˆ°-Cloudflare" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ‰˜ç®¡åˆ° Cloudflare"></a>ç¬¬äºŒæ­¥ï¼šæ‰˜ç®¡åˆ° Cloudflare</h2><p>å›½å†…åŸŸåè§£æéœ€è¦å®åè®¤è¯å¤‡æ¡ˆï¼Œä¸”è§£æé€Ÿåº¦å’ŒåŠŸèƒ½ä¸å¦‚ Cloudflare å¼ºå¤§ã€‚æˆ‘ä»¬å°† DNS è§£ææƒç§»äº¤ç»™ Cloudflareã€‚</p><h3 id="1-æ¥å…¥ç«™ç‚¹"><a href="#1-æ¥å…¥ç«™ç‚¹" class="headerlink" title="1. æ¥å…¥ç«™ç‚¹"></a>1. æ¥å…¥ç«™ç‚¹</h3><ol><li>ç™»å½• <a href="https://www.cloudflare.com/zh-cn/">Cloudflare</a>ï¼Œç‚¹å‡» <strong>åŠ å…¥åŸŸ</strong>ã€‚</li><li>è¾“å…¥ä½ çš„åŸŸå <code>131495.xyz</code>ï¼Œå‹¾é€‰ <strong>å¿«é€Ÿæ‰«æ DNS è®°å½•</strong>ï¼Œç‚¹å‡» <strong>ç»§ç»­</strong>ã€‚</li><li>é€‰æ‹© <strong>Free (å…è´¹è®¡åˆ’)</strong>ã€‚</li></ol><h3 id="2-ä¿®æ”¹-NameServer-NS"><a href="#2-ä¿®æ”¹-NameServer-NS" class="headerlink" title="2. ä¿®æ”¹ NameServer (NS)"></a>2. ä¿®æ”¹ NameServer (NS)</h3><p>Cloudflare ä¼šåˆ†é…ä¸¤ä¸ª NS åœ°å€ï¼ˆä¾‹å¦‚ <code>xxxx.ns.cloudflare.com</code>ï¼‰ã€‚</p><ol><li>å›åˆ° <strong>SpaceShip</strong> çš„ <strong>Domain Manager</strong>ï¼Œç‚¹å‡» <em>ä½ çš„åŸŸå</em>ã€‚</li><li>æ‰¾åˆ° <strong>NameServers &amp; DNS</strong> é€‰é¡¹ï¼Œç‚¹å‡» <strong>Nameservers</strong> çš„ <strong>change</strong>ã€‚</li><li>é€‰æ‹© <strong>Custom nameservers</strong>ï¼Œå¡«å…¥ Cloudflare æä¾›çš„ä¸¤ä¸ªåœ°å€å¹¶ä¿å­˜ã€‚</li></ol><p>ç­‰å¾…ç”Ÿæ•ˆï¼ˆé€šå¸¸å‡ åˆ†é’Ÿåˆ°å‡ å°æ—¶ï¼‰ï¼Œæ”¶åˆ° Cloudflare çš„é‚®ä»¶å³ä»£è¡¨æ‰˜ç®¡æˆåŠŸã€‚</p><h3 id="3-DNS-è®°å½•ä¸ä»£ç†çŠ¶æ€"><a href="#3-DNS-è®°å½•ä¸ä»£ç†çŠ¶æ€" class="headerlink" title="3. DNS è®°å½•ä¸ä»£ç†çŠ¶æ€"></a>3. DNS è®°å½•ä¸ä»£ç†çŠ¶æ€</h3><p>åœ¨ Cloudflare çš„åŸŸåç®¡ç†é¡µé¢ï¼Œåœ¨ <strong>DNS</strong> -&gt; <strong>è®°å½•</strong> ä¸­é…ç½®è§£æã€‚</p><ul><li><strong>A è®°å½•</strong>ï¼šå°†åŸŸåæŒ‡å‘ä½ æœåŠ¡å™¨çš„ IPv4 åœ°å€ã€‚</li><li><strong>CNAME è®°å½•</strong>ï¼šç”¨äºåˆ«åè§£æã€‚</li></ul><div class="note info flat"><p><strong>å…³äºâ€œå°é»„äº‘â€ï¼ˆä»£ç†çŠ¶æ€ï¼‰ï¼š</strong></p><ul><li><strong>å¼€å¯ (æ©™äº‘)</strong>ï¼šæµé‡ç»è¿‡ Cloudflare CDNã€‚éšè—çœŸå® IPï¼Œæä¾›é˜²æŠ¤ï¼Œæ”¯æŒ SSLã€‚</li><li><strong>å…³é—­ (ç°äº‘)</strong>ï¼šä»…ä½œä¸º DNS è§£æã€‚ç›´è¿æœåŠ¡å™¨ï¼Œæš´éœ²çœŸå® IPã€‚</li></ul></div><h3 id="4-æ¨èçš„-Cloudflare-ä¼˜åŒ–é…ç½®"><a href="#4-æ¨èçš„-Cloudflare-ä¼˜åŒ–é…ç½®" class="headerlink" title="4. æ¨èçš„ Cloudflare ä¼˜åŒ–é…ç½®"></a>4. æ¨èçš„ Cloudflare ä¼˜åŒ–é…ç½®</h3><p>å¼€å¯æ©™äº‘ä»£ç†åï¼Œå»ºè®®è°ƒæ•´ä»¥ä¸‹è®¾ç½®ä»¥æå‡æ€§èƒ½å’Œå®‰å…¨ï¼š</p><ul><li><strong>SSL/TLS</strong> -&gt; <strong>æ¦‚è¿°</strong>ï¼šè®¾ç½®ä¸º <strong>å®Œå…¨(ä¸¥æ ¼) / Full (Strict)</strong>ï¼ˆæœ€å®‰å…¨ï¼Œè¦æ±‚æºæœåŠ¡å™¨æœ‰æœ‰æ•ˆè¯ä¹¦ï¼‰</li><li><strong>å®‰å…¨æ€§</strong> -&gt; <strong>è®¾ç½®</strong>ï¼šå¼€å¯ <strong>è‡ªåŠ¨ç¨‹åºæ”»å‡»æ¨¡å¼</strong>ï¼Œ<strong>è¿ç»­è„šæœ¬ç›‘è§†</strong></li><li><strong>é€Ÿåº¦</strong> -&gt; <strong>é…ç½®</strong>ï¼šç‚¹å‡» <em>å»ºè®®</em> é‡Œçš„ <strong>å¯ç”¨æ‰€æœ‰å¯ç”¨é…ç½®</strong>ï¼Œ<strong>Cloudflare Fonts</strong>ï¼Œ<strong>Early Hints</strong>ï¼Œ<strong>0-RTT è¿æ¥æ¢å¤</strong></li><li><strong>ç¼“å­˜</strong> -&gt; <strong>é…ç½®</strong>ï¼š<span class='p gray'>CSAM æ‰«æå·¥å…·</span>ï¼Œ<span class='p gray'>Crawler Hints</span>ï¼Œ<span class='p gray'>Always Onlineâ„¢</span></li><li><strong>è§„åˆ™</strong> -&gt; <strong>è®¾ç½®</strong>ï¼šå¼€å¯ä»¥ä¸‹åŠŸèƒ½<ul><li><strong>æ·»åŠ  TLS å®¢æˆ·ç«¯èº«ä»½éªŒè¯æ ‡å¤´</strong></li><li><strong>æ·»åŠ è®¿é—®è€…ä½ç½®æ ‡å¤´</strong></li><li><span class='p gray'>åˆ é™¤è®¿é—®è€… IP æ ‡å¤´</span></li><li><strong>æ·»åŠ æ³„éœ²å‡­æ®æ£€æŸ¥æ ‡å¤´</strong></li><li><strong>åˆ é™¤ â€œX-Powered-Byâ€ æ ‡å¤´</strong></li><li><span class='p gray'>æ·»åŠ å®‰å…¨æ€§æ ‡å¤´</span></li><li><strong>URL è§„èŒƒåŒ– -&gt; æ ‡å‡†åŒ–ä¼ å…¥åˆ°æºæœåŠ¡å™¨çš„ URL</strong></li></ul></li><li><strong>ç½‘ç»œ</strong>ï¼šå¼€å¯ <strong>gRPC</strong></li><li><strong>Scrape Shiedld</strong>ï¼š<span class='p gray'>Hotlinkä¿æŠ¤</span></li></ul><hr><h2 id="ç¬¬ä¸‰æ­¥ï¼šè·å–å…¬å¼€å¯ä¿¡è¯ä¹¦-ACME"><a href="#ç¬¬ä¸‰æ­¥ï¼šè·å–å…¬å¼€å¯ä¿¡è¯ä¹¦-ACME" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šè·å–å…¬å¼€å¯ä¿¡è¯ä¹¦ (ACME)"></a>ç¬¬ä¸‰æ­¥ï¼šè·å–å…¬å¼€å¯ä¿¡è¯ä¹¦ (ACME)</h2><p>è™½ç„¶ Cloudflare æä¾›æºæœåŠ¡å™¨è¯ä¹¦ï¼Œä½†ä¸ºäº†é€šç”¨æ€§å’Œçµæ´»æ€§ï¼ˆæ¯”å¦‚åç»­æƒ³åˆ‡å›ç°äº‘ç›´è¿ï¼‰ï¼Œæ¨èä½¿ç”¨ <a href="https://github.com/acmesh-official/acme.sh">acme.sh</a> ç”³è¯· <em>Letâ€™s Encrypt</em> çš„æ³›åŸŸåè¯ä¹¦ã€‚</p><h3 id="1-è·å–-Cloudflare-API-Token"><a href="#1-è·å–-Cloudflare-API-Token" class="headerlink" title="1. è·å– Cloudflare API Token"></a>1. è·å– Cloudflare API Token</h3><p>æˆ‘ä»¬éœ€è¦æˆæƒ acme.sh ä¿®æ”¹ Cloudflare çš„ DNS è®°å½•æ¥å®ŒæˆåŸŸåéªŒè¯ã€‚</p><ol><li>é¦–é¡µ -&gt; <strong>ç®¡ç†è´¦å·</strong> -&gt; <strong>è´¦å· API ä»¤ç‰Œ</strong> -&gt; <strong>åˆ›å»ºä»¤ç‰Œ</strong>ã€‚</li><li>ä½¿ç”¨æ¨¡æ¿ï¼š<strong>ç¼–è¾‘åŒºåŸŸ DNS</strong>ã€‚<ul><li><strong>ä»¤ç‰Œåç§°</strong>ï¼šä»»æ„å¡«å†™ï¼Œæ¯”å¦‚ <em>ACME è¯ä¹¦ç»­æœŸ</em></li><li><strong>æƒé™</strong>ï¼šé€‰æ‹© <strong>åŒºåŸŸ</strong> -&gt; <strong>DSN</strong> -&gt; <strong>ç¼–è¾‘</strong></li><li><strong>åŒºåŸŸèµ„æº</strong>ï¼šé€‰æ‹© <strong>åŒ…æ‹¬</strong> -&gt; <strong>ç‰¹å®šåŒºåŸŸ</strong> -&gt; <em>ä½ çš„åŸŸå</em></li><li><strong>å®¢æˆ·ç«¯IPåœ°å€ç­›é€‰</strong>ï¼šï¼ˆå¯é€‰ï¼‰å¯è®¾ç½®ipé»‘ç™½åå•</li><li><strong>TTL</strong>ï¼šï¼ˆå¯é€‰ï¼‰å¯é…ç½®ä»¤ç‰Œæœ‰æ•ˆæœŸ</li></ul></li><li>ç”Ÿæˆå¹¶å¤åˆ¶ Tokenã€‚</li></ol><h3 id="2-å®‰è£…-acme-sh"><a href="#2-å®‰è£…-acme-sh" class="headerlink" title="2. å®‰è£… acme.sh"></a>2. å®‰è£… acme.sh</h3><p>ç™»å½•æœåŠ¡å™¨ï¼Œæ‰§è¡Œå®‰è£…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">apt update &amp;&amp; apt install -y curl socat</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£… acme.sh</span></span><br><span class="line">curl https://get.acme.sh | sh</span><br></pre></td></tr></table></figure><h3 id="3-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3. é…ç½®ç¯å¢ƒå˜é‡"></a>3. é…ç½®ç¯å¢ƒå˜é‡</h3><p>å°† API Token å¯¼å…¥ç¯å¢ƒå˜é‡ï¼Œ<code>vi ~/.bashrc</code> æ·»åŠ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ³¨æ„ï¼šCF_Token æ˜¯ Cloudflare ä¸“ç”¨çš„å˜é‡åï¼Œä¸å¯æ›´æ”¹</span></span><br><span class="line"><span class="built_in">export</span> CF_Token=<span class="string">&quot;ä½ çš„_API_Token_xxxxxxxxxxxxxx&quot;</span></span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡ºåï¼Œé‡æ–°å¯åŠ¨ç»ˆç«¯ã€‚</p><h3 id="4-ç”³è¯·æ³›åŸŸåè¯ä¹¦"><a href="#4-ç”³è¯·æ³›åŸŸåè¯ä¹¦" class="headerlink" title="4. ç”³è¯·æ³›åŸŸåè¯ä¹¦"></a>4. ç”³è¯·æ³›åŸŸåè¯ä¹¦</h3><p>æˆ‘ä»¬ç”³è¯· ECC ç®—æ³•çš„è¯ä¹¦ï¼ˆæ›´å°æ›´å¿«ï¼‰ï¼Œå¹¶åŒæ—¶åŒ…å«ä¸»åŸŸåå’Œæ³›åŸŸåï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢é»˜è®¤ CA ä¸º Let&#x27;s Encrypt</span></span><br><span class="line">acme.sh --set-default-ca --server letsencrypt</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”³è¯·è¯ä¹¦ (è‡ªåŠ¨ä½¿ç”¨ CF_Token è¿›è¡Œ DNS-01 éªŒè¯)</span></span><br><span class="line">acme.sh --issue --dns dns_cf -d <span class="string">&quot;131495.xyz&quot;</span> -d <span class="string">&quot;*.131495.xyz&quot;</span></span><br></pre></td></tr></table></figure><p>æˆåŠŸåï¼Œè¯ä¹¦æ–‡ä»¶ä¼šä¿å­˜åœ¨ <code>~/.acme.sh/131495.xyz_ecc/</code> ç›®å½•ä¸‹ã€‚</p><h3 id="5-å®‰è£…è¯ä¹¦"><a href="#5-å®‰è£…è¯ä¹¦" class="headerlink" title="5. å®‰è£…è¯ä¹¦"></a>5. å®‰è£…è¯ä¹¦</h3><p><strong>åˆ‡å‹¿ç›´æ¥ä½¿ç”¨ .acme.sh ç›®å½•ä¸‹çš„æ–‡ä»¶</strong>ã€‚åº”ä½¿ç”¨ <code>--install-cert</code> å‘½ä»¤å°†è¯ä¹¦å¤åˆ¶åˆ°æŒ‡å®šä½ç½®ï¼Œå¹¶é…ç½®è‡ªåŠ¨é‡è½½ Nginxã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå­˜æ”¾ç›®å½•</span></span><br><span class="line"><span class="built_in">mkdir</span> -p /cert/acme_131495.xyz/</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…è¯ä¹¦å¹¶æŒ‡å®šé‡è½½å‘½ä»¤</span></span><br><span class="line">acme.sh --install-cert -d <span class="string">&quot;131495.xyz&quot;</span> \</span><br><span class="line">  --cert-file       /cert/acme_131495.xyz/cert.pem \</span><br><span class="line">  --key-file        /cert/acme_131495.xyz/key.pem \</span><br><span class="line">  --fullchain-file  /cert/acme_131495.xyz/fullchain.pem \</span><br><span class="line">  --ca-file         /cert/acme_131495.xyz/ca.cer \</span><br><span class="line">  --reloadcmd       <span class="string">&quot;systemctl reload nginx&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="ç¬¬å››æ­¥ï¼šNginx-é…ç½®-HTTPS"><a href="#ç¬¬å››æ­¥ï¼šNginx-é…ç½®-HTTPS" class="headerlink" title="ç¬¬å››æ­¥ï¼šNginx é…ç½® HTTPS"></a>ç¬¬å››æ­¥ï¼šNginx é…ç½® HTTPS</h2><p>è¯ä¹¦å‡†å¤‡å°±ç»ªï¼Œæ¥ä¸‹æ¥é…ç½® Nginx åå‘ä»£ç†ã€‚</p><h3 id="1-å®‰è£…-Nginx"><a href="#1-å®‰è£…-Nginx" class="headerlink" title="1. å®‰è£… Nginx"></a>1. å®‰è£… Nginx</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install nginx -y</span><br></pre></td></tr></table></figure><h3 id="2-é»˜è®¤é…ç½®ä¿®æ”¹"><a href="#2-é»˜è®¤é…ç½®ä¿®æ”¹" class="headerlink" title="2. é»˜è®¤é…ç½®ä¿®æ”¹"></a>2. é»˜è®¤é…ç½®ä¿®æ”¹</h3><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>vi /etc/nginx/nginx.conf</code>ï¼Œ</p><ul><li>å¢åŠ é»˜è®¤ SSL/TLS è¯ä¹¦é…ç½®</li><li>è‡ªå®šä¹‰çš„æ—¥å¿—æ ¼å¼ <code>proxy_json</code></li><li>å¼€å¯ <code>gzip</code> é…ç½®</li></ul><figure class="highlight plaintext"><figcaption><span>nginx.conf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">        ##</span><br><span class="line">        # SSL Settings</span><br><span class="line">        ##</span><br><span class="line"></span><br><span class="line">        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE</span><br><span class="line">        ssl_prefer_server_ciphers on;</span><br><span class="line">        </span><br><span class="line">        # åŠ å¯†å¥—ä»¶</span><br><span class="line">        ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">        </span><br><span class="line">        # é…ç½®è¯ä¹¦åœ°å€</span><br><span class="line">        ssl_certificate /cert/acme_131495.xyz/cert.pem;</span><br><span class="line">        ssl_certificate_key /cert/acme_131495.xyz/key.pem;</span><br><span class="line">        </span><br><span class="line">        ##</span><br><span class="line">        # Logging Settings</span><br><span class="line">        ##</span><br><span class="line">        </span><br><span class="line">        # æ—¥å¿—æ ¼å¼è‡ªå®šä¹‰</span><br><span class="line">        log_format proxy_json escape=json </span><br><span class="line">          &#x27;&#123;&#x27;</span><br><span class="line">            &#x27;&quot;timestamp&quot;: &quot;$time_iso8601&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;request_id&quot;: &quot;$request_id&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;client_ip&quot;: &quot;$remote_addr&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;vhost&quot;: &quot;$host&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;method&quot;: &quot;$request_method&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;uri&quot;: &quot;$uri&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;status&quot;: $status, &#x27;</span><br><span class="line">            &#x27;&quot;upstream&quot;: &#123;&#x27;</span><br><span class="line">                &#x27;&quot;addr&quot;: &quot;$upstream_addr&quot;, &#x27;</span><br><span class="line">                &#x27;&quot;status&quot;: &quot;$upstream_status&quot;, &#x27;</span><br><span class="line">                &#x27;&quot;response_time&quot;: &quot;$upstream_response_time&quot;, &#x27;</span><br><span class="line">                &#x27;&quot;connect_time&quot;: &quot;$upstream_connect_time&quot;&#x27;</span><br><span class="line">            &#x27;&#125;,&#x27;</span><br><span class="line">            &#x27;&quot;request_time&quot;: &quot;$request_time&quot;, &#x27;</span><br><span class="line">            &#x27;&quot;headers&quot;: &#123;&#x27;</span><br><span class="line">                &#x27;&quot;user_agent&quot;: &quot;$http_user_agent&quot;, &#x27;</span><br><span class="line">                &#x27;&quot;x_forwarded_for&quot;: &quot;$proxy_add_x_forwarded_for&quot;, &#x27;</span><br><span class="line">                &#x27;&quot;x_forwarded_proto&quot;: &quot;$scheme&quot;&#x27;</span><br><span class="line">            &#x27;&#125;&#x27;</span><br><span class="line">          &#x27;&#125;&#x27;;</span><br><span class="line">          </span><br><span class="line">        access_log /var/log/nginx/access.log;</span><br><span class="line"></span><br><span class="line">        ##</span><br><span class="line">        # Gzip Settings</span><br><span class="line">        ##</span><br><span class="line"></span><br><span class="line">        gzip on;</span><br><span class="line"></span><br><span class="line">        gzip_vary on;</span><br><span class="line">        gzip_proxied any;</span><br><span class="line">        gzip_comp_level 6;</span><br><span class="line">        gzip_buffers 16 8k;</span><br><span class="line">        gzip_http_version 1.1;</span><br><span class="line">        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š<code>vi /etc/nginx/sites-available/default</code>ï¼Œå¼ºåˆ¶ä½¿ç”¨ HTTPSï¼š</p><figure class="highlight plaintext"><figcaption><span>default</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80 default_server;</span><br><span class="line">    listen [::]:80 default_server;</span><br><span class="line">    </span><br><span class="line">    server_name _;</span><br><span class="line">    </span><br><span class="line">    return 301 https://$host$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl default_server;</span><br><span class="line">    listen [::]:443 ssl default_server;</span><br><span class="line">    </span><br><span class="line">    server_name _;</span><br><span class="line"></span><br><span class="line">    # é™æ€æ–‡ä»¶ç›®å½•</span><br><span class="line">    root /var/www/html;</span><br><span class="line">    index index.html index.htm index.nginx-debian.html;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        try_files $uri $uri/ =404;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-å‡†å¤‡-proxy-params"><a href="#3-å‡†å¤‡-proxy-params" class="headerlink" title="3. å‡†å¤‡ proxy_params"></a>3. å‡†å¤‡ proxy_params</h3><p>ä¸ºäº†è®©åç«¯åº”ç”¨è·å–å®¢æˆ·ç«¯çœŸå® IPï¼Œå»ºè®®åˆ›å»ºä¸€ä¸ªä»£ç†å‚æ•°æ–‡ä»¶ï¼š<code>vi /etc/nginx/proxy_params</code></p><figure class="highlight plaintext"><figcaption><span>proxy_params</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">proxy_set_header Host $host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">proxy_set_header X-Forwarded-Proto $scheme;</span><br></pre></td></tr></table></figure><p>å¯¹åº”çš„ websocket åè®®çš„ä»£ç†å‚æ•°æ–‡ä»¶ï¼š<code>vi /etc/nginx/proxy_params_ws</code></p><figure class="highlight plaintext"><figcaption><span>proxy_params_ws</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">proxy_set_header Host $host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">proxy_http_version 1.1;</span><br><span class="line">proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">proxy_set_header Connection &quot;upgrade&quot;;</span><br></pre></td></tr></table></figure><h3 id="4-é…ç½®ç«™ç‚¹-è™šæ‹Ÿä¸»æœº"><a href="#4-é…ç½®ç«™ç‚¹-è™šæ‹Ÿä¸»æœº" class="headerlink" title="4. é…ç½®ç«™ç‚¹ (è™šæ‹Ÿä¸»æœº)"></a>4. é…ç½®ç«™ç‚¹ (è™šæ‹Ÿä¸»æœº)</h3><p>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š<code>vi /etc/nginx/sites-available/example.131495.xyz</code></p><figure class="highlight plaintext"><figcaption><span>example.131495.xyz</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    listen [::]:443 ssl;</span><br><span class="line">    </span><br><span class="line">    # TODO: ä¿®æ”¹ä¸ºå¯¹åº”çš„å­åŸŸå</span><br><span class="line">    server_name example.131495.xyz;</span><br><span class="line">    </span><br><span class="line">    # TODO: ç‹¬ç«‹çš„æ—¥å¿—é…ç½®</span><br><span class="line">    access_log /var/log/nginx/example.access.log proxy_json;</span><br><span class="line">    error_log /var/log/nginx/example.error.log;</span><br><span class="line"></span><br><span class="line">    # åå‘ä»£ç†è®¾ç½®</span><br><span class="line">    location / &#123;</span><br><span class="line">        # TODO: ä¿®æ”¹ä¸ºå®é™…çš„æœåŠ¡åœ°å€</span><br><span class="line">        proxy_pass http://127.0.0.1:8080;</span><br><span class="line">        </span><br><span class="line">        # ä»£ç†å‚æ•°</span><br><span class="line">        include /etc/nginx/proxy_params;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-å¯ç”¨é…ç½®å¹¶é‡å¯"><a href="#4-å¯ç”¨é…ç½®å¹¶é‡å¯" class="headerlink" title="4. å¯ç”¨é…ç½®å¹¶é‡å¯"></a>4. å¯ç”¨é…ç½®å¹¶é‡å¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè½¯é“¾æ¥å¯ç”¨ç«™ç‚¹</span></span><br><span class="line"><span class="built_in">ln</span> -s /etc/nginx/sites-available/example.131495.xyz /etc/nginx/sites-enabled/</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ£€æŸ¥é…ç½®è¯­æ³•</span></span><br><span class="line">nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡</span></span><br><span class="line">systemctl reload nginx</span><br></pre></td></tr></table></figure><hr><p>è‡³æ­¤ï¼Œä½ çš„ç½‘ç«™å·²ç»æ‹¥æœ‰äº†å®‰å…¨çš„ HTTPS è®¿é—®èƒ½åŠ›ï¼Œå¹¶ä¸”è¯ä¹¦ä¼šç”± acme.sh è‡ªåŠ¨ç»­æœŸï¼ŒCloudflare ä¹Ÿä¼šæä¾›å…¨çƒ CDN åŠ é€Ÿä¸é˜²æŠ¤ã€‚</p>]]></content>
    
    
    <summary type="html">æœ¬æ–‡è¯¦ç»†è®°å½•äº†ä» SpaceShip è´­ä¹°ä¾¿å®œåŸŸåï¼Œæ‰˜ç®¡è‡³ Cloudflare è¿›è¡Œ DNS è§£æï¼Œåˆ©ç”¨ acme.sh é…åˆ Cloudflare API è‡ªåŠ¨ç”³è¯·æ³›åŸŸåè¯ä¹¦ï¼Œå¹¶æœ€ç»ˆé…ç½® Nginx å®ç°å…¨ç«™ HTTPS çš„å®Œæ•´æµç¨‹ã€‚</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="ç½‘ç«™è¿ç»´" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/%E7%BD%91%E7%AB%99%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="Nginx" scheme="https://lijiabao9.github.io/tags/Nginx/"/>
    
    <category term="Cloudflare" scheme="https://lijiabao9.github.io/tags/Cloudflare/"/>
    
    <category term="Domain" scheme="https://lijiabao9.github.io/tags/Domain/"/>
    
    <category term="ACME" scheme="https://lijiabao9.github.io/tags/ACME/"/>
    
    <category term="HTTPS" scheme="https://lijiabao9.github.io/tags/HTTPS/"/>
    
  </entry>
  
  <entry>
    <title>Oracle Cloud å®ä¾‹ç½‘ç»œé…ç½®å…¨è§£ï¼šé˜²ç«å¢™æ”¾è¡Œã€IPTables æ¸…ç©ºä¸ Root ç™»å½•</title>
    <link href="https://lijiabao9.github.io/posts/6128b66c.html"/>
    <id>https://lijiabao9.github.io/posts/6128b66c.html</id>
    <published>2025-12-04T16:01:53.000Z</published>
    <updated>2025-12-17T17:57:48.699Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨ Oracle Cloud (ç”²éª¨æ–‡äº‘) çš„ Ubuntu å®ä¾‹æ—¶ï¼Œæ–°æ‰‹å¸¸é‡åˆ°çš„æœ€å¤§çš„å‘å°±æ˜¯ <strong>â€œåŒé‡é˜²ç«å¢™â€</strong>ï¼š</p><ol><li><strong>äº‘ç«¯é˜²ç«å¢™</strong>ï¼šOCI æ§åˆ¶å°çš„å®‰å…¨åˆ—è¡¨ (Security Lists)ã€‚</li><li><strong>ç³»ç»Ÿé˜²ç«å¢™</strong>ï¼šLinux ç³»ç»Ÿå†…éƒ¨çš„ Netfilter/IPTablesã€‚</li></ol><p>åªæœ‰ä¸¤å±‚é˜²ç«å¢™éƒ½æ”¾è¡Œï¼Œå¤–éƒ¨æµé‡æ‰èƒ½çœŸæ­£åˆ°è¾¾ä½ çš„æœåŠ¡ã€‚æœ¬æ–‡å°†å¸¦ä½ ä¸€ç«™å¼æ‰“é€šç½‘ç»œé…ç½®ã€‚</p><hr><h2 id="ç¬¬ä¸€å±‚ï¼šäº‘ç«¯é˜²ç«å¢™-Security-Lists"><a href="#ç¬¬ä¸€å±‚ï¼šäº‘ç«¯é˜²ç«å¢™-Security-Lists" class="headerlink" title="ç¬¬ä¸€å±‚ï¼šäº‘ç«¯é˜²ç«å¢™ (Security Lists)"></a>ç¬¬ä¸€å±‚ï¼šäº‘ç«¯é˜²ç«å¢™ (Security Lists)</h2><p>è¿™æ˜¯ Oracle è®¾å®šçš„ç¬¬ä¸€é“å…³å¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæ”¾è¡Œäº† SSH (22ç«¯å£)ã€‚</p><h3 id="é…ç½®æ­¥éª¤"><a href="#é…ç½®æ­¥éª¤" class="headerlink" title="é…ç½®æ­¥éª¤"></a>é…ç½®æ­¥éª¤</h3><ol><li>ç™»å½• Oracle æ§åˆ¶å°ï¼Œè¿›å…¥ <strong>å®ä¾‹è¯¦æƒ…</strong> é¡µé¢ã€‚</li><li>ç‚¹å‡» <strong>ç½‘ç»œ (Network)</strong> é‡Œçš„ <strong>å­ç½‘ (Subnet)</strong> åç§°çš„é“¾æ¥ã€‚</li><li>åœ¨å­ç½‘è¯¦æƒ…é¡µï¼Œç‚¹å‡» <strong>å®‰å…¨</strong> é‡Œçš„ <strong>å®‰å…¨åˆ—è¡¨ (Security Lists)</strong>ï¼Œé€šå¸¸æœ‰ä¸€ä¸ªé»˜è®¤åˆ—è¡¨ <code>Default Security List for...</code>ã€‚</li><li>åœ¨ <strong>å®‰å…¨è§„åˆ™</strong>ï¼Œç‚¹å‡» <strong>æ·»åŠ å…¥ç«™è§„åˆ™ (Add Ingress Rules)</strong>ã€‚</li></ol><h3 id="æ¨èè§„åˆ™-æ”¾è¡Œæ‰€æœ‰"><a href="#æ¨èè§„åˆ™-æ”¾è¡Œæ‰€æœ‰" class="headerlink" title="æ¨èè§„åˆ™ (æ”¾è¡Œæ‰€æœ‰)"></a>æ¨èè§„åˆ™ (æ”¾è¡Œæ‰€æœ‰)</h3><p>å¦‚æœä½ å¸Œæœ›ç”±æœåŠ¡å™¨å†…éƒ¨é˜²ç«å¢™æ¥ç®¡æ‰€æœ‰æµé‡æ§åˆ¶ï¼Œæˆ–è€…ç”¨äºæµ‹è¯•ç¯å¢ƒï¼Œå¯ä»¥æ·»åŠ ä¸€æ¡â€œå…¨æ”¾è¡Œâ€è§„åˆ™ï¼š</p><ul><li><strong>æº CIDR</strong>ï¼š<code>0.0.0.0/0</code> (å…è®¸æ‰€æœ‰ IP)</li><li><strong>IP åè®®</strong>ï¼š<code>æ‰€æœ‰åè®®</code></li><li><strong>æºç«¯å£èŒƒå›´</strong>ï¼š(ç•™ç©ºï¼Œè¡¨ç¤ºæ‰€æœ‰ç«¯å£)</li></ul><h2 id="ç¬¬äºŒå±‚ï¼šç³»ç»Ÿé˜²ç«å¢™-IPTables"><a href="#ç¬¬äºŒå±‚ï¼šç³»ç»Ÿé˜²ç«å¢™-IPTables" class="headerlink" title="ç¬¬äºŒå±‚ï¼šç³»ç»Ÿé˜²ç«å¢™ (IPTables)"></a>ç¬¬äºŒå±‚ï¼šç³»ç»Ÿé˜²ç«å¢™ (IPTables)</h2><p>Oracle æä¾›çš„ Ubuntu é•œåƒé»˜è®¤å¼€å¯äº†æå…¶ä¸¥æ ¼çš„ <code>iptables</code> è§„åˆ™ã€‚å³ä½¿ä½ åœ¨ç½‘é¡µæ§åˆ¶å°æ”¾è¡Œäº†ç«¯å£ï¼Œç³»ç»Ÿå†…éƒ¨ä¹Ÿä¼šæ‹¦æˆªã€‚</p><p>æœ€çœäº‹çš„åšæ³•æ˜¯ï¼š<strong>æ¸…ç©ºæ‰€æœ‰è§„åˆ™ï¼Œè®©æœåŠ¡å™¨â€œè£¸å¥”â€ï¼Œå®Œå…¨ç”±äº‘ç«¯å®‰å…¨åˆ—è¡¨æ§åˆ¶ã€‚</strong></p><h3 id="1-æŸ¥çœ‹å½“å‰è§„åˆ™"><a href="#1-æŸ¥çœ‹å½“å‰è§„åˆ™" class="headerlink" title="1. æŸ¥çœ‹å½“å‰è§„åˆ™"></a>1. æŸ¥çœ‹å½“å‰è§„åˆ™</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç™»å½• root</span></span><br><span class="line"><span class="built_in">sudo</span> -i</span><br><span class="line"></span><br><span class="line">iptables -L -n -v</span><br></pre></td></tr></table></figure><p>ä½ ä¼šçœ‹åˆ°å¤§é‡çš„ REJECT è§„åˆ™ï¼Œè¿™å°±æ˜¯å¯¼è‡´ç½‘ç»œä¸é€šçš„å…ƒå‡¶ã€‚</p><h3 id="2-æš´åŠ›æ¸…ç©ºè§„åˆ™"><a href="#2-æš´åŠ›æ¸…ç©ºè§„åˆ™" class="headerlink" title="2. æš´åŠ›æ¸…ç©ºè§„åˆ™"></a>2. æš´åŠ›æ¸…ç©ºè§„åˆ™</h3><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ é™¤æ‰€æœ‰é“¾å’Œè§„åˆ™ï¼Œå¹¶å°†é»˜è®¤ç­–ç•¥è®¾ç½®ä¸º ACCEPTï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. è®¾ç½®é»˜è®¤ç­–ç•¥ä¸ºæ¥å— (é˜²æ­¢æ¸…ç©ºè§„åˆ™åæŠŠè‡ªå·±é”åœ¨å¤–é¢)</span></span><br><span class="line">iptables -P INPUT ACCEPT</span><br><span class="line">iptables -P FORWARD ACCEPT</span><br><span class="line">iptables -P OUTPUT ACCEPT</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. æ¸…ç©ºæ‰€æœ‰è§„åˆ™ (Flush)</span></span><br><span class="line">iptables -F</span><br><span class="line">iptables -t nat -F</span><br><span class="line">iptables -t mangle -F</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰é“¾ (Delete Chain)</span></span><br><span class="line">iptables -X</span><br><span class="line">iptables -t nat -X</span><br><span class="line">iptables -t mangle -X</span><br></pre></td></tr></table></figure><h3 id="3-æŒä¹…åŒ–é…ç½®-å…³é”®æ­¥éª¤"><a href="#3-æŒä¹…åŒ–é…ç½®-å…³é”®æ­¥éª¤" class="headerlink" title="3. æŒä¹…åŒ–é…ç½® (å…³é”®æ­¥éª¤)"></a>3. æŒä¹…åŒ–é…ç½® (å…³é”®æ­¥éª¤)</h3><p>é€šè¿‡å‘½ä»¤ä¿®æ”¹çš„è§„åˆ™åœ¨é‡å¯åä¼šå¤±æ•ˆï¼Œå› ä¸º Oracle é•œåƒå®‰è£…äº† <code>netfilter-persistent</code> å·¥å…·ï¼Œå¼€æœºæ—¶ä¼šè‡ªåŠ¨åŠ è½½ <code>/etc/iptables/rules.v4</code> ä¸­çš„é»˜è®¤è§„åˆ™ã€‚</p><p>æˆ‘ä»¬éœ€è¦å°†å½“å‰â€œæ¸…ç©ºåâ€çš„çŠ¶æ€ä¿å­˜ä¸‹æ¥ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¨èæ–¹å¼ï¼šè¦†ç›–ä¿å­˜å½“å‰è§„åˆ™</span></span><br><span class="line">netfilter-persistent save</span><br></pre></td></tr></table></figure><p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©ç®€å•ç²—æš´åœ°å¸è½½è¯¥å·¥å…·ï¼ˆä¸æ¨èï¼Œä¸å¤Ÿä¼˜é›…ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æš´åŠ›æ–¹å¼ï¼šå¸è½½æŒä¹…åŒ–å·¥å…·</span></span><br><span class="line">apt purge netfilter-persistent</span><br><span class="line"><span class="built_in">rm</span> -rf /etc/iptables</span><br></pre></td></tr></table></figure><p>æœ€åï¼Œæ‰§è¡Œ <code>reboot</code> é‡å¯æœåŠ¡å™¨éªŒè¯è§„åˆ™æ˜¯å¦å›æ»šã€‚</p><hr><h2 id="è¿›é˜¶ï¼šå¼€å¯-Root-å¯†ç ç™»å½•"><a href="#è¿›é˜¶ï¼šå¼€å¯-Root-å¯†ç ç™»å½•" class="headerlink" title="è¿›é˜¶ï¼šå¼€å¯ Root å¯†ç ç™»å½•"></a>è¿›é˜¶ï¼šå¼€å¯ Root å¯†ç ç™»å½•</h2><p>Oracle é»˜è®¤å¼ºåˆ¶ä½¿ç”¨å¯†é’¥ç™»å½•ä¸”ç¦ç”¨ Rootã€‚ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼ˆå¦‚ä½¿ç”¨ SFTP å®¢æˆ·ç«¯ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼€å¯å¯†ç ç™»å½•ã€‚</p><h3 id="1-è®¾ç½®-Root-å¯†ç "><a href="#1-è®¾ç½®-Root-å¯†ç " class="headerlink" title="1. è®¾ç½® Root å¯†ç "></a>1. è®¾ç½® Root å¯†ç </h3><p>ä½¿ç”¨é»˜è®¤ç”¨æˆ·ï¼ˆé€šå¸¸æ˜¯ <code>ubuntu</code>ï¼‰ç™»å½•åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢åˆ° root ç¯å¢ƒ</span></span><br><span class="line"><span class="built_in">sudo</span> -i</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å¯†ç  (éœ€è¾“å…¥ä¸¤æ¬¡ï¼Œæ— å›æ˜¾)</span></span><br><span class="line">passwd</span><br></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹-SSH-é…ç½®"><a href="#2-ä¿®æ”¹-SSH-é…ç½®" class="headerlink" title="2. ä¿®æ”¹ SSH é…ç½®"></a>2. ä¿®æ”¹ SSH é…ç½®</h3><p>ç¼–è¾‘ä¸»é…ç½®æ–‡ä»¶ï¼š<code>vim /etc/ssh/sshd_config</code></p><p>æ‰¾åˆ°ä»¥ä¸‹é…ç½®å¹¶ä¿®æ”¹ï¼ˆå¦‚æœæ²¡æœ‰åˆ™æ·»åŠ ï¼‰ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin yes        # å…è®¸ Root ç™»å½•</span><br><span class="line">PasswordAuthentication yes # å…è®¸å¯†ç éªŒè¯</span><br></pre></td></tr></table></figure><h3 id="3-å¤„ç†å­é…ç½®æ–‡ä»¶-é‡è¦å‘ç‚¹"><a href="#3-å¤„ç†å­é…ç½®æ–‡ä»¶-é‡è¦å‘ç‚¹" class="headerlink" title="3. å¤„ç†å­é…ç½®æ–‡ä»¶ (é‡è¦å‘ç‚¹)"></a>3. å¤„ç†å­é…ç½®æ–‡ä»¶ (é‡è¦å‘ç‚¹)</h3><p>åœ¨ Ubuntu äº‘é•œåƒä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªä¼˜å…ˆçº§æ›´é«˜çš„é…ç½®æ–‡ä»¶ï¼Œå¿…é¡»åŒæ—¶ä¿®æ”¹ï¼š</p><p><code>vim /etc/ssh/sshd_config.d/60-cloudimg-settings.conf</code></p><p>å°†é‡Œé¢çš„ <code>no</code> æ”¹ä¸º <code>yes</code>ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PasswordAuthentication yes</span><br></pre></td></tr></table></figure><h3 id="4-é‡å¯æœåŠ¡"><a href="#4-é‡å¯æœåŠ¡" class="headerlink" title="4. é‡å¯æœåŠ¡"></a>4. é‡å¯æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart ssh</span><br></pre></td></tr></table></figure><hr><h2 id="é™„å½•ï¼šOracle-ç½‘ç»œæœ¯è¯­è§£æ"><a href="#é™„å½•ï¼šOracle-ç½‘ç»œæœ¯è¯­è§£æ" class="headerlink" title="é™„å½•ï¼šOracle ç½‘ç»œæœ¯è¯­è§£æ"></a>é™„å½•ï¼šOracle ç½‘ç»œæœ¯è¯­è§£æ</h2><p>åœ¨é…ç½® Oracle ç½‘ç»œæ—¶ï¼Œä½ ç»å¸¸ä¼šçœ‹åˆ°ä»¥ä¸‹ç¼©å†™ï¼Œç†è§£å®ƒä»¬æœ‰åŠ©äºä½ æ„å»ºæ›´å¤æ‚çš„ç½‘ç»œæ¶æ„ã€‚</p><div class="note success flat"><p><strong>æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥ï¼š</strong></p><ul><li><p><strong>OCI (Oracle Cloud Infrastructure)</strong><br>å³ç”²éª¨æ–‡äº‘çš„åŸºç¡€è®¾æ–½å¹³å°ã€‚</p></li><li><p><strong>VCN (Virtual Cloud Network)</strong><br><strong>è™šæ‹Ÿäº‘ç½‘ç»œ</strong>ã€‚ä½ åœ¨äº‘ä¸Šåˆ’å‡ºçš„ä¸€å—ç§æœ‰ç½‘ç»œåŒºåŸŸï¼Œç±»ä¼¼äºä½ å®¶é‡Œçš„å±€åŸŸç½‘ã€‚</p></li><li><p><strong>VNIC (Virtual Network Interface Card)</strong><br><strong>è™šæ‹Ÿç½‘å¡</strong>ã€‚å®ä¾‹è¿æ¥åˆ° VCN çš„æ¥å£ã€‚</p><ul><li>å®ƒå†³å®šäº†å®ä¾‹çš„ <strong>ç§æœ‰/å…¬æœ‰ IP</strong>ã€‚</li><li>ä¸€ä¸ªå®ä¾‹å¯ä»¥ç»‘å®šå¤šä¸ª VNICï¼ˆå¤šç½‘å¡ï¼‰ã€‚</li></ul></li><li><p><strong>Security List (å®‰å…¨åˆ—è¡¨)</strong><br><strong>å­ç½‘çº§åˆ«çš„é˜²ç«å¢™</strong>ã€‚ä½œç”¨äºå­ç½‘å†…çš„æ‰€æœ‰ç½‘å¡ï¼Œé€šå¸¸ç”¨äºè®¾ç½®é€šç”¨çš„è§„åˆ™ï¼ˆå¦‚å…¨æ”¾è¡Œ SSHï¼‰ã€‚</p></li><li><p><strong>NSG (Network Security Groups)</strong><br><strong>ç½‘å¡çº§åˆ«çš„é˜²ç«å¢™</strong>ã€‚æ¯”å®‰å…¨åˆ—è¡¨æ›´çµæ´»ï¼Œå¯ä»¥ç›´æ¥ç»‘å®šåˆ°æŸä¸ªå…·ä½“çš„ VNIC ä¸Šï¼Œä»…å¯¹è¯¥å®ä¾‹ç”Ÿæ•ˆã€‚</p></li></ul></div><p><strong>æµé‡æ§åˆ¶å±‚çº§å…³ç³»ï¼š</strong></p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">å®ä¾‹ (Instance)</span><br><span class="line">  â””â”€â”€ VNIC (è™šæ‹Ÿç½‘å¡)</span><br><span class="line">       â”œâ”€â”€ ç»‘å®š NSG (ç½‘ç»œå®‰å…¨ç»„) [å¯é€‰ï¼Œé’ˆå¯¹å•æœº]</span><br><span class="line">       â””â”€â”€ å½’å± Subnet (å­ç½‘)</span><br><span class="line">             â””â”€â”€ å— Security List (å®‰å…¨åˆ—è¡¨) æ§åˆ¶ [é’ˆå¯¹æ•´ä¸ªå­ç½‘]</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è¯¦è§£ Oracle Cloud å®ä¾‹çš„â€œåŒé‡é˜²ç«å¢™â€æœºåˆ¶ã€‚æ•™ä½ å¦‚ä½•é…ç½® OCI å®‰å…¨åˆ—è¡¨æ”¾è¡Œç«¯å£ï¼Œå½»åº•æ¸…é™¤ Ubuntu é»˜è®¤çš„ IPTables è§„åˆ™ï¼Œå¹¶å¼€å¯ Root ç”¨æˆ·å¯†ç ç™»å½•æƒé™ã€‚</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Oracle Cloud" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/Oracle-Cloud/"/>
    
    
    <category term="Oracle" scheme="https://lijiabao9.github.io/tags/Oracle/"/>
    
    <category term="äº‘æœåŠ¡å™¨" scheme="https://lijiabao9.github.io/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="è¿ç»´" scheme="https://lijiabao9.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
  </entry>
  
  <entry>
    <title>Oracle Cloud å®ä¾‹é‡è£…ç³»ç»Ÿï¼šåˆ©ç”¨æ›¿æ¢å¼•å¯¼å· (Replace Boot Volume) å®ç°ç³»ç»Ÿé‡ç½®</title>
    <link href="https://lijiabao9.github.io/posts/e62f764.html"/>
    <id>https://lijiabao9.github.io/posts/e62f764.html</id>
    <published>2025-12-04T15:40:20.000Z</published>
    <updated>2025-12-17T17:57:48.699Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸ AWS æˆ–ä¸€èˆ¬çš„ VPS æä¾›å•†ä¸åŒï¼ŒOracle Cloud (OCI) çš„æ§åˆ¶å°ä¸­å¹¶æ²¡æœ‰ä¸€ä¸ªæ˜¾çœ¼çš„â€œé‡è£…ç³»ç»Ÿâ€æŒ‰é’®ã€‚</p><p>å¦‚æœæˆ‘ä»¬æŠŠç³»ç»Ÿç©åäº†ï¼Œæˆ–è€…æƒ³æ›´æ¢ç³»ç»Ÿç‰ˆæœ¬ï¼ˆä¾‹å¦‚ä» Ubuntu 20.04 å‡çº§åˆ° 22.04ï¼‰ï¼Œæœ€ä¼˜é›…çš„æ–¹æ³•ä¸æ˜¯åˆ é™¤å®ä¾‹é‡å»ºï¼ˆå¯èƒ½ä¼šä¸¢ IPï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨ <strong>â€œæ›¿æ¢å¼•å¯¼å·â€ (Replace Boot Volume)</strong> åŠŸèƒ½ã€‚</p><h2 id="ç¬¬ä¸€æ­¥ï¼šè·å–ç›®æ ‡ç³»ç»Ÿçš„æ˜ åƒ-OCID"><a href="#ç¬¬ä¸€æ­¥ï¼šè·å–ç›®æ ‡ç³»ç»Ÿçš„æ˜ åƒ-OCID" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè·å–ç›®æ ‡ç³»ç»Ÿçš„æ˜ åƒ OCID"></a>ç¬¬ä¸€æ­¥ï¼šè·å–ç›®æ ‡ç³»ç»Ÿçš„æ˜ åƒ OCID</h2><p>åœ¨å¼€å§‹æ“ä½œå‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“è¦å®‰è£…ä»€ä¹ˆç³»ç»Ÿã€‚OCI ä½¿ç”¨ <strong>OCID</strong> (Oracle Cloud Identifier) æ¥æ ‡è¯†æ¯ä¸€ä¸ªå®˜æ–¹é•œåƒã€‚</p><p>æˆ‘ä»¬éœ€è¦è·å–ç›®æ ‡ç³»ç»Ÿçš„ OCIDï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><h3 id="æ–¹å¼ä¸€ï¼šä½¿ç”¨å½“å‰å®ä¾‹åŒæ¬¾é•œåƒï¼ˆæœ€ç®€å•ï¼‰"><a href="#æ–¹å¼ä¸€ï¼šä½¿ç”¨å½“å‰å®ä¾‹åŒæ¬¾é•œåƒï¼ˆæœ€ç®€å•ï¼‰" class="headerlink" title="æ–¹å¼ä¸€ï¼šä½¿ç”¨å½“å‰å®ä¾‹åŒæ¬¾é•œåƒï¼ˆæœ€ç®€å•ï¼‰"></a>æ–¹å¼ä¸€ï¼šä½¿ç”¨å½“å‰å®ä¾‹åŒæ¬¾é•œåƒï¼ˆæœ€ç®€å•ï¼‰</h3><p>å¦‚æœä½ åªæ˜¯æƒ³æŠŠå½“å‰çš„ç³»ç»Ÿâ€œæ¢å¤å‡ºå‚è®¾ç½®â€ï¼Œä¾æ—§ä½¿ç”¨ä¹‹å‰çš„ç³»ç»Ÿç‰ˆæœ¬ï¼š</p><ol><li>åœ¨å®ä¾‹çš„ <strong>è¯¦ç»†ä¿¡æ¯ (Instance Details)</strong> é¡µé¢ã€‚</li><li>æ‰¾åˆ° <strong>æ˜ åƒè¯¦ç»†ä¿¡æ¯ (Image)</strong> éƒ¨åˆ†ã€‚</li><li>ç‚¹å‡» <strong>æ˜ åƒåç§°</strong> é“¾æ¥ï¼Œè¿›å…¥è¯¦æƒ…é¡µã€‚</li><li>å¤åˆ¶ <strong>OCID</strong> å¤‡ç”¨ã€‚</li></ol><h3 id="æ–¹å¼äºŒï¼šæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆæ›´æ¢ç‰ˆæœ¬ï¼‰"><a href="#æ–¹å¼äºŒï¼šæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆæ›´æ¢ç‰ˆæœ¬ï¼‰" class="headerlink" title="æ–¹å¼äºŒï¼šæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆæ›´æ¢ç‰ˆæœ¬ï¼‰"></a>æ–¹å¼äºŒï¼šæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆæ›´æ¢ç‰ˆæœ¬ï¼‰</h3><p>å¦‚æœä½ æƒ³æ›´æ¢ç³»ç»Ÿç‰ˆæœ¬ï¼ˆä¾‹å¦‚å®‰è£…æœ€æ–°çš„ Ubuntu 24.04ï¼‰ï¼Œéœ€è¦å»å®˜æ–¹æ–‡æ¡£æŸ¥æ‰¾ã€‚</p><blockquote><p><strong>å®˜æ–¹é•œåƒåˆ—è¡¨</strong>ï¼š<a href="https://docs.oracle.com/en-us/iaas/images/">https://docs.oracle.com/en-us/iaas/images/</a></p></blockquote><p><strong>âš ï¸ å…³é”®æ³¨æ„ç‚¹ï¼š</strong></p><ul><li><strong>åŒºåŸŸ (Region)</strong>ï¼šå¿…é¡»é€‰æ‹©ä½ å®ä¾‹æ‰€åœ¨çš„åŒºåŸŸï¼ˆå¦‚ Japan East (Osaka) æˆ– US West (Phoenix)ï¼‰ã€‚</li><li><strong>æ¶æ„ (Architecture)</strong>ï¼š<ul><li>å¦‚æœæ˜¯ <strong>AMD</strong> å…è´¹æœºï¼Œæ‰¾ <code>x86_64</code> æ¶æ„çš„ OCIDã€‚</li><li>å¦‚æœæ˜¯ <strong>ARM</strong> (4H24G) æœºå™¨ï¼Œå¿…é¡»æ‰¾ <code>aarch64</code> æ¶æ„çš„ OCIDã€‚</li></ul></li></ul><p>å¤åˆ¶å¯¹åº”æ¡ç›®çš„ <strong>OCID</strong>ï¼Œæ ¼å¼é€šå¸¸ä¸º <code>ocid1.image.oc1.ap-osaka-1.xxxx...</code>ã€‚</p><hr><h2 id="ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ›¿æ¢å¼•å¯¼å·"><a href="#ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ›¿æ¢å¼•å¯¼å·" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ›¿æ¢å¼•å¯¼å·"></a>ç¬¬äºŒæ­¥ï¼šæ‰§è¡Œæ›¿æ¢å¼•å¯¼å·</h2><p>æ‹¿åˆ° OCID åï¼Œå°±å¯ä»¥å¼€å§‹â€œé‡è£…â€äº†ã€‚</p><div class="note warning flat"><p><strong>é«˜èƒ½é¢„è­¦</strong>ï¼š<br>æ­¤æ“ä½œä¼š<strong>é”€æ¯å¹¶åˆ é™¤</strong>å½“å‰çš„å¼•å¯¼å·ï¼ˆç³»ç»Ÿç›˜ï¼‰ã€‚è¯·åŠ¡å¿…å¤‡ä»½æ—§ç³»ç»Ÿç›˜å†…çš„é‡è¦æ•°æ®ï¼<br>æ­¤æ“ä½œ<strong>ä¸ä¼š</strong>æ”¹å˜å®ä¾‹çš„å…¬ç½‘ IP åœ°å€ã€‚</p></div><ol><li>ç™»å½• Oracle æ§åˆ¶å°ï¼Œè¿›å…¥å®ä¾‹è¯¦æƒ…é¡µé¢ã€‚</li><li>åœ¨ä¸Šæ–¹èœå•ç‚¹å‡» <strong>å­˜å‚¨ (Storage)</strong> -&gt; <strong>å¼•å¯¼å· (Boot volume)</strong>ã€‚</li><li>ç‚¹å‡» <strong>æ›¿æ¢å¼•å¯¼å· (Replace Boot Volume)</strong> æŒ‰é’®ã€‚</li><li>åœ¨å¼¹å‡ºçš„é…ç½®çª—å£ä¸­å¡«å†™ä¿¡æ¯ï¼š<ul><li><strong>æ›¿æ¢æ–¹å¼</strong>ï¼šé€‰æ‹© <strong>æ˜ åƒ (Image)</strong>ã€‚</li><li><strong>æ˜ åƒåº”ç”¨æ–¹å¼</strong>ï¼šé€‰æ‹© <strong>è¾“å…¥ OCID (Enter image OCID)</strong>ã€‚</li><li><strong>é•œåƒ OCID</strong>ï¼šç²˜è´´ç¬¬ä¸€æ­¥ä¸­è·å–çš„å­—ç¬¦ä¸²ã€‚</li><li><strong>å¼•å¯¼å·å¤§å°</strong>ï¼šè¾“å…¥ <strong>50 - 200</strong> GBï¼ˆé»˜è®¤å…è´¹é¢åº¦æ€»å…± 200Gï¼Œé€šå¸¸å¡« 50 æˆ– 100ï¼‰ã€‚</li></ul></li><li>ç‚¹å‡» <strong>æ›¿æ¢ (Replace)</strong>ã€‚</li></ol><h2 id="ç¬¬ä¸‰æ­¥ï¼šç­‰å¾…ä¸è¿æ¥"><a href="#ç¬¬ä¸‰æ­¥ï¼šç­‰å¾…ä¸è¿æ¥" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šç­‰å¾…ä¸è¿æ¥"></a>ç¬¬ä¸‰æ­¥ï¼šç­‰å¾…ä¸è¿æ¥</h2><p>æäº¤åï¼Œå®ä¾‹çš„çŠ¶æ€ä¼šå˜ä¸º <strong>Stopping</strong>ï¼ˆåœæ­¢ä¸­ï¼‰ï¼Œç„¶åæ˜¯ <strong>Provisioning</strong>ï¼ˆé…ç½®ä¸­ï¼‰ï¼Œæœ€åå˜å› <strong>Running</strong>ï¼ˆè¿è¡Œä¸­ï¼‰ã€‚</p><p>æ•´ä¸ªè¿‡ç¨‹å¤§çº¦éœ€è¦ 5-10 åˆ†é’Ÿã€‚</p><p>å¾…çŠ¶æ€å˜ç»¿åï¼Œä½¿ç”¨ SSH å®¢æˆ·ç«¯é‡æ–°è¿æ¥ï¼š</p><ul><li><strong>IP åœ°å€</strong>ï¼šä¿æŒä¸å˜ã€‚</li><li><strong>ç”¨æˆ·å</strong>ï¼šæ ¹æ®ç³»ç»Ÿè€Œå®šï¼ˆUbuntu é•œåƒé»˜è®¤ä¸º <code>ubuntu</code>ï¼ŒOracle Linux é»˜è®¤ä¸º <code>opc</code>ï¼‰ã€‚</li><li><strong>å¯†é’¥</strong>ï¼šä½¿ç”¨ä½ åŸæœ¬çš„ç§é’¥ï¼ˆæˆ–ä½ åˆšæ‰ä¸Šä¼ çš„æ–°ç§é’¥ï¼‰ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i <span class="string">&#x27;ä½ çš„ç§é’¥æ–‡ä»¶&#x27;</span> ubuntu@ä½ çš„å…¬ç½‘IP</span><br></pre></td></tr></table></figure><p>å¦‚æœè¿æ¥æˆåŠŸï¼Œæ­å–œä½ ï¼Œç³»ç»Ÿé‡è£…å®Œæˆï¼</p>]]></content>
    
    
    <summary type="html">ç”²éª¨æ–‡äº‘ (Oracle Cloud) æ²¡æœ‰ç›´æ¥çš„é‡è£…ç³»ç»ŸæŒ‰é’®ã€‚æœ¬æ–‡è¯¦è§£å¦‚ä½•é€šè¿‡â€œæ›¿æ¢å¼•å¯¼å·â€çš„æ–¹å¼ï¼Œä½¿ç”¨å®˜æ–¹é•œåƒ OCID å¿«é€Ÿé‡ç½® VPS ç³»ç»Ÿï¼Œæ— éœ€åˆ é™¤é‡å»ºå®ä¾‹ã€‚</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Oracle Cloud" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/Oracle-Cloud/"/>
    
    
    <category term="Oracle" scheme="https://lijiabao9.github.io/tags/Oracle/"/>
    
    <category term="äº‘æœåŠ¡å™¨" scheme="https://lijiabao9.github.io/tags/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu ç³»ç»Ÿ Docker å®‰è£…å…¨æŒ‡å—ï¼šå®˜æ–¹æºä¸å›½å†…é•œåƒåŠ é€Ÿ</title>
    <link href="https://lijiabao9.github.io/posts/3c32210.html"/>
    <id>https://lijiabao9.github.io/posts/3c32210.html</id>
    <published>2025-12-04T14:39:56.000Z</published>
    <updated>2025-12-17T17:57:48.699Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡å°†æŒ‡å¯¼ä½ åœ¨ Ubuntu ä¸Šå®‰è£… Docker Engineã€‚å®‰è£…è¿‡ç¨‹æ¶µç›–äº†ä»æ¸…ç†æ—§ç‰ˆæœ¬åˆ°é…ç½®å›½å†…åŠ é€Ÿæºçš„å®Œæ•´ç”Ÿäº§çº§å®è·µã€‚</p><blockquote><p><strong>å‚è€ƒæ–‡æ¡£</strong>ï¼š<a href="https://docs.docker.com/engine/install/ubuntu">Docker Official Docs</a></p></blockquote><h2 id="ä¸€ã€ç¯å¢ƒæ¸…ç†"><a href="#ä¸€ã€ç¯å¢ƒæ¸…ç†" class="headerlink" title="ä¸€ã€ç¯å¢ƒæ¸…ç†"></a>ä¸€ã€ç¯å¢ƒæ¸…ç†</h2><p>ä¸ºäº†é˜²æ­¢ç‰ˆæœ¬å†²çªï¼Œé¦–å…ˆå¸è½½ç³»ç»Ÿä¸­å¯èƒ½å­˜åœ¨çš„æ—§ç‰ˆæœ¬ Dockerï¼ˆå¦‚ <code>docker.io</code> æˆ– <code>docker-engine</code>ï¼‰ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt remove $(dpkg --get-selections docker.io docker-compose docker-compose-v2 docker-doc podman-docker containerd runc | <span class="built_in">cut</span> -f1)</span><br></pre></td></tr></table></figure><h2 id="äºŒã€é…ç½®è½¯ä»¶æº-Repository"><a href="#äºŒã€é…ç½®è½¯ä»¶æº-Repository" class="headerlink" title="äºŒã€é…ç½®è½¯ä»¶æº (Repository)"></a>äºŒã€é…ç½®è½¯ä»¶æº (Repository)</h2><h3 id="1-å®‰è£…åŸºç¡€å·¥å…·"><a href="#1-å®‰è£…åŸºç¡€å·¥å…·" class="headerlink" title="1. å®‰è£…åŸºç¡€å·¥å…·"></a>1. å®‰è£…åŸºç¡€å·¥å…·</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install ca-certificates curl</span><br></pre></td></tr></table></figure><h3 id="2-æ·»åŠ -GPG-å¯†é’¥"><a href="#2-æ·»åŠ -GPG-å¯†é’¥" class="headerlink" title="2. æ·»åŠ  GPG å¯†é’¥"></a>2. æ·»åŠ  GPG å¯†é’¥</h3><p>åˆ›å»ºå¯†é’¥ç›®å½•å¹¶ä¸‹è½½ Docker å®˜æ–¹å¯†é’¥ã€‚</p><div class="note info flat"><p><strong>æç¤º</strong>ï¼šå¦‚æœä½ ä½äºå›½å†…æœåŠ¡å™¨ï¼Œè¿æ¥ <code>download.docker.com</code> å¯èƒ½ä¼šè¶…æ—¶ã€‚<br>æ¨èä½¿ç”¨é˜¿é‡Œäº‘é•œåƒæºï¼Œè¯·å°†ä¸‹æ–¹çš„ URL æ›¿æ¢ä¸º <code>http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg</code></p></div><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºå¯†é’¥ç›®å½•</span></span><br><span class="line"><span class="built_in">sudo</span> install -m 0755 -d /etc/apt/keyrings</span><br><span class="line"><span class="comment"># ä¸‹è½½å®˜æ–¹ GPG å¯†é’¥</span></span><br><span class="line"><span class="built_in">sudo</span> curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc</span><br><span class="line"><span class="comment"># ä¿®æ”¹å¯†é’¥æƒé™</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">chmod</span> a+r /etc/apt/keyrings/docker.asc</span><br></pre></td></tr></table></figure><h3 id="3-æ·»åŠ -APT-æº"><a href="#3-æ·»åŠ -APT-æº" class="headerlink" title="3. æ·»åŠ  APT æº"></a>3. æ·»åŠ  APT æº</h3><p>æ ¹æ®ä½ çš„ Ubuntu ç‰ˆæœ¬ï¼Œé€‰æ‹©å¯¹åº”çš„æºæ ¼å¼ã€‚</p><div class="note warning flat"><p><strong>æ³¨æ„</strong>ï¼šUbuntu 24.04 LTS (Noble Numbat) å¼€å§‹ï¼ŒAPT å»ºè®®ä½¿ç”¨ DEB822 æ ¼å¼çš„ <code>.sources</code> æ–‡ä»¶ï¼Œè€Œéä¼ ç»Ÿçš„ <code>.list</code> æ–‡ä»¶ã€‚</p></div><h4 id="æ–¹æ¡ˆ-Aï¼šUbuntu-24-04-åŠæ›´é«˜ç‰ˆæœ¬-sources"><a href="#æ–¹æ¡ˆ-Aï¼šUbuntu-24-04-åŠæ›´é«˜ç‰ˆæœ¬-sources" class="headerlink" title="æ–¹æ¡ˆ Aï¼šUbuntu 24.04 åŠæ›´é«˜ç‰ˆæœ¬ (.sources)"></a>æ–¹æ¡ˆ Aï¼šUbuntu 24.04 åŠæ›´é«˜ç‰ˆæœ¬ (.sources)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Types: deb</span></span><br><span class="line"><span class="string">URIs: https://download.docker.com/linux/ubuntu</span></span><br><span class="line"><span class="string">Suites: <span class="subst">$(. /etc/os-release &amp;&amp; echo <span class="string">&quot;<span class="variable">$&#123;UBUNTU_CODENAME:-<span class="variable">$VERSION_CODENAME</span>&#125;</span>&quot;</span>)</span></span></span><br><span class="line"><span class="string">Components: stable</span></span><br><span class="line"><span class="string">Architectures: <span class="subst">$(dpkg --print-architecture)</span></span></span><br><span class="line"><span class="string">Signed-By: /etc/apt/keyrings/docker.asc&quot;</span> | \</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.sources &gt; /dev/null</span><br></pre></td></tr></table></figure><h4 id="æ–¹æ¡ˆ-Bï¼šUbuntu-23-10-åŠæ›´ä½ç‰ˆæœ¬-list"><a href="#æ–¹æ¡ˆ-Bï¼šUbuntu-23-10-åŠæ›´ä½ç‰ˆæœ¬-list" class="headerlink" title="æ–¹æ¡ˆ Bï¼šUbuntu 23.10 åŠæ›´ä½ç‰ˆæœ¬ (.list)"></a>æ–¹æ¡ˆ Bï¼šUbuntu 23.10 åŠæ›´ä½ç‰ˆæœ¬ (.list)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> \</span><br><span class="line">  <span class="string">&quot;deb [arch=<span class="subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">  <span class="subst">$(. /etc/os-release &amp;&amp; echo <span class="string">&quot;<span class="variable">$&#123;UBUNTU_CODENAME:-<span class="variable">$VERSION_CODENAME</span>&#125;</span>&quot;</span>)</span> stable&quot;</span> | \</span><br><span class="line">  <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null</span><br></pre></td></tr></table></figure><p>æ·»åŠ å®Œæˆåï¼Œ<strong>åŠ¡å¿…æ›´æ–°ç´¢å¼•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å®‰è£…-Docker-Engine"><a href="#ä¸‰ã€å®‰è£…-Docker-Engine" class="headerlink" title="ä¸‰ã€å®‰è£… Docker Engine"></a>ä¸‰ã€å®‰è£… Docker Engine</h2><p>å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Docker Engineã€CLIã€Containerd ä»¥åŠ Docker Compose æ’ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin</span><br></pre></td></tr></table></figure><p>éªŒè¯å®‰è£…ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker --version</span><br><span class="line">docker compose version</span><br></pre></td></tr></table></figure><h2 id="å››ã€å®‰è£…åé…ç½®-å…³é”®æ­¥éª¤"><a href="#å››ã€å®‰è£…åé…ç½®-å…³é”®æ­¥éª¤" class="headerlink" title="å››ã€å®‰è£…åé…ç½® (å…³é”®æ­¥éª¤)"></a>å››ã€å®‰è£…åé…ç½® (å…³é”®æ­¥éª¤)</h2><h3 id="1-å…-Sudo-æ‰§è¡Œ-é-Root-ç”¨æˆ·"><a href="#1-å…-Sudo-æ‰§è¡Œ-é-Root-ç”¨æˆ·" class="headerlink" title="1. å… Sudo æ‰§è¡Œ (é Root ç”¨æˆ·)"></a>1. å… Sudo æ‰§è¡Œ (é Root ç”¨æˆ·)</h3><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿è¡Œ docker å‘½ä»¤éœ€è¦ <code>sudo</code> æƒé™ã€‚ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå»ºè®®å°†å½“å‰ç”¨æˆ·åŠ å…¥ <code>docker</code> ç”¨æˆ·ç»„ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. åˆ›å»º docker ç»„ (é€šå¸¸å®‰è£…æ—¶å·²è‡ªåŠ¨åˆ›å»º)</span></span><br><span class="line"><span class="built_in">sudo</span> groupadd docker</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å°†å½“å‰ç”¨æˆ·åŠ å…¥ç»„</span></span><br><span class="line"><span class="built_in">sudo</span> usermod -aG docker <span class="variable">$USER</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. æ¿€æ´»æ›´æ”¹ (æˆ–è€…é€€å‡ºç»ˆç«¯é‡æ–°ç™»å½•)</span></span><br><span class="line">newgrp docker</span><br></pre></td></tr></table></figure><p>ç°åœ¨ä½ å¯ä»¥ç›´æ¥è¿è¡Œ <code>docker ps</code> è€Œæ— éœ€è¾“å…¥å¯†ç äº†ã€‚</p><h3 id="2-é…ç½®é•œåƒåŠ é€Ÿå™¨"><a href="#2-é…ç½®é•œåƒåŠ é€Ÿå™¨" class="headerlink" title="2. é…ç½®é•œåƒåŠ é€Ÿå™¨"></a>2. é…ç½®é•œåƒåŠ é€Ÿå™¨</h3><p>å›½å†…æ‹‰å– Docker Hub é•œåƒéå¸¸æ…¢ï¼Œå»ºè®®é…ç½® Registry Mirrorsã€‚</p><p>ç¼–è¾‘æˆ–åˆ›å»º <code>/etc/docker/daemon.json</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/docker/daemon.json</span><br></pre></td></tr></table></figure><p>ç™»å½• <a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">é˜¿é‡Œäº‘å®¹å™¨é•œåƒæœåŠ¡æ§åˆ¶å°</a>ï¼Œåœ¨å·¦ä¾§èœå•æ‰¾åˆ° <strong>é•œåƒå·¥å…· - é•œåƒåŠ é€Ÿå™¨</strong>ã€‚</p><p>å¤åˆ¶ä¸“å±çš„åŠ é€Ÿå™¨åœ°å€ï¼ˆæ ¼å¼é€šå¸¸ä¸º <code>https://xxxx.mirror.aliyuncs.com</code>ï¼‰ã€‚</p><figure class="highlight json"><figcaption><span>daemon.json</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://ä½ çš„ä¸“å±ID.mirror.aliyuncs.com&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>é‡å¯ Docker æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl daemon-reload</span><br><span class="line"><span class="built_in">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure><h2 id="äº”ã€éªŒè¯å®‰è£…"><a href="#äº”ã€éªŒè¯å®‰è£…" class="headerlink" title="äº”ã€éªŒè¯å®‰è£…"></a>äº”ã€éªŒè¯å®‰è£…</h2><p>è¿è¡Œ Hello World å®¹å™¨æ¥éªŒè¯ä¸€åˆ‡æ˜¯å¦æ­£å¸¸ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run hello-world</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼Œè¯´æ˜å®‰è£…æˆåŠŸï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="å…­ã€å¸è½½-Docker"><a href="#å…­ã€å¸è½½-Docker" class="headerlink" title="å…­ã€å¸è½½ Docker"></a>å…­ã€å¸è½½ Docker</h2><p>å¦‚æœéœ€è¦å½»åº•ç§»é™¤ Dockerï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. å¸è½½ä¾èµ–åŒ…</span></span><br><span class="line"><span class="built_in">sudo</span> apt purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. åˆ é™¤é•œåƒã€å®¹å™¨å’Œæ•°æ®å· (æ…é‡ï¼)</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /var/lib/docker</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> -rf /var/lib/containerd</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. åˆ é™¤é…ç½®æ–‡ä»¶å’Œå¯†é’¥</span></span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/apt/sources.list.d/docker.list</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/apt/sources.list.d/docker.sources</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">rm</span> /etc/apt/keyrings/docker.asc</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">è¯¦è§£åœ¨ Ubuntu ç³»ç»Ÿï¼ˆå« 24.04 æ–°ç‰ˆï¼‰ä¸‹å®‰è£… Docker çš„å…¨æµç¨‹ã€‚åŒ…å«å¸è½½æ—§ç‰ˆã€é…ç½® GPG å¯†é’¥ã€è®¾ç½® APT è½¯ä»¶æºï¼ˆå®˜æ–¹/é˜¿é‡Œäº‘ï¼‰ã€å… Sudo é…ç½®åŠé•œåƒåŠ é€Ÿå™¨è®¾ç½®ã€‚</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Ubuntu" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/Ubuntu/"/>
    
    
    <category term="Docker" scheme="https://lijiabao9.github.io/tags/Docker/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu ç³»ç»Ÿå®‰è£… JDK å…¨æŒ‡å—ï¼šOpenJDK ä¸ Oracle JDK åŒæ–¹æ¡ˆ</title>
    <link href="https://lijiabao9.github.io/posts/3c893d60.html"/>
    <id>https://lijiabao9.github.io/posts/3c893d60.html</id>
    <published>2025-12-04T14:27:42.000Z</published>
    <updated>2025-12-17T17:57:48.699Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ Ubuntu æœåŠ¡å™¨ä¸Šéƒ¨ç½² Java ç¯å¢ƒé€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ol><li><strong>åŒ…ç®¡ç†å™¨å®‰è£… (apt)</strong>ï¼šæœ€ç®€å•ï¼Œé€šå¸¸å®‰è£…çš„æ˜¯ OpenJDKï¼Œé€‚åˆå¤§å¤šæ•°å¼€æºé¡¹ç›®ã€‚</li><li><strong>æ‰‹åŠ¨å®‰è£…</strong>ï¼šé€‚åˆéœ€è¦ç‰¹å®šç‰ˆæœ¬ï¼ˆå¦‚ Oracle JDKï¼‰æˆ–éœ€ç²¾ç¡®æ§åˆ¶å®‰è£…è·¯å¾„çš„åœºæ™¯ã€‚</li></ol><hr><h2 id="æ–¹æ¡ˆä¸€ï¼šé€šè¿‡-apt-è‡ªåŠ¨å®‰è£…-æ¨è"><a href="#æ–¹æ¡ˆä¸€ï¼šé€šè¿‡-apt-è‡ªåŠ¨å®‰è£…-æ¨è" class="headerlink" title="æ–¹æ¡ˆä¸€ï¼šé€šè¿‡ apt è‡ªåŠ¨å®‰è£… (æ¨è)"></a>æ–¹æ¡ˆä¸€ï¼šé€šè¿‡ apt è‡ªåŠ¨å®‰è£… (æ¨è)</h2><p>è¿™æ˜¯æœ€å¿«æ·çš„æ–¹å¼ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†ä¾èµ–å’Œç¯å¢ƒå˜é‡ã€‚ä»¥å®‰è£… <strong>JDK 8</strong> ä¸ºä¾‹ï¼š</p><h3 id="1-å®‰è£…ä¸éªŒè¯"><a href="#1-å®‰è£…ä¸éªŒè¯" class="headerlink" title="1. å®‰è£…ä¸éªŒè¯"></a>1. å®‰è£…ä¸éªŒè¯</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. æ›´æ–°è½¯ä»¶æº</span></span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å®‰è£… OpenJDK 8</span></span><br><span class="line"><span class="built_in">sudo</span> apt install openjdk-8-jdk</span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. éªŒè¯å®‰è£…</span></span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><h3 id="2-ç®¡ç†å¤šä¸ª-Java-ç‰ˆæœ¬"><a href="#2-ç®¡ç†å¤šä¸ª-Java-ç‰ˆæœ¬" class="headerlink" title="2. ç®¡ç†å¤šä¸ª Java ç‰ˆæœ¬"></a>2. ç®¡ç†å¤šä¸ª Java ç‰ˆæœ¬</h3><p>å¦‚æœä½ çš„ç³»ç»ŸåŒæ—¶å®‰è£…äº† JDK 8ã€JDK 11 å’Œ JDK 17ï¼Œå¯ä»¥ä½¿ç”¨ <code>update-alternatives</code> å‘½ä»¤åœ¨ä¸åŒç‰ˆæœ¬é—´å¿«é€Ÿåˆ‡æ¢ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> update-alternatives --config java</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåä¼šå‡ºç°ä¸€ä¸ªåˆ—è¡¨ï¼Œè¾“å…¥å¯¹åº”çš„ <strong>Selection</strong> ç¼–å·å¹¶å›è½¦ï¼Œå³å¯åˆ‡æ¢ç³»ç»Ÿé»˜è®¤çš„ Java ç‰ˆæœ¬ã€‚</p><h2 id="æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨è§£å‹å®‰è£…-Oracle-JDK"><a href="#æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨è§£å‹å®‰è£…-Oracle-JDK" class="headerlink" title="æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨è§£å‹å®‰è£… (Oracle JDK)"></a>æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨è§£å‹å®‰è£… (Oracle JDK)</h2><p>å¦‚æœä½ éœ€è¦ä½¿ç”¨ Oracle å®˜æ–¹ç‰ˆæœ¬ï¼Œæˆ–è€…éœ€è¦å°† JDK å®‰è£…åˆ°æŒ‡å®šç›®å½•ï¼Œè¯·ä½¿ç”¨æ­¤æ–¹æ³•ã€‚</p><h3 id="1-ä¸‹è½½å®‰è£…åŒ…"><a href="#1-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="1. ä¸‹è½½å®‰è£…åŒ…"></a>1. ä¸‹è½½å®‰è£…åŒ…</h3><p>è¯·å‰å¾€ Oracle å®˜ç½‘ä¸‹è½½å¯¹åº”æ¶æ„ï¼ˆx64 æˆ– aarch64ï¼‰çš„ <code>.tar.gz</code> åŒ…ï¼š</p><ul><li><a href="https://www.oracle.com/java/technologies/downloads/#java8">JDK 8 ä¸‹è½½</a> | <a href="https://www.oracle.com/java/technologies/downloads/#java17">JDK 17 ä¸‹è½½</a> | <a href="https://www.oracle.com/java/technologies/downloads/#java21">JDK 21 ä¸‹è½½</a></li></ul><h3 id="2-è§£å‹éƒ¨ç½²"><a href="#2-è§£å‹éƒ¨ç½²" class="headerlink" title="2. è§£å‹éƒ¨ç½²"></a>2. è§£å‹éƒ¨ç½²</h3><p>å»ºè®®å°†ç¬¬ä¸‰æ–¹è½¯ä»¶ç»Ÿä¸€å®‰è£…åœ¨ <code>/usr/local/java</code> ç›®å½•ä¸‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p java</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. å®‰è£…åŒ…å‡†å¤‡</span></span><br><span class="line"><span class="comment"># è¯·ä½¿ç”¨ FTP/SFTP å·¥å…·å°†ä¸‹è½½å¥½çš„ tar.gz åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨</span></span><br><span class="line"><span class="comment"># æˆ–è€… wget å‘½ä»¤ç›´æ¥ä¸‹è½½</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 3. è§£å‹åˆ°æŒ‡å®šç›®å½• (æ³¨æ„æ›¿æ¢å…·ä½“çš„æ–‡ä»¶å)</span></span><br><span class="line"><span class="comment"># -C å‚æ•°æŒ‡å®šè§£å‹çš„ç›®æ ‡è·¯å¾„</span></span><br><span class="line"><span class="built_in">sudo</span> tar -zxvf jdk-8u471-linux-x64.tar.gz -C /usr/local/java/</span><br><span class="line"></span><br><span class="line"><span class="comment"># 4. éªŒè¯è§£å‹æ˜¯å¦æˆåŠŸ</span></span><br><span class="line"><span class="comment"># æ³¨æ„ï¼šè¿™é‡Œçš„ç›®å½•å jdk1.8.0_471 è§†ä½ ä¸‹è½½çš„å…·ä½“ç‰ˆæœ¬è€Œå®š</span></span><br><span class="line">/usr/local/java/jdk1.8.0_471/bin/java -version</span><br></pre></td></tr></table></figure><h3 id="3-é…ç½®ç¯å¢ƒå˜é‡"><a href="#3-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="3. é…ç½®ç¯å¢ƒå˜é‡"></a>3. é…ç½®ç¯å¢ƒå˜é‡</h3><p>ä¸ºäº†åœ¨ä»»ä½•ç›®å½•ä¸‹éƒ½èƒ½ä½¿ç”¨ <code>java</code> å‘½ä»¤ï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡ã€‚</p><p>ç¼–è¾‘ç³»ç»Ÿçº§é…ç½®æ–‡ä»¶ <code>/etc/profile</code>ï¼ˆå¯¹æ‰€æœ‰ç”¨æˆ·ç”Ÿæ•ˆï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/profile</span><br></pre></td></tr></table></figure><p>åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼ˆ<strong>æ³¨æ„ä¿®æ”¹ <code>JAVA_HOME</code> ä¸ºä½ å®é™…çš„è§£å‹è·¯å¾„</strong>ï¼‰ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Java Environment Config</span><br><span class="line">export JAVA_HOME=/usr/local/java/jdk1.8.0_471</span><br><span class="line">export JRE_HOME=$JAVA_HOME/jre</span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/lib</span><br><span class="line">export PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin</span><br></pre></td></tr></table></figure><h3 id="4-é‡æ–°åŠ è½½é…ç½®"><a href="#4-é‡æ–°åŠ è½½é…ç½®" class="headerlink" title="4. é‡æ–°åŠ è½½é…ç½®"></a>4. é‡æ–°åŠ è½½é…ç½®</h3><p>ä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéœ€è¦å¼ºåˆ¶é‡è½½æ‰èƒ½ç«‹å³ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†æ¬¡éªŒè¯</span></span><br><span class="line">java -version</span><br></pre></td></tr></table></figure><hr><h2 id="è¡¥å……ï¼šLinux-é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"><a href="#è¡¥å……ï¼šLinux-é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº" class="headerlink" title="è¡¥å……ï¼šLinux é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº"></a>è¡¥å……ï¼šLinux é…ç½®æ–‡ä»¶åŠ è½½é¡ºåº</h2><p>ç†è§£é…ç½®æ–‡ä»¶çš„åŠ è½½é¡ºåºï¼Œæœ‰åŠ©äºä½ å†³å®šå°†ç¯å¢ƒå˜é‡å†™åœ¨å“ªé‡Œã€‚</p><ol><li><p><strong>/etc/profile</strong></p><ul><li><strong>çº§åˆ«</strong>ï¼šç³»ç»Ÿå…¨å±€</li><li><strong>ç”Ÿæ•ˆæ—¶æœº</strong>ï¼šç”¨æˆ·ç™»å½•æ—¶åŠ è½½ã€‚</li><li><strong>å»ºè®®</strong>ï¼šç”Ÿäº§æœåŠ¡å™¨é€šå¸¸åœ¨æ­¤é…ç½® JAVA_HOMEï¼Œç¡®ä¿æ‰€æœ‰ç”¨æˆ·å¯ç”¨ã€‚</li></ul></li><li><p><strong>~/.bashrc</strong></p><ul><li><strong>çº§åˆ«</strong>ï¼šå½“å‰ç”¨æˆ·</li><li><strong>ç”Ÿæ•ˆæ—¶æœº</strong>ï¼šæ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼ˆShellï¼‰æ—¶åŠ è½½ã€‚</li><li><strong>å»ºè®®</strong>ï¼šå¼€å‘æµ‹è¯•ç¯å¢ƒæˆ–ä»…å½“å‰ç”¨æˆ·ä½¿ç”¨æ—¶ï¼Œæ¨èä¿®æ”¹æ­¤æ–‡ä»¶ï¼Œé¿å…æ±¡æŸ“å…¨å±€ç¯å¢ƒã€‚</li></ul></li><li><p><strong>/etc/bash.bashrc</strong></p><ul><li><strong>çº§åˆ«</strong>ï¼šç³»ç»Ÿå…¨å±€</li><li><strong>ç”Ÿæ•ˆæ—¶æœº</strong>ï¼šäº¤äº’å¼ Shell å¯åŠ¨æ—¶åŠ è½½ã€‚</li></ul></li></ol><blockquote><p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p><ul><li>å¦‚æœæ˜¯<strong>æœåŠ¡å™¨</strong>éƒ¨ç½²åº”ç”¨ï¼Œå»ºè®®ä¿®æ”¹ <code>/etc/profile</code>ã€‚</li><li>å¦‚æœæ˜¯<strong>ä¸ªäººå¼€å‘æœº</strong>ï¼Œå»ºè®®ä¿®æ”¹ <code>~/.bashrc</code>ã€‚</li></ul></blockquote>]]></content>
    
    
    <summary type="html">è¯¦è§£åœ¨ Ubuntu ç³»ç»Ÿä¸Šå®‰è£… Java å¼€å‘ç¯å¢ƒçš„ä¸¤ç§ä¸»æµæ–¹å¼ï¼šé€šè¿‡ apt åŒ…ç®¡ç†å™¨å®‰è£… OpenJDKï¼Œä»¥åŠæ‰‹åŠ¨éƒ¨ç½² Oracle JDKï¼ŒåŒ…å«ç¯å¢ƒå˜é‡é…ç½®ä¸å¤šç‰ˆæœ¬åˆ‡æ¢æŒ‡å—ã€‚</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Ubuntu" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/Ubuntu/"/>
    
    
    <category term="JDK" scheme="https://lijiabao9.github.io/tags/JDK/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu ç³»ç»Ÿè¿ç»´æ‰‹å†Œï¼šå¸¸ç”¨å‘½ä»¤ä¸é…ç½®é€ŸæŸ¥</title>
    <link href="https://lijiabao9.github.io/posts/428aa18f.html"/>
    <id>https://lijiabao9.github.io/posts/428aa18f.html</id>
    <published>2025-12-04T13:45:46.000Z</published>
    <updated>2025-12-17T17:57:48.699Z</updated>
    
    <content type="html"><![CDATA[<p>Ubuntu æ˜¯ç›®å‰æœ€æµè¡Œçš„ Linux æœåŠ¡å™¨å‘è¡Œç‰ˆä¹‹ä¸€ã€‚ç†Ÿç»ƒæŒæ¡å…¶å¸¸ç”¨å‘½ä»¤ä¸é…ç½®ï¼Œæ˜¯è¿ç»´ä¸å¼€å‘çš„å¿…å¤‡æŠ€èƒ½ã€‚</p><h2 id="Ubuntu-ç‰ˆæœ¬ä»£å·é€ŸæŸ¥"><a href="#Ubuntu-ç‰ˆæœ¬ä»£å·é€ŸæŸ¥" class="headerlink" title="Ubuntu ç‰ˆæœ¬ä»£å·é€ŸæŸ¥"></a>Ubuntu ç‰ˆæœ¬ä»£å·é€ŸæŸ¥</h2><div class="table-container"><table><thead><tr><th style="text-align:left">ç‰ˆæœ¬å·</th><th style="text-align:left">ä»£å·</th><th style="text-align:left">çŠ¶æ€</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><strong>18.04 LTS</strong></td><td style="text-align:left"><em>Bionic Beaver</em></td><td style="text-align:left">âš ï¸ åœæ­¢ç»´æŠ¤</td><td style="text-align:left">å·²äº 2023 å¹´åœæ­¢å…è´¹æ”¯æŒ</td></tr><tr><td style="text-align:left"><strong>20.04 LTS</strong></td><td style="text-align:left"><em>Focal Fossa</em></td><td style="text-align:left">âœ… æ´»è·ƒ</td><td style="text-align:left">é•¿æœŸæ”¯æŒè‡³ 2025 å¹´ 4 æœˆ</td></tr><tr><td style="text-align:left"><strong>22.04 LTS</strong></td><td style="text-align:left"><em>Jammy Jellyfish</em></td><td style="text-align:left">âœ… æ´»è·ƒ</td><td style="text-align:left">é•¿æœŸæ”¯æŒè‡³ 2027 å¹´ 4 æœˆ</td></tr><tr><td style="text-align:left"><strong>24.04 LTS</strong></td><td style="text-align:left"><em>Noble Numbat</em></td><td style="text-align:left">ğŸš€ æœ€æ–°</td><td style="text-align:left">é•¿æœŸæ”¯æŒè‡³ 2029 å¹´ 4 æœˆ</td></tr></tbody></table></div><h2 id="ä¸€ã€SSH-è¿œç¨‹è¿æ¥é…ç½®"><a href="#ä¸€ã€SSH-è¿œç¨‹è¿æ¥é…ç½®" class="headerlink" title="ä¸€ã€SSH è¿œç¨‹è¿æ¥é…ç½®"></a>ä¸€ã€SSH è¿œç¨‹è¿æ¥é…ç½®</h2><p>æ–°è£…çš„ Ubuntu æœåŠ¡å™¨é€šå¸¸é»˜è®¤æœªå¼€å¯ SSH å¯†ç ç™»å½•ï¼Œç”šè‡³æœªå®‰è£… SSH æœåŠ¡ã€‚</p><h3 id="1-å®‰è£…-SSH-æœåŠ¡"><a href="#1-å®‰è£…-SSH-æœåŠ¡" class="headerlink" title="1. å®‰è£… SSH æœåŠ¡"></a>1. å®‰è£… SSH æœåŠ¡</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br><span class="line"><span class="built_in">sudo</span> apt install openssh-server -y</span><br><span class="line"><span class="built_in">sudo</span> systemctl status ssh  <span class="comment"># æ£€æŸ¥è¿è¡ŒçŠ¶æ€</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®-SSH-è®¿é—®æƒé™"><a href="#2-é…ç½®-SSH-è®¿é—®æƒé™" class="headerlink" title="2. é…ç½® SSH è®¿é—®æƒé™"></a>2. é…ç½® SSH è®¿é—®æƒé™</h3><p>ç¼–è¾‘é…ç½®æ–‡ä»¶ <code>/etc/ssh/sshd_config</code>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æˆ–ç¡®è®¤ä»¥ä¸‹æ ¸å¿ƒé…ç½®ï¼š</p><figure class="highlight text"><figcaption><span>sshd_config</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># å…è®¸å¯†ç éªŒè¯ç™»å½•</span><br><span class="line">PasswordAuthentication yes</span><br><span class="line"></span><br><span class="line"># å…è®¸ root ç”¨æˆ·ç›´æ¥ç™»å½•ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®æ”¹ä¸º noï¼Œä»…ç”¨æ™®é€šç”¨æˆ· sudoï¼‰</span><br><span class="line">PermitRootLogin yes</span><br></pre></td></tr></table></figure><p>é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart ssh</span><br></pre></td></tr></table></figure><h3 id="3-é˜²ç«å¢™æ”¾è¡Œ-UFW"><a href="#3-é˜²ç«å¢™æ”¾è¡Œ-UFW" class="headerlink" title="3. é˜²ç«å¢™æ”¾è¡Œ (UFW)"></a>3. é˜²ç«å¢™æ”¾è¡Œ (UFW)</h3><p>å¦‚æœå¼€å¯äº† <code>ufw</code> é˜²ç«å¢™ï¼Œå¿…é¡»æ”¾è¡Œ SSH ç«¯å£ï¼ˆé»˜è®¤ 22ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ufw allow ssh     <span class="comment"># æˆ– sudo ufw allow 22/tcp</span></span><br><span class="line"><span class="built_in">sudo</span> ufw <span class="built_in">enable</span>        <span class="comment"># å¼€å¯é˜²ç«å¢™ï¼Œdisable ç¦ç”¨é˜²ç«å¢™</span></span><br><span class="line"><span class="built_in">sudo</span> ufw status        <span class="comment"># æŸ¥çœ‹çŠ¶æ€</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€APT-è½¯ä»¶æºé…ç½®-å›½å†…åŠ é€Ÿ"><a href="#äºŒã€APT-è½¯ä»¶æºé…ç½®-å›½å†…åŠ é€Ÿ" class="headerlink" title="äºŒã€APT è½¯ä»¶æºé…ç½® (å›½å†…åŠ é€Ÿ)"></a>äºŒã€APT è½¯ä»¶æºé…ç½® (å›½å†…åŠ é€Ÿ)</h2><p>é»˜è®¤çš„å®˜æ–¹æºåœ¨å›½å†…è®¿é—®è¾ƒæ…¢ï¼Œå»ºè®®æ›¿æ¢ä¸ºé˜¿é‡Œäº‘ã€æ¸…åå¤§å­¦ç­‰é•œåƒæºã€‚</p><h3 id="åœºæ™¯-Aï¼šUbuntu-23-10-åŠä¹‹å‰çš„ç‰ˆæœ¬-ä¼ ç»Ÿæ ¼å¼"><a href="#åœºæ™¯-Aï¼šUbuntu-23-10-åŠä¹‹å‰çš„ç‰ˆæœ¬-ä¼ ç»Ÿæ ¼å¼" class="headerlink" title="åœºæ™¯ Aï¼šUbuntu 23.10 åŠä¹‹å‰çš„ç‰ˆæœ¬ (ä¼ ç»Ÿæ ¼å¼)"></a>åœºæ™¯ Aï¼šUbuntu 23.10 åŠä¹‹å‰çš„ç‰ˆæœ¬ (ä¼ ç»Ÿæ ¼å¼)</h3><p>ç¼–è¾‘ <code>/etc/apt/sources.list</code>ï¼Œå°†å†…å®¹æ›¿æ¢ä¸ºï¼ˆä»¥ 20.04 <code>focal</code> ä¸ºä¾‹ï¼‰ï¼š</p><figure class="highlight text"><figcaption><span>sources.list</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure><blockquote><p><strong>æ³¨æ„</strong>ï¼šéœ€å°† <code>focal</code> æ›¿æ¢ä¸ºä½ å½“å‰ç³»ç»Ÿçš„ä»£å·ï¼ˆå¦‚ <code>jammy</code>ï¼‰ã€‚</p></blockquote><h3 id="åœºæ™¯-Bï¼šUbuntu-24-04-LTS-æ–°ç‰ˆ-DEB822-æ ¼å¼"><a href="#åœºæ™¯-Bï¼šUbuntu-24-04-LTS-æ–°ç‰ˆ-DEB822-æ ¼å¼" class="headerlink" title="åœºæ™¯ Bï¼šUbuntu 24.04 LTS (æ–°ç‰ˆ DEB822 æ ¼å¼)"></a>åœºæ™¯ Bï¼šUbuntu 24.04 LTS (æ–°ç‰ˆ DEB822 æ ¼å¼)</h3><p>ä» 24.04 å¼€å§‹ï¼Œæºé…ç½®ç§»è‡³ <code>/etc/apt/sources.list.d/ubuntu.sources</code>ã€‚</p><ol><li><p><strong>å¤‡ä»½åŸæ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> /etc/apt/sources.list.d/ubuntu.sources /etc/apt/sources.list.d/ubuntu.sources.bak</span><br></pre></td></tr></table></figure></li><li><p><strong>æ–°å»ºé…ç½®</strong> <code>/etc/apt/sources.list.d/aliyun.sources</code>ï¼š</p><figure class="highlight text"><figcaption><span>aliyun.sources</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Types: deb</span><br><span class="line">URIs: https://mirrors.aliyun.com/ubuntu/</span><br><span class="line">Suites: noble noble-security noble-updates noble-proposed noble-backports</span><br><span class="line">Components: main restricted universe multiverse</span><br><span class="line">Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg</span><br></pre></td></tr></table></figure></li></ol><p><strong>æœ€åï¼Œåˆ‡è®°æ›´æ–°ç¼“å­˜ï¼š</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€ç”¨æˆ·ä¸æƒé™ç®¡ç†"><a href="#ä¸‰ã€ç”¨æˆ·ä¸æƒé™ç®¡ç†" class="headerlink" title="ä¸‰ã€ç”¨æˆ·ä¸æƒé™ç®¡ç†"></a>ä¸‰ã€ç”¨æˆ·ä¸æƒé™ç®¡ç†</h2><h3 id="1-åŸºç¡€æ“ä½œ"><a href="#1-åŸºç¡€æ“ä½œ" class="headerlink" title="1. åŸºç¡€æ“ä½œ"></a>1. åŸºç¡€æ“ä½œ</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">whoami</span>                  <span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·</span></span><br><span class="line"><span class="built_in">id</span>                      <span class="comment"># æŸ¥çœ‹å½“å‰ç”¨æˆ·IDå’Œç»„ä¿¡æ¯</span></span><br><span class="line">su - ubuntu             <span class="comment"># åˆ‡æ¢åˆ°æŒ‡å®šç”¨æˆ·</span></span><br><span class="line"><span class="built_in">sudo</span> -i                 <span class="comment"># ä½¿ç”¨ sudo æƒé™åˆ‡æ¢åˆ° root ç¯å¢ƒ</span></span><br><span class="line">passwd                  <span class="comment"># ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç </span></span><br></pre></td></tr></table></figure><h3 id="2-ç”¨æˆ·å¢åˆ -æ¨èä½¿ç”¨-adduser"><a href="#2-ç”¨æˆ·å¢åˆ -æ¨èä½¿ç”¨-adduser" class="headerlink" title="2. ç”¨æˆ·å¢åˆ  (æ¨èä½¿ç”¨ adduser)"></a>2. ç”¨æˆ·å¢åˆ  (æ¨èä½¿ç”¨ adduser)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–°å¢ç”¨æˆ· (è‡ªåŠ¨åˆ›å»ºå®¶ç›®å½•ã€è®¾ç½® Shell)</span></span><br><span class="line"><span class="built_in">sudo</span> adduser testuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ç”¨æˆ· (å»ºè®®ä¿ç•™å®¶ç›®å½•ï¼Œè‹¥éœ€å½»åº•åˆ é™¤åŠ  --remove-home --remove-all-files)</span></span><br><span class="line"><span class="built_in">sudo</span> deluser testuser</span><br></pre></td></tr></table></figure><h3 id="3-Sudo-ææƒ"><a href="#3-Sudo-ææƒ" class="headerlink" title="3. Sudo ææƒ"></a>3. Sudo ææƒ</h3><p>å°†æ™®é€šç”¨æˆ·åŠ å…¥ <code>sudo</code> ç»„ï¼Œä½¿å…¶å…·å¤‡ç®¡ç†å‘˜æƒé™ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> usermod -aG <span class="built_in">sudo</span> testuser</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¹åº”çš„ç§»é™¤å‘½ä»¤ï¼ˆéœ€è¦è°¨æ…ä½¿ç”¨ï¼Œç§»é™¤åè‡ªèº«æ²¡æƒé™ææƒï¼‰</span></span><br><span class="line"><span class="built_in">sudo</span> gpasswd -d testuser <span class="built_in">sudo</span></span><br></pre></td></tr></table></figure><p>æˆ–è€…ç¼–è¾‘ <code>/etc/sudoers</code> æ–‡ä»¶ï¼ˆéœ€ä½¿ç”¨ <code>sudo vi</code> å‘½ä»¤å®‰å…¨ç¼–è¾‘ï¼‰ï¼Œæ·»åŠ ï¼š<code>testuser ALL=(ALL:ALL) ALL</code></p><h2 id="å››ã€ç³»ç»Ÿè®¾ç½®ä¸ç›‘æ§"><a href="#å››ã€ç³»ç»Ÿè®¾ç½®ä¸ç›‘æ§" class="headerlink" title="å››ã€ç³»ç»Ÿè®¾ç½®ä¸ç›‘æ§"></a>å››ã€ç³»ç»Ÿè®¾ç½®ä¸ç›‘æ§</h2><h3 id="1-æ—¶åŒºè®¾ç½®"><a href="#1-æ—¶åŒºè®¾ç½®" class="headerlink" title="1. æ—¶åŒºè®¾ç½®"></a>1. æ—¶åŒºè®¾ç½®</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">timedatectl set-timezone Asia/Shanghai  <span class="comment"># è®¾ç½®ä¸ºä¸­å›½æ ‡å‡†æ—¶é—´</span></span><br><span class="line">timedatectl                             <span class="comment"># æŸ¥çœ‹å½“å‰æ—¶é—´ä¸æ—¶åŒº</span></span><br></pre></td></tr></table></figure><h3 id="2-ç£ç›˜ä¸èµ„æºç›‘æ§"><a href="#2-ç£ç›˜ä¸èµ„æºç›‘æ§" class="headerlink" title="2. ç£ç›˜ä¸èµ„æºç›‘æ§"></a>2. ç£ç›˜ä¸èµ„æºç›‘æ§</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">df</span> -h                   <span class="comment"># æŸ¥çœ‹ç£ç›˜æŒ‚è½½ä¸ç©ºé—´ä½¿ç”¨ (Disk Free)</span></span><br><span class="line"><span class="built_in">du</span> -h                   <span class="comment"># æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹å„æ–‡ä»¶å¤¹çš„å¤§å° (Disk Usage)</span></span><br><span class="line">free -m                 <span class="comment"># æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µ (MB)</span></span><br><span class="line">top                     <span class="comment"># æ˜¾ç¤ºè¿›ç¨‹ä½¿ç”¨æƒ…å†µ</span></span><br></pre></td></tr></table></figure><h3 id="3-ç½‘ç»œä¸è¿›ç¨‹"><a href="#3-ç½‘ç»œä¸è¿›ç¨‹" class="headerlink" title="3. ç½‘ç»œä¸è¿›ç¨‹"></a>3. ç½‘ç»œä¸è¿›ç¨‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ss -ntulp | grep 8080   <span class="comment"># æŸ¥çœ‹å ç”¨ 8080 ç«¯å£çš„è¿›ç¨‹</span></span><br><span class="line">ps -ef | grep java      <span class="comment"># æŸ¥çœ‹ Java è¿›ç¨‹</span></span><br><span class="line"><span class="built_in">kill</span> -9 &lt;PID&gt;           <span class="comment"># å¼ºåˆ¶ç»“æŸæŒ‡å®šè¿›ç¨‹ ID</span></span><br></pre></td></tr></table></figure><h3 id="4-è½¯ä»¶åŒ…ç®¡ç†-apt"><a href="#4-è½¯ä»¶åŒ…ç®¡ç†-apt" class="headerlink" title="4. è½¯ä»¶åŒ…ç®¡ç†(apt)"></a>4. è½¯ä»¶åŒ…ç®¡ç†(apt)</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt update              <span class="comment"># æ›´æ–°è½¯ä»¶åŒ…</span></span><br><span class="line">apt list --upgradable   <span class="comment"># åˆ—å‡ºå¯å‡çº§çš„åŒ…</span></span><br><span class="line">apt upgrade -y          <span class="comment"># å‡çº§è½¯ä»¶åŒ…</span></span><br><span class="line"></span><br><span class="line">apt install ufw         <span class="comment"># å®‰è£… UFW</span></span><br><span class="line">apt remove ufw          <span class="comment"># å¸è½½ UFW</span></span><br><span class="line">apt purge ufw           <span class="comment"># å½»åº•å¸è½½ UFW</span></span><br></pre></td></tr></table></figure><h3 id="5-æœåŠ¡ç®¡ç†"><a href="#5-æœåŠ¡ç®¡ç†" class="headerlink" title="5. æœåŠ¡ç®¡ç†"></a>5. æœåŠ¡ç®¡ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">systemctl start/stop/restart ufw    <span class="comment"># å¯åŠ¨/åœæ­¢/é‡å¯æœåŠ¡</span></span><br><span class="line">systemctl status ufw                <span class="comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span></span><br><span class="line">systemctl <span class="built_in">enable</span>/disable ufw        <span class="comment"># è®¾ç½®/ç¦æ­¢æœåŠ¡ å¼€æœºè‡ªå¯</span></span><br><span class="line"></span><br><span class="line">journalctl -f -u ufw                <span class="comment"># å®æ—¶æ»šåŠ¨æŸ¥çœ‹æœåŠ¡æ—¥å¿— --follow --unit</span></span><br><span class="line"></span><br><span class="line">dpkg -L ufw             <span class="comment"># æŸ¥çœ‹å®‰è£…çš„åŒ…é‡Šæ”¾äº†å“ªäº›æ–‡ä»¶ --listfiles</span></span><br><span class="line">dpkg -l | grep ufw      <span class="comment"># æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†æŸä¸ªåŒ…  --list</span></span><br></pre></td></tr></table></figure><h2 id="äº”ã€æ–‡ä»¶æ“ä½œä¸å‹ç¼©"><a href="#äº”ã€æ–‡ä»¶æ“ä½œä¸å‹ç¼©" class="headerlink" title="äº”ã€æ–‡ä»¶æ“ä½œä¸å‹ç¼©"></a>äº”ã€æ–‡ä»¶æ“ä½œä¸å‹ç¼©</h2><h3 id="1-å¸¸ç”¨å‘½ä»¤"><a href="#1-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="1. å¸¸ç”¨å‘½ä»¤"></a>1. å¸¸ç”¨å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /data/web        <span class="comment"># é€’å½’åˆ›å»ºç›®å½•</span></span><br><span class="line"><span class="built_in">touch</span> /file.txt           <span class="comment"># åˆ›å»ºæ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">rm</span> -rf /data/temp         <span class="comment"># å¼ºåˆ¶é€’å½’åˆ é™¤ç›®å½• (æ…ç”¨!)</span></span><br><span class="line"><span class="built_in">mv</span> old.txt new.txt        <span class="comment"># é‡å‘½åæˆ–ç§»åŠ¨</span></span><br><span class="line"><span class="built_in">ln</span> -s /src/file /dst/     <span class="comment"># åˆ›å»ºè½¯é“¾æ¥ (å¿«æ·æ–¹å¼)</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">cat</span> /etc/passwd     <span class="comment"># æ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span></span><br><span class="line">less /etc/passwd    <span class="comment"># åˆ†é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹</span></span><br></pre></td></tr></table></figure><h3 id="2-å‹ç¼©ä¸è§£å‹-Tar"><a href="#2-å‹ç¼©ä¸è§£å‹-Tar" class="headerlink" title="2. å‹ç¼©ä¸è§£å‹ (Tar)"></a>2. å‹ç¼©ä¸è§£å‹ (Tar)</h3><p><code>.tar.gz</code> æ˜¯ Linux ä¸‹æœ€é€šç”¨çš„å‹ç¼©æ ¼å¼ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹ï¼Œå¯é€šè¿‡ -C æŒ‡å®šè§£å‹åˆ°</span></span><br><span class="line">tar -zxvf filename.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‹ç¼©</span></span><br><span class="line">tar -zcvf filename.tar.gz /source/dir</span><br></pre></td></tr></table></figure><ul><li><code>z</code>: gzip å‹ç¼©</li><li><code>x</code>: è§£å‹ (extract)</li><li><code>c</code>: åˆ›å»º (create)</li><li><code>v</code>: æ˜¾ç¤ºè¿‡ç¨‹ (verbose)</li><li><code>f</code>: æŒ‡å®šæ–‡ä»¶å (file)</li></ul><h2 id="å…­ã€æœåŠ¡åå°è¿è¡Œ-Nohup"><a href="#å…­ã€æœåŠ¡åå°è¿è¡Œ-Nohup" class="headerlink" title="å…­ã€æœåŠ¡åå°è¿è¡Œ (Nohup)"></a>å…­ã€æœåŠ¡åå°è¿è¡Œ (Nohup)</h2><p>åœ¨æ–­å¼€ SSH è¿æ¥åç»§ç»­è¿è¡Œç¨‹åºï¼ˆå¦‚ Java Jar åŒ…ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ ‡å‡†åå°å¯åŠ¨å‘½ä»¤</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar app.jar &gt; app.log 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure><ul><li><code>nohup</code>: ä¸æŒ‚æ–­è¿è¡Œ (No Hang Up)ã€‚</li><li><code>&gt; app.log</code>: å°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ° app.logã€‚</li><li><code>2&gt;&amp;1</code>: å°†é”™è¯¯è¾“å‡º (2) é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º (1) ä¸€å¹¶å†™å…¥æ—¥å¿—ã€‚</li><li><code>&amp;</code>: åœ¨åå°è¿è¡Œã€‚</li></ul><p>æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span> -f app.log</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">å…¨é¢çš„ Ubuntu ç³»ç»Ÿè¿ç»´æŒ‡å—ã€‚æ¶µç›– SSH è¿œç¨‹è¿æ¥ã€æ—¶åŒºè®¾ç½®ã€APT å›½å†…æºé…ç½®ï¼ˆå« 24.04 æ–°ç‰ˆæ ¼å¼ï¼‰ã€ç”¨æˆ·æƒé™ç®¡ç†åŠé«˜é¢‘ä½¿ç”¨çš„æ–‡ä»¶ä¸è¿›ç¨‹ç®¡ç†å‘½ä»¤ã€‚</summary>
    
    
    
    <category term="å¼€å‘ç¯å¢ƒ" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"/>
    
    <category term="Ubuntu" scheme="https://lijiabao9.github.io/categories/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/Ubuntu/"/>
    
    
    <category term="è¿ç»´" scheme="https://lijiabao9.github.io/tags/%E8%BF%90%E7%BB%B4/"/>
    
    <category term="è¯­æ³•æ‰‹å†Œ" scheme="https://lijiabao9.github.io/tags/%E8%AF%AD%E6%B3%95%E6%89%8B%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot æ•´åˆ MyBatis-Plus å…¨è§£ï¼šä»å…¥é—¨åˆ°ä»£ç ç”Ÿæˆå™¨</title>
    <link href="https://lijiabao9.github.io/posts/b4f7cadb.html"/>
    <id>https://lijiabao9.github.io/posts/b4f7cadb.html</id>
    <published>2025-12-03T16:31:11.000Z</published>
    <updated>2025-12-17T17:57:48.700Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://baomidou.com/">MyBatis-Plus</a> (MP) æ˜¯ä¸€ä¸ª MyBatis çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><h2 id="ä¸€ã€å¿«é€Ÿèµ·æ­¥"><a href="#ä¸€ã€å¿«é€Ÿèµ·æ­¥" class="headerlink" title="ä¸€ã€å¿«é€Ÿèµ·æ­¥"></a>ä¸€ã€å¿«é€Ÿèµ·æ­¥</h2><h3 id="1-å¼•å…¥ä¾èµ–"><a href="#1-å¼•å…¥ä¾èµ–" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><p>å»ºè®®ä½¿ç”¨ BOM ç®¡ç†ç‰ˆæœ¬ï¼Œé¿å…ä¾èµ–å†²çªã€‚ä»¥ä¸‹åŸºäº Spring Boot 3 + JDK 17 ç¯å¢ƒï¼š</p><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.15<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-spring-boot3-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-jsqlparser<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-å¯é€‰ï¼šå…¨å±€é…ç½®-YAML"><a href="#2-å¯é€‰ï¼šå…¨å±€é…ç½®-YAML" class="headerlink" title="2. å¯é€‰ï¼šå…¨å±€é…ç½® (YAML)"></a>2. å¯é€‰ï¼šå…¨å±€é…ç½® (YAML)</h3><p>MP çš„é…ç½®é¡¹éå¸¸ä¸°å¯Œï¼Œä»¥ä¸‹æ˜¯æ¨èçš„ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼š</p><figure class="highlight yaml"><figcaption><span>application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath*:mapper/**/*.xml</span>  <span class="comment"># Mapper XML æ‰«æè·¯å¾„</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.example.demo.entity</span> <span class="comment"># å®ä½“ç±»åˆ«åæ‰«æåŒ…</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span> <span class="comment"># å¼€å¯ SQL æ—¥å¿—æ‰“å° (ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­)</span></span><br><span class="line">    <span class="attr">map-underscore-to-camel-case:</span> <span class="literal">true</span> <span class="comment"># å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³°</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span> <span class="comment"># æšä¸¾è‡ªåŠ¨æ˜ å°„</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">AUTO</span> <span class="comment"># ä¸»é”®ç­–ç•¥ï¼šæ•°æ®åº“è‡ªå¢</span></span><br><span class="line">      <span class="attr">logic-delete-field:</span> <span class="string">deleted</span> <span class="comment"># å…¨å±€é€»è¾‘åˆ é™¤å­—æ®µ</span></span><br><span class="line">      <span class="attr">logic-delete-value:</span> <span class="number">1</span> <span class="comment"># å·²åˆ é™¤å€¼</span></span><br><span class="line">      <span class="attr">logic-not-delete-value:</span> <span class="number">0</span> <span class="comment"># æœªåˆ é™¤å€¼</span></span><br></pre></td></tr></table></figure><h3 id="3-è¯´æ˜ï¼šå®ä½“ç±»è§„çº¦"><a href="#3-è¯´æ˜ï¼šå®ä½“ç±»è§„çº¦" class="headerlink" title="3. è¯´æ˜ï¼šå®ä½“ç±»è§„çº¦"></a>3. è¯´æ˜ï¼šå®ä½“ç±»è§„çº¦</h3><p>MP é»˜è®¤éµå®ˆ <strong>â€œçº¦å®šä¼˜äºé…ç½®â€</strong> çš„åŸåˆ™ï¼š</p><ul><li><strong>ç±»å</strong> -> <strong>è¡¨å</strong> (é©¼å³°è½¬ä¸‹åˆ’çº¿)</li><li><strong>å±æ€§å</strong> -> <strong>å­—æ®µå</strong> (é©¼å³°è½¬ä¸‹åˆ’çº¿)</li><li><strong>id</strong> -> <strong>ä¸»é”®</strong></li></ul><p>è‹¥éœ€è‡ªå®šä¹‰ï¼Œå¯ä½¿ç”¨æ³¨è§£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(&quot;t_user&quot;)</span> <span class="comment">// æŒ‡å®šè¡¨å</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableId(type = IdType.AUTO)</span> <span class="comment">// æŒ‡å®šä¸»é”®ç­–ç•¥</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@TableField(&quot;username&quot;)</span> <span class="comment">// æŒ‡å®šå­—æ®µå</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@TableField(exist = false)</span> <span class="comment">// æ ‡è®°éæ•°æ®åº“å­—æ®µ</span></span><br><span class="line">    <span class="keyword">private</span> String ignoreField;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-Mapper-æ¥å£"><a href="#4-Mapper-æ¥å£" class="headerlink" title="4. Mapper æ¥å£"></a>4. Mapper æ¥å£</h3><p>ç»§æ‰¿ <code>BaseMapper</code> å³å¯è·å¾—é€šç”¨çš„ CRUD èƒ½åŠ›ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;User&gt; &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥åœ¨è¿™é‡Œç¼–å†™è‡ªå®šä¹‰ SQL æ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="äºŒã€æ ¸å¿ƒåŠŸèƒ½è¯¦è§£"><a href="#äºŒã€æ ¸å¿ƒåŠŸèƒ½è¯¦è§£" class="headerlink" title="äºŒã€æ ¸å¿ƒåŠŸèƒ½è¯¦è§£"></a>äºŒã€æ ¸å¿ƒåŠŸèƒ½è¯¦è§£</h2><h3 id="1-Service-å±‚-CRUD"><a href="#1-Service-å±‚-CRUD" class="headerlink" title="1. Service å±‚ CRUD"></a>1. Service å±‚ CRUD</h3><p>ç»§æ‰¿ <code>IService</code> å’Œ <code>ServiceImpl</code>ï¼Œä¸ä»…æ‹¥æœ‰ Mapper çš„èƒ½åŠ›ï¼Œè¿˜æ‰©å±•äº†æ‰¹é‡æ“ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;User&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;UserMapper, User&gt; <span class="keyword">implements</span> <span class="title class_">IUserService</span> &#123;</span><br><span class="line">    <span class="comment">// ä¸šåŠ¡é€»è¾‘ä»£ç </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é“¾å¼è°ƒç”¨-Chain"><a href="#2-é“¾å¼è°ƒç”¨-Chain" class="headerlink" title="2. é“¾å¼è°ƒç”¨ (Chain)"></a>2. é“¾å¼è°ƒç”¨ (Chain)</h3><p>MP æä¾›äº†ç±»ä¼¼ Stream æµçš„é“¾å¼æ“ä½œï¼Œä»£ç æ›´ä¼˜é›…ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é“¾å¼æŸ¥è¯¢ï¼šæŸ¥è¯¢ id=1 çš„ç”¨æˆ·</span></span><br><span class="line">userService.lambdaQuery().eq(User::getId, <span class="number">1L</span>).one();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é“¾å¼æ›´æ–°ï¼šå°† id=1 çš„ç”¨æˆ·å¹´é¾„æ”¹ä¸º 18</span></span><br><span class="line">userService.lambdaUpdate().eq(User::getId, <span class="number">1L</span>).set(User::getAge, <span class="number">18</span>).update();</span><br></pre></td></tr></table></figure><h3 id="3-ActiveRecord-æ¨¡å¼"><a href="#3-ActiveRecord-æ¨¡å¼" class="headerlink" title="3. ActiveRecord æ¨¡å¼"></a>3. ActiveRecord æ¨¡å¼</h3><p>è®©å®ä½“ç±»æœ¬èº«å…·å¤‡ CRUD èƒ½åŠ›ï¼ˆéœ€ç»§æ‰¿ <code>Model</code>ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setName(<span class="string">&quot;Tom&quot;</span>);</span><br><span class="line">user.insert(); <span class="comment">// ç›´æ¥è°ƒç”¨ insert æ–¹æ³•ä¿å­˜è‡ªå·±</span></span><br></pre></td></tr></table></figure><h3 id="4-Db-Kit-å·¥å…·ç±»"><a href="#4-Db-Kit-å·¥å…·ç±»" class="headerlink" title="4. Db Kit å·¥å…·ç±»"></a>4. Db Kit å·¥å…·ç±»</h3><p>ä¸ºäº†é¿å… service å¾ªç¯æ³¨å…¥ï¼ŒMP æä¾›äº† <code>Db</code> å·¥å…·ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user2</span> <span class="operator">=</span> Db.getById(<span class="number">1L</span>, User.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰æ•ˆäºåŸæœ¬çš„</span></span><br><span class="line"><span class="type">User</span> <span class="variable">user1</span> <span class="operator">=</span> userService.getById(<span class="number">1L</span>);</span><br></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€æ¡ä»¶æ„é€ å™¨-Wrapper"><a href="#ä¸‰ã€æ¡ä»¶æ„é€ å™¨-Wrapper" class="headerlink" title="ä¸‰ã€æ¡ä»¶æ„é€ å™¨ (Wrapper)"></a>ä¸‰ã€æ¡ä»¶æ„é€ å™¨ (Wrapper)</h2><p>Wrapper æ˜¯ MP çš„ç²¾é«“ï¼Œç”¨äºæ„å»ºå¤æ‚çš„ WHERE æ¡ä»¶ã€‚æ¨èä½¿ç”¨ <strong>LambdaWrapper</strong> ä»¥é¿å…é­”æ³•å€¼ã€‚</p><h3 id="1-ç±»ç»§æ‰¿å…³ç³»"><a href="#1-ç±»ç»§æ‰¿å…³ç³»" class="headerlink" title="1. ç±»ç»§æ‰¿å…³ç³»"></a>1. ç±»ç»§æ‰¿å…³ç³»</h3><p><img src="https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/post/20251204005149679.webp" alt=""></p><h3 id="2-å®æˆ˜ç¤ºä¾‹"><a href="#2-å®æˆ˜ç¤ºä¾‹" class="headerlink" title="2. å®æˆ˜ç¤ºä¾‹"></a>2. å®æˆ˜ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ„é€ æ¡ä»¶ï¼šname åŒ…å« &quot;Jack&quot; ä¸” age &gt; 20</span></span><br><span class="line">LambdaQueryWrapper&lt;User&gt; wrapper = Wrappers.lambdaQuery();</span><br><span class="line">wrapper.like(User::getName, <span class="string">&quot;Jack&quot;</span>)</span><br><span class="line">       .gt(User::getAge, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">List&lt;User&gt; users = userMapper.selectList(wrapper);</span><br></pre></td></tr></table></figure><h3 id="3-è‡ªå®šä¹‰-SQL-ç»“åˆ-Wrapper"><a href="#3-è‡ªå®šä¹‰-SQL-ç»“åˆ-Wrapper" class="headerlink" title="3. è‡ªå®šä¹‰ SQL ç»“åˆ Wrapper"></a>3. è‡ªå®šä¹‰ SQL ç»“åˆ Wrapper</h3><p>åœ¨å¤æ‚åœºæ™¯ä¸‹ï¼Œä½ å¯èƒ½éœ€è¦æ‰‹å†™ SQLï¼Œä½†åˆæƒ³å¤ç”¨ Wrapper çš„æ¡ä»¶ã€‚</p><p><strong>Mapper æ¥å£ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨ $&#123;ew.customSqlSegment&#125; æ‹¼æ¥ Wrapper ç”Ÿæˆçš„ SQL</span></span><br><span class="line"><span class="meta">@Select(&quot;SELECT * FROM t_user $&#123;ew.customSqlSegment&#125;&quot;)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">selectByCustomWrapper</span><span class="params">(<span class="meta">@Param(Constants.WRAPPER)</span> Wrapper&lt;User&gt; wrapper)</span>;</span><br></pre></td></tr></table></figure><hr><h2 id="å››ã€è‡ªåŠ¨åŒ–é«˜çº§ç‰¹æ€§"><a href="#å››ã€è‡ªåŠ¨åŒ–é«˜çº§ç‰¹æ€§" class="headerlink" title="å››ã€è‡ªåŠ¨åŒ–é«˜çº§ç‰¹æ€§"></a>å››ã€è‡ªåŠ¨åŒ–é«˜çº§ç‰¹æ€§</h2><h3 id="1-è‡ªåŠ¨å¡«å……-Audit"><a href="#1-è‡ªåŠ¨å¡«å……-Audit" class="headerlink" title="1. è‡ªåŠ¨å¡«å…… (Audit)"></a>1. è‡ªåŠ¨å¡«å…… (Audit)</h3><p>è‡ªåŠ¨ç»´æŠ¤ <code>create_time</code>, <code>update_time</code> ç­‰å­—æ®µã€‚</p><p><strong>å®ä½“ç±»é…ç½®ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime updateTime;</span><br></pre></td></tr></table></figure><p><strong>å¤„ç†å™¨å®ç°ï¼š</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyMetaObjectHandler</span> <span class="keyword">implements</span> <span class="title class_">MetaObjectHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;createTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateFill</span><span class="params">(MetaObject metaObject)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.strictInsertFill(metaObject, <span class="string">&quot;updateTime&quot;</span>, LocalDateTime.class, LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-é€»è¾‘åˆ é™¤"><a href="#2-é€»è¾‘åˆ é™¤" class="headerlink" title="2. é€»è¾‘åˆ é™¤"></a>2. é€»è¾‘åˆ é™¤</h3><p>é…ç½®åï¼Œ<code>deleteById</code> ä¼šå˜æˆ <code>UPDATE t_user SET deleted=1 WHERE id=?</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableLogic</span></span><br><span class="line">    <span class="keyword">private</span> Integer deleted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p><strong>âš ï¸ æ³¨æ„</strong>ï¼šé€»è¾‘åˆ é™¤ä¸æ•°æ®åº“å”¯ä¸€ç´¢å¼•å­˜åœ¨å†²çªé£é™©ã€‚å»ºè®®é€»è¾‘åˆ é™¤å­—æ®µä½¿ç”¨ <code>delete_time</code> (æ—¶é—´æˆ³) æˆ–åœ¨å”¯ä¸€ç´¢å¼•ä¸­åŒ…å«é€»è¾‘åˆ é™¤å­—æ®µã€‚</p></blockquote><h3 id="3-æšä¸¾æ˜ å°„"><a href="#3-æšä¸¾æ˜ å°„" class="headerlink" title="3. æšä¸¾æ˜ å°„"></a>3. æšä¸¾æ˜ å°„</h3><p>å½“å®ä½“ç±» User çš„å±æ€§ genderï¼ŒjavaType æ˜¯æšä¸¾ï¼ŒcolumnType æ˜¯ int æ—¶ã€‚</p><p>MyBatis-Plus æä¾›äº†å…¨å±€é…ç½®çš„æšä¸¾æ˜ å°„å¤„ç†å™¨ï¼Œæ— éœ€å†å†™è½¬æ¢ä»£ç ã€‚</p><figure class="highlight yaml"><figcaption><span>application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">default-enum-type-handler:</span> <span class="string">com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler</span></span><br></pre></td></tr></table></figure><p>åœ¨å¯¹åº”çš„æšä¸¾ç±»ä¸­ï¼Œç»™å¯¹åº”å±æ€§æ·»åŠ æ³¨è§£ <code>EnumValue</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">Gender</span> &#123;</span><br><span class="line">    MALE(<span class="number">1</span>, <span class="string">&quot;ç”·&quot;</span>),</span><br><span class="line">    FEMALE(<span class="number">2</span>, <span class="string">&quot;å¥³&quot;</span>),</span><br><span class="line">    ;</span><br><span class="line">    <span class="meta">@com</span>.baomidou.mybatisplus.annotation.EnumValue</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Integer code;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@com</span>.fasterxml.jackson.annotation.JsonValue</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String description;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="4-JSON-å­—æ®µæ˜ å°„"><a href="#4-JSON-å­—æ®µæ˜ å°„" class="headerlink" title="4. JSON å­—æ®µæ˜ å°„"></a>4. JSON å­—æ®µæ˜ å°„</h3><p>åˆ©ç”¨ <code>JacksonTypeHandler</code> è‡ªåŠ¨å®ç° JSON å­—ç¬¦ä¸²ä¸ Java å¯¹è±¡çš„äº’è½¬ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@TableName(autoResultMap = true)</span> <span class="comment">// å¿…é¡»å¼€å¯</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="meta">@TableField(typeHandler = JacksonTypeHandler.class)</span></span><br><span class="line">    <span class="keyword">private</span> UserInfo info; <span class="comment">// æ•°æ®åº“å­˜ JSONï¼ŒJava ç”¨å¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="äº”ã€æ’ä»¶ä½“ç³»"><a href="#äº”ã€æ’ä»¶ä½“ç³»" class="headerlink" title="äº”ã€æ’ä»¶ä½“ç³»"></a>äº”ã€æ’ä»¶ä½“ç³»</h2><p>MP çš„æ’ä»¶é€šè¿‡æ‹¦æˆªå™¨æœºåˆ¶å®ç°ï¼Œéœ€é…ç½® <code>MybatisPlusInterceptor</code>ã€‚</p><h3 id="1-æ’ä»¶é…ç½®ç±»"><a href="#1-æ’ä»¶é…ç½®ç±»" class="headerlink" title="1. æ’ä»¶é…ç½®ç±»"></a>1. æ’ä»¶é…ç½®ç±»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisPlusConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        <span class="comment">// 1. åˆ†é¡µæ’ä»¶ (å¿…é¡»æ”¾åœ¨æœ€å)</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>(DbType.MYSQL));</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-åˆ†é¡µæŸ¥è¯¢"><a href="#2-åˆ†é¡µæŸ¥è¯¢" class="headerlink" title="2. åˆ†é¡µæŸ¥è¯¢"></a>2. åˆ†é¡µæŸ¥è¯¢</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// IPage æ˜¯åˆ†é¡µç»“æœï¼Œcurrent æ˜¯å½“å‰é¡µï¼Œsize æ˜¯æ¯é¡µæ¡æ•°</span></span><br><span class="line">Page&lt;User&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">userService.page(page, <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;User&gt;().gt(User::getAge, <span class="number">18</span>));</span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;æ€»æ¡æ•°ï¼š&quot;</span> + page.getTotal());</span><br><span class="line">System.out.println(<span class="string">&quot;å½“å‰é¡µæ•°æ®ï¼š&quot;</span> + page.getRecords());</span><br></pre></td></tr></table></figure><hr><h2 id="å…­ã€ä»£ç ç”Ÿæˆå™¨-Generator"><a href="#å…­ã€ä»£ç ç”Ÿæˆå™¨-Generator" class="headerlink" title="å…­ã€ä»£ç ç”Ÿæˆå™¨ (Generator)"></a>å…­ã€ä»£ç ç”Ÿæˆå™¨ (Generator)</h2><p>æ— éœ€æ‰‹å†™ç¹ççš„ Entityã€Mapperã€Service ä»£ç ï¼Œä¸€é”®ç”Ÿæˆã€‚</p><h3 id="1-å¼•å…¥ä¾èµ–-1"><a href="#1-å¼•å…¥ä¾èµ–-1" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.14<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.freemarker<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>freemarker<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.3.34<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®è¿è¡Œä»£ç "><a href="#2-é…ç½®è¿è¡Œä»£ç " class="headerlink" title="2. é…ç½®è¿è¡Œä»£ç "></a>2. é…ç½®è¿è¡Œä»£ç </h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeGenerator</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// æ•°æ®åº“è¿æ¥ä¿¡æ¯</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;jdbc:mysql://localhost:3306/test&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> <span class="string">&quot;root&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> <span class="string">&quot;123456&quot;</span>;</span><br><span class="line">        <span class="comment">// åŒ…å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">packageName</span> <span class="operator">=</span> <span class="string">&quot;com.example.demo&quot;</span>;</span><br><span class="line">        <span class="comment">// éœ€è¦ç”Ÿæˆçš„è¡¨</span></span><br><span class="line">        String[] tables = &#123;<span class="string">&quot;user&quot;</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">projectPath</span> <span class="operator">=</span> System.getProperty(<span class="string">&quot;user.dir&quot;</span>);</span><br><span class="line">        FastAutoGenerator</span><br><span class="line">                <span class="comment">// æ•°æ®åº“è¿æ¥</span></span><br><span class="line">                .create(url, username, password)</span><br><span class="line">                <span class="comment">// å…¨å±€é…ç½®</span></span><br><span class="line">                .globalConfig(builder -&gt; builder</span><br><span class="line">                        .author(<span class="string">&quot;Gabriel&quot;</span>)  <span class="comment">// è®¾ç½®ä½œè€…</span></span><br><span class="line">                        .enableSpringdoc()  <span class="comment">// å¼€å¯ swagger æ¨¡å¼ï¼ˆOpenAPI2 ä½¿ç”¨ .enableSwagger()ï¼‰</span></span><br><span class="line">                        .outputDir(projectPath + <span class="string">&quot;/src/main/java/&quot;</span>) <span class="comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">                        .disableOpenDir()   <span class="comment">// ç¦æ­¢æ‰“å¼€è¾“å‡ºç›®å½•</span></span><br><span class="line">                )</span><br><span class="line">                <span class="comment">// æ•°æ®æºé…ç½®</span></span><br><span class="line">                .dataSourceConfig(builder -&gt; builder</span><br><span class="line">                        .typeConvertHandler((globalConfig, typeRegistry, metaInfo) -&gt; &#123;</span><br><span class="line">                            <span class="type">int</span> <span class="variable">typeCode</span> <span class="operator">=</span> metaInfo.getJdbcType().TYPE_CODE;</span><br><span class="line">                            <span class="comment">// è‡ªå®šä¹‰ç±»å‹è½¬æ¢</span></span><br><span class="line">                            <span class="keyword">if</span> (typeCode == Types.TINYINT || typeCode == Types.SMALLINT) &#123;</span><br><span class="line">                                <span class="keyword">return</span> DbColumnType.INTEGER;</span><br><span class="line">                            &#125;</span><br><span class="line">                            <span class="keyword">return</span> typeRegistry.getColumnType(metaInfo);</span><br><span class="line">                        &#125;)</span><br><span class="line">                )</span><br><span class="line">                <span class="comment">// åŒ…é…ç½®</span></span><br><span class="line">                .packageConfig(builder -&gt; builder</span><br><span class="line">                        .parent(packageName)    <span class="comment">// è®¾ç½®çˆ¶åŒ…å</span></span><br><span class="line">                        .pathInfo(Collections.singletonMap(OutputFile.xml, projectPath + <span class="string">&quot;/src/main/resources/mapper&quot;</span>)) <span class="comment">// è®¾ç½® xml æ–‡ä»¶è¾“å‡ºç›®å½•</span></span><br><span class="line">                )</span><br><span class="line">                <span class="comment">// ç­–ç•¥é…ç½®</span></span><br><span class="line">                .strategyConfig(builder -&gt; builder</span><br><span class="line">                        .addTablePrefix(<span class="string">&quot;t_&quot;</span>)       <span class="comment">// åˆ é™¤è¡¨å‰ç¼€</span></span><br><span class="line">                        .addFieldPrefix(<span class="string">&quot;is_&quot;</span>)      <span class="comment">// åˆ é™¤å­—æ®µå‰ç¼€</span></span><br><span class="line">                        .addFieldSuffix(<span class="string">&quot;_flag&quot;</span>)    <span class="comment">// åˆ é™¤å­—æ®µåç¼€</span></span><br><span class="line">                        .addInclude(tables)         <span class="comment">// è®¾ç½®éœ€è¦ç”Ÿæˆçš„è¡¨</span></span><br><span class="line">                        .controllerBuilder()</span><br><span class="line">                        .enableRestStyle()          <span class="comment">// @Controller -&gt; @RestController</span></span><br><span class="line">                        .enableHyphenStyle()        <span class="comment">// @RequestMapping(&quot;/managerUser&quot;) -&gt; @RequestMapping(&quot;/manager-user&quot;)</span></span><br><span class="line">                        .serviceBuilder()</span><br><span class="line">                        .mapperBuilder()</span><br><span class="line">                        .enableBaseResultMap()      <span class="comment">// xml ç”Ÿæˆ BaseResultMap</span></span><br><span class="line">                        .enableBaseColumnList()     <span class="comment">// xml ç”Ÿæˆ BaseColumnList</span></span><br><span class="line">                        .entityBuilder()</span><br><span class="line">                        .enableLombok()             <span class="comment">// æ·»åŠ  lombok æ³¨è§£</span></span><br><span class="line">                        .enableSerialAnnotation()   <span class="comment">// æ·»åŠ  @Serial æ³¨è§£ï¼ˆsince JDK 14ï¼‰</span></span><br><span class="line">                )</span><br><span class="line">                <span class="comment">// æ¨¡æ¿é…ç½®ã€‚é»˜è®¤çš„æ˜¯Velocityå¼•æ“æ¨¡æ¿ã€‚éœ€è¦å¼•å…¥å¯¹åº”æ¨¡æ¿çš„ä¾èµ–</span></span><br><span class="line">                .templateEngine(<span class="keyword">new</span> <span class="title class_">FreemarkerTemplateEngine</span>())</span><br><span class="line">                <span class="comment">// æ‰§è¡Œ</span></span><br><span class="line">                .execute();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">æ·±åº¦è§£æ SpringBoot æ•´åˆ MyBatis-Plus çš„å…¨æµç¨‹ã€‚æ¶µç›– Maven ä¾èµ–ã€CRUD æ¥å£ä½¿ç”¨ã€Wrapper æ¡ä»¶æ„é€ å™¨ã€è‡ªåŠ¨å¡«å……ã€é€»è¾‘åˆ é™¤ã€åˆ†é¡µæ’ä»¶åŠå®˜æ–¹ä»£ç ç”Ÿæˆå™¨çš„è¯¦ç»†é…ç½®ã€‚</summary>
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://lijiabao9.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Java" scheme="https://lijiabao9.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/"/>
    
    
    <category term="SpringBoot" scheme="https://lijiabao9.github.io/tags/SpringBoot/"/>
    
    <category term="MyBatis-Plus" scheme="https://lijiabao9.github.io/tags/MyBatis-Plus/"/>
    
    <category term="ORM" scheme="https://lijiabao9.github.io/tags/ORM/"/>
    
  </entry>
  
  <entry>
    <title>SpringBoot æ•´åˆ Knife4jï¼šä»å…¥é—¨åˆ°ç²¾é€š Swagger æ¥å£æ–‡æ¡£</title>
    <link href="https://lijiabao9.github.io/posts/7687e76b.html"/>
    <id>https://lijiabao9.github.io/posts/7687e76b.html</id>
    <published>2025-12-03T15:26:11.000Z</published>
    <updated>2025-12-17T17:57:48.700Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å‰åç«¯åˆ†ç¦»çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œä¸€ä»½å®æ—¶æ›´æ–°ã€å¯è°ƒè¯•çš„æ¥å£æ–‡æ¡£è‡³å…³é‡è¦ã€‚</p><p><a href="https://doc.xiaominfo.com/">Knife4j</a> æ˜¯åŸºäº Swagger/OpenAPI æ„å»ºçš„å¢å¼ºå‹æ¥å£æ–‡æ¡£å·¥å…·ï¼Œå®ƒæä¾›äº†æ›´ç¬¦åˆå›½äººä¹ æƒ¯çš„ UI ç•Œé¢å’Œå¼ºå¤§çš„è°ƒè¯•åŠŸèƒ½ã€‚</p><blockquote><p><strong>è®¿é—®åœ°å€</strong>ï¼š<br>é…ç½®å®Œæˆåï¼Œæµè§ˆå™¨è®¿é—®ï¼š<kbd><a href="http://localhost:8080/doc.html">http://localhost:8080/doc.html</a></kbd><br><em>æ³¨ï¼šæŸäº›ç½‘ç»œç¯å¢ƒä¸‹ï¼Œç›´æ¥ä½¿ç”¨ IP (127.0.0.1) å¯èƒ½ä¼šå¯¼è‡´è·¨åŸŸæˆ–é™æ€èµ„æºåŠ è½½é—®é¢˜ï¼Œæ¨èä¼˜å…ˆä½¿ç”¨ localhostã€‚</em></p></blockquote><hr><h2 id="åœºæ™¯ä¸€ï¼šSpring-Boot-2-OpenAPI-2"><a href="#åœºæ™¯ä¸€ï¼šSpring-Boot-2-OpenAPI-2" class="headerlink" title="åœºæ™¯ä¸€ï¼šSpring Boot 2 (OpenAPI 2)"></a>åœºæ™¯ä¸€ï¼šSpring Boot 2 (OpenAPI 2)</h2><p>é€‚ç”¨äºè€é¡¹ç›®æˆ– <strong>JDK 1.8</strong> ç¯å¢ƒï¼Œåº•å±‚åŸºäº <strong>Swagger 2 (OpenAPI 2)</strong> è§„èŒƒã€‚</p><h3 id="1-å¼•å…¥ä¾èµ–"><a href="#1-å¼•å…¥ä¾èµ–" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><p>åœ¨ <code>pom.xml</code> ä¸­æ·»åŠ  Knife4j çš„ starter ä¾èµ–ï¼š</p><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-openapi2-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®æ–‡ä»¶-YAML"><a href="#2-é…ç½®æ–‡ä»¶-YAML" class="headerlink" title="2. é…ç½®æ–‡ä»¶ (YAML)"></a>2. é…ç½®æ–‡ä»¶ (YAML)</h3><p>æ— éœ€ç¼–å†™ Java é…ç½®ç±»ï¼Œç›´æ¥åœ¨ <code>application.yml</code> ä¸­å¼€å¯å¢å¼ºæ¨¡å¼ï¼š</p><figure class="highlight yaml"><figcaption><span>application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">openapi:</span></span><br><span class="line">    <span class="attr">title:</span> <span class="string">&quot;é¡¹ç›®æ¥å£æ–‡æ¡£&quot;</span></span><br><span class="line">    <span class="attr">description:</span> <span class="string">&quot;åŸºäº Knife4j çš„åç«¯æ¥å£æœåŠ¡&quot;</span></span><br><span class="line">    <span class="attr">email:</span> <span class="string">&quot;contact@example.com&quot;</span></span><br><span class="line">    <span class="attr">concat:</span> <span class="string">&quot;å¼€å‘è€…åç§°&quot;</span></span><br><span class="line">    <span class="attr">version:</span> <span class="string">v1.0.0</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">      <span class="attr">default:</span></span><br><span class="line">        <span class="attr">group-name:</span> <span class="string">é»˜è®¤åˆ†ç»„</span></span><br><span class="line">        <span class="attr">api-rule:</span> <span class="string">package</span></span><br><span class="line">        <span class="comment"># âš ï¸ æ³¨æ„ï¼šæ­¤å¤„éœ€ä¿®æ”¹ä¸ºä½ é¡¹ç›®çš„ Controller åŒ…è·¯å¾„</span></span><br><span class="line">        <span class="attr">api-rule-resources:</span></span><br><span class="line">          <span class="bullet">-</span> <span class="string">com.example.demo.web</span></span><br></pre></td></tr></table></figure><h3 id="3-å¸¸ç”¨æ³¨è§£-Swagger-2"><a href="#3-å¸¸ç”¨æ³¨è§£-Swagger-2" class="headerlink" title="3. å¸¸ç”¨æ³¨è§£ (Swagger 2)"></a>3. å¸¸ç”¨æ³¨è§£ (Swagger 2)</h3><div class="table-container"><table><thead><tr><th style="text-align:left">ä½œç”¨ç›®æ ‡</th><th style="text-align:left">æ³¨è§£</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><strong>ç±» (Controller)</strong></td><td style="text-align:left"><code>@Api(tags = &quot;ç”¨æˆ·æ¨¡å—&quot;)</code></td><td style="text-align:left">æ ‡è®°æ§åˆ¶å™¨ç±»çš„åŠŸèƒ½è¯´æ˜</td></tr><tr><td style="text-align:left"><strong>æ–¹æ³• (Method)</strong></td><td style="text-align:left"><code>@ApiOperation(&quot;æ–°å¢ç”¨æˆ·&quot;)</code></td><td style="text-align:left">æ ‡è®°å…·ä½“æ¥å£çš„åŠŸèƒ½è¯´æ˜</td></tr><tr><td style="text-align:left"><strong>å‚æ•° (Param)</strong></td><td style="text-align:left"><code>@ApiParam(&quot;ç”¨æˆ·ID&quot;)</code></td><td style="text-align:left">æ ‡è®°æ¥å£å‚æ•°çš„å«ä¹‰</td></tr><tr><td style="text-align:left"><strong>å®ä½“ç±» (DTO)</strong></td><td style="text-align:left"><code>@ApiModel(description = &quot;ç”¨æˆ·ä¿¡æ¯&quot;)</code></td><td style="text-align:left">æ ‡è®°æ•°æ®æ¨¡å‹ç±»</td></tr><tr><td style="text-align:left"><strong>å­—æ®µ (Field)</strong></td><td style="text-align:left"><code>@ApiModelProperty(&quot;ç”¨æˆ·å&quot;)</code></td><td style="text-align:left">æ ‡è®°æ¨¡å‹ä¸­çš„å­—æ®µå«ä¹‰</td></tr></tbody></table></div><hr><h2 id="åœºæ™¯äºŒï¼šSpring-Boot-3-OpenAPI-3"><a href="#åœºæ™¯äºŒï¼šSpring-Boot-3-OpenAPI-3" class="headerlink" title="åœºæ™¯äºŒï¼šSpring Boot 3 (OpenAPI 3)"></a>åœºæ™¯äºŒï¼šSpring Boot 3 (OpenAPI 3)</h2><p>é€‚ç”¨äºæ–°é¡¹ç›®ï¼Œè¦æ±‚ <strong>JDK >= 17</strong>ï¼Œåº•å±‚åŸºäº <strong>SpringDoc (OpenAPI 3)</strong> è§„èŒƒã€‚</p><h3 id="1-å¼•å…¥ä¾èµ–-1"><a href="#1-å¼•å…¥ä¾èµ–-1" class="headerlink" title="1. å¼•å…¥ä¾èµ–"></a>1. å¼•å…¥ä¾èµ–</h3><p><strong>æ³¨æ„</strong>ï¼šSpring Boot 3 ä½¿ç”¨ Jakarta EE è§„èŒƒï¼Œå¿…é¡»å¼•å…¥ <code>jakarta</code> ç‰ˆæœ¬çš„ starterã€‚</p><figure class="highlight xml"><figcaption><span>pom.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.xiaoymin<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>knife4j-openapi3-jakarta-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="2-é…ç½®æ–‡ä»¶-YAML-1"><a href="#2-é…ç½®æ–‡ä»¶-YAML-1" class="headerlink" title="2. é…ç½®æ–‡ä»¶ (YAML)"></a>2. é…ç½®æ–‡ä»¶ (YAML)</h3><p>Spring Boot 3 ä¸­ï¼Œé…ç½®ä¸»è¦å›´ç»• <code>springdoc</code> è¿›è¡Œï¼Œ<code>knife4j</code> ä»…ä½œä¸º UI å¢å¼ºé…ç½®ã€‚</p><figure class="highlight yaml"><figcaption><span>application.yml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1. SpringDoc åŸºç¡€é…ç½®</span></span><br><span class="line"><span class="attr">springdoc:</span></span><br><span class="line">  <span class="attr">swagger-ui:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/swagger-ui.html</span></span><br><span class="line">    <span class="attr">tags-sorter:</span> <span class="string">alpha</span>      <span class="comment"># æ¥å£åˆ†ç»„æ’åºè§„åˆ™</span></span><br><span class="line">    <span class="attr">operations-sorter:</span> <span class="string">alpha</span> <span class="comment"># æ¥å£æ–¹æ³•æ’åºè§„åˆ™</span></span><br><span class="line">  <span class="attr">api-docs:</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">/v3/api-docs</span>      <span class="comment"># OpenAPI æè¿°æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">  <span class="attr">group-configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">group:</span> <span class="string">&#x27;default&#x27;</span></span><br><span class="line">      <span class="attr">paths-to-match:</span> <span class="string">&#x27;/**&#x27;</span></span><br><span class="line">      <span class="comment"># âš ï¸ æ³¨æ„ï¼šæ­¤å¤„éœ€ä¿®æ”¹ä¸ºä½ é¡¹ç›®çš„ Controller åŒ…è·¯å¾„</span></span><br><span class="line">      <span class="attr">packages-to-scan:</span> <span class="string">com.example.demo.web</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2. Knife4j å¢å¼ºé…ç½®</span></span><br><span class="line"><span class="attr">knife4j:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">setting:</span></span><br><span class="line">    <span class="attr">language:</span> <span class="string">zh_cn</span>         <span class="comment"># é»˜è®¤ä¸­æ–‡</span></span><br></pre></td></tr></table></figure><h3 id="3-å¸¸ç”¨æ³¨è§£-OpenAPI-3"><a href="#3-å¸¸ç”¨æ³¨è§£-OpenAPI-3" class="headerlink" title="3. å¸¸ç”¨æ³¨è§£ (OpenAPI 3)"></a>3. å¸¸ç”¨æ³¨è§£ (OpenAPI 3)</h3><p>OpenAPI 3 çš„æ³¨è§£æ›´åŠ è¯­ä¹‰åŒ–ï¼Œä¸ Swagger 2 æœ‰è¾ƒå¤§åŒºåˆ«ï¼š</p><div class="table-container"><table><thead><tr><th style="text-align:left">ä½œç”¨ç›®æ ‡</th><th style="text-align:left">æ³¨è§£</th><th style="text-align:left">è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left"><strong>ç±» (Controller)</strong></td><td style="text-align:left"><code>@Tag(name = &quot;ç”¨æˆ·æ¨¡å—&quot;)</code></td><td style="text-align:left">å¯¹åº” Swagger2 çš„ @Api</td></tr><tr><td style="text-align:left"><strong>æ–¹æ³• (Method)</strong></td><td style="text-align:left"><code>@Operation(summary = &quot;æ–°å¢ç”¨æˆ·&quot;)</code></td><td style="text-align:left">å¯¹åº” Swagger2 çš„ @ApiOperation</td></tr><tr><td style="text-align:left"><strong>å‚æ•° (Param)</strong></td><td style="text-align:left"><code>@Parameter(description = &quot;ç”¨æˆ·ID&quot;)</code></td><td style="text-align:left">å¯¹åº” Swagger2 çš„ @ApiParam</td></tr><tr><td style="text-align:left"><strong>å®ä½“ç±» (DTO)</strong></td><td style="text-align:left"><code>@Schema(description = &quot;ç”¨æˆ·ä¿¡æ¯&quot;)</code></td><td style="text-align:left">å¯¹åº” Swagger2 çš„ @ApiModel</td></tr><tr><td style="text-align:left"><strong>å­—æ®µ (Field)</strong></td><td style="text-align:left"><code>@Schema(description = &quot;ç”¨æˆ·å&quot;)</code></td><td style="text-align:left">å¯¹åº” Swagger2 çš„ @ApiModelProperty</td></tr></tbody></table></div><hr><h2 id="é™„å½•ï¼šæ³¨è§£è¿ç§»å¯¹ç…§è¡¨"><a href="#é™„å½•ï¼šæ³¨è§£è¿ç§»å¯¹ç…§è¡¨" class="headerlink" title="é™„å½•ï¼šæ³¨è§£è¿ç§»å¯¹ç…§è¡¨"></a>é™„å½•ï¼šæ³¨è§£è¿ç§»å¯¹ç…§è¡¨</h2><p>å¦‚æœä½ æ­£åœ¨å°†è€é¡¹ç›®ä» Spring Boot 2 å‡çº§åˆ° 3ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾è¿›è¡Œæ³¨è§£æ›¿æ¢ï¼š</p><p><strong>æ€»ç»“ï¼š</strong></p><ul><li><strong>SB2</strong> ä½¿ç”¨ <code>io.swagger.annotations.*</code> åŒ…ã€‚</li><li><strong>SB3</strong> ä½¿ç”¨ <code>io.swagger.v3.oas.annotations.*</code> åŒ…ã€‚</li><li>å¤§ä½“åŸåˆ™æ˜¯ï¼š<code>Api</code> å˜æˆäº† <code>Tag</code> æˆ– <code>Operation</code>ï¼Œ<code>Model</code> å˜æˆäº† <code>Schema</code>ã€‚</li></ul>]]></content>
    
    
    <summary type="html">è¯¦è§£ SpringBoot 2.x ä¸ 3.x ç‰ˆæœ¬ä¸‹ Knife4j çš„é›†æˆå·®å¼‚ã€‚æ¶µç›– OpenAPI2 ä¸ OpenAPI3 çš„é…ç½®åŒºåˆ«ã€æ³¨è§£è¿ç§»æŒ‡å—ï¼ŒåŠ©ä½ å¿«é€Ÿç”Ÿæˆç¾è§‚çš„åœ¨çº¿æ¥å£æ–‡æ¡£ã€‚</summary>
    
    
    
    <category term="ç¼–ç¨‹è¯­è¨€" scheme="https://lijiabao9.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/"/>
    
    <category term="Java" scheme="https://lijiabao9.github.io/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/"/>
    
    
    <category term="SpringBoot" scheme="https://lijiabao9.github.io/tags/SpringBoot/"/>
    
    <category term="Swagger" scheme="https://lijiabao9.github.io/tags/Swagger/"/>
    
    <category term="Knife4j" scheme="https://lijiabao9.github.io/tags/Knife4j/"/>
    
  </entry>
  
</feed>
