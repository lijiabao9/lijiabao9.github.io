[{"title":"Hexo Butterfly 标签外挂完全指南 (原生 + Plus增强版)","url":"/posts/a9a95ebd.html","content":"本文整合了 Butterfly 主题原生标签 与 Tag Plugins Plus 增强插件 的所有用法。通过这些标签外挂，你可以轻松在 Markdown 中实现复杂的排版和交互效果。\n\n前置说明：\n\n带有  [原生] 标识的标签，仅需 Butterfly 主题即可使用。\n带有  [Plus] 标识的标签，需要安装 hexo-butterfly-tag-plugins-plus 插件。\n\n\n\n相关资源\n\n原生标签：Butterfly 文档(四) 标签外挂\nPlus标签：Tag Plugins Plus | Akilarの糖果屋\n\n\n1. 基础文本与排版1.1 Label 高亮标签  [原生]用于高亮强调文中的一段文字。\n标签语法样式预览源码示例&#123;% label text color %&#125;\n\ntext: 文字内容\ncolor: 背景颜色（留空 / blue / pink / red / purple / orange / green）\n臣亮言：先帝创业未半，而中道崩殂。今天下三分，益州疲敝，此诚危急存亡之秋也！然侍卫之臣，不懈于内；忠志之士，忘身于外者。若有作奸、犯科，及为忠善者。臣亮言：&#123;% label 先帝 %&#125;创业未半，而&#123;% label 中道崩殂 blue %&#125;。今天下三分，&#123;% label 益州疲敝 pink %&#125;，此诚&#123;% label 危急存亡之秋 red %&#125;也！然侍卫之臣，不懈于内；&#123;% label 忠志之士 purple %&#125;，忘身于外者。若有&#123;% label 作奸 orange %&#125;、&#123;% label 犯科 green %&#125;，及为忠善者。\n1.2 行内文本样式  [Plus]提供下划线、着重号、波浪线、删除线、键盘按键、密码隐藏等样式。\n标签语法样式预览源码示例&#123;% u 文本内容 %&#125;&#123;% emp 文本内容 %&#125;&#123;% wavy 文本内容 %&#125;   &#123;% del 文本内容 %&#125;&#123;% kbd 文本内容 %&#125;&#123;% psw 文本内容 %&#125;\n带 下划线 的文本\n带 着重号 的文本\n带 波浪线 的文本\n带 删除线 的文本\n键盘样式：Ctrl + C\n密码样式：鼠标悬停查看密码\n1. 带 &#123;% u 下划线 %&#125; 的文本2. 带 &#123;% emp 着重号 %&#125; 的文本3. 带 &#123;% wavy 波浪线 %&#125; 的文本4. 带 &#123;% del 删除线 %&#125; 的文本5. 键盘样式：&#123;% kbd Ctrl %&#125; + &#123;% kbd C %&#125;6. 密码样式：&#123;% psw 鼠标悬停查看密码 %&#125;\n1.3 Span/P 彩色与字体控制  [Plus]控制行内(span)或段落(p)的颜色、大小和字体。\n标签语法样式预览源码示例&#123;% span 参数, 内容 %&#125;&#123;% p 参数, 内容 %&#125;\n参数(空格分隔):\n\n颜色: red, yellow, green, cyan, blue, gray\n大小: small, h4, h3, h2, h1, large, huge, ultra\n对齐: left, center, right\n字体: logo, code\n在一段话中插入：红色、绿色、蓝色。\nButterfly Theme\nA Wonderful Theme for Hexo在一段话中插入：红色、绿色、蓝色。\nButterfly Theme\nA Wonderful Theme for Hexo\n1.4 Poem 诗词排版  [Plus]专为诗歌设计的居中排版。\n标签语法样式预览源码示例&#123;% poem 标题, 作者 %&#125;诗词内容...&#123;% endpoem %&#125;水调歌头 苏轼明月几时有？把酒问青天。不知天上宫阙，今夕是何年？我欲乘风归去，又恐琼楼玉宇，高处不胜寒。起舞弄清影，何似在人间？\n&#123;% poem 水调歌头, 苏轼 %&#125;明月几时有？把酒问青天。不知天上宫阙，今夕是何年？我欲乘风归去，又恐琼楼玉宇，高处不胜寒。起舞弄清影，何似在人间？&#123;% endpoem %&#125;\n2. 提示与警告2.1 Note 提示块  [原生]最常用的提示块，支持多种风格。\n标签语法样式预览源码示例&#123;% note [color] [icon] [style] %&#125;内容...&#123;% endnote %&#125;\n\ncolor（标识）: 留空 / primary / success / info / warning / danger\ncolor（颜色）: 留空 / blue / pink / red / purple / orange / green\nicon: 可选 fontawesome 图标（例如 &#39;fab fa-cc-visa&#39;），或填 no-icon\nstyle: 可选 simple / modern / flat / disabled 覆盖主题的默认配置\n默认提示 (Default)\n\n信息提示 (Info)\n\n成功提示 (Success)\n\n警告提示 (Warning)\n\n危险提示 (Danger)\n\n自定义图标与颜色\n默认提示 (Default)\n\n信息提示 (Info)\n\n成功提示 (Success)\n\n警告提示 (Warning)\n\n危险提示 (Danger)\n\n自定义图标与颜色\n\n2.2 Tip 顶部标签提示  [Plus]样式类似 note 的渐变标签。\n标签语法样式预览源码示例&#123;% tip [样式] %&#125;内容&#123;% endtip %&#125;\n样式（可填）: \n\n留空 / success / info / warning / error\nbolt / ban / home / sync / cogs / key / bell\n以及 font-awesome 图标，例如 fa-atom\nInfo 类型提示 \n\nSuccess 类型提示 \n\nWarning 类型提示 \n\nError 类型提示 \n\n自定义图标提示 \n&#123;% tip info %&#125;Info 类型提示 &#123;% endtip %&#125;&#123;% tip success %&#125;Success 类型提示 &#123;% endtip %&#125;&#123;% tip warning %&#125;Warning 类型提示 &#123;% endtip %&#125;&#123;% tip error %&#125;Error 类型提示 &#123;% endtip %&#125;&#123;% tip fa-atom %&#125;自定义图标提示 &#123;% endtip %&#125;\n2.3 Tip Animated 动态提示  [Plus]为 tip 添加动画效果。可参考 font-awesome-animation 的用法。\n标签语法样式预览源码示例&#123;% tip [样式] [动画类名] [触发方式] [触发速度] %&#125;内容&#123;% endtip %&#125;\n\n动画类名: faa-horizontal, faa-flash, faa-spin, faa-tada 等。\n触发方式: animated (一直动画), animated-hover (悬停动画)。\n触发速度: faa-fast, faa-slow。\nwarning 持续水平 \n\nban 悬停快速闪烁 \n&#123;% tip warning faa-horizontal animated %&#125; warning 持续水平 &#123;% endtip %&#125;&#123;% tip ban faa-flash animated-hover faa-fast %&#125; ban 悬停快速闪烁 &#123;% endtip %&#125;\n3. 布局与容器3.1 Tabs 选项卡  [原生]用于切换显示不同的内容。\n标签语法：\n&#123;% tabs UniqueName, [index] %&#125;&lt;!-- tab [选项卡标题] [@icon] --&gt;选项卡内容...&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n\nUniqueName: 唯一ID（同一个页面），不能包含空格。\nindex: 可选，默认选中的索引（从 1 开始，-1 为都不选中，不填时为第一个）。\n@icon: 可选 fontawesome 图标（例如 &#39;@fas fa-bomb&#39;）\n\n源码示例：\n&#123;% tabs tabs-demo, 3 %&#125;&lt;!-- tab 第一个Tab --&gt;**tab名字为第一个Tab**&lt;!-- endtab --&gt;&lt;!-- tab @fab fa-apple-pay --&gt;**只有图标 没有Tab名字**&lt;!-- endtab --&gt;&lt;!-- tab 炸弹@fas fa-bomb --&gt;**名字+icon**&lt;!-- endtab --&gt;&#123;% endtabs %&#125;\n样式预览：\n第一个Tab炸弹tab名字为第一个Tab只有图标 没有Tab名字名字+icon\n3.2 Tag-Hide 折叠隐藏  [原生]用于折叠内容。\n标签语法样式预览源码示例# 行内隐藏文字&#123;% hideInline content, display, bg, color %&#125;# 块级隐藏&#123;% hideBlock display, bg, color %&#125; content &#123;% endhideBlock %&#125;# 折叠框&#123;% hideToggle display, bg, color %&#125; content &#123;% endhideToggle %&#125;\n\ncontent: 被隐藏的内容。\ndisplay: 显示的文字。\nbg: 背景颜色。\ncolor: 文字颜色。\n\n哪个英文字母最酷？  查看答案因为西装裤(C装酷)\n查看答案傻子，怎么可能有答案 \n\n\n你是谁我是天才。\n\n\n哪个英文字母最酷？ &#123;% hideInline 因为西装裤(C装酷), 查看答案, #FF7242, #fff %&#125;&#123;% hideBlock 查看答案 %&#125; 傻子，怎么可能有答案 &#123;% endhideBlock %&#125;&#123;% hideToggle 你是谁 %&#125; 我是天才。&#123;% endhideToggle %&#125;\n3.3 Folding 折叠框  [Plus]比原生 hideToggle 更美观的折叠容器。\n标签语法样式预览源码示例&#123;% folding [color] [open], 标题 %&#125;内容...&#123;% endfolding %&#125;- **color**: `blue`, `cyan`, `green`, `yellow`, `red`, `gray`- **open**: 填写此参数则默认展开，不填默认折叠。 点击查看折叠内容 \n              \n              这是被隐藏的内容。可以包含图片、代码等。\n              \n            &#123;% folding cyan, 点击查看折叠内容 %&#125;这是被隐藏的内容。可以包含图片、代码等。&#123;% endfolding %&#125;\n4. 按钮与链接4.1 Btn 按钮  [原生]单个按钮链接。\n标签语法样式预览源码示例&#123;% btn [url], [text], [icon], [color] [style] [layout] [position] [size] %&#125;\n\nurl: 链接地址。\ntext: 按钮文字。\nicon: 可选 fontawesome 图标（例如 &#39;far fa-hand-point-right&#39;）\ncolor: 背景色 或 字体边框色。（留空 / blue / pink / red / purple / orange / green）\nstyle: 样式。留空（实心）/ outline（空心）\nlayout: 布局。留空（行内）/ block（块级）\nposition: 位置。留空（左对齐）/ center（居中）/ right（右对齐）\nsize: 按钮大小。留空（默认）/large（大）\nHexo官网空心按钮居中块级按钮&#123;% btn &#x27;https://hexo.io&#x27;, &#x27;Hexo官网&#x27;, &#x27;fas fa-rocket&#x27;, blue larger %&#125;&#123;% btn &#x27;https://hexo.io&#x27;, &#x27;空心按钮&#x27;, &#x27;fas fa-star&#x27;, orange outline %&#125;&#123;% btn &#x27;https://hexo.io&#x27;, &#x27;居中块级按钮&#x27;, &#x27;fas fa-heart&#x27;, red block center %&#125;\n4.2 Btns 按钮组  [Plus]网格排列的一组按钮或卡片。\n标签语法样式预览源码示例&#123;% btns 样式参数(空格分割) %&#125;&#123;% cell 标题, 链接, 图片或图标 %&#125;&#123;% cell 标题, 链接, 图片或图标 %&#125;&#123;% endbtns %&#125;\n\n样式参数: circle/rounded (圆角), grid3/grid4/grid5 (列数), center (居中)\n\n            下载源码\n阅读文档\n访问主页\n          &#123;% btns rounded grid3 %&#125;&#123;% cell 下载源码, #, fas fa-download %&#125;&#123;% cell 阅读文档, #, fas fa-book %&#125;&#123;% cell 访问主页, #, fas fa-home %&#125;&#123;% endbtns %&#125;\n4.3 Link 链接卡片  [Plus]生成一个带封面的长条形链接卡片。\n标签语法样式预览源码示例&#123;% link 标题, 链接, 图片链接(可选) %&#125;YouTubehttps://www.youtube.com/&#123;% link &#x27;YouTube&#x27;, https://www.youtube.com/, https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png %&#125;\n4.4 SiteGroup 网站卡片组  [Plus]类似友链页面的卡片展示。\n标签语法样式预览源码示例&#123;% sitegroup %&#125;&#123;% site 标题, url=链接, screenshot=截图, avatar=头像, description=描述 %&#125;&#123;% endsitegroup %&#125;xaoxuu简约风格\nColsrch这是一段关于这个网站的描述文字\nLinhk1606这是一段关于这个网站的描述文字&#123;% sitegroup %&#125;&#123;% site xaoxuu, url=https://xaoxuu.com, screenshot=https://i.loli.net/2020/08/21/VuSwWZ1xAeUHEBC.jpg, avatar=https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png, description=简约风格 %&#125;&#123;% site Colsrch, url=https://colsrch.top, screenshot=https://i.loli.net/2020/08/22/dFRWXm52OVu8qfK.png, avatar=https://cdn.jsdelivr.net/gh/Colsrch/images/Colsrch/avatar.jpg, description=这是一段关于这个网站的描述文字 %&#125;&#123;% site Linhk1606, url=https://linhk1606.github.io, screenshot=https://i.loli.net/2020/08/21/3PmGLCKicnfow1x.png, avatar=https://i.loli.net/2020/02/09/PN7I5RJfFtA93r2.png, description=这是一段关于这个网站的描述文字 %&#125;&#123;% endsitegroup %&#125;\n4.5 Flink 友链卡片组  [原生]友链卡片组。\n标签语法样式预览源码示例&#123;% flink %&#125;和友链的 yaml 文件格式一样。&#123;% endflink %&#125;网站值得推荐的网站\n      \n        \n          \n            \n          \n          Youtube\n          视频网站\n        \n      \n      \n        \n          \n            \n          \n          Weibo\n          中国最大社交分享平台\n        \n      \n      \n        \n          \n            \n          \n          Twitter\n          社交分享平台\n        \n      &#123;% flink %&#125;- class_name: 网站  class_desc: 值得推荐的网站  link_list:    - name: Youtube      link: https://www.youtube.com/      avatar: https://i.loli.net/2020/05/14/9ZkGg8v3azHJfM1.png      descr: 视频网站    - name: Weibo      link: https://www.weibo.com/      avatar: https://i.loli.net/2020/05/14/TLJBum386vcnI1P.png      descr: 中国最大社交分享平台    - name: Twitter      link: https://twitter.com/      avatar: https://i.loli.net/2020/05/14/5VyHPQqR6LWF39a.png      descr: 社交分享平台&#123;% endflink %&#125;\n4.6 GalleryGroup 相册组  [原生]相册组。\n标签语法样式预览源码示例&lt;div class=&quot;gallery-group-main&quot;&gt;&#123;% galleryGroup name description link img-url %&#125;&#123;% galleryGroup name description link img-url %&#125;&#123;% galleryGroup name description link img-url %&#125;&lt;/div&gt;\n\nname: 相册名称\ndescription: 相册描述\nlink: 相册链接\nimg-url: 封面图片链接\n\n\n    \n    \n      Example\n      关于OH MY GIRL的图片\n      \n    \n  \n&lt;div class=&quot;gallery-group-main&quot;&gt;&#123;% galleryGroup &#x27;Example&#x27; &#x27;关于OH MY GIRL的图片&#x27; &#x27;/gallery/example&#x27; https://i.loli.net/2019/12/25/hOqbQ3BIwa6KWpo.jpg %&#125;&lt;/div&gt;\n4.7 Series 文章合集  [原生]需要主题配置开启 series: enable: true。\n在页面上显示系列文章。\n标签语法样式预览源码示例&#123;% series [seriesName] %&#125;Hexo Butterfly 标签外挂完全指南 (原生 + Plus增强版)&#123;% series [seriesName] %&#125;\n5. 媒体与图表5.1 Gallery 相册  [原生]将多张图片拼接展示，支持点击放大。\n标签语法样式预览源码示例&#123;% gallery [button] %&#125;![](url1)![](url2)&#123;% endgallery %&#125;\n\nbutton: 点击按钮加载更多图片。true/false(默认)\n\n    [{\"url\":\"https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg\",\"alt\":\"\",\"title\":\"\"},{\"url\":\"https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg\",\"alt\":\"\",\"title\":\"\"}]\n  &#123;% gallery %&#125;![](https://i.loli.net/2019/12/25/Fze9jchtnyJXMHN.jpg)![](https://i.loli.net/2019/12/25/ryLVePaqkYm4TEK.jpg)![](https://i.loli.net/2019/12/25/gEy5Zc1Ai6VuO4N.jpg)![](https://i.loli.net/2019/12/25/d6QHbytlSYO4FBG.jpg)![](https://i.loli.net/2019/12/25/6nepIJ1xTgufatZ.jpg)![](https://i.loli.net/2019/12/25/E7Jvr4eIPwUNmzq.jpg)![](https://i.loli.net/2019/12/25/mh19anwBSWIkGlH.jpg)![](https://i.loli.net/2019/12/25/2tu9JC8ewpBFagv.jpg)&#123;% endgallery %&#125;\n5.2 InlineImg/Image  [原生][Plus]单张图片。\n标签语法样式预览源码示例# 原生的内联图片&#123;% inlineImg [src] [height] %&#125;# Plus的块级图片&#123;% image 链接, width=宽度（可选）, height=高度（可选）, alt=描述（可选）, bg=占位颜色（可选） %&#125;你看她长得漂亮不\n三千年的美少女\n\n我觉得很漂亮 你看她长得漂亮不&#123;% image https://i.loli.net/2021/03/19/2P6ivUGsdaEXSFI.png, width=300px, height=150px, alt=三千年的美少女, bg=rgb(255,255,255) %&#125;我觉得很漂亮 &#123;% inlineImg https://i.loli.net/2021/03/19/5M4jUB3ynq7ePgw.png 150px %&#125;\n5.2 Audio/Video 音视频  [Plus]插入音频或视频播放器。\n标签语法样式预览源码示例&#123;% audio 音频链接 %&#125;&#123;% video 视频链接 %&#125;&#123;% videos [direction], [columns] %&#125;&#123;% video 链接1 %&#125;&#123;% video 链接2 %&#125;&#123;% endvideos %&#125;\n\ndirection: 对其方向：left(默认), center, right\ncolumns: 列数：支持 1-4 列\n音频：\nYour browser does not support the audio tag.\n\n视频：\nYour browser does not support the video tag.**音频：**&#123;% audio https://github.com/volantis-x/volantis-docs/releases/download/assets/Lumia1020.mp3 %&#125;**视频：**&#123;% video https://github.com/volantis-x/volantis-docs/releases/download/assets/IMG_0341.mov %&#125;\n5.3 Mermaid 流程图  [原生]需要主题配置开启 mermaid: enable: true。\n使用 mermaid 标签可以绘制 Flowchart（流程图）、Sequence diagram（时序图 ）、Class Diagram（类别图）、State Diagram（状态图）、Gantt（甘特图）和 Pie Chart（圆形图）。具体语法参阅 Mermaid\n样式预览源码示例\n    graph TD;\nA--&gt;B;\nA--&gt;C;\nB--&gt;D;\nC--&gt;D;\n  &#123;% mermaid %&#125;graph TD;    A--&gt;B;    A--&gt;C;    B--&gt;D;    C--&gt;D;&#123;% endmermaid %&#125;\n5.4 Chartjs 图标  [原生]需要主题配置开启 chartjs: enable: true。\n使用 chartjs 标签可以绘制 Line（折线图）、Bar（柱状图）、Bubble（气泡图）、Pie（饼图）等多种图形。\n具体语法参阅 Chart.js\n样式预览源码示例\n            {\n&quot;type&quot;: &quot;line&quot;,\n&quot;data&quot;: {\n&quot;labels&quot;: [&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;],\n&quot;datasets&quot;: [{\n&quot;label&quot;: &quot;My First dataset&quot;,\n&quot;backgroundColor&quot;: &quot;rgb(255, 99, 132)&quot;,\n&quot;borderColor&quot;: &quot;rgb(255, 99, 132)&quot;,\n&quot;data&quot;: [0, 10, 5, 2, 20, 30, 45]\n}]\n},\n&quot;options&quot;: {\n&quot;responsive&quot;: true,\n&quot;title&quot;: {\n&quot;display&quot;: true,\n&quot;text&quot;: &quot;Chart.js Line Chart&quot;\n}\n}\n}\n\n\n          &#123;% chartjs 70 %&#125;&lt;!-- chart --&gt;&#123;&quot;type&quot;: &quot;line&quot;,&quot;data&quot;: &#123;&quot;labels&quot;: [&quot;January&quot;, &quot;February&quot;, &quot;March&quot;, &quot;April&quot;, &quot;May&quot;, &quot;June&quot;, &quot;July&quot;],&quot;datasets&quot;: [&#123;&quot;label&quot;: &quot;My First dataset&quot;,&quot;backgroundColor&quot;: &quot;rgb(255, 99, 132)&quot;,&quot;borderColor&quot;: &quot;rgb(255, 99, 132)&quot;,&quot;data&quot;: [0, 10, 5, 2, 20, 30, 45]&#125;]&#125;,&quot;options&quot;: &#123;&quot;responsive&quot;: true,&quot;title&quot;: &#123;&quot;display&quot;: true,&quot;text&quot;: &quot;Chart.js Line Chart&quot;&#125;&#125;&#125;&lt;!-- endchart --&gt;&#123;% endchartjs %&#125;\n5.5 Abcjs 乐谱  [原生]需要主题配置开启 abcjs: enable: true。\n在页面上渲染乐谱。\n样式预览源码示例X:1\nT:alternate heads\nM:C\nL:1/8\nU:n=!style=normal!\nK:C treble style=rhythm\n&quot;Am&quot; BBBB B2 B&gt;B | &quot;Dm&quot; B2 B/B/B &quot;C&quot; B4 |&quot;Am&quot; B2 nGnB B2 nGnA | &quot;Dm&quot; nDB/B/ nDB/B/ &quot;C&quot; nCB/B/ nCB/B/ |B8| B0 B0 B0 B0 |]\n%%text This translates to:\n[M:C][K:style=normal]\n[A,EAce][A,EAce][A,EAce][A,EAce] [A,EAce]2 [A,EAce]&gt;[A,EAce] |[DAdf]2 [DAdf]/[DAdf]/[DAdf] [CEGce]4 |[A,EAce]2 GA [A,EAce] GA |D[DAdf]/[DAdf]/ D[DAdf]/[DAdf]/ C [CEGce]/[CEGce]/ C[CEGce]/[CEGce]/ |[CEGce]8 | [CEGce]2 [CEGce]2 [CEGce]2 [CEGce]2 |]\nGAB2 !style=harmonic![gb]4|GAB2 [K: style=harmonic]gbgb|\n[K: style=x]\nC/A,/ C/C/E C/zz2|\nw:Rock-y did-nt like that&#123;% score %&#125;X:1T:alternate headsM:CL:1/8U:n=!style=normal!K:C treble style=rhythm&quot;Am&quot; BBBB B2 B&gt;B | &quot;Dm&quot; B2 B/B/B &quot;C&quot; B4 |&quot;Am&quot; B2 nGnB B2 nGnA | &quot;Dm&quot; nDB/B/ nDB/B/ &quot;C&quot; nCB/B/ nCB/B/ |B8| B0 B0 B0 B0 |]%%text This translates to:[M:C][K:style=normal][A,EAce][A,EAce][A,EAce][A,EAce] [A,EAce]2 [A,EAce]&gt;[A,EAce] |[DAdf]2 [DAdf]/[DAdf]/[DAdf] [CEGce]4 |[A,EAce]2 GA [A,EAce] GA |D[DAdf]/[DAdf]/ D[DAdf]/[DAdf]/ C [CEGce]/[CEGce]/ C[CEGce]/[CEGce]/ |[CEGce]8 | [CEGce]2 [CEGce]2 [CEGce]2 [CEGce]2 |]GAB2 !style=harmonic![gb]4|GAB2 [K: style=harmonic]gbgb|[K: style=x]C/A,/ C/C/E C/zz2|w:Rock-y did-nt like that&#123;% endscore %&#125;\n5.6 Mathjax 数学公式  [原生]需要主题配置开启 mathjax 功能。\n样式预览源码示例$\\sqrt{2}$$\\sqrt&#123;2&#125;$\n6. 其他功能6.1 Timeline 时间轴  [原生]标签语法样式预览源码示例&#123;% timeline title, color %&#125;&lt;!-- timeline title --&gt;xxxxx&lt;!-- endtimeline --&gt;&#123;% endtimeline %&#125;\n\ntitle: 时间轴标题\ncolor: 时间轴颜色（留空 / blue / pink / red / purple / orange / green）\n\n        \n          2025\n\n        \n      \n        \n          05-01\n\n        \n        劳动最光荣！\n\n      \n        \n          06-01\n\n        \n        儿童节快乐！\n\n      &#123;% timeline 2025,green %&#125;&lt;!-- timeline 05-01 --&gt;劳动最光荣！&lt;!-- endtimeline --&gt;&lt;!-- timeline 06-01 --&gt;儿童节快乐！&lt;!-- endtimeline --&gt;&#123;% endtimeline %&#125;\n6.2 Checkbox/Radio 选框列表  [Plus]标签语法样式预览源码示例&#123;% checkbox [style] [color] [checked], 文本 %&#125;&#123;% radio [color] [checked], 文本 %&#125;\n\nstyle: 选中时的样式（留空 / plus / minus / times）\ncolor: 颜色（留空 / blue / yellow / red / cyan / gray / green）\nchecked: 是否选中（留空 / checked）\n\n            已完成任务\n            \n\n            未完成任务\n            \n\n\n            选项A\n            \n\n            选项B\n            &#123;% checkbox green checked, 已完成任务 %&#125;&#123;% checkbox times red checked, 未完成任务 %&#125;&#123;% radio blue checked, 选项A %&#125;&#123;% radio blue, 选项B %&#125;\n6.3 Progress 进度条  [Plus]标签语法样式预览源码示例&#123;% progress [width] [color] [text] %&#125;\n\nwidth: 进度数字（0-100）\ncolor: 颜色（留空 / blue / yellow / red / cyan / gray / green）\ntext: 进度条上的文字内容\n危险\n警告\n安全&#123;% progress 30 red 危险 %&#125;&#123;% progress 60 yellow 警告 %&#125;&#123;% progress 90 green 安全 %&#125;\n6.4 Icon 图标  [Plus]需要引入对应 Symbol 图标 js 文件。\n标签语法样式预览源码示例&#123;% icon [icon-xxxx], [font-size] %&#125;\n\nicon-xxxx: 图标名称\nfont-size: 图标大小。直接填写数字即可，单位为 em。默认值为 1em。\n   \n   \n   &#123;% icon icon-rat, 2 %&#125; &#123;% icon icon-ox, 2 %&#125; &#123;% icon icon-tiger, 2 %&#125; &#123;% icon icon-rabbit, 2 %&#125;&#123;% icon icon-dragon, 2 %&#125; &#123;% icon icon-snake, 2 %&#125; &#123;% icon icon-horse, 2 %&#125; &#123;% icon icon-goat, 2 %&#125;&#123;% icon icon-monkey, 2 %&#125; &#123;% icon icon-rooster, 2 %&#125; &#123;% icon icon-dog, 2 %&#125; &#123;% icon icon-boar, 2 %&#125;\n6.5 Bdage 徽标  [Plus]GitHub 徽标。\n标签语法样式预览源码示例&#123;% bdage right,left,[logo] || [color],[link],[title] || [option] %&#125;\n参数分为三组，用 || 分隔。\n\n基本参数\nright: 必填参数。徽标右侧文字。\nleft: 必填参数。徽标左侧文字。\nlogo: 徽标图标。详见 simple-icons\n\n\n信息参数\ncolor: 徽标右边的颜色。例如 abcdef\nlink: 徽标的跳转链接。\ntitle: 鼠标悬停时显示的文字（已失效）。\n\n\n拓展参数\noption: 自定义参数，支持 shields.io 的全部API参数支持\n\n\n\n&#123;% bdage Theme,Butterfly %&#125;&#123;% bdage CDN,JsDelivr,jsDelivr || abcdef,&#x27;https://www.jsdelivr.com/&#x27;,&#x27;本站使用JsDelivr为静态资源提供CDN加速&#x27; %&#125;&lt;!-- endtab --&gt;\n6.6 Bubble 气泡注释  [Plus]标签语法样式预览源码示例&#123;% bubble [content], [notation], [background-color] %&#125;\n\ncontent: 注释词汇\nnotation: 悬停显示的注解内容\nbackground-color: 可选，气泡背景色。默认为 #71a4e3\n\n最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的兄弟相邻选择器例如 h1 + p {margin-top:50px;}，flex布局Flex 是 Flexible Box 的缩写，意为弹性布局\"，用来为盒状模型提供最大的灵活性\"，transform变换transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。，animation的贝塞尔速度曲线贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋写法，还有今天刚看到的clip-pathclip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。\n最近我学到了不少新玩意儿（虽然对很多大佬来说这些已经是旧技术了），比如CSS的&#123;% bubble 兄弟相邻选择器,&quot;例如 h1 + p &#123;margin-top:50px;&#125;&quot; %&#125;，&#123;% bubble flex布局,&quot;Flex 是 Flexible Box 的缩写，意为&quot;弹性布局&quot;，用来为盒状模型提供最大的灵活性&quot;,&quot;#ec5830&quot; %&#125;，&#123;% bubble transform变换,&quot;transform 属性向元素应用 2D 或 3D 转换。该属性允许我们对元素进行旋转、缩放、移动或倾斜。&quot;,&quot;#1db675&quot; %&#125;，animation的&#123;% bubble 贝塞尔速度曲线,&quot;贝塞尔曲线(Bézier curve)，又称贝兹曲线或贝济埃曲线，是应用于二维图形应用程序的数学曲线。一般的矢量图形软件通过它来精确画出曲线，贝兹曲线由线段与节点组成，节点是可拖动的支点，线段像可伸缩的皮筋&quot;,&quot;#de4489&quot; %&#125;写法，还有今天刚看到的&#123;% bubble clip-path,&quot;clip-path属性使用裁剪方式创建元素的可显示区域。区域内的部分显示，区域外的隐藏。&quot;,&quot;#868fd7&quot; %&#125;属性。这些对我来说很新颖的概念狠狠的冲击着我以前积累起来的设计思路。\n6.6 Reference 引用文献  [Plus]标签语法样式预览源码示例# 引用上标&#123;% referto [id], [literature] %&#125;# 引用出处&#123;% referfrom [id], [literature], [url] %&#125;\n\nid: 引用的编号。需要和引用出处的编号一致。\nliterature: 引文的内容。\nurl: 引文出处的链接。\n\nGabriel的博客是一个私人性质的博客 [1]Gabriel的博客参考资料，\n主要记录一些技术文章，以及一些生活点滴。\n\n[1]Gabriel的博客\nGabriel的博客是一个私人性质的博客 &#123;% referto &#x27;[1]&#x27;,&#x27;Gabriel的博客&#x27; %&#125;，主要记录一些技术文章，以及一些生活点滴。&#123;% referfrom &#x27;[1]&#x27;,&#x27;Gabriel的博客&#x27;,&#x27;https://lijiabao9.github.io/&#x27; %&#125;\n","categories":["创意工坊","建站日志"],"tags":["Hexo","Butterfly"]},{"title":"Hexo 博客入门：从零搭建","url":"/posts/9e5ea567.html","content":"Hexo 是一款快速、简洁且高效的静态博客框架。本文详细记录了 Hexo 的搭建过程，基于最新版本的 Hexo 8.1.1。\n\n官方网站：https://hexo.io/zh-cn/\nGitHub 仓库：https://github.com/hexojs/hexo\n\n环境要求在开始之前，请确保你的电脑已安装以下基础环境：\n\nGit\n\n版本无特殊要求\n演示版本：git version 2.52.0.windows.1\n\n\nNode.js\n\nHexo 7.0+ 版本要求 NodeJS &gt;= 14.0.0\n演示版本：v24.10.0\n\n\n\n1. 安装 Hexo推荐直接使用 npm 全局安装 hexo-cli，方便在任意目录下使用。\nnpm install -g hexo-cli\n安装完成后，输入 hexo -v，若出现版本信息则代表安装成功。\n2. 创建项目选择一个磁盘目录（例如 D:/Projects/），运行以下命令初始化博客：\n# 创建项目文件夹，并初始化hexo init hexo-blog-source\n初始化成功后，目录结构如下：\n\nscaffolds/：模版文件夹（新建文章时使用的模板）\nsource/：资源文件夹\n_posts/：存放你的 markdown 文章\n\n\nthemes/：主题文件夹\n_config.yml：全局配置文件\npackage.json：依赖包管理文件\n\n3. 启动项目常用命令如下：\n# clean: 清理缓存以及 public 静态文件（遇到样式不更新时常用）hexo cl# generate: 生成静态文件到 public 目录hexo g# server: 本地启动预览# 默认端口 4000，可通过 -p 4001 指定端口hexo s\n启动后，浏览器访问 http://localhost:4000 即可看到博客雏形。\n4. 新建文章hexo new &quot;第一篇文章&quot;\n运行该命令后，会在 /source/_posts/ 下生成 第一篇文章.md。你可以使用任何 Markdown 编辑器（如 Typora, VS Code）编写内容。支持标准的 Markdown 语法。\n提示：文章的新增或修改，只需刷新浏览器页面即可预览；若修改了 _config.yml 配置文件，则需要重启 hexo server。\n\n5. 基础配置 (可选)编辑根目录下的 _config.yml，设置网站的基本信息：\n_config.yml# Sitetitle: Gabriel的博客subtitle: &#x27;在代码与文字之间&#x27;description: &#x27;记录技术探索，也写人间烟火。&#x27;keywords: 编程, 分享, 生活author: Gabriellanguage: zh-CNtimezone: &#x27;Asia/Shanghai&#x27;# URL## Set your site url here. For example, if you use GitHub Page, set url as &#x27;https://username.github.io/project&#x27;url: https://lijiabao9.github.io\n6. 一键部署到 GitHub Pages本地预览只是第一步，我们需要将博客部署到公网。GitHub Pages 提供了免费且稳定的托管服务。\n6.1 准备仓库\n注册/登录 GitHub。\n创建一个 Public 仓库，仓库名必须为 用户名.github.io（例如我的仓库名为： lijiabao9.github.io）。\n\n6.2 配置 SSH 公钥为了让本地能向 GitHub 推送代码，需要配置 SSH Key。\n配置步骤：\n\n命令行执行 ssh-keygen -t rsa -C &quot;your_email@example.com&quot;，一路回车。\n在 ~/.ssh/ 目录下找到 id_rsa.pub，复制其内容。\n进入 GitHub -> Settings -> SSH and GPG keys -> New SSH key。\nTitle 随意填，Key 粘贴刚才复制的内容，保存。\n\n\n6.3 安装部署插件在博客根目录下运行：\nnpm install hexo-deployer-git --save\n6.4 修改配置修改 _config.yml 的 deploy 部分：\n_config.ymldeploy:  type: &#x27;git&#x27;  repo: git@github.com:lijiabao9/lijiabao9.github.io.git  branch: main\n6.5 执行部署运行命令：\nhexo d\n部署完成后，访问 https://lijiabao9.github.io 即可看到上线的博客。\n7. 进阶：GitHub Actions 自动部署随着文章增多，每次手动执行 hexo d 生成静态文件并上传会变得繁琐。我们可以利用 GitHub Actions 实现提交源码即自动部署。\n7.1 创建源码仓库\n在 GitHub 上新建一个 Private（私有）仓库，命名为 hexo-blog-source（用于存放博客源码，而非静态页面）。\n将本地博客项目关联到该仓库并推送代码。git remote add origin git@github.com:lijiabao9/hexo-blog-source.gitgit branch -M maingit push -u origin main\n\n\n7.2 配置 Token (关键步骤)为了让 Action 有权限推送代码到 Pages 仓库，需要配置 Token。\n\n生成 Token：GitHub -> Settings -> Developer Settings -> Personal access tokens -> Tokens (classic) ->Generate new token。\n勾选 repo 和 workflow 权限。\n复制生成的 Token（以 ghp_ 开头）。\n\n\n配置 Secrets：\n进入你的 博客源码私有仓库 -> Settings -> Secrets and variables -> Actions -> New repository secret。\nName 填写：HEXO_DEPLOY_TOKEN\nSecret 填写：刚才复制的 Token。\n\n\n\n7.3 创建 Workflow 文件在项目根目录新建 .github/workflows/autodeploy.yml：\nautodeploy.ymlname: 自动部署on:  push:    branches:      - main  release:    types:      - publishedjobs:  deploy:    runs-on: ubuntu-latest    steps:      - name: 检出分支        uses: actions/checkout@v5      - name: 安装 Node        uses: actions/setup-node@v6        with:          node-version: &quot;24.x&quot;          cache: &#x27;npm&#x27;      - name: 安装依赖        run: |          npm ci      - name: 生成静态文件        run: |          npm install hexo-cli -g          hexo clean          hexo generate      - name: 部署到 GitHub Pages        uses: JamesIves/github-pages-deploy-action@v4        with:          folder: public          token: $&#123;&#123; secrets.HEXO_DEPLOY_TOKEN &#125;&#125;          repository-name: lijiabao9/lijiabao9.github.io          branch: main          commit-message: &quot;Updated By Github Actions&quot;          # 为了隐私考虑屏蔽 $&#123;&#123; github.event.head_commit.message &#125;&#125; 提交信息\n现在，你只需要将源码推送到私有仓库，GitHub Actions 就会自动帮你完成打包和发布工作。\n8. 必装 SEO 优化插件为了让文章更容易被搜索引擎（Google/Bing）收录，推荐安装以下插件。\n\n安装插件\n# 生成唯一短链接，利于 SEO 权重npm install hexo-abbrlink --save# 为外部链接添加 nofollow，防止权重流失npm install hexo-filter-nofollow --save# 生成 RSS 订阅源npm install hexo-generator-feed --save# 生成站点地图 Sitemapnpm install hexo-generator-sitemap --save\n\n配置插件 (在 _config.yml 中添加)\n _config.yml# 链接持久化abbrlink:  alg: crc32  rep: hex# 外部链接优化nofollow:  enable: true  field: site  exclude:    - &#x27;lijiabao9.github.io&#x27; # 排除自己的域名# RSS 订阅feed:  enable: true  type: atom  path: atom.xml  limit: 20# 站点地图sitemap:  path: sitemap.xml\n\n\n配置完成后，重新 hexo g -d 或推送源码，即可生效。\n","categories":["创意工坊","建站日志"],"tags":["Hexo","GitHub"]},{"title":"Hexo 博客进阶：Butterfly 主题深度美化与源码级魔改","url":"/posts/2a3bd2c2.html","content":"本文不仅包含 Butterfly 主题的基础配置与插件安装，更记录了 导航栏彩色图标 、 生肖时间轴 等深度的源码级魔改方案。\n\nButterfly 是 Hexo 生态中广受欢迎的高颜值主题，以其强大的功能和极高的可定制性著称。本文将系统记录我如何将 Butterfly 主题应用到极致，打造一个集美观与交互于一体的个人博客。\n\n相关资源\n\n官方文档：Butterfly 文档\n主题仓库：hexo-theme-butterfly\n\n\n1. 主题安装与环境准备1.1 获取主题在博客项目根目录，执行以下命令拉取主题（推荐使用稳定分支）：\ngit clone -b dev git@github.com:jerryc127/hexo-theme-butterfly.git themes/butterfly\n重要提示：下载完成后，请务必删除 /themes/butterfly/.git/ 文件夹。否则主题目录会被识别为 Git 子模块（Submodule），导致主项目的 Git 仓库无法追踪主题文件的变更，部署时会报错。\n\n安装必要的渲染插件：\nnpm install hexo-renderer-pug hexo-renderer-stylus --save\n1.2 配置抽离策略 (最佳实践)为了防止后续配置混乱，建议将主题配置与站点配置分离：\n\n将 /themes/butterfly/_config.yml 复制到博客根目录，重命名为 _config.butterfly.yml。\n以后所有针对主题的配置，均在此文件中修改。\n修改根目录的 _config.yml 启用主题：_config.ymltheme: butterfly\n\n\n启动博客，访问 http://localhost:4000，即可看到主题效果。\n2. 页面构建与基础美化2.1 创建标准页面Butterfly 依赖特定的 Front-matter。请参考 官方文档。\n使用 hexo new page &quot;页面名&quot; 创建以下核心页面，并修改对应的 Markdown 文件：\n\n标签 (tags): type: &quot;tags&quot;\n分类 (categories): type: &quot;categories&quot;\n友情链接 (link): type: &quot;link&quot; (需配合数据文件 source/_data/link.yml)\n说说 (shuoshuo): type: &#39;shuoshuo&#39; (需配合数据文件 source/_data/shuoshuo.yml)\n404页面: 在配置中开启 error_404: true\n\n2.2 个性化 CSS 定制创建自定义 CSS 文件 /source/assets/css/custom.css：\ncustom.css/* 一图流配置：隐藏 banner 和 footer 的背景图，使背景动图全屏透视 */#page-header &#123;    background: transparent !important;&#125;#footer &#123;    background: transparent !important;&#125;/* 导航栏：定义彩色图标的大小与对齐 */svg.icon &#123;    width: 1.2em;    height: 1.2em;    vertical-align: -0.15em;    fill: currentColor;    overflow: hidden;&#125;\n最后在 _config.butterfly.yml 引入样式：\n_config.butterfly.ymlinject:  head:    - &lt;link rel=&quot;stylesheet&quot; href=&quot;/assets/css/custom.css&quot;&gt;\n3. 功能增强插件3.1 基础功能类\n\n\n\n功能\n插件/命令\n说明\n\n\n\n\n字数统计\nnpm install hexo-wordcount --save\n显示文章字数和阅读时长\n\n\n数学公式\nnpm uninstall hexo-renderer-markednpm install hexo-renderer-kramed\n必须替换默认渲染器以支持 MathJax\n\n\n本地搜索\nnpm install hexo-generator-searchdb\n生成 search.json 供本地搜索调用\n\n\n音乐播放器\nnpm install hexo-tag-aplayer\n全局吸底音乐播放器\n\n\n\n\n根目录 _config.yml 配置：\n_config.yml# kramed 渲染器配置 (解决数学公式冲突)kramed:  gfm: true  pedantic: false  sanitize: false  tables: true  breaks: true  smartLists: true  smartypants: true# 本地搜索search:  path: search.json  field: post  content: true  format: striptags# APlayer 播放器 (关闭自动注入，改为手动控制)aplayer:  meting: true  asset_inject: false\n主题配置 _config.butterfly.yml 启用：\n_config.butterfly.ymlwordcount:  enable: truemath:  use: mathjaxsearch:  use: local_search# APlayer 注入配置aplayerInject:  enable: true  per_page: trueinject:  bottom:    # data-id: 歌单ID, data-server: netease(网易云)    - &lt;div class=&quot;aplayer no-destroy&quot; data-id=&quot;2761236917&quot; data-server=&quot;netease&quot; data-type=&quot;playlist&quot; data-fixed=&quot;true&quot; data-autoplay=&quot;false&quot;&gt;&lt;/div&gt;\n3.2 视觉特效类💌 薇尔莉特信封 (留言板)插件：hexo-butterfly-envelope\nnpm install hexo-butterfly-envelope --save\n主题配置 _config.butterfly.yml 启用：\n_config.butterfly.ymlenvelope_comment:  enable: true  custom_pic:    cover: https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/info/envelope-violet.webp       # 信笺头部图片    line: https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/info/envelope-line.webp          # 信笺底部图片    beforeimg: https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/info/envelope-before.webp   # 信封前半部分    afterimg: https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/info/envelope-after.webp     # 信封后半部分  message: # 信笺正文    - 「纸短情长，墨香留痕——你想诉说什么故事？」    - 「晨露与星辉之间，我在此倾听你的每一声轻语。」    - 「字句如蝶，栖于此处。是思考，是倾诉，或只是片刻心情？」    - 「这里盛放未完成的诗、半截灵感，和所有欲言又止的黄昏。」  bottom: 「此处永远有月光铺就的纸笺！」    # 仅支持单行文本  height: # 1050px，信封划出的高度  path:   #默认为 comments  front_matter:    title: 留言板    comments: true# 导航栏，菜单就可使用 /comments 路径了menu:  留言板: /comments/ || fas fa-envelope\n🏷️ 外挂标签 Plus (Tag Plugins)插件：hexo-butterfly-tag-plugins-plus\n官方效果预览：Tag Plugins Plus | Akilarの糖果屋\n此插件极大地增强了 Markdown 的表现力，支持 Tip、Timeline、Icon 等标签。需在配置文件中引入 FontAwesome 和阿里 Iconfont 依赖：\n注册登陆 IconFont 后，挑选相应素材，下载 Symbol 图标代码，拷贝到 /source/assets/js/ali/iconfont.js 中。\n\nnpm install hexo-butterfly-tag-plugins-plus --save\n_config.butterfly.ymltag_plugins:  enable: true  priority: 5  link:  # link_card 标签默认的图标图片    placeholder: https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/info/link-card.webp  CDN:    # 动画标签 anima 的依赖    anima: https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css    tag_plugins_css: https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css    # icon 标签支持的图标库依赖：    iconfont: /assets/js/ali/iconfont.jsinject:  head:    # tag-plugins 的 tip 标签的自定义图标所需依赖    - &lt;link rel=&quot;stylesheet&quot; href=&quot;https://npm.elemecdn.com/@fortawesome/fontawesome-free@latest/css/all.min.css&quot;&quot;&gt;\n4. 源码级魔改高风险操作提示：以下修改涉及直接编辑 /themes/butterfly 下的源码文件（Pug 模板和 JS 脚本）。这会导致主题后续无法直接升级（覆盖安装会丢失修改）。建议：\n\n修改前备份相关文件。\n或者熟练掌握 Git 分支合并，以便在升级主题时保留修改。\n\n\n4.1 归档页：十二生肖时间轴效果：在归档页面的年份旁（如 2025），自动计算并显示对应的生肖图标（如 🐍）。\n第一步：编写 Helper 脚本新建文件 /scripts/helper-timeline-year.js (Hexo 会自动加载 scripts 目录下的脚本)：\nhelper-timeline-year.js// 注册 helper 函数：输入年份，返回 [生肖文字, 图标Class]hexo.extend.helper.register(&quot;getShengxiaoIcon&quot;, function (year) &#123;    let symbol = cal_shengxiao(year);    let icon = iconMap[symbol];    return [symbol, icon];&#125;);const sxTable = [&#x27;鼠&#x27;, &#x27;牛&#x27;, &#x27;虎&#x27;, &#x27;兔&#x27;, &#x27;龙&#x27;, &#x27;蛇&#x27;, &#x27;马&#x27;, &#x27;羊&#x27;, &#x27;猴&#x27;, &#x27;鸡&#x27;, &#x27;狗&#x27;, &#x27;猪&#x27;];function cal_shengxiao(year) &#123;    let index = (parseInt(year) - 4) % 12;    return sxTable[index];&#125;// 映射表：对应阿里 Iconfont 的图标 Classconst iconMap = &#123;    &#x27;鼠&#x27;: &#x27;icon-rat&#x27;, &#x27;牛&#x27;: &#x27;icon-ox&#x27;, &#x27;虎&#x27;: &#x27;icon-tiger&#x27;, &#x27;兔&#x27;: &#x27;icon-rabbit&#x27;,    &#x27;龙&#x27;: &#x27;icon-dragon&#x27;, &#x27;蛇&#x27;: &#x27;icon-snake&#x27;, &#x27;马&#x27;: &#x27;icon-horse&#x27;, &#x27;羊&#x27;: &#x27;icon-goat&#x27;,    &#x27;猴&#x27;: &#x27;icon-monkey&#x27;, &#x27;鸡&#x27;: &#x27;icon-rooster&#x27;, &#x27;狗&#x27;: &#x27;icon-dog&#x27;, &#x27;猪&#x27;: &#x27;icon-boar&#x27;&#125;\n第二步：修改 Pug 模板编辑主题文件 /themes/butterfly/layout/includes/mixins/article-sort.pug：\narticle-sort.pug//- 修改年份显示部分，增加 SVG 图标调用if tempYear !== year  - year = tempYear  .article-sort-item.year    span= year    svg.icon(aria-hidden=&#x27;true&#x27;)      //- 调用刚才注册的 Helper 函数      use(xlink:href=&#x27;#&#x27; + getShengxiaoIcon(tempYear)[1])\n4.2 导航栏：支持 Iconfont 彩色图标Butterfly 默认仅支持 FontAwesome，我们需要修改菜单渲染逻辑，使其兼容阿里 Iconfont（SVG Symbol 模式）。\n修改文件：/themes/butterfly/layout/includes/header/menu_item.pug\nmenu_item.pugif theme.menu  .menus_items    // 默认图标动画效果    - const default_animation = &#x27;faa-tada&#x27;    each value, label in theme.menu      if typeof value !== &#x27;object&#x27;        .menus_item          // 增加可配置参数动画效果，合并最终效果          - const [link, icon, animation] = value.split(&#x27;||&#x27;).map(part =&gt; trim(part))          - const final_animation = animation || default_animation          // 给 a 添加父元素动画效果 .faa-parent.animated-hover          a.site-page.faa-parent.animated-hover(href=url_for(link))            //- 魔改逻辑：检测图标是否以 &#x27;icon&#x27; 开头            if icon.substring(0,2)===&#x27;fa&#x27;              i.fa-fw(class=icon + &#x27; &#x27; + final_animation)            else if icon.substring(0, 4) === &#x27;icon&#x27;              //- 如果是 icon 开头，渲染 SVG              svg.icon(aria-hidden=&quot;true&quot; class=final_animation)                use(xlink:href=`#`+ icon)            span= &#x27; &#x27; + label      else        //- (省略 submenu 部分，逻辑同上，需同样修改 groupIcon 和 childIcon 的渲染逻辑)        // ... 请确保对子菜单也应用相同的 SVG 判断逻辑 ...\n配置应用在 _config.butterfly.yaml 中配置菜单（注意图标名称需与 Iconfont 项目中的 symbol 名称一致）：\n_config.butterfly.yamlmenu:  首页: / || icon-home  文章 || icon-article:    时间轴: /archives/ || icon-timeline    标签: /tags/ || icon-tag  收藏 || icon-favorite:    推荐: /link/ || icon-recommend  留言板: /comments/ || icon-email\n\n通过以上的一系列配置与魔改，我们成功将 Hexo 博客打造成了一个集美观、交互与技术展示于一体的个性化站点。希望这些记录能为你的博客折腾之路提供灵感！\n","categories":["创意工坊","建站日志"],"tags":["Hexo","Butterfly"]},{"title":"Artalk 私有化部署全指南：Docker + Nginx + Cloudflare 打造独立评论系统","url":"/posts/1b40d3bb.html","content":"Artalk 是一款简洁、轻量且功能强大的自托管评论系统。相比于 Valine 或 Gitalk，它提供了更完善的管理后台和数据隐私掌控权。\n本文将演示如何通过 Docker Compose 部署 Artalk，并将其集成到 Hexo 博客（Butterfly 主题）中。\n一、前置准备在开始之前，请确保你已经完成了以下基础环境的搭建：\n\n服务器环境：已安装 Docker 和 Docker Compose。\n参考：Ubuntu 系统 Docker 安装全指南：官方源与国内镜像加速\n\n\n域名与证书：拥有一个域名并完成了 SSL 证书申请。\n参考：从零开始：域名购买、Cloudflare 托管与 Nginx 自动化 HTTPS 配置全指南\n\n\n\n\n二、服务端部署1. 创建工作目录登录服务器，建立 Artalk 的数据存储目录：\nmkdir -p /app/artalkcd /app/artalk\n2. 编写 Docker Compose创建 docker-compose.yml 文件：\nvim docker-compose.yml\n写入以下配置（注意修改 ATK_SITE_URL 为你的博客地址）：\ndocker-compose.ymlservices:  artalk:    container_name: artalk    image: artalk/artalk-go    restart: unless-stopped    ports:      - 20001:23366    volumes:      - ./data:/data    environment:      - TZ=Asia/Shanghai      - ATK_LOCALE=zh-CN      - ATK_SITE_DEFAULT=Gabriel的博客    # 默认站点名称      - ATK_SITE_URL=https://lijiabao9.github.io  # 你的博客前端地址（用于跨域信任）\n3. 启动服务docker compose up -d\n等待容器启动后，创建管理员账号：\ndocker exec -it artalk artalk admin\n按提示输入管理员昵称、邮箱和密码。账号信息后续可进行修改。\n此时，可以通过 http://服务器IP:20001 访问后台。但为了安全，我们接下配置 Nginx 反向代理。\n\n三、Nginx 反向代理与 HTTPS为了启用 HTTPS 并隐藏非标准端口，我们需要配置 Nginx。\n1. 编写 Nginx 配置创建配置文件 vi /etc/nginx/sites-available/artalk.131495.xyz：\nartalk.131495.xyzserver &#123;    listen 80;    listen [::]:80;    server_name artalk.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;        # TODO: 修改为对应的子域名    server_name artalk.131495.xyz;        # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;        # TODO: 独立的日志配置    access_log /var/log/nginx/artalk.access.log proxy_json;    error_log /var/log/nginx/artalk.error.log;    # 反向代理设置    location / &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:20001;                # 代理参数        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n2. 启用配置# 创建软链接ln -s /etc/nginx/sites-available/artalk.131495.xyz /etc/nginx/sites-enabled/# 测试并重启nginx -t &amp;&amp; systemctl reload nginx\n3. 域名DNS记录给域名添加对应的 A 记录，将 artalk.131495.xyz 解析到服务器的 IP 地址。\n现在，你可以通过 https://artalk.131495.xyz 访问 Artalk 控制中心了。\n\n四、前端接入 (Hexo Butterfly)1. 修改主题配置编辑 Hexo 的主题配置文件 _config.butterfly.yml：\n_config.butterfly.ymlcomments:  use: Artalkartalk:  server: https://artalk.131495.xyz   # 你的 Artalk 后端地址  site: Gabriel的博客                  # 必须与后台创建的站点名称一致\n2. 重新部署执行 hexo s 重新启动博客。\n访问博客文章页面，评论区应已正常加载。\n\n五、故障排查 (Troubleshooting)在部署过程中，特别是配合 Cloudflare 使用时，可能会遇到以下问题：\n1. 跨域问题 (CORS)\n现象：F12 控制台报错 No &#39;Access-Control-Allow-Origin&#39; header。\n原因：Artalk 默认开启跨域限制。\n解决：登录 Artalk 后台 -> 设置 -> 可信域名，添加你的博客域名（如 https://localhost:4000）。\n\n2. 混合内容错误 (Mixed Content)\n现象：GitHub Pages (HTTPS) 无法加载 Artalk (HTTP) 资源。\n解决：确保 Artalk Server URL 填写的是 https:// 开头的地址。\n\n3. Cloudflare 特有坑点如果你开启了 Cloudflare 的小黄云（代理模式），请注意：\n1. 端口限制CF 仅代理 443, 8443, 2053 等特定端口。如果直接使用 IP:20002 访问会失败。请务必使用 Nginx 反代后的 443 端口。\n\n2. 控制台无法加载 (X-Frame-Options)CF 默认可能会添加安全标头，导致 Artalk iframe 加载失败。解决：在 CF 后台 -> 规则 -> 转换规则 -> HTTP 响应头 -> 关闭 添加安全性标头。\n\n3. IP 属地不显示CF 可能会隐藏真实 IP。解决：在 CF 后台 -> 规则 -> 转换规则 -> HTTP 请求头 -> 关闭 删除访问者 IP 标头。同时，Artalk 后台 -> 设置 -> 服务器 -> 代理标头名，填入 X-Forwarded-For。\n\n4. 图片上传失败 (403 Forbidden)解决：在 CF 后台 -> Scrape Shield -> 关闭 Hotlink 保护。\n\n\n六、高级功能定制1. 界面个性化在 Artalk 后台 -&gt; 设置 -&gt; 界面配置，可进行个性化配置。\n\n评论框占位文字：让思绪在此停泊，或如风，或如诗…\n无评论显示文字：此处静默，却等待你的第一笔心动。\n发送按钮文字；寄往光的深处\n表情包：\n默认的是：https://cdn.jsdelivr.net/gh/ArtalkJS/Emoticons/grps/default.json\n改用：https://cdn.jsdelivr.net/gh/eryajf/emotion_generate/dist/artalk.json\n\n\n默认勾选 投票按钮；\n默认不勾选 返回按钮；\n勾选 用户UA徽标；（勾选后，会显示比如 Edge137，Windows11）\n\n2. IP 属地显示\n下载 IP 数据库：ip2region.xdbwget -O /app/artalk/data/ip2region.xdb https://raw.githubusercontent.com/lionsoul2014/ip2region/v2.12.0/data/ip2region.xdb\n在 Artalk 后台 -&gt; 设置 -&gt; IP属地，勾选 开启 IP 属地展示。\n如果网站使用了 CDN 代理，在 Artalk 后台 -&gt; 设置 -&gt; 服务器 -&gt; 代理标头名，填写 X-Forwarded-For。\n\n3. UpGit 图片上传 (GitHub 图床)Artalk 默认支持调用本地程序上传图片。为了节省服务器磁盘空间，我们可以集成 UpGit 将图片转存 GitHub。\n步骤 A: 安装 UpGit# 下载 upgit 程序wget  -O /app/artalk/upgit https://github.com/pluveto/upgit/releases/download/v0.2.25/upgit_linux_arm64# 设置可执行权限chmod 775 /app/artalk/upgit\n步骤 B: 配置 UpGit创建 vi /app/artalk/data/config.upgit.toml，填入你的 GitHub Token 和仓库信息（详见UpGit文档）。\nconfig.upgit.toml# =============================================================================# UPGIT 配置# =============================================================================# 默认上传器default_uploader = &quot;github&quot;# 上传文件名的格式模板（仅特定上传器适配）#   / 目录分隔符, 作用: 是区分目录#   &#123;year&#125; 年份, 例如: 2022#   &#123;month&#125; 月份, 例如: 02#   &#123;day&#125; 天, 例如: 01#   &#123;unix_ts&#125; 时间戳, 例如: 1643617626#   &#123;fname&#125; 原始文件名，如 logo (不含后缀名)#   &#123;fname_hash&#125; &#123;fname&#125;的 MD5 散列值#   &#123;ext&#125; 文件后缀名, 例如.png#   下面的例子生成的文件名预览: 2022/01/upgit_20220131_1643617626.png#   如果目录不存在将会被程序自动创建rename = &quot;artalk/&#123;year&#125;/&#123;month&#125;/upgit_&#123;year&#125;&#123;month&#125;&#123;day&#125;_&#123;unix_ts&#125;&#123;ext&#125;&quot;# -----------------------------------------------------------------------------# 自定义输出格式# -----------------------------------------------------------------------------#   &#123;url&#125; 图片文件的网络URL地址[output_formats]&quot;bbcode&quot; = &quot;[img]&#123;url&#125;[/img]&quot;&quot;html&quot; = &#x27;&lt;img src=&quot;&#123;url&#125;&quot; /&gt;&#x27;&quot;markdown-simple&quot; = &quot;![](&#123;url&#125;)&quot;# -----------------------------------------------------------------------------# 直链替换规则 RawUrl -[replace]-&gt; Url# -----------------------------------------------------------------------------# 如果您的网络访问Github异常或者缓慢，您可以尝试下面的配置以开启CDN加速# [replacements]&quot;raw.githubusercontent.com&quot; = &quot;cdn.jsdelivr.net/gh&quot;&quot;/main&quot; = &quot;@main&quot;# =============================================================================# 以下为各个上传器的配置示例. 用不到的留空即可# =============================================================================# Github 上传器[uploaders.github]# 保存文件的分支，例如 master 或 mainbranch = &quot;main&quot;# 您的拥有&quot;repo&quot;权限的 Github 令牌# 获取Github Token连接: https://github.com/settings/tokenspat = &quot;ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;# 您的公共Github存储库的名称# 注意: 为了让您和他人可以访问到图片资源, 您的Github仓库一定要是公开的, #       在私有仓库中Github会拦截未授权的请求,你将会得到一个404.repo = &quot;pic.cloud&quot;# 您的 Gtihub 用户名 username = &quot;lijiabao9&quot;\n步骤 C: 修改 Docker Compose我们需要将宿主机上的 upgit 程序挂载到容器内部。\ndocker-compose.ymlservices:  artalk:    # ... 其他配置保持不变    volumes:      - ./data:/data      - ./upgit:/usr/bin/upgit  # 新增挂载\n步骤 D: 启用集成\n重建容器：docker compose down &amp;&amp; docker compose up -d\nArtalk 后台 -> 图片上传 -> -&gt; Upgit配置 -&gt; 启用 Upgit。\n上传命令填写：upgit -c /data/config.upgit.toml。\n\n\n此时，上传的图片，会被上传到 GitHub。\n4. 精美邮件通知模板Artalk 支持自定义邮件模板。以下是几款精选的模板代码，复制即可使用。\n仿App聊天界面左侧视觉分栏孟菲斯故障票据VSCode代码编辑器复古打字机\n./data/mail_tpl/Chat-UI.html&lt;div style=&quot;background-color: #f2f2f7; padding: 40px 0; font-family: -apple-system, BlinkMacSystemFont, &#x27;Segoe UI&#x27;, Roboto, Helvetica, Arial, sans-serif;&quot;&gt;    &lt;div style=&quot;max-width: 400px; margin: 0 auto; background-color: #ffffff; border-radius: 24px; overflow: hidden; box-shadow: 0 20px 50px rgba(0,0,0,0.15); border: 8px solid #1c1c1e;&quot;&gt;                &lt;div style=&quot;background-color: #f9f9f9; padding: 15px 20px; border-bottom: 1px solid #e5e5ea; display: flex; align-items: center; justify-content: space-between;&quot;&gt;            &lt;div style=&quot;font-size: 12px; font-weight: 600; color: #000;&quot;&gt;&#123;&#123;site_name&#125;&#125;&lt;/div&gt;            &lt;div style=&quot;font-size: 10px; color: #8e8e93;&quot;&gt;刚刚&lt;/div&gt;        &lt;/div&gt;        &lt;div style=&quot;padding: 20px; background-color: #ffffff; min-height: 250px;&quot;&gt;                        &lt;div style=&quot;text-align: center; margin-bottom: 20px;&quot;&gt;                &lt;span style=&quot;background-color: #f2f2f7; color: #8e8e93; font-size: 10px; padding: 4px 8px; border-radius: 4px;&quot;&gt;收到新回复&lt;/span&gt;            &lt;/div&gt;            &lt;table width=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot; style=&quot;margin-bottom: 20px;&quot;&gt;                &lt;tr&gt;                    &lt;td align=&quot;right&quot; valign=&quot;top&quot;&gt;                        &lt;div style=&quot;display: inline-block; text-align: left;&quot;&gt;                            &lt;div style=&quot;background-color: #e5e5ea; color: #000; padding: 10px 14px; border-radius: 18px 18px 4px 18px; font-size: 13px; max-width: 240px; margin-bottom: 4px;&quot;&gt;                                &lt;span style=&quot;font-size:10px; color:#666; display:block; margin-bottom:2px;&quot;&gt;我&lt;/span&gt;                                &#123;&#123;content&#125;&#125;                            &lt;/div&gt;                        &lt;/div&gt;                    &lt;/td&gt;                    &lt;td width=&quot;40&quot; align=&quot;right&quot; valign=&quot;bottom&quot; style=&quot;padding-left: 8px;&quot;&gt;                        &lt;img src=&quot;https://cravatar.cn/avatar/&#123;&#123;parent_comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=80&quot; style=&quot;width: 30px; height: 30px; border-radius: 50%; background: #ccc;&quot;&gt;                    &lt;/td&gt;                &lt;/tr&gt;            &lt;/table&gt;            &lt;table width=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot;&gt;                &lt;tr&gt;                    &lt;td width=&quot;40&quot; valign=&quot;bottom&quot; style=&quot;padding-right: 8px;&quot;&gt;                        &lt;img src=&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=80&quot; style=&quot;width: 36px; height: 36px; border-radius: 50%; box-shadow: 0 2px 4px rgba(0,0,0,0.1);&quot;&gt;                    &lt;/td&gt;                    &lt;td align=&quot;left&quot; valign=&quot;top&quot;&gt;                        &lt;div style=&quot;font-size: 12px; color: #8e8e93; margin-left: 4px; margin-bottom: 2px;&quot;&gt;&#123;&#123;reply_nick&#125;&#125;&lt;/div&gt;                        &lt;div style=&quot;background-color: #007aff; color: #ffffff; padding: 12px 16px; border-radius: 18px 18px 18px 4px; font-size: 14px; line-height: 1.5; box-shadow: 0 2px 8px rgba(0,122,255,0.25);&quot;&gt;                            &#123;&#123;reply_content&#125;&#125;                        &lt;/div&gt;                    &lt;/td&gt;                &lt;/tr&gt;            &lt;/table&gt;        &lt;/div&gt;        &lt;div style=&quot;padding: 12px 15px 20px 15px; background-color: #f9f9f9; border-top: 1px solid #e5e5ea;&quot;&gt;            &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;display: block; text-decoration: none;&quot;&gt;                &lt;div style=&quot;background-color: #ffffff; border: 1px solid #e5e5ea; border-radius: 20px; padding: 10px 15px; color: #007aff; font-size: 14px; text-align: center; font-weight: 500;&quot;&gt;                    点击此处回复消息...                &lt;/div&gt;            &lt;/a&gt;            &lt;div style=&quot;text-align: center; margin-top: 10px;&quot;&gt;                &lt;a href=&quot;&#123;&#123;page_url&#125;&#125;&quot; style=&quot;font-size: 10px; color: #c7c7cc; text-decoration: none;&quot;&gt;来源文章: &#123;&#123;page_title&#125;&#125;&lt;/a&gt;            &lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;\n./data/mail_tpl/Magazine-Split.html&lt;div style=&quot;background-color: #e9ecef; padding: 40px 0; font-family: &#x27;Helvetica Neue&#x27;, Helvetica, Arial, sans-serif;&quot;&gt;    &lt;div style=&quot;max-width: 600px; margin: 0 auto; background-color: #ffffff; box-shadow: 0 15px 30px rgba(0,0,0,0.1);&quot;&gt;        &lt;table width=&quot;100%&quot; cellspacing=&quot;0&quot; cellpadding=&quot;0&quot; border=&quot;0&quot;&gt;            &lt;tr&gt;                &lt;td width=&quot;35%&quot; valign=&quot;top&quot; style=&quot;background-color: #212529; color: #ffffff; padding: 40px 20px; text-align: center;&quot;&gt;                    &lt;img src=&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=120&quot; style=&quot;width: 80px; height: 80px; border-radius: 50%; border: 3px solid #495057; margin-bottom: 15px;&quot;&gt;                    &lt;div style=&quot;font-size: 18px; font-weight: bold; letter-spacing: 1px;&quot;&gt;&#123;&#123;reply_nick&#125;&#125;&lt;/div&gt;                    &lt;div style=&quot;font-size: 10px; text-transform: uppercase; color: #adb5bd; margin-top: 5px; letter-spacing: 2px;&quot;&gt;Replied To You&lt;/div&gt;                                        &lt;div style=&quot;margin-top: 40px; border-top: 1px solid #343a40; padding-top: 20px;&quot;&gt;                        &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;background-color: #ffd43b; color: #212529; padding: 10px 20px; text-decoration: none; font-size: 12px; font-weight: bold; display: inline-block; border-radius: 2px;&quot;&gt;                            查看详情 &amp;rarr;                        &lt;/a&gt;                    &lt;/div&gt;                &lt;/td&gt;                                &lt;td width=&quot;65%&quot; valign=&quot;top&quot; style=&quot;padding: 40px 30px; background-color: #ffffff;&quot;&gt;                    &lt;div style=&quot;font-size: 10px; color: #868e96; letter-spacing: 1px; margin-bottom: 20px;&quot;&gt;IN ARTICLE: &lt;a href=&quot;&#123;&#123;page_url&#125;&#125;&quot; style=&quot;color: #868e96; text-decoration: none; border-bottom: 1px dotted #ccc;&quot;&gt;&#123;&#123;page_title&#125;&#125;&lt;/a&gt;&lt;/div&gt;                                        &lt;div style=&quot;border-left: 2px solid #dee2e6; padding-left: 15px; margin-bottom: 25px;&quot;&gt;                        &lt;div style=&quot;font-size: 12px; color: #adb5bd; margin-bottom: 5px;&quot;&gt;YOU SAID:&lt;/div&gt;                        &lt;div style=&quot;font-size: 13px; color: #868e96; font-style: italic;&quot;&gt;&quot;&#123;&#123;content&#125;&#125;&quot;&lt;/div&gt;                    &lt;/div&gt;                    &lt;div style=&quot;font-family: Georgia, &#x27;Times New Roman&#x27;, serif; font-size: 16px; line-height: 1.6; color: #212529;&quot;&gt;                        &#123;&#123;reply_content&#125;&#125;                    &lt;/div&gt;                    &lt;div style=&quot;margin-top: 50px; font-size: 10px; color: #ced4da; text-align: right;&quot;&gt;                        &lt;a href=&quot;&#123;&#123;site_url&#125;&#125;&quot; style=&quot;color: #ced4da; text-decoration: none;&quot;&gt;&#123;&#123;site_name&#125;&#125;&lt;/a&gt; Notification System                    &lt;/div&gt;                &lt;/td&gt;            &lt;/tr&gt;        &lt;/table&gt;    &lt;/div&gt;&lt;/div&gt;\n./data/mail_tpl/Neo-Brutalism.html&lt;div style=&quot;background-color: #fff4e0; padding: 50px 0; font-family: Helvetica, Arial, sans-serif;&quot;&gt;    &lt;div style=&quot;max-width: 500px; margin: 0 auto;&quot;&gt;                &lt;div style=&quot;background-color: #a388ee; border: 3px solid #000; box-shadow: 6px 6px 0px #000; padding: 15px; margin-bottom: 20px; text-align: center;&quot;&gt;            &lt;h1 style=&quot;margin: 0; font-size: 28px; font-weight: 900; color: #000; text-transform: uppercase; font-style: italic;&quot;&gt;                Hey! Wake Up!            &lt;/h1&gt;        &lt;/div&gt;        &lt;div style=&quot;background-color: #fff; border: 3px solid #000; box-shadow: 6px 6px 0px #000; padding: 30px;&quot;&gt;                        &lt;div style=&quot;text-align: center; margin-top: -60px; margin-bottom: 20px;&quot;&gt;                &lt;img src=&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=100&quot; style=&quot;width: 80px; height: 80px; border: 3px solid #000; background-color: #ff90e8; border-radius: 50%;&quot;&gt;            &lt;/div&gt;            &lt;p style=&quot;font-weight: 700; font-size: 18px; text-align: center; margin: 0 0 20px 0;&quot;&gt;                &lt;span style=&quot;background-color: #ff90e8; padding: 2px 5px; border: 1px solid #000;&quot;&gt;&#123;&#123;reply_nick&#125;&#125;&lt;/span&gt; 刚刚回复了你：            &lt;/p&gt;            &lt;div style=&quot;background-color: #f0f0f0; border: 2px solid #000; padding: 15px; font-size: 16px; font-weight: 500; line-height: 1.5; color: #000;&quot;&gt;                &quot;&#123;&#123;reply_content&#125;&#125;&quot;            &lt;/div&gt;            &lt;div style=&quot;margin-top: 20px; font-size: 12px; color: #666; border-left: 4px solid #000; padding-left: 10px;&quot;&gt;                Target: &quot;&#123;&#123;page_title&#125;&#125;&quot;&lt;br&gt;                Your text: &#123;&#123;content&#125;&#125;            &lt;/div&gt;            &lt;div style=&quot;margin-top: 30px;&quot;&gt;                &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;display: block; background-color: #000; color: #fff; text-decoration: none; text-align: center; padding: 15px; font-weight: 900; text-transform: uppercase; font-size: 16px; transition: all 0.2s;&quot;&gt;                    Go To Reply -&gt;                &lt;/a&gt;            &lt;/div&gt;        &lt;/div&gt;                &lt;div style=&quot;text-align: center; margin-top: 20px; font-weight: 700; font-size: 12px;&quot;&gt;            &#123;&#123;site_name&#125;&#125; // NO_SPAM        &lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;\n./data/mail_tpl/Ticket.html&lt;div style=&quot;background-color: #000000; padding: 40px 10px; font-family: &#x27;Courier New&#x27;, Courier, monospace;&quot;&gt;    &lt;div style=&quot;max-width: 480px; margin: 0 auto; background-color: #ffffff; position: relative;&quot;&gt;                &lt;div style=&quot;height: 8px; background: repeating-linear-gradient(45deg, #000, #000 10px, #f4d03f 10px, #f4d03f 20px);&quot;&gt;&lt;/div&gt;        &lt;div style=&quot;padding: 25px;&quot;&gt;            &lt;table width=&quot;100%&quot; style=&quot;border-bottom: 2px dashed #000; padding-bottom: 15px; margin-bottom: 15px;&quot;&gt;                &lt;tr&gt;                    &lt;td align=&quot;left&quot;&gt;                        &lt;span style=&quot;font-weight: 900; font-size: 24px; letter-spacing: -1px;&quot;&gt;NEW REPLY&lt;/span&gt;                    &lt;/td&gt;                    &lt;td align=&quot;right&quot;&gt;                        &lt;span style=&quot;background: #000; color: #fff; padding: 2px 6px; font-size: 12px;&quot;&gt;#ID_&#123;&#123;comment.id&#125;&#125;&lt;/span&gt;                    &lt;/td&gt;                &lt;/tr&gt;            &lt;/table&gt;            &lt;div style=&quot;margin-bottom: 20px;&quot;&gt;                &lt;div style=&quot;font-size: 12px; color: #666; text-transform: uppercase;&quot;&gt;From / Sender&lt;/div&gt;                &lt;div style=&quot;display: flex; align-items: center; margin-top: 5px;&quot;&gt;                    &lt;img src=&quot;https://cravatar.cn/avatar/&#123;&#123;comment.email_encrypted&#125;&#125;?d=monsterid&amp;s=80&quot; style=&quot;width: 40px; height: 40px; border-radius: 0; border: 2px solid #000; margin-right: 15px;&quot;&gt;                    &lt;span style=&quot;font-size: 18px; font-weight: 700;&quot;&gt;&#123;&#123;reply_nick&#125;&#125;&lt;/span&gt;                &lt;/div&gt;            &lt;/div&gt;            &lt;div style=&quot;border: 2px solid #000; padding: 15px; margin-bottom: 20px; background-color: #f8f8f8;&quot;&gt;                &lt;p style=&quot;margin: 0; font-size: 14px; line-height: 1.5;&quot;&gt;&#123;&#123;reply_content&#125;&#125;&lt;/p&gt;            &lt;/div&gt;            &lt;div style=&quot;font-size: 12px; color: #666; margin-bottom: 20px;&quot;&gt;                &lt;span style=&quot;background: #ccc; color: #000; padding: 0 4px;&quot;&gt;REF&lt;/span&gt; Your comment in &quot;&#123;&#123;page_title&#125;&#125;&quot;:&lt;br&gt;                &lt;span style=&quot;font-style: italic;&quot;&gt;&quot;&#123;&#123;content&#125;&#125;&quot;&lt;/span&gt;            &lt;/div&gt;        &lt;/div&gt;        &lt;div style=&quot;border-top: 2px dashed #000; background-color: #f4d03f; padding: 20px; text-align: center;&quot;&gt;            &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;display: block; width: 100%; text-decoration: none; color: #000; font-weight: 900; font-size: 16px; letter-spacing: 1px; text-transform: uppercase;&quot;&gt;                [ CLICK TO VIEW REPLY ]            &lt;/a&gt;            &lt;div style=&quot;font-size: 10px; margin-top: 10px; opacity: 0.6;&quot;&gt;                &#123;&#123;site_url&#125;&#125; // AUTO_GENERATED_MSG            &lt;/div&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;\n./data/mail_tpl/VSCode.html&lt;div style=&quot;background-color: #1e1e1e; padding: 40px 0; font-family: Consolas, &#x27;Courier New&#x27;, monospace; color: #d4d4d4;&quot;&gt;    &lt;div style=&quot;max-width: 600px; margin: 0 auto; background-color: #252526; border-radius: 6px; overflow: hidden; box-shadow: 0 10px 20px rgba(0,0,0,0.5); border: 1px solid #3c3c3c;&quot;&gt;                &lt;div style=&quot;background-color: #2d2d2d; padding: 10px 15px; display: flex; align-items: center; border-bottom: 1px solid #1e1e1e;&quot;&gt;            &lt;div style=&quot;display: flex; gap: 6px; margin-right: 15px;&quot;&gt;                &lt;div style=&quot;width: 10px; height: 10px; border-radius: 50%; background-color: #ff5f56;&quot;&gt;&lt;/div&gt;                &lt;div style=&quot;width: 10px; height: 10px; border-radius: 50%; background-color: #ffbd2e;&quot;&gt;&lt;/div&gt;                &lt;div style=&quot;width: 10px; height: 10px; border-radius: 50%; background-color: #27c93f;&quot;&gt;&lt;/div&gt;            &lt;/div&gt;            &lt;div style=&quot;background-color: #1e1e1e; padding: 5px 15px; border-radius: 4px 4px 0 0; font-size: 12px; color: #9cdcfe;&quot;&gt;                reply_notification.js            &lt;/div&gt;        &lt;/div&gt;        &lt;div style=&quot;padding: 20px; font-size: 13px; line-height: 1.6;&quot;&gt;            &lt;table width=&quot;100%&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; border=&quot;0&quot;&gt;                &lt;tr&gt;                    &lt;td valign=&quot;top&quot; width=&quot;30&quot; style=&quot;color: #858585; text-align: right; padding-right: 15px; border-right: 1px solid #404040; user-select: none;&quot;&gt;                        1&lt;br&gt;2&lt;br&gt;3&lt;br&gt;4&lt;br&gt;5&lt;br&gt;6&lt;br&gt;7&lt;br&gt;8&lt;br&gt;9&lt;br&gt;10&lt;br&gt;11                    &lt;/td&gt;                    &lt;td valign=&quot;top&quot; style=&quot;padding-left: 15px;&quot;&gt;                        &lt;div&gt;&lt;span style=&quot;color: #c586c0;&quot;&gt;import&lt;/span&gt; &#123; Notification &#125; &lt;span style=&quot;color: #c586c0;&quot;&gt;from&lt;/span&gt; &lt;span style=&quot;color: #ce9178;&quot;&gt;&#x27;&#123;&#123;site_name&#125;&#125;&#x27;&lt;/span&gt;;&lt;/div&gt;                        &lt;br&gt;                        &lt;div&gt;&lt;span style=&quot;color: #6a9955;&quot;&gt;// @Author: You (Original Comment)&lt;/span&gt;&lt;/div&gt;                        &lt;div&gt;&lt;span style=&quot;color: #6a9955;&quot;&gt;// Content: &quot;&#123;&#123;content&#125;&#125;&quot;&lt;/span&gt;&lt;/div&gt;                        &lt;br&gt;                        &lt;div&gt;&lt;span style=&quot;color: #569cd6;&quot;&gt;const&lt;/span&gt; &lt;span style=&quot;color: #9cdcfe;&quot;&gt;reply&lt;/span&gt; = &lt;span style=&quot;color: #c586c0;&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;color: #4ec9b0;&quot;&gt;Message&lt;/span&gt;(&#123;&lt;/div&gt;                        &lt;div style=&quot;padding-left: 20px;&quot;&gt;                            &lt;span style=&quot;color: #9cdcfe;&quot;&gt;from&lt;/span&gt;: &lt;span style=&quot;color: #ce9178;&quot;&gt;&quot;&#123;&#123;reply_nick&#125;&#125;&quot;&lt;/span&gt;,                        &lt;/div&gt;                        &lt;div style=&quot;padding-left: 20px;&quot;&gt;                            &lt;span style=&quot;color: #9cdcfe;&quot;&gt;content&lt;/span&gt;: &lt;span style=&quot;color: #ce9178;&quot;&gt;`&#123;&#123;reply_content&#125;&#125;`&lt;/span&gt;,                        &lt;/div&gt;                        &lt;div style=&quot;padding-left: 20px;&quot;&gt;                            &lt;span style=&quot;color: #9cdcfe;&quot;&gt;action&lt;/span&gt;: () &lt;span style=&quot;color: #569cd6;&quot;&gt;=&gt;&lt;/span&gt; &#123;&lt;/div&gt;                        &lt;div style=&quot;padding-left: 40px;&quot;&gt;                            &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;color: #ce9178; text-decoration: underline;&quot;&gt;window.open(url);&lt;/a&gt;                        &lt;/div&gt;                        &lt;div style=&quot;padding-left: 20px;&quot;&gt;&#125;&lt;/div&gt;                        &lt;div&gt;&#125;);&lt;/div&gt;                    &lt;/td&gt;                &lt;/tr&gt;            &lt;/table&gt;        &lt;/div&gt;        &lt;div style=&quot;background-color: #1e1e1e; border-top: 1px solid #3c3c3c; padding: 10px 15px;&quot;&gt;            &lt;div style=&quot;font-size: 11px; color: #858585; margin-bottom: 8px;&quot;&gt;TERMINAL&lt;/div&gt;            &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;display: block; background-color: #0e639c; color: #fff; text-decoration: none; padding: 8px; text-align: center; font-size: 12px; font-weight: bold; font-family: sans-serif;&quot;&gt;                &gt; npm run view-reply            &lt;/a&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;\n./data/mail_tpl/Typewriter.html&lt;div style=&quot;background-color: #fdfbf7; padding: 60px 0; font-family: Georgia, &#x27;Times New Roman&#x27;, serif; color: #4a4a4a;&quot;&gt;    &lt;div style=&quot;max-width: 560px; margin: 0 auto; border: 1px solid #e0dcd3; background-color: #ffffff; padding: 60px 50px;&quot;&gt;                &lt;div style=&quot;text-align: center; border-bottom: 2px solid #4a4a4a; padding-bottom: 20px; margin-bottom: 40px;&quot;&gt;            &lt;span style=&quot;font-size: 24px; letter-spacing: 2px; text-transform: uppercase; font-weight: bold;&quot;&gt;&#123;&#123;site_name&#125;&#125;&lt;/span&gt;        &lt;/div&gt;        &lt;div style=&quot;font-size: 16px; line-height: 1.8;&quot;&gt;            &lt;p&gt;Dear &lt;strong&gt;&#123;&#123;nick&#125;&#125;&lt;/strong&gt;,&lt;/p&gt;                        &lt;p&gt;You have received a new correspondence regarding your note on &quot;&lt;a href=&quot;&#123;&#123;page_url&#125;&#125;&quot; style=&quot;color: #4a4a4a; text-decoration: underline;&quot;&gt;&#123;&#123;page_title&#125;&#125;&lt;/a&gt;&quot;.&lt;/p&gt;                        &lt;div style=&quot;margin: 40px 0; text-align: center;&quot;&gt;                &lt;span style=&quot;font-style: italic; font-size: 18px; color: #000;&quot;&gt;                    “ &#123;&#123;reply_content&#125;&#125; ”                &lt;/span&gt;                &lt;div style=&quot;margin-top: 15px; font-size: 14px; color: #888;&quot;&gt;                    — Signed by &#123;&#123;reply_nick&#125;&#125;                &lt;/div&gt;            &lt;/div&gt;            &lt;p style=&quot;font-size: 14px; color: #888;&quot;&gt;                Reference to your original thought:&lt;br&gt;                &lt;span style=&quot;font-style: italic;&quot;&gt;&quot;&#123;&#123;content&#125;&#125;&quot;&lt;/span&gt;            &lt;/p&gt;        &lt;/div&gt;        &lt;div style=&quot;text-align: center; margin-top: 50px;&quot;&gt;            &lt;a href=&quot;&#123;&#123;link_to_reply&#125;&#125;&quot; style=&quot;display: inline-block; padding: 10px 30px; border: 1px solid #4a4a4a; color: #4a4a4a; text-decoration: none; text-transform: uppercase; font-size: 12px; letter-spacing: 1px; hover: background-color: #4a4a4a; hover: color: #fff;&quot;&gt;                Read Full Discussion            &lt;/a&gt;        &lt;/div&gt;        &lt;div style=&quot;margin-top: 60px; text-align: center; font-size: 11px; color: #b0b0b0;&quot;&gt;            &lt;p&gt;&amp;copy; &#123;&#123;site_name&#125;&#125;. All rights reserved.&lt;/p&gt;        &lt;/div&gt;    &lt;/div&gt;&lt;/div&gt;\n5. 邮件通知Artalk 支持通过 SMTP 协议、阿里云邮件推送、调用系统 Sendmail 命令等方式向用户发送邮件通知。\n在 Artalk 后台，设置 -&gt; 邮件通知，勾选 启用邮件通知。\n\n发送方式：smtp\n发送人昵称：&#123;&#123;reply_nick&#125;&#125;\n发送人地址：noreply@example.com\n邮件标题：[&#123;&#123;site_name&#125;&#125;] 您收到了来自 @&#123;&#123;reply_nick&#125;&#125; 的回复\n邮件模板文件：/data/mail_tpl/Neo-Brutalism.html\n\n在 SMTP 发送，配置用于发送邮件的账号授权信息：\n\n对于 QQ 邮箱\n发件地址：smtp.qq.com\n发件端口：587\n用户名： your_email@qq.com\n密码：（注意：是额外生成的授权码，不是邮箱的登录密码） your_email_authcode\n\n\n对于 Microsoft 邮箱\n发件地址：smtp.office365.com\n发件端口：587\n用户名： your_email@xxx.onmicrosoft.com\n密码：（注意：登录密码） your_email_password\n\n\n\n6. 社交登录在 Artalk 后台，设置 -&gt; 社交登录，勾选 启用社交登录，允许匿名评论。\n","categories":["创意工坊","服务搭建"],"tags":["Hexo","Artalk","Docker","Nginx","UpGit"]},{"title":"LunaTV 部署指南：基于 Docker 搭建高颜值的个人影视聚合平台","url":"/posts/fd912215.html","content":"LunaTV 是一个高颜值的个人媒体库聚合项目，支持 IPTV 直播源管理、影视点播等功能。相比于传统的播放器，它提供了一个优雅的 Web 界面，并且可以通过后端服务统一管理配置。\n本文将指导你利用 Docker 快速部署 LunaTV，并结合 Nginx 和 Cloudflare Workers 实现外网访问与跨域流媒体代理。\n第一步：环境准备与 Docker 部署我们将使用 Docker Compose 来编排服务，包括 LunaTV 核心服务 (moontv-core) 和持久化存储 (kvrocks)。\n\n创建目录\n在服务器上创建存放配置文件的目录。\nmkdir -p /app/moontvcd /app/moontv\n\n编写配置文件\n创建 docker-compose.yml 文件。\nvi docker-compose.yml\n填入以下内容：\nservices:  moontv-core:    image: ghcr.io/moontechlab/lunatv:latest    container_name: moontv-core    restart: on-failure    ports:      - &#x27;20004:3000&#x27;    environment:      # 必填：管理员账号      - USERNAME=admin@example.com      - PASSWORD=your_password      # 必填：存储配置 (使用 kvrocks)      - NEXT_PUBLIC_STORAGE_TYPE=kvrocks      - KVROCKS_URL=redis://moontv-kvrocks:6666      # 可选：站点配置      - SITE_BASE=https://moontv.131495.xyz      - NEXT_PUBLIC_SITE_NAME=Luna Home      - ANNOUNCEMENT=👋 欢迎回家！这里是 Luna Home 个人媒体库，祝您今晚观影愉快！🍿      # 可选：豆瓣代理配置（推荐）      - NEXT_PUBLIC_DOUBAN_PROXY_TYPE=cmliussss-cdn-tencent      - NEXT_PUBLIC_DOUBAN_IMAGE_PROXY_TYPE=cmliussss-cdn-tencent    networks:      - moontv-network    depends_on:      - moontv-kvrocks    moontv-kvrocks:    image: apache/kvrocks    container_name: moontv-kvrocks    restart: unless-stopped    volumes:      - kvrocks-data:/var/lib/kvrocks    networks:      - moontv-networknetworks:  moontv-network:    driver: bridgevolumes:  kvrocks-data:\n\n启动服务\ndocker compose up -d\n\n\n核心变量说明：\n\n\n\n\n变量名\n示例值\n说明\n\n\n\n\nUSERNAME\nadmin@example.com\n管理后台登录账号\n\n\nPASSWORD\nyour_password\n登录密码，建议修改\n\n\nSITE_BASE\nhttps://moontv.131495.xyz\n你的外部访问域名\n\n\nKVROCKS_URL\nredis://moontv-kvrocks:6666\n数据库连接串 (无需修改)\n\n\n\n\n\n第二步：配置 Nginx 反向代理为了通过 HTTPS 安全访问，我们需要配置 Nginx 反代。\n\n添加 DNS 解析：将你的域名（如 moontv.131495.xyz）解析到服务器 IP。\n\n创建 Nginx 配置：\nvi /etc/nginx/sites-available/moontv.131495.xyz\n写入以下配置（请替换为你自己的域名和日志路径）：\nserver &#123;    listen 80;    listen [::]:80;    server_name moontv.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;    server_name moontv.131495.xyz;        # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;    # 独立的日志配置    access_log /var/log/nginx/moontv.access.log;    error_log /var/log/nginx/moontv.error.log;    # 反向代理设置    location / &#123;        proxy_pass http://127.0.0.1:20004;                # 代理参数        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n\n启用并重载：\nln -s /etc/nginx/sites-available/moontv.131495.xyz /etc/nginx/sites-enabled/nginx -t &amp;&amp; nginx -s reload\n\n\n此时，访问 https://moontv.131495.xyz 并输入第一步中设置的账号密码，即可进入管理面板。\n\n第三步：配置视频订阅源进入后台后，我们需要导入视频源。这里推荐使用开源项目 hafrey1/LunaTV-config 提供的配置。\n你有两种方式导入：\n\n静态导入：直接复制项目中的 jin18.txt 或 jingjian.txt 内容，粘贴到后台的配置文本框中。\n订阅链接 (推荐)：使用 Raw 文件地址作为订阅 URL，支持一键更新。\n\n\n第四步：进阶 - Cloudflare Workers 跨域代理为了解决部分视频源的 CORS 跨域问题，以及防止直接请求源站导致的限制，强烈建议自行部署 Cloudflare Workers 代理。\n\n创建 Worker：登录 Cloudflare，创建一个新的 Worker。\n\n复制代码：复制 Github 项目中 _worker.js 的全部代码。\n\n关键修改 (重要)：原代码中的中转代理地址可能不完整，务必手动修改 JS 代码 中的 HTML 生成部分。找到生成页面 HTML 的代码段，确保代理的订阅地址加上 &amp;prefix=$&#123;currentOrigin&#125;?url=。\n修改后 (参考)：\n&lt;div class=&quot;section&quot;&gt;    &lt;h3&gt;📦 精简版（jin18）&lt;/h3&gt;    &lt;p&gt;中转代理 JSON：&lt;br&gt;&lt;code class=&quot;copyable&quot;&gt;$&#123;currentOrigin&#125;?format=1&amp;source=jin18&amp;prefix=$&#123;currentOrigin&#125;?url=&lt;/code&gt; &lt;button class=&quot;copy-btn&quot;&gt;复制&lt;/button&gt;&lt;/p&gt;    &lt;p&gt;中转 Base58：&lt;br&gt;&lt;code class=&quot;copyable&quot;&gt;$&#123;currentOrigin&#125;?format=3&amp;source=jin18&amp;prefix=$&#123;currentOrigin&#125;?url=&lt;/code&gt; &lt;button class=&quot;copy-btn&quot;&gt;复制&lt;/button&gt;&lt;/p&gt;&lt;/div&gt;\n\n获取订阅地址：部署完成后，访问你的 Worker 域名（如 https://luna-proxy.yourname.workers.dev）。页面会显示处理好的订阅链接，直接复制 中转 Base58 链接填入 LunaTV 后台即可。\n\n\n使用提示：Cloudflare Workers 免费版每日请求限制为 10万次。此外，请勿滥用代理下载大文件，以免导致账号封禁风险。\n","categories":["创意工坊","服务搭建"],"tags":["Docker","LunaTV","Cloudflare"]},{"title":"3X-UI 面板搭建指南：可视化管理 VLESS / Reality / Trojan 节点","url":"/posts/e8898327.html","content":"3X-UI 是 X-UI 的一个优秀分支，支持 Xray 内核的绝大多数新特性（如 Reality、Vision 流控等），并提供了美观的数据统计面板。\n本文将带你搭建一套既方便管理，又具备极高隐蔽性的代理系统。\n一、一键安装面板使用官方提供的一键脚本进行安装：\napt update -y &amp;&amp; apt install git -ybash &lt; (curl -Ls https://raw.githubusercontent.com/mhsanaei/3x-ui/master/install.sh))\n安装完成后，终端会输出初始的登录信息：\n\nUsername: UtgyyYgtJw  (随机生成)Password: JgaAcZYsVQ  (随机生成)Port:     18857       (随机生成)Access URL: http://你的IP:18857/随机路径\n\n推荐的初始化设置在终端输入 x-ui 进入管理菜单：\n\n输入 23：安装 BBR 拥塞控制算法（推荐 BBR+FQ），显著提升速度。\n输入 6：修改管理员账号和密码（建议改个好记的，但不要太简单）。\n\n\n二、面板安全配置 (Nginx 反代)为了安全，我们不应直接将面板端口暴露在公网，而是将其隐藏在 Nginx 的 443 端口下，通过特定路径访问。\n1. 修改面板监听配置登录面板（使用安装时提供的 IP:端口），进入 面板设置 -> 常规配置：\n\n面板监听 IP：改为 127.0.0.1 (只允许本机访问)\n面板 URL 根路径：改为 /xui/ (或者你喜欢的其他路径，注意前后都要有斜杠)\n保存并重启面板。\n\n注意：重启后，你将无法直接通过 IP:端口 访问面板，必须进行下一步 Nginx 配置。\n2. 配置 Nginx 反向代理编辑 Nginx 配置文件：vi /etc/nginx/sites-available/gfw.131495.xyz\n我们将面板管理和节点代理都整合在这个配置中：\nserver &#123;    listen 80;    listen [::]:80;    server_name gfw.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;        server_name gfw.131495.xyz;    # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;    # 日志    access_log /var/log/nginx/gfw.access.log;    error_log /var/log/nginx/gfw.error.log;    # 1. 默认伪装 (Bing 镜像)    location / &#123;        proxy_pass https://www.bing.com;        proxy_ssl_server_name on;        proxy_set_header Host www.bing.com;    &#125;        # 2. 面板管理入口 (访问 https://域名/xui/ 进入面板)    location /xui/ &#123;        # 注意：端口要和面板设置的一致        proxy_pass http://127.0.0.1:18857/xui/;                 proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;    # 3. 节点流量转发 (VLESS+WS)    location /ray &#123;        proxy_pass http://127.0.0.1:21001;                # WebSocket 关键头        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;                proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n重载 Nginx：nginx -t &amp;&amp; systemctl reload nginx现在，访问 https://gfw.131495.xyz/xui/ 即可安全管理面板。\n\n三、创建节点：CDN 隐匿模式 (VLess+WS+TLS)这种模式适合需要隐藏 IP 或搭配 Cloudflare CDN 使用的场景。\n1. 面板端设置在 入站列表 点击 添加入站：\n\n备注：VLess-WS-TLS\n协议：vless\n监听 IP：127.0.0.1 (仅允许 Nginx 转发)\n端口：21001 (需与 Nginx 配置一致)\n传输配置：\n传输协议：ws\n路径：/ray (需与 Nginx 配置一致)\nHost：留空或填写域名\n\n\nTLS：关闭 (TLS 由 Nginx 处理)\n\n2. 客户端配置注意由于经过了 Nginx 转发，客户端无法自动识别这种复杂的拓扑，通常需要手动修改导入后的配置：\n\n地址：你的域名\n端口：443\n传输层安全 (TLS)：开启\n\n\n四、创建节点：直连性能模式 (VLess+Reality)这种模式不需要域名证书，不需要 Nginx，速度最快，是目前对抗 GFW 的主流方案。\n1. 面板端设置在 入站列表 点击 添加入站：\n\n备注：VLess-Reality\n协议：vless\n监听 IP：0.0.0.0 (必须暴露给公网)\n端口：20443 (或者其他未被占用的端口，注意 Nginx 已经占用了 443)\n用户设置：\nFlow：xtls-rprx-vision (关键！启用流控)\n\n\n传输配置：\n传输协议：tcp\n\n\nReality 设置：\nReality：开启\nuTLS：chrome\nDest (目标)：tesla.com:443\nSNI：tesla.com (需与 Dest 对应)\n点击 Get New Cert 生成密钥对。\n\n\n\n2. 连接测试\n在云服务器防火墙放行端口（如 20443）。\n如果本地 Ping 不通域名，客户端地址栏可直接填写 服务器 IP。\nSNI 必须填写正确，这是 Reality 伪装的关键。\n\n\n五、总结总结：\n\n日常浏览/备用：使用 VLESS+WS+TLS (走 Nginx)，隐蔽性好，可套 CDN。\n看视频/大流量：使用 VLESS+Reality (走独立端口)，速度最快，延迟最低。\n\n\n","categories":["创意工坊","网络代理"],"tags":["Nginx","3X-UI","Xray"]},{"title":"MIND 部署指南：基于 Docker 搭建待办事项通知管理","url":"/posts/ff7a46e6.html","content":"Mind 是一个轻量级、自托管的消息发送与通知管理服务。\n它集成了强大的 Apprise 库，支持通过单一的 API 接口，将消息推送到 Telegram、Discord、Slack、Email 等数十种渠道。对于拥有 NAS 或云服务器的玩家来说，它是统一管理脚本通知、系统报警的绝佳工具。\n本文将指导你完成 MIND 的搭建、反向代理配置及主流通知渠道的接入。\n第一步：基于 Docker 部署我们将使用 Docker Compose 快速拉起服务。\n\n创建目录：\n mkdir -p /app/mindcd /app/mind\n\n编写配置文件：\n创建 docker-compose.yml 文件。\n vi docker-compose.yml\n 填入以下内容：\n services:  mind:    container_name: mind    image: mrcas/mind:latest    restart: always    volumes:      - ./mind-db:/app/db    environment:      - TZ=Europe/Amsterdam    ports:      - 20005:8080\n\n启动服务：\n docker compose up -d\n\n\n\n第二步：配置 Nginx 反向代理为了通过 HTTPS 安全访问，我们需要配置 Nginx 反代。\n\n添加 DNS 解析：\n将域名（如 mind.131495.xyz）解析到服务器 IP。\n\n创建 Nginx 配置：\n vi /etc/nginx/sites-available/mind.131495.xyz\n 注意：以下配置包含自动 HTTPS 跳转及完整的 SSL 路径设置。\n server &#123;    listen 80;    listen [::]:80;    server_name mind.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;    # TODO: 修改为对应的子域名    server_name mind.131495.xyz;    # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;    # TODO: 独立的日志配置    access_log /var/log/nginx/mind.access.log proxy_json;    error_log /var/log/nginx/mind.error.log;    # 反向代理设置    location / &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:20005;        # 代理参数        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n\n启用并重载：\n ln -s /etc/nginx/sites-available/mind.131495.xyz /etc/nginx/sites-enabled/nginx -t &amp;&amp; nginx -s reload\n\n\n\n第三步：系统初始化与安全设置访问 https://mind.131495.xyz 进入管理面板。\n\n初始登录：\n使用默认账号 admin，密码 admin 登录。\n\n安全加固 (关键)：\n\n进入 Authentication 菜单，关闭 Allow New Accounts 选项，禁止外部注册。\n进入 User Management，编辑 admin 用户，输入新密码并回车确认修改。\n\n\n创建日常账号：\n为了安全起见，建议创建一个普通权限的用户（User Role），后续均使用该账号进行操作。\n\n界面汉化：\n登录普通账号，点击左侧导航栏底部的 Settings (设置) 图标，将 Locale 修改为 zh-CN。\n\n\n\n第四步：配置通知渠道 (Apprise)MIND 的核心在于其强大的通知转发能力。点击左侧 Notification Services 图标即可添加。\n1. Telegram 通知最常用的即时通知方式。\n\n获取 Token：在 Telegram 搜索 @BotFather，发送 /newbot 创建机器人，获取 API Token。\n获取 User ID：搜索 @userinfobot，获取你个人的 Chat ID。\nMIND 配置：\nService Title: My Telegram\nBot Token: 填入 API Token\nTarget: 填入 Chat ID\n\n\n\n2. QQ 邮箱通知使用 QQ 邮箱的 SMTP 服务发送通知。\n\n准备工作\n登录 QQ 邮箱网页版 -&gt; 设置 -&gt; 账号，开启 SMTP 服务并生成 授权码。\n可参考 QQ 邮箱 SMTP/IMAP 服务\n\n\nMIND 配置：\nSchema: mailtos\nDomain: qq.com\nUsername: 填写 QQ 号（注意：不要带 @qq.com 后缀）\nPassword: 填写刚才生成的 授权码（非 QQ 登录密码）\nPort：587\nTarget Email: 填写完整的收件地址（如 123456@qq.com）\n\n\n\n3. Microsoft 365 (Office 365) 通知利用企业级 E3 订阅的高权重发信。\n详细的前置配置请参考我的另一篇文章：👉 Microsoft 365 E3 进阶指南：绑定自定义域名并配置企业级 SMTP 发信\n我们需要用到 Microsoft Graph API 的参数：\n\nMIND 配置：\nTenant Domain: 填入 Directory (tenant) ID\nAccount Email: 填入拥有发送权限的完整邮箱地址（如 noreply@gabriel.edu.kg）\nClient ID: 填入 Application (client) ID\nClient Secret: 填注册生成的 Secret Value\nTarget Email: 填写完整的收件地址（如 123456@qq.com）\n\n\n\n4. 个人微信通知 (推荐)国内使用最广泛的微信。\n这需要利用企业微信的接口，我已经单独写了一篇详细的搭建教程。👉 请先完成此服务的搭建： 个人微信接收通知：基于 Docker 搭建企业微信推送服务\n搭建完成后，在 MIND 的通知设置中选择 Custom URL，填入以下 URL 即可：\n\nService Name: WeChat Work\nApprise URL: jsons://api.131495.xyz:443/wecome?:key=你的key&amp;:kind=app&amp;:from=MIND\n\n","categories":["创意工坊","服务搭建"],"tags":["Docker","MIND","Apprise","消息推送"]},{"title":"Shadowsocks-libev 部署全指南：从裸奔到 Nginx + TLS + WebSocket 完美伪装","url":"/posts/ba9f85ec.html","content":"Shadowsocks (SS) 是一种基于轻量级对称加密的代理协议。\n\n优点：资源占用极低，配置简单，适合低性能机器。\n缺点：在没有任何伪装的情况下，其流量特征非常明显，极易被防火墙（GFW）识别并阻断。\n\n本文将由浅入深，介绍如何部署 SS，并一步步为其穿上“隐身衣”。\n第一阶段：基础部署 (裸奔模式)此模式仅具备加密传输功能，无伪装，容易被墙，仅建议用于中转或内网环境。\n1. 安装服务Ubuntu 官方仓库已收录 libev 版本，直接安装即可：\napt updateapt install shadowsocks-libev\n2. 生成高强度密钥SS 的新加密算法（如 chacha20-ietf-poly1305）需要 base64 编码的 32 字节密钥。直接使用字符串密码会报错。\n执行以下命令生成密钥，并复制输出结果：\nopenssl rand -base64 32 | tr &#x27;+/&#x27; &#x27;-_&#x27; | tr -d &#x27;=&#x27;\n3. 修改配置编辑配置文件：vi /etc/shadowsocks-libev/config.json\n&#123;    &quot;server&quot;: &quot;0.0.0.0&quot;,    &quot;mode&quot;: &quot;tcp_and_udp&quot;,    &quot;server_port&quot;: 8388,    &quot;local_port&quot;: 1080,    &quot;password&quot;: &quot;此处填写上面生成的Base64密钥&quot;,    &quot;timeout&quot;: 86400,    &quot;method&quot;: &quot;chacha20-ietf-poly1305&quot;&#125;\n4. 启动服务systemctl restart shadowsocks-libev\n\n第二阶段：流量伪装 (v2ray-plugin)为了对抗流量识别，我们需要引入插件，将 SS 流量伪装成普通的 HTTP 或 HTTPS 流量。这里使用官方推荐的 v2ray-plugin。\n1. 安装插件apt install shadowsocks-v2ray-plugin\n注：安装后插件二进制文件通常位于 /usr/bin/ss-v2ray-plugin。\n2. Windows 客户端准备 (关键)在电脑端使用插件模式，需要手动下载插件程序。\n\n下载 v2ray-plugin-windows-amd64。\n解压并将文件名修改为 v2ray-plugin.exe。\n将该文件放入 Shadowsocks 客户端（Shadowsocks.exe）的同级目录下。\n\n模式 A：HTTP 伪装 (简单)仅进行 HTTP 混淆，没有 TLS 加密，依然可能被探测。\n服务端配置：\n/etc/shadowsocks-libev/config.json&#123;    &quot;server&quot;: &quot;0.0.0.0&quot;,    &quot;server_port&quot;: 8388,    &quot;password&quot;: &quot;你的密钥&quot;,    &quot;method&quot;: &quot;chacha20-ietf-poly1305&quot;,    &quot;plugin&quot;: &quot;ss-v2ray-plugin&quot;,    &quot;plugin_opts&quot;: &quot;server&quot;&#125;\n客户端配置：\n\n插件程序：v2ray-plugin.exe\n插件选项：留空\n\n模式 B：HTTPS/TLS 伪装 (直连)由 SS 服务直接加载证书，处理 TLS。\n\n域名和证书的获取，可参考我的文章 从零开始：域名购买、Cloudflare 托管与 Nginx 自动化 HTTPS 配置全指南\n\n服务端配置：\n/etc/shadowsocks-libev/config.json&#123;    &quot;server&quot;: &quot;0.0.0.0&quot;,    &quot;server_port&quot;: 8388,    &quot;password&quot;: &quot;你的密钥&quot;,    &quot;method&quot;: &quot;chacha20-ietf-poly1305&quot;,    &quot;plugin&quot;: &quot;ss-v2ray-plugin&quot;,    &quot;plugin_opts&quot;: &quot;server;tls;host=gfw.131495.xyz;cert=/cert/acme_131495.xyz/cert.pem;key=/cert/acme_131495.xyz/key.pem&quot;&#125;\n权限陷阱：SS 默认以 shadowsocks 用户运行，而证书文件（尤其是 acme.sh 生成的 key）通常只有 root 或特定组有权限读取，导致启动失败 permission denied。\n解决方案：修改服务以 root 身份运行。\nsystemctl edit shadowsocks-libev\n在编辑器中填入：\n[Service]DynamicUser=falseUser=rootGroup=root\n保存后重启服务。(Ctrl + o 保存，Enter 确认保存，Ctrl + x 退出)\n\n\n第三阶段：终极方案 (Nginx 反代 + WebSocket + TLS)这是目前最稳健的方案。\n\n隐蔽性高：SS 躲在 Nginx 后面，对外只暴露 443 端口，看起来就像一个正常的网站。\nCDN 兼容：支持套 Cloudflare CDN。\n安全性好：SS 监听本地回环地址，不直接暴露在公网。\n\n1. 修改 SS 配置注意：将 server 改为 127.0.0.1，仅允许本机访问。\nvi /etc/shadowsocks-libev/config.json\n/etc/shadowsocks-libev/config.json&#123;    &quot;server&quot;: &quot;127.0.0.1&quot;,    &quot;mode&quot;: &quot;tcp_and_udp&quot;,    &quot;server_port&quot;: 8388,    &quot;password&quot;: &quot;你的密钥&quot;,    &quot;method&quot;: &quot;chacha20-ietf-poly1305&quot;,    &quot;plugin&quot;: &quot;ss-v2ray-plugin&quot;,    &quot;plugin_opts&quot;: &quot;server;host=gfw.131495.xyz;path=/ray&quot;&#125;\n配置解释：SS 监听本机的 8388 端口，等待 Nginx 转发过来的 /ray 路径的流量。\n重启 SS 服务：(记得先还原之前的 systemctl edit 修改，推荐用普通用户运行)\nsystemctl revert shadowsocks-libevsystemctl restart shadowsocks-libev\n2. 配置 Nginx 反向代理创建 Nginx 配置文件：vi /etc/nginx/sites-available/gfw.131495.xyz\nserver &#123;    listen 80;    listen [::]:80;    server_name gfw.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;        # TODO: 修改为对应的子域名    server_name gfw.131495.xyz;    # TODO: 独立的日志配置    access_log /var/log/nginx/gfw.access.log proxy_json;    error_log /var/log/nginx/gfw.error.log;        # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;        # 默认代理（防止探测）    location / &#123;        proxy_pass https://www.bing.com;        proxy_ssl_server_name on;        proxy_set_header Host www.bing.com;        proxy_ssl_protocols TLSv1.2 TLSv1.3;    &#125;    # 反向代理设置    location /ray &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:8388;                # Websocket 代理参数        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;                proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n3. 生效与验证ln -s /etc/nginx/sites-available/gfw.131495.xyz /etc/nginx/sites-enabled/nginx -tsystemctl reload nginx\n4. 客户端配置 (终极版)在 Windows/Android/iOS 客户端中：\n\n服务器地址：gfw.131495.xyz (你的域名)\n端口：443 (Nginx 的端口)\n密码：你的密钥\n加密：chacha20-ietf-poly1305\n插件程序：v2ray-plugin\n插件选项：tls;host=gfw.131495.xyz;path=/ray\n\n\n现在，你的流量看起来就像是在访问一个普通的 HTTPS 网站，极为隐蔽。\n","categories":["创意工坊","网络代理"],"tags":["Nginx","Shadowsocks","V2Ray-Plugin","科学上网"]},{"title":"Trojan-Go 轻量部署指南：高效隐匿的 TLS 代理服务","url":"/posts/1e76d4d4.html","content":"Trojan-Go 是 Trojan 协议的一个 Go 语言实现版本，性能强劲且支持多路复用。它的核心逻辑是：看起来就像一个正常的 HTTPS 网站。\n\n如果是正常的 HTTPS 请求（无密码），它会转发到伪装网站（如 Bing）。\n如果是合法的 Trojan 请求（有密码），它会进行代理转发。\n\n\n一、下载与安装1. 确认 CPU 架构在下载前，请先确认服务器的架构，否则会报错 Exec format error。\nuname -m\n\n如果输出 x86_64：请下载 linux-amd64.zip\n如果输出 aarch64：请下载 linux-armv8.zip (Oracle ARM 机器选这个)\n\n2. 下载二进制文件以下以 ARM 架构 为例（GitHub 最新版）：\n# 创建目录mkdir -p /app/trojan-gocd /app/trojan-go/# 下载 (请根据上一步结果替换链接中的 linux-armv8 或 linux-amd64)wget https://github.com/p4gefau1t/trojan-go/releases/download/v0.10.6/trojan-go-linux-armv8.zip# 解压apt install unzip -yunzip trojan-go-linux-armv8.zip# 清理压缩包rm -f trojan-go-linux-armv8.zip\n\n二、配置服务1. 生成强密码Trojan 协议依赖密码进行认证，建议生成一个复杂的 Base64 字符串。\nopenssl rand -base64 32 | tr &#x27;+/&#x27; &#x27;-_&#x27; | tr -d &#x27;=&#x27;\n复制输出的字符串备用。\n2. 编写配置文件\n域名和证书的获取，可参考我的文章 从零开始：域名购买、Cloudflare 托管与 Nginx 自动化 HTTPS 配置全指南\n\n创建或编辑配置文件：vi /app/trojan-go/config.json\nconfig.json&#123;    &quot;run_type&quot;: &quot;server&quot;,    &quot;local_addr&quot;: &quot;0.0.0.0&quot;,    &quot;local_port&quot;: 2443,    &quot;remote_addr&quot;: &quot;127.0.0.1&quot;,    &quot;remote_port&quot;: 80,    &quot;password&quot;: [        &quot;此处填入上面生成的密码&quot;    ],    &quot;ssl&quot;: &#123;        &quot;cert&quot;: &quot;/cert/acme_131495.xyz/cert.pem&quot;,        &quot;key&quot;: &quot;/cert/acme_131495.xyz/key.pem&quot;,        &quot;sni&quot;: &quot;gfw.131495.xyz&quot;,        &quot;fallback_port&quot;: 443    &#125;&#125;\n配置详解：\n\nlocal_port: 2443。Trojan-Go 监听的端口，客户端连接这个端口。\nremote_addr: 回落地址。当有人探测你的端口或直接浏览器访问时，Trojan 会将流量转发到此，伪装成你在反向代理。\nssl: 必须指定有效的证书路径。\nsni: 你的域名。\n\n\n三、Systemd 服务化管理手动运行 ./trojan-go 会占用终端，且无法开机自启。我们需要将其注册为系统服务。\n1. 创建 Service 文件新建文件：vi /etc/systemd/system/trojan-go.service\n[Unit]Description=Trojan-Go - An unidentifiable mechanism that helps you bypass GFWDocumentation=https://p4gefau1t.github.io/trojan-goAfter=network.target nss-lookup.target[Service]User=root# 启动命令ExecStart=/app/trojan-go/trojan-go -config /app/trojan-go/config.jsonRestart=on-failureRestartSec=10sLimitNOFILE=infinity[Install]WantedBy=multi-user.target\n2. 启动并设置开机自启# 重载系统服务配置systemctl daemon-reload# 启动服务systemctl start trojan-go# 设置开机自启systemctl enable trojan-go# 查看运行状态systemctl status trojan-go\n如果状态显示 Active: active (running)，说明启动成功。\n\n四、客户端连接配置客户端（v2rayN, Clash 等）时，填入以下信息：\n\n类型 (Type): Trojan\n地址 (Address): gfw.131495.xyz (你的域名)\n端口 (Port): 2443 (配置中的 local_port)\n密码 (Password): 你生成的密码\n传输层协议: tcp\n传输层安全: tls\n\n防火墙提醒：别忘了在云服务器的安全组或 UFW 中放行 2443 端口！ufw allow 2443/tcp\n","categories":["创意工坊","网络代理"],"tags":["Trojan-Go","SSL/TLS"]},{"title":"V2Ray 部署实战：从 VMess 裸奔到 Nginx+WebSocket+TLS 完美伪装","url":"/posts/630f476f.html","content":"VMess 是 V2Ray 原创的加密传输协议。虽然现在有了更先进的 VLESS，但 VMess 凭借其成熟的生态，依然是目前最广泛使用的协议之一。\n本文将带你一步步搭建最稳健的 VMess + WebSocket + TLS + Nginx 架构。\n一键安装 (V2Fly 官方脚本)使用官方提供的 FHS 规范脚本进行安装，文件路径标准，便于管理。\n# 1. 安装/更新 V2Raybash &lt;(curl -L https://raw.githubusercontent.com/v2fly/fhs-install-v2ray/master/install-release.sh)# 2. 设置开机自启，并启动服务systemctl enable v2raysystemctl start v2ray# 3. 生成一个用户 UUID (复制备用)uuidgen\n常用命令备忘：\n\n仅更新 .dat 路由库：bash &lt;(curl -L .../install-dat-release.sh)\n卸载：bash &lt;(curl -L .../install-release.sh) --remove\n\n\n第一阶段：基础部署 (TCP直连)此模式仅用于测试连通性，极易被墙，严禁长期使用。\n1. 修改 V2Ray 配置编辑配置文件：vi /usr/local/etc/v2ray/config.json\nconfig.json&#123;  &quot;inbounds&quot;: [    &#123;      &quot;port&quot;: 2443,      &quot;protocol&quot;: &quot;vmess&quot;,      &quot;settings&quot;: &#123;        &quot;clients&quot;: [          &#123; &quot;id&quot;: &quot;你的UUID&quot;, &quot;alterId&quot;: 0 &#125;        ]      &#125;    &#125;  ],  &quot;outbounds&quot;: [ &#123; &quot;protocol&quot;: &quot;freedom&quot;, &quot;settings&quot;: &#123;&#125; &#125; ]&#125;\n关于 alterId：新版 V2Ray 默认启用了 AEAD aead 验证机制，alterId 只需设置为 0 即可。这大大降低了服务器负载并提高了安全性。\n\n启动服务：systemctl restart v2ray\n2. 客户端配置在 v2rayN / Shadowrocket / Clash 等客户端中填入以下信息：\n\n地址 (Address): 你的域名或者 IP 地址\n端口 (Port): port\n用户 ID (UUID): 你的UUID\n额外 ID (AlterId): 0\n加密方式 (Security): auto\n传输协议 (Network): tcp\n\n\n第二阶段：进阶伪装 (VMess + WS + TLS)为了抵抗流量识别，我们引入 WebSocket (WS) 来模拟网页浏览流量，并套上 TLS 加密。\n1. 准备证书请确保你已经申请了证书（参考 从零开始：域名购买、Cloudflare 托管与 Nginx 自动化 HTTPS 配置全指南）。假设证书路径为：/cert/acme_131495.xyz/cert.pem 和 /cert/acme_131495.xyz/key.pem。\n2. 修改 V2Ray 配置修改 config.json，在 inbounds 中增加 streamSettings：\n&#123;  &quot;inbounds&quot;: [    &#123;      &quot;port&quot;: 2443,      &quot;protocol&quot;: &quot;vmess&quot;,      &quot;settings&quot;: &#123;        &quot;clients&quot;: [          &#123; &quot;id&quot;: &quot;你的UUID&quot;, &quot;alterId&quot;: 0 &#125;        ]      &#125;,      &quot;streamSettings&quot;: &#123;        &quot;network&quot;: &quot;ws&quot;,        &quot;security&quot;: &quot;tls&quot;,        &quot;tlsSettings&quot;: &#123;          &quot;certificates&quot;: [            &#123;              &quot;certificateFile&quot;: &quot;/cert/acme_131495.xyz/cert.pem&quot;,              &quot;keyFile&quot;: &quot;/cert/acme_131495.xyz/key.pem&quot;            &#125;          ]        &#125;      &#125;    &#125;  ],  &quot;outbounds&quot;: [ &#123; &quot;protocol&quot;: &quot;freedom&quot;, &quot;settings&quot;: &#123;&#125; &#125; ]&#125;\n权限陷阱 (Permission Denied)：默认情况下，V2Ray 以 nobody 用户运行，无法读取 /root/ 或 /cert/ 目录下的证书文件。\n解决方案：修改服务运行用户为 root。执行 systemctl edit v2ray，填入以下内容：\n[Service]User=rootGroup=root\nCtrl + O，Enter，Ctrl + X 保存退出后，执行 systemctl restart v2ray。\n\n3. 客户端配置在 v2rayN / Shadowrocket / Clash 等客户端中填入以下信息：\n\n地址 (Address): 你的域名或者 IP 地址\n端口 (Port): port\n用户 ID (UUID): 你的UUID\n额外 ID (AlterId): 0\n加密方式 (Security): zero（注意：启用了 tls 加密，无需再加密）\n传输协议 (Network): ws（注意，改为了 ws）\n传输层安全 (TLS): tls (开启)\nSNI: 如果 地址 填写的是域名，则此处不用填写\n\n\n第三阶段：终极方案 (Nginx 反代)这是生产环境的最佳实践。\n\n分流：Nginx 处理 443 端口流量，正常的访问返回伪装网页，/vmess 路径的流量转发给 V2Ray。\n解耦：TLS 加密解密交给专业的 Nginx，V2Ray 只负责处理明文 WS 流量。\n\n1. 修改 V2Ray 配置注意：\n\n去掉 TLS 配置（交给 Nginx 了）。\n监听 127.0.0.1（不暴露在公网，更安全）。\n增加 path 路径验证。\n\n&#123;  &quot;inbounds&quot;: [    &#123;      &quot;listen&quot;: &quot;127.0.0.1&quot;,       &quot;port&quot;: 2443,      &quot;protocol&quot;: &quot;vmess&quot;,      &quot;settings&quot;: &#123;        &quot;clients&quot;: [          &#123; &quot;id&quot;: &quot;你的UUID&quot;, &quot;alterId&quot;: 0 &#125;        ]      &#125;,      &quot;streamSettings&quot;: &#123;        &quot;network&quot;: &quot;ws&quot;,        &quot;wsSettings&quot;: &#123;          &quot;path&quot;: &quot;/ray&quot;        &#125;      &#125;    &#125;  ],  &quot;outbounds&quot;: [ &#123; &quot;protocol&quot;: &quot;freedom&quot;, &quot;settings&quot;: &#123;&#125; &#125; ]&#125;\n2. 配置 Nginx 反向代理创建 Nginx 配置文件：vi /etc/nginx/sites-available/gfw.131495.xyz\n/etc/nginx/sites-available/gfw.131495.xyzserver &#123;    listen 80;    listen [::]:80;    server_name gfw.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;        # TODO: 修改为对应的子域名    server_name gfw.131495.xyz;    # TODO: 独立的日志配置    access_log /var/log/nginx/gfw.access.log proxy_json;    error_log /var/log/nginx/gfw.error.log;     # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;           # 默认代理（防止探测）    location / &#123;        proxy_pass https://www.bing.com;        proxy_ssl_server_name on;        proxy_set_header Host www.bing.com;        proxy_ssl_protocols TLSv1.2 TLSv1.3;    &#125;    # 反向代理设置    location /ray &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:2443;                # Websocket 代理参数        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;                proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n重启 Nginx 和 V2Ray：\n# 还原之前的 systemctl edit 修改，推荐用普通用户运行systemctl revert v2raysystemctl restart v2raysystemctl reload nginx\n3. 客户端配置在 v2rayN / Shadowrocket / Clash 等客户端中填入以下信息：\n\n地址 (Address): 你的域名或者 IP 地址\n端口 (Port): 443（注意：改成了 443）\n用户 ID (UUID): 你的UUID\n额外 ID (AlterId): 0\n加密方式 (Security): zero\n传输协议 (Network): ws\n伪装路径 (Path): /ray（注意：增加路径）\n传输层安全 (TLS): tls\nSNI: 如果 地址 填写的是域名，则此处不用填写\n\n\n至此，你的流量看起来就像是在访问一个普通的 HTTPS 网站，隐蔽性极高。\n","categories":["创意工坊","网络代理"],"tags":["Nginx","V2Ray","VMess","WebSocket"]},{"title":"Xray 部署实战：VLESS 协议从 XTLS-Vision 直连到 Nginx + WebSocket 隐匿模式","url":"/posts/64f6dbdf.html","content":"VLESS 是 Xray 内核的专属协议，它是一种无状态的轻量级传输协议。与 VMess 不同，VLESS 不对数据进行加密（因为它依赖外层 TLS 加密），因此协议头极其精简，性能更高。\n本文将介绍两种主流架构：\n\n性能之选：VLESS + TCP + TLS + XTLS-Vision（直连抗封锁最强）。\n隐匿之选：VLESS + WS + Nginx + TLS（支持 CDN）。\n\n安装 Xray推荐使用官方脚本安装，方便管理和更新。\n# 1. 安装/更新 Xraybash -c &quot;$(curl -L https://github.com/XTLS/Xray-install/raw/main/install-release.sh)&quot; @ install# 2. 生成 UUID (复制备用)xray uuid\n常用命令：\n\n更新 GeoIP 库：bash -c &quot;$(curl -L .../install-release.sh)&quot; @ install-geodata\n卸载：bash -c &quot;$(curl -L .../install-release.sh)&quot; @ remove\n\n\n场景一：XTLS-Vision 直连模式 (推荐)这是目前 Xray 最强大的模式，利用 XTLS-Vision 流控技术，在提升速度的同时，能极有效地对抗 GFW 的主动探测和重放攻击。\n1. 修改配置编辑 /usr/local/etc/xray/config.json：\n&#123;    &quot;log&quot;: &#123; &quot;loglevel&quot;: &quot;warning&quot; &#125;,    &quot;inbounds&quot;: [        &#123;            &quot;port&quot;: 2443,            &quot;protocol&quot;: &quot;vless&quot;,            &quot;settings&quot;: &#123;                &quot;clients&quot;: [                    &#123;                        &quot;id&quot;: &quot;你的UUID&quot;,                        &quot;flow&quot;: &quot;xtls-rprx-vision&quot;                    &#125;                ],                &quot;decryption&quot;: &quot;none&quot;,                &quot;fallbacks&quot;: [                    &#123;                        &quot;dest&quot;: 80                     &#125;                ]            &#125;,            &quot;streamSettings&quot;: &#123;                &quot;network&quot;: &quot;tcp&quot;,                &quot;security&quot;: &quot;tls&quot;,                &quot;tlsSettings&quot;: &#123;                    &quot;certificates&quot;: [                        &#123;                            &quot;certificateFile&quot;: &quot;/cert/acme_131495.xyz/cert.pem&quot;,                            &quot;keyFile&quot;: &quot;/cert/acme_131495.xyz/key.pem&quot;                        &#125;                    ]                &#125;            &#125;        &#125;    ],    &quot;outbounds&quot;: [ &#123; &quot;protocol&quot;: &quot;freedom&quot; &#125; ]&#125;\n关于 Fallback (回落)：配置中的 dest: 80 意味着，如果有人访问你的 2443 端口但不是 VLESS 协议（比如浏览器直接访问），Xray 会把流量转发到本机的 80 端口。建议本机安装一个 Nginx 监听 80 端口并展示一个静态网页，以防探测。\n\n2. 解决权限问题 (关键)Xray 默认使用 nobody 用户，无法读取位于 /root/ 或 /cert/ 等目录下的证书文件，导致启动失败。\nsystemctl edit xray\n在编辑器中填入：\n[Service]User=rootGroup=root\nCtrl + O, Enter, Ctrl + X 保存退出后，重启服务：\nsystemctl restart xraysystemctl status xray\n\n场景二：Nginx 反代 + WebSocket 模式如果你需要使用 Cloudflare CDN，或者希望将代理服务隐藏在正常的 Nginx 网站后面，请选择此模式。\n1. 修改 Xray 配置注意：\n\n监听本地：listen 改为 127.0.0.1。\n移除流控：flow 必须留空（WS 不支持 Vision）。\n移除 TLS：TLS 交给 Nginx 处理，Xray 内部处理明文。\nWebSocket 配置：network 改为 ws，path 填写 /ray。\n\n编辑 /usr/local/etc/xray/config.json：\n&#123;    &quot;log&quot;: &#123; &quot;loglevel&quot;: &quot;warning&quot; &#125;,    &quot;inbounds&quot;: [        &#123;            &quot;listen&quot;: &quot;127.0.0.1&quot;,            &quot;port&quot;: 2443,            &quot;protocol&quot;: &quot;vless&quot;,            &quot;settings&quot;: &#123;                &quot;clients&quot;: [                    &#123;                        &quot;id&quot;: &quot;你的UUID&quot;,                        &quot;flow&quot;: &quot;&quot;                     &#125;                ],                &quot;decryption&quot;: &quot;none&quot;            &#125;,            &quot;streamSettings&quot;: &#123;                &quot;network&quot;: &quot;ws&quot;,                &quot;wsSettings&quot;: &#123;                    &quot;path&quot;: &quot;/ray&quot;                &#125;            &#125;        &#125;    ],    &quot;outbounds&quot;: [ &#123; &quot;protocol&quot;: &quot;freedom&quot; &#125; ]&#125;\n重启 Xray：systemctl restart xray\n2. 配置 Nginx 反向代理编辑 Nginx 配置文件 vi /etc/nginx/sites-available/gfw.131495.xyz：\nserver &#123;    listen 80;    listen [::]:80;    server_name gfw.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;     listen [::]:443 ssl;        # TODO: 修改为对应的子域名    server_name gfw.131495.xyz;    # TODO: 独立的日志配置    access_log /var/log/nginx/gfw.access.log proxy_json;    error_log /var/log/nginx/gfw.error.log;    # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;        # 默认代理（防止探测）    location / &#123;        proxy_pass https://www.bing.com;        proxy_ssl_server_name on;        proxy_set_header Host www.bing.com;        proxy_ssl_protocols TLSv1.2 TLSv1.3;    &#125;           location /ray &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:2443;        # Websocket 代理参数        proxy_http_version 1.1;        proxy_set_header Upgrade $http_upgrade;        proxy_set_header Connection &quot;upgrade&quot;;                proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n应用配置：\nln -s /etc/nginx/sites-available/gfw.131495.xyz /etc/nginx/sites-enabled/nginx -t &amp;&amp; systemctl reload nginx\n\n客户端配置对比根据你选择的场景，客户端（v2rayN / Shadowrocket / Nekoray）的配置有所不同：\n\n\n\n\n配置项\n场景一 (Vision)\n场景二 (Nginx+WS)\n\n\n\n\n地址 (Address)\n你的域名\n你的域名\n\n\n端口 (Port)\n2443 (Xray 端口)\n443 (Nginx 端口)\n\n\n用户 ID (UUID)\n你的 UUID\n你的 UUID\n\n\n流控 (Flow)\nxtls-rprx-vision\n空\n\n\n传输协议 (Network)\ntcp\nws\n\n\n伪装路径 (Path)\n空\n/ray\n\n\nTLS\n开启 (tls)\n开启 (tls)\n\n\nuTLS (指纹)\nchrome (推荐)\nchrome\n\n\n\n\n总结：\n\n追求极致速度和直连稳定性 -> 选 场景一。\n需要隐藏 IP、使用 CDN 或配合建站 -> 选 场景二。\n\n\n","categories":["创意工坊","网络代理"],"tags":["Nginx","Xray","VLESS","XTLS"]},{"title":"Oracle Cloud 实例网络配置全解：防火墙放行、IPTables 清空与 Root 登录","url":"/posts/6128b66c.html","content":"在使用 Oracle Cloud (甲骨文云) 的 Ubuntu 实例时，新手常遇到的最大的坑就是 “双重防火墙”：\n\n云端防火墙：OCI 控制台的安全列表 (Security Lists)。\n系统防火墙：Linux 系统内部的 Netfilter/IPTables。\n\n只有两层防火墙都放行，外部流量才能真正到达你的服务。本文将带你一站式打通网络配置。\n\n第一层：云端防火墙 (Security Lists)这是 Oracle 设定的第一道关卡。默认情况下，只放行了 SSH (22端口)。\n配置步骤\n登录 Oracle 控制台，进入 实例详情 页面。\n点击 网络 (Network) 里的 子网 (Subnet) 名称的链接。\n在子网详情页，点击 安全 里的 安全列表 (Security Lists)，通常有一个默认列表 Default Security List for...。\n在 安全规则，点击 添加入站规则 (Add Ingress Rules)。\n\n推荐规则 (放行所有)如果你希望由服务器内部防火墙接管所有流量控制，或者用于测试环境，可以添加一条“全放行”规则：\n\n源 CIDR：0.0.0.0/0 (允许所有 IP)\nIP 协议：所有协议\n源端口范围：(留空，表示所有端口)\n\n第二层：系统防火墙 (IPTables)Oracle 提供的 Ubuntu 镜像默认开启了极其严格的 iptables 规则。即使你在网页控制台放行了端口，系统内部也会拦截。\n最省事的做法是：清空所有规则，让服务器“裸奔”，完全由云端安全列表控制。\n1. 查看当前规则# 登录 rootsudo -iiptables -L -n -v\n你会看到大量的 REJECT 规则，这就是导致网络不通的元凶。\n2. 暴力清空规则执行以下命令，删除所有链和规则，并将默认策略设置为 ACCEPT：\n# 1. 设置默认策略为接受 (防止清空规则后把自己锁在外面)iptables -P INPUT ACCEPTiptables -P FORWARD ACCEPTiptables -P OUTPUT ACCEPT# 2. 清空所有规则 (Flush)iptables -Fiptables -t nat -Fiptables -t mangle -F# 3. 删除所有自定义链 (Delete Chain)iptables -Xiptables -t nat -Xiptables -t mangle -X\n3. 持久化配置 (关键步骤)通过命令修改的规则在重启后会失效，因为 Oracle 镜像安装了 netfilter-persistent 工具，开机时会自动加载 /etc/iptables/rules.v4 中的默认规则。\n我们需要将当前“清空后”的状态保存下来：\n# 推荐方式：覆盖保存当前规则netfilter-persistent save\n或者，你也可以选择简单粗暴地卸载该工具（不推荐，不够优雅）：\n# 暴力方式：卸载持久化工具apt purge netfilter-persistentrm -rf /etc/iptables\n最后，执行 reboot 重启服务器验证规则是否回滚。\n\n进阶：开启 Root 密码登录Oracle 默认强制使用密钥登录且禁用 Root。为了方便管理（如使用 SFTP 客户端），我们通常会开启密码登录。\n1. 设置 Root 密码使用默认用户（通常是 ubuntu）登录后：\n# 切换到 root 环境sudo -i# 设置密码 (需输入两次，无回显)passwd\n2. 修改 SSH 配置编辑主配置文件：vim /etc/ssh/sshd_config\n找到以下配置并修改（如果没有则添加）：\nPermitRootLogin yes        # 允许 Root 登录PasswordAuthentication yes # 允许密码验证\n3. 处理子配置文件 (重要坑点)在 Ubuntu 云镜像中，还有一个优先级更高的配置文件，必须同时修改：\nvim /etc/ssh/sshd_config.d/60-cloudimg-settings.conf\n将里面的 no 改为 yes：\nPasswordAuthentication yes\n4. 重启服务systemctl restart ssh\n\n附录：Oracle 网络术语解析在配置 Oracle 网络时，你经常会看到以下缩写，理解它们有助于你构建更复杂的网络架构。\n核心概念速查：\n\nOCI (Oracle Cloud Infrastructure)即甲骨文云的基础设施平台。\n\nVCN (Virtual Cloud Network)虚拟云网络。你在云上划出的一块私有网络区域，类似于你家里的局域网。\n\nVNIC (Virtual Network Interface Card)虚拟网卡。实例连接到 VCN 的接口。\n\n它决定了实例的 私有/公有 IP。\n一个实例可以绑定多个 VNIC（多网卡）。\n\n\nSecurity List (安全列表)子网级别的防火墙。作用于子网内的所有网卡，通常用于设置通用的规则（如全放行 SSH）。\n\nNSG (Network Security Groups)网卡级别的防火墙。比安全列表更灵活，可以直接绑定到某个具体的 VNIC 上，仅对该实例生效。\n\n\n\n流量控制层级关系：\n实例 (Instance)  └── VNIC (虚拟网卡)       ├── 绑定 NSG (网络安全组) [可选，针对单机]       └── 归属 Subnet (子网)             └── 受 Security List (安全列表) 控制 [针对整个子网]","categories":["开发环境","Oracle Cloud"],"tags":["Oracle","运维","云服务器"]},{"title":"Oracle Cloud 实例重装系统：利用替换引导卷 (Replace Boot Volume) 实现系统重置","url":"/posts/e62f764.html","content":"与 AWS 或一般的 VPS 提供商不同，Oracle Cloud (OCI) 的控制台中并没有一个显眼的“重装系统”按钮。\n如果我们把系统玩坏了，或者想更换系统版本（例如从 Ubuntu 20.04 升级到 22.04），最优雅的方法不是删除实例重建（可能会丢 IP），而是使用 “替换引导卷” (Replace Boot Volume) 功能。\n第一步：获取目标系统的映像 OCID在开始操作前，我们需要知道要安装什么系统。OCI 使用 OCID (Oracle Cloud Identifier) 来标识每一个官方镜像。\n我们需要获取目标系统的 OCID，这里有两种方式：\n方式一：使用当前实例同款镜像（最简单）如果你只是想把当前的系统“恢复出厂设置”，依旧使用之前的系统版本：\n\n在实例的 详细信息 (Instance Details) 页面。\n找到 映像详细信息 (Image) 部分。\n点击 映像名称 链接，进入详情页。\n复制 OCID 备用。\n\n方式二：查阅官方文档（更换版本）如果你想更换系统版本（例如安装最新的 Ubuntu 24.04），需要去官方文档查找。\n\n官方镜像列表：https://docs.oracle.com/en-us/iaas/images/\n\n⚠️ 关键注意点：\n\n区域 (Region)：必须选择你实例所在的区域（如 Japan East (Osaka) 或 US West (Phoenix)）。\n架构 (Architecture)：\n如果是 AMD 免费机，找 x86_64 架构的 OCID。\n如果是 ARM (4H24G) 机器，必须找 aarch64 架构的 OCID。\n\n\n\n复制对应条目的 OCID，格式通常为 ocid1.image.oc1.ap-osaka-1.xxxx...。\n\n第二步：执行替换引导卷拿到 OCID 后，就可以开始“重装”了。\n高能预警：此操作会销毁并删除当前的引导卷（系统盘）。请务必备份旧系统盘内的重要数据！此操作不会改变实例的公网 IP 地址。\n\n\n登录 Oracle 控制台，进入实例详情页面。\n在上方菜单点击 存储 (Storage) -&gt; 引导卷 (Boot volume)。\n点击 替换引导卷 (Replace Boot Volume) 按钮。\n在弹出的配置窗口中填写信息：\n替换方式：选择 映像 (Image)。\n映像应用方式：选择 输入 OCID (Enter image OCID)。\n镜像 OCID：粘贴第一步中获取的字符串。\n引导卷大小：输入 50 - 200 GB（默认免费额度总共 200G，通常填 50 或 100）。\n\n\n点击 替换 (Replace)。\n\n第三步：等待与连接提交后，实例的状态会变为 Stopping（停止中），然后是 Provisioning（配置中），最后变回 Running（运行中）。\n整个过程大约需要 5-10 分钟。\n待状态变绿后，使用 SSH 客户端重新连接：\n\nIP 地址：保持不变。\n用户名：根据系统而定（Ubuntu 镜像默认为 ubuntu，Oracle Linux 默认为 opc）。\n密钥：使用你原本的私钥（或你刚才上传的新私钥）。\n\nssh -i &#x27;你的私钥文件&#x27; ubuntu@你的公网IP\n如果连接成功，恭喜你，系统重装完成！\n","categories":["开发环境","Oracle Cloud"],"tags":["Oracle","云服务器"]},{"title":"Ubuntu 系统 Docker 安装全指南：官方源与国内镜像加速","url":"/posts/3c32210.html","content":"本文将指导你在 Ubuntu 上安装 Docker Engine。安装过程涵盖了从清理旧版本到配置国内加速源的完整生产级实践。\n\n参考文档：Docker Official Docs\n\n一、环境清理为了防止版本冲突，首先卸载系统中可能存在的旧版本 Docker（如 docker.io 或 docker-engine）。\nsudo apt remove $(dpkg --get-selections docker.io docker-compose docker-compose-v2 docker-doc podman-docker containerd runc | cut -f1)\n二、配置软件源 (Repository)1. 安装基础工具sudo apt updatesudo apt install ca-certificates curl\n2. 添加 GPG 密钥创建密钥目录并下载 Docker 官方密钥。\n提示：如果你位于国内服务器，连接 download.docker.com 可能会超时。推荐使用阿里云镜像源，请将下方的 URL 替换为 http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg\n\n# 创建密钥目录sudo install -m 0755 -d /etc/apt/keyrings# 下载官方 GPG 密钥sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc# 修改密钥权限sudo chmod a+r /etc/apt/keyrings/docker.asc\n3. 添加 APT 源根据你的 Ubuntu 版本，选择对应的源格式。\n注意：Ubuntu 24.04 LTS (Noble Numbat) 开始，APT 建议使用 DEB822 格式的 .sources 文件，而非传统的 .list 文件。\n\n方案 A：Ubuntu 24.04 及更高版本 (.sources)echo &quot;Types: debURIs: https://download.docker.com/linux/ubuntuSuites: $(. /etc/os-release &amp;&amp; echo &quot;$&#123;UBUNTU_CODENAME:-$VERSION_CODENAME&#125;&quot;)Components: stableArchitectures: $(dpkg --print-architecture)Signed-By: /etc/apt/keyrings/docker.asc&quot; | \\  sudo tee /etc/apt/sources.list.d/docker.sources &gt; /dev/null\n方案 B：Ubuntu 23.10 及更低版本 (.list)echo \\  &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\  $(. /etc/os-release &amp;&amp; echo &quot;$&#123;UBUNTU_CODENAME:-$VERSION_CODENAME&#125;&quot;) stable&quot; | \\  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\n添加完成后，务必更新索引：\nsudo apt update\n三、安装 Docker Engine安装最新版本的 Docker Engine、CLI、Containerd 以及 Docker Compose 插件：\nsudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n验证安装版本：\ndocker --versiondocker compose version\n四、安装后配置 (关键步骤)1. 免 Sudo 执行 (非 Root 用户)默认情况下，运行 docker 命令需要 sudo 权限。为了方便使用，建议将当前用户加入 docker 用户组。\n# 1. 创建 docker 组 (通常安装时已自动创建)sudo groupadd docker# 2. 将当前用户加入组sudo usermod -aG docker $USER# 3. 激活更改 (或者退出终端重新登录)newgrp docker\n现在你可以直接运行 docker ps 而无需输入密码了。\n2. 配置镜像加速器国内拉取 Docker Hub 镜像非常慢，建议配置 Registry Mirrors。\n编辑或创建 /etc/docker/daemon.json：\nsudo vim /etc/docker/daemon.json\n登录 阿里云容器镜像服务控制台，在左侧菜单找到 镜像工具 - 镜像加速器。\n复制专属的加速器地址（格式通常为 https://xxxx.mirror.aliyuncs.com）。\ndaemon.json&#123;  &quot;registry-mirrors&quot;: [    &quot;https://你的专属ID.mirror.aliyuncs.com&quot;  ]&#125;\n重启 Docker 服务使配置生效：\nsudo systemctl daemon-reloadsudo systemctl restart docker\n五、验证安装运行 Hello World 容器来验证一切是否正常：\ndocker run hello-world\n如果看到以下输出，说明安装成功：\nHello from Docker!This message shows that your installation appears to be working correctly....\n六、卸载 Docker如果需要彻底移除 Docker，请执行以下命令：\n# 1. 卸载依赖包sudo apt purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras# 2. 删除镜像、容器和数据卷 (慎重！)sudo rm -rf /var/lib/dockersudo rm -rf /var/lib/containerd# 3. 删除配置文件和密钥sudo rm /etc/apt/sources.list.d/docker.listsudo rm /etc/apt/sources.list.d/docker.sourcessudo rm /etc/apt/keyrings/docker.asc","categories":["开发环境","Ubuntu"],"tags":["Docker"]},{"title":"Ubuntu 系统安装 JDK 全指南：OpenJDK 与 Oracle JDK 双方案","url":"/posts/3c893d60.html","content":"在 Ubuntu 服务器上部署 Java 环境通常有两种方式：\n\n包管理器安装 (apt)：最简单，通常安装的是 OpenJDK，适合大多数开源项目。\n手动安装：适合需要特定版本（如 Oracle JDK）或需精确控制安装路径的场景。\n\n\n方案一：通过 apt 自动安装 (推荐)这是最快捷的方式，系统会自动处理依赖和环境变量。以安装 JDK 8 为例：\n1. 安装与验证# 1. 更新软件源sudo apt update# 2. 安装 OpenJDK 8sudo apt install openjdk-8-jdk# 3. 验证安装java -version\n2. 管理多个 Java 版本如果你的系统同时安装了 JDK 8、JDK 11 和 JDK 17，可以使用 update-alternatives 命令在不同版本间快速切换。\nsudo update-alternatives --config java\n执行后会出现一个列表，输入对应的 Selection 编号并回车，即可切换系统默认的 Java 版本。\n方案二：手动解压安装 (Oracle JDK)如果你需要使用 Oracle 官方版本，或者需要将 JDK 安装到指定目录，请使用此方法。\n1. 下载安装包请前往 Oracle 官网下载对应架构（x64 或 aarch64）的 .tar.gz 包：\n\nJDK 8 下载 | JDK 17 下载 | JDK 21 下载\n\n2. 解压部署建议将第三方软件统一安装在 /usr/local/java 目录下。\n# 1. 创建目录cd /usr/localsudo mkdir -p java# 2. 安装包准备# 请使用 FTP/SFTP 工具将下载好的 tar.gz 包上传到服务器# 或者 wget 命令直接下载# 3. 解压到指定目录 (注意替换具体的文件名)# -C 参数指定解压的目标路径sudo tar -zxvf jdk-8u471-linux-x64.tar.gz -C /usr/local/java/# 4. 验证解压是否成功# 注意：这里的目录名 jdk1.8.0_471 视你下载的具体版本而定/usr/local/java/jdk1.8.0_471/bin/java -version\n3. 配置环境变量为了在任何目录下都能使用 java 命令，需要配置环境变量。\n编辑系统级配置文件 /etc/profile（对所有用户生效）：\nsudo vim /etc/profile\n在文件末尾追加以下内容（注意修改 JAVA_HOME 为你实际的解压路径）：\n# Java Environment Configexport JAVA_HOME=/usr/local/java/jdk1.8.0_471export JRE_HOME=$JAVA_HOME/jreexport CLASSPATH=.:$JAVA_HOME/lib:$JRE_HOME/libexport PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\n4. 重新加载配置修改配置文件后，需要强制重载才能立即生效：\nsource /etc/profile# 再次验证java -version\n\n补充：Linux 配置文件加载顺序理解配置文件的加载顺序，有助于你决定将环境变量写在哪里。\n\n/etc/profile\n\n级别：系统全局\n生效时机：用户登录时加载。\n建议：生产服务器通常在此配置 JAVA_HOME，确保所有用户可用。\n\n\n~/.bashrc\n\n级别：当前用户\n生效时机：打开新的终端窗口（Shell）时加载。\n建议：开发测试环境或仅当前用户使用时，推荐修改此文件，避免污染全局环境。\n\n\n/etc/bash.bashrc\n\n级别：系统全局\n生效时机：交互式 Shell 启动时加载。\n\n\n\n\n最佳实践：\n\n如果是服务器部署应用，建议修改 /etc/profile。\n如果是个人开发机，建议修改 ~/.bashrc。\n\n\n","categories":["开发环境","Ubuntu"],"tags":["JDK"]},{"title":"Ubuntu 系统运维手册：常用命令与配置速查","url":"/posts/428aa18f.html","content":"Ubuntu 是目前最流行的 Linux 服务器发行版之一。熟练掌握其常用命令与配置，是运维与开发的必备技能。\nUbuntu 版本代号速查\n\n\n\n版本号\n代号\n状态\n说明\n\n\n\n\n18.04 LTS\nBionic Beaver\n⚠️ 停止维护\n已于 2023 年停止免费支持\n\n\n20.04 LTS\nFocal Fossa\n✅ 活跃\n长期支持至 2025 年 4 月\n\n\n22.04 LTS\nJammy Jellyfish\n✅ 活跃\n长期支持至 2027 年 4 月\n\n\n24.04 LTS\nNoble Numbat\n🚀 最新\n长期支持至 2029 年 4 月\n\n\n\n\n一、SSH 远程连接配置新装的 Ubuntu 服务器通常默认未开启 SSH 密码登录，甚至未安装 SSH 服务。\n1. 安装 SSH 服务sudo apt updatesudo apt install openssh-server -ysudo systemctl status ssh  # 检查运行状态\n2. 配置 SSH 访问权限编辑配置文件 /etc/ssh/sshd_config：\nsudo vim /etc/ssh/sshd_config\n修改或确认以下核心配置：\nsshd_config# 允许密码验证登录PasswordAuthentication yes# 允许 root 用户直接登录（生产环境建议改为 no，仅用普通用户 sudo）PermitRootLogin yes\n重启服务使配置生效：\nsudo systemctl restart ssh\n3. 防火墙放行 (UFW)如果开启了 ufw 防火墙，必须放行 SSH 端口（默认 22）：\nsudo ufw allow ssh     # 或 sudo ufw allow 22/tcpsudo ufw enable        # 开启防火墙，disable 禁用防火墙sudo ufw status        # 查看状态\n二、APT 软件源配置 (国内加速)默认的官方源在国内访问较慢，建议替换为阿里云、清华大学等镜像源。\n场景 A：Ubuntu 23.10 及之前的版本 (传统格式)编辑 /etc/apt/sources.list，将内容替换为（以 20.04 focal 为例）：\nsources.listdeb https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiversedeb-src https://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse\n\n注意：需将 focal 替换为你当前系统的代号（如 jammy）。\n\n场景 B：Ubuntu 24.04 LTS (新版 DEB822 格式)从 24.04 开始，源配置移至 /etc/apt/sources.list.d/ubuntu.sources。\n\n备份原文件：\nsudo mv /etc/apt/sources.list.d/ubuntu.sources /etc/apt/sources.list.d/ubuntu.sources.bak\n\n新建配置 /etc/apt/sources.list.d/aliyun.sources：\naliyun.sourcesTypes: debURIs: https://mirrors.aliyun.com/ubuntu/Suites: noble noble-security noble-updates noble-proposed noble-backportsComponents: main restricted universe multiverseSigned-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg\n\n\n最后，切记更新缓存：\nsudo apt update\n三、用户与权限管理1. 基础操作whoami                  # 查看当前用户id                      # 查看当前用户ID和组信息su - ubuntu             # 切换到指定用户sudo -i                 # 使用 sudo 权限切换到 root 环境passwd                  # 修改当前用户密码\n2. 用户增删 (推荐使用 adduser)# 新增用户 (自动创建家目录、设置 Shell)sudo adduser testuser# 删除用户 (建议保留家目录，若需彻底删除加 --remove-home --remove-all-files)sudo deluser testuser\n3. Sudo 提权将普通用户加入 sudo 组，使其具备管理员权限：\nsudo usermod -aG sudo testuser# 对应的移除命令（需要谨慎使用，移除后自身没权限提权）sudo gpasswd -d testuser sudo\n或者编辑 /etc/sudoers 文件（需使用 sudo vi 命令安全编辑），添加：testuser ALL=(ALL:ALL) ALL\n四、系统设置与监控1. 时区设置timedatectl set-timezone Asia/Shanghai  # 设置为中国标准时间timedatectl                             # 查看当前时间与时区\n2. 磁盘与资源监控df -h                   # 查看磁盘挂载与空间使用 (Disk Free)du -h                   # 查看当前目录下各文件夹的大小 (Disk Usage)free -m                 # 查看内存使用情况 (MB)top                     # 显示进程使用情况\n3. 网络与进程ss -ntulp | grep 8080   # 查看占用 8080 端口的进程ps -ef | grep java      # 查看 Java 进程kill -9 &lt;PID&gt;           # 强制结束指定进程 ID\n4. 软件包管理(apt)apt update              # 更新软件包apt list --upgradable   # 列出可升级的包apt upgrade -y          # 升级软件包apt install ufw         # 安装 UFWapt remove ufw          # 卸载 UFWapt purge ufw           # 彻底卸载 UFW\n5. 服务管理systemctl start/stop/restart ufw    # 启动/停止/重启服务systemctl status ufw                # 查看服务状态systemctl enable/disable ufw        # 设置/禁止服务 开机自启journalctl -f -u ufw                # 实时滚动查看服务日志 --follow --unitdpkg -L ufw             # 查看安装的包释放了哪些文件 --listfilesdpkg -l | grep ufw      # 查看是否安装了某个包  --list\n五、文件操作与压缩1. 常用命令mkdir -p /data/web        # 递归创建目录touch /file.txt           # 创建文件rm -rf /data/temp         # 强制递归删除目录 (慎用!)mv old.txt new.txt        # 重命名或移动ln -s /src/file /dst/     # 创建软链接 (快捷方式)cat /etc/passwd     # 显示文件内容less /etc/passwd    # 分页显示文件内容\n2. 压缩与解压 (Tar).tar.gz 是 Linux 下最通用的压缩格式。\n# 解压，可通过 -C 指定解压到tar -zxvf filename.tar.gz# 压缩tar -zcvf filename.tar.gz /source/dir\n\nz: gzip 压缩\nx: 解压 (extract)\nc: 创建 (create)\nv: 显示过程 (verbose)\nf: 指定文件名 (file)\n\n六、服务后台运行 (Nohup)在断开 SSH 连接后继续运行程序（如 Java Jar 包）：\n# 标准后台启动命令nohup java -jar app.jar &gt; app.log 2&gt;&amp;1 &amp;\n\nnohup: 不挂断运行 (No Hang Up)。\n&gt; app.log: 将标准输出重定向到 app.log。\n2&gt;&amp;1: 将错误输出 (2) 重定向到标准输出 (1) 一并写入日志。\n&amp;: 在后台运行。\n\n查看实时日志：\ntail -f app.log","categories":["开发环境","Ubuntu"],"tags":["运维","语法手册"]},{"title":"Docker Desktop 最佳实践：自定义安装路径与镜像加速配置","url":"/posts/c3ae7e15.html","content":"Docker Desktop 是 Windows 平台上开发容器化应用的标准工具。\n前置条件：Docker Desktop 依赖于 WSL2 后端。安装前请确保系统已开启 WSL 功能，详细步骤请参考我的文章：WSL2 全方位指南：安装、配置、迁移与网络优化。\n1. 下载安装包\n官方下载地址：Docker Desktop for Windows\n\n2. 自定义路径安装（强制 D 盘）注意： 如果直接双击运行安装程序，Docker 会强制安装在 C 盘，且 GUI 界面不提供路径修改选项。为了节省系统盘空间，我们必须通过命令行参数进行安装。\n\n2.1 规划目录首先，在 D 盘（或其他非系统盘）手动创建以下两个文件夹：\n\nD:\\Program Files\\Docker：用于存放 Docker 应用程序本体。\nD:\\Distro\\Docker：用于存放 Docker 的镜像、容器、卷等数据（随着使用体积会越来越大）。\n\n2.2 执行安装命令以 管理员身份 打开命令提示符（CMD）或 PowerShell，进入下载目录（通常是 Downloads），执行以下命令。\nstart /w &quot;&quot; &quot;Docker Desktop Installer.exe&quot; install -accept-license --installation-dir=&quot;D:\\Program Files\\Docker&quot; --wsl-default-data-root=&quot;D:\\Distro\\Docker&quot;\n参数解释：\n\n--installation-dir：指定应用程序安装位置。\n--wsl-default-data-root：指定 WSL 发行版（docker-desktop-data）的数据存储位置。\n\n执行后，会弹出安装界面，等待进度条跑完即可。\n安装完成后，建议重启计算机。\n3. 配置镜像加速由于网络原因，国内直接从 Docker Hub 拉取镜像速度极慢。推荐配置阿里云镜像加速器。\n3.1 获取加速地址登录 阿里云容器镜像服务控制台，在左侧菜单找到 镜像工具 - 镜像加速器。\n复制专属的加速器地址（格式通常为 https://xxxx.mirror.aliyuncs.com）。\n3.2 应用配置运行 Docker Desktop，点击右上角的 设置（齿轮图标） -> Docker Engine。\n在右侧的 JSON 编辑框中，修改或添加 registry-mirrors 字段：\n&#123;  &quot;builder&quot;: &#123;    &quot;gc&quot;: &#123;      &quot;defaultKeepStorage&quot;: &quot;20GB&quot;,      &quot;enabled&quot;: true    &#125;  &#125;,  &quot;experimental&quot;: false,  &quot;registry-mirrors&quot;: [    &quot;https://你的专属ID.mirror.aliyuncs.com&quot;  ]&#125;\n点击右下角的 Apply &amp; restart 按钮使配置生效。\n4. 验证安装打开 PowerShell 或 CMD，输入以下命令检查版本和运行状态：\ndocker -v# 输出：Docker version 29.0.x, build ...docker run hello-world\n如果看到 “Hello from Docker!“ 的提示信息，说明安装与配置均已成功。\n","categories":["开发环境","Windows"],"tags":["Docker","效率工具"]},{"title":"MySQL 绿色版安装指南：压缩包部署、配置与卸载全流程","url":"/posts/7d511698.html","content":"相比于 MSI 安装版，使用 Zip 压缩包（Archive）方式安装 MySQL 有着巨大的优势：系统侵入性低、配置灵活、卸载极其干净。\n本文记录了在 Windows 环境下部署 MySQL 9.5.0 绿色版的完整流程。\n一、下载与解压1. 下载压缩包前往 MySQL 官方下载页面，选择 Windows (x86, 64-bit), ZIP Archive。\n\n下载地址：https://dev.mysql.com/downloads/mysql/\n\n2. 解压部署将下载的压缩包解压到你希望安装的目录。\n例如：D:\\Program Files\\MySQL\\mysql-9.5.0\\\n二、核心配置 (my.ini)MySQL 启动时需要读取配置文件。在安装根目录下新建一个文本文件，重命名为 my.ini（注意后缀名）。\n写入以下内容，请务必根据实际路径修改 basedir 和 datadir：\nmy.ini[mysql]# 设置 mysql 客户端的默认字符集default-character-set=utf8mb4[mysqld]# 设置服务端口port=3306# MySQL 的安装目录basedir=D:\\\\Program Files\\\\MySQL\\\\mysql-9.5.0# 数据库的数据存放目录 (data 目录会自动生成，无需手动创建)datadir=D:\\\\Program Files\\\\MySQL\\\\mysql-9.5.0\\\\data# 允许的最大连接数max_connections=200# 服务端字符集与排序规则 (推荐 utf8mb4)character-set-server=utf8mb4collation-server=utf8mb4_general_ci# 创建新表时使用的存储引擎default-storage-engine=InnoDB\n三、初始化与安装以下操作建议在 管理员权限 的命令提示符（CMD）或 PowerShell 中执行。\n1. 初始化数据进入 bin 目录，执行初始化命令。\ncd /d &quot;D:\\Program Files\\MySQL\\mysql-9.5.0\\bin&quot;mysqld.exe --initialize --console\n\n⚠️ 关键步骤：执行完毕后，控制台会输出一行含有 root@localhost: xxxxxxx 的信息。请务必复制并保存这个初始临时密码！\n\n2. 注册 Windows 服务将 MySQL 注册为系统服务，以便开机自启或后台运行。\n# MySQL 是服务名称，可自定义mysqld.exe install MySQL\n四、服务启动与管理方式一：命令行管理 (推荐)需要管理员权限。\n# 启动服务net start MySQL# 停止服务net stop MySQL# 配置服务开机自启sc config MySQL start=auto\n方式二：任务管理器按下快捷键 Ctrl + Shift + Esc 打开任务管理器，切换到 服务 选项卡，找到 MySQL 右键操作。\n五、修改初始密码使用刚才记录的临时密码登录，并修改为便于记忆的密码（如 123456）。\n在 bin 目录下执行：\n# 1. 登录 (回车后输入临时密码)mysql.exe -uroot -p# 2. 修改密码 SQL 语句 (注意分号)ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;123456&#x27;;# 3. 刷新权限 (可选，通常 ALTER USER 会自动刷新)FLUSH PRIVILEGES;# 4. 退出exit\n六、进阶建议：配置环境变量为了避免每次都要进入 bin 目录才能使用 mysql 命令，建议配置环境变量：\n\n此电脑 -> 右键 -> 属性 -> 高级系统设置 -> 环境变量。\n在 系统变量 中找到 Path，点击编辑。\n新建，填入路径：D:\\Program Files\\MySQL\\mysql-9.5.0\\bin。\n\n配置后，你可以在任意终端直接使用 mysql -uroot -p123456。\n七、彻底卸载如果需要删除 MySQL，压缩包版的卸载非常干净：\n\n停止服务：net stop MySQL\n移除服务：sc delete MySQL (或者 mysqld remove)\n删除文件：直接删除整个 MySQL 安装目录。\n清理环境：如果是步骤六配置了 Path 变量，记得删掉。\n\n至此，系统就恢复如初了。\n","categories":["开发环境","Windows"],"tags":["MySQL","数据库"]},{"title":"PostgreSQL 绿色版安装指南：集成 PostGIS 空间数据库","url":"/posts/8e6be576.html","content":"相比于 EXE 安装程序，使用 Zip 压缩包 安装 PostgreSQL 更加清爽：它不会在注册表中留下难以清理的垃圾，且支持多版本共存，非常适合开发环境。\n本文将演示安装 PostgreSQL 18.1 并集成 PostGIS 空间扩展的完整流程。\n一、PostgreSQL 基础安装1. 下载与解压前往 EnterpriseDB 提供的二进制包下载页面（也可去官网找 Binaries）：\n\n下载地址：https://www.enterprisedb.com/download-postgresql-binaries\n\n将下载的压缩包解压到目标路径，例如：D:\\Program Files\\PostgreSQL\\postgresql-18.1-1。\n2. 配置环境变量 (推荐)为了方便在任意终端使用 psql、pg_ctl 等命令，建议配置环境变量。\n\n操作：在系统变量 Path 中添加一行：D:\\Program Files\\PostgreSQL\\postgresql-18.1-1\\bin\n\n3. 初始化数据库以管理员身份打开命令提示符 (CMD)，进入软件根目录，执行初始化命令：\nbin\\initdb.exe -D data -U postgres -A password -E UTF8 --locale=C -W\n参数详解：\n\n-D data: 指定数据存储目录为当前目录下的 data 文件夹（会自动创建）。\n-U postgres: 指定超级用户名为 postgres。\n-A password: 指定认证方式为密码认证。\n-E UTF8: 设置数据库编码为 UTF-8。\n--locale=C: 设置区域语言环境为 C（避免操作系统语言导致的排序或乱码问题）。\n-W: 强制提示输入并确认超级用户的密码。\n\n\n提示：执行后需输入两次密码，请务必记住该密码！\n\n4. 注册系统服务为了让数据库开机自启或后台运行，需要将其注册为 Windows 服务。\n# -N 后接服务名称，-S auto 表示开机自启bin\\pg_ctl.exe register -N PostgreSQL -D &quot;D:\\Program Files\\PostgreSQL\\postgresql-18.1-1\\data&quot; -S auto\n二、PostGIS 扩展集成PostGIS 是 PostgreSQL 的灵魂伴侣，安装后数据库将支持空间地理信息存储与分析。\n1. 下载插件包前往 OSGeo 下载对应版本的 PostGIS 压缩包（注意与 PG 版本号对应，如 pg18）：\n\n下载地址：https://download.osgeo.org/postgis/windows/\n\n2. 手动覆盖安装 (最稳妥方式)虽然压缩包内提供了安装脚本，但由于路径识别问题极易报错。推荐直接使用文件夹合并法：\n\n解压 PostGIS 压缩包。\n将解压出来的 bin、lib、share、gdal-data 等文件夹，全选并复制。\n粘贴到 PostgreSQL 的安装根目录 (D:\\Program Files\\PostgreSQL\\postgresql-18.1-1)。\n若提示文件冲突，选择 “替换目标中的文件”。\n\n3. 验证空间函数启动数据库服务后，连接数据库（使用 psql 或 Navicat/DBeaver），执行以下 SQL 启用插件并测试：\n# 连接数据库psql -U postgres\n-- 0. 创建数据库，切换数据库CREATE DATABASE example_postgis36;\\c example_postgis36;-- 1. 在当前数据库启用 PostGIS 扩展CREATE EXTENSION postgis;CREATE EXTENSION postgis_raster;CREATE EXTENSION postgis_sfcgal;CREATE EXTENSION postgis_topology;CREATE EXTENSION address_standardizer;CREATE EXTENSION address_standardizer_data_us;CREATE EXTENSION fuzzystrmatch;CREATE EXTENSION postgis_tiger_geocoder;-- 2. 测试空间计算函数 (计算点位距离)SELECT st_geogfromtext(&#x27;POINT(113 23)&#x27;);\n若返回二进制或十六进制的几何数据，即表示 PostGIS 安装成功。\n三、服务管理常用命令建议以 管理员身份 运行 CMD 或 PowerShell。\n# 启动服务net start PostgreSQL# 停止服务net stop PostgreSQL# 设置服务为开机自启sc config PostgreSQL start=auto\n四、彻底卸载绿色版的卸载非常简单且彻底：\n\n停止服务：net stop PostgreSQL\n移除服务：sc delete PostgreSQL\n删除文件：直接删除整个 PostgreSQL 安装目录。\n清理环境：如果在第一步配置了环境变量 Path，记得移除。\n\n","categories":["开发环境","Windows"],"tags":["数据库","PostgreSQL","PostGIS","GIS"]},{"title":"Sublime Text 4 进阶配置：打造轻量级 Java & C++ 开发环境","url":"/posts/9dc77c0b.html","content":"Sublime Text 4 以其极速响应和优雅的界面著称。虽然它主要是一个文本编辑器，但通过配置构建系统（Build System），我们可以将其变身为一个轻量级的 IDE，支持 Java 和 C++ 的编译、运行以及命令行交互。\n本文将介绍如何修改原生配置，解决默认控制台无法输入数据（Scanner/cin）以及中文乱码的痛点。\n\n环境说明\n\n版本：Sublime Text 4 (Build 4200)\n系统：Windows 10/11\n\n\n一、Java 开发环境配置Sublime 自带 Java 编译功能，但默认只能输出结果，无法进行交互式输入。我们需要配置它调用系统的 CMD 窗口来运行程序。\n1. JDK 依赖检查确保电脑已安装 JDK 并配置好系统环境变量 (JAVA_HOME 和 Path)。在命令提示符（CMD）中输入 java -version，若能显示版本号则说明环境就绪。\n2. 编写测试代码创建一个 Hello.java 文件用于测试：\npublic class Hello &#123;    public static void main(String[] args) &#123;        System.out.println(&quot;Hello World! 你好，世界！&quot;);    &#125;&#125;\n3. 拓展构建指令 (Build System)我们需要修改 Sublime 默认的 Java 构建配置。\n\n进入 Sublime Text 安装目录下的 Packages 文件夹。\n找到 Java.sublime-package 文件，使用压缩软件（如 Bandizip、7-Zip 或 WinRAR）直接打开它。\n在压缩包内找到并编辑 JavaC.sublime-build 文件。\n在 variants 字段中添加一段新的配置（”Run in cmd”）：\n\n&#123;    &quot;shell_cmd&quot;: &quot;javac \\&quot;$file\\&quot;&quot;,    &quot;file_regex&quot;: &quot;^(...*?):([0-9]*):?([0-9]*)&quot;,    &quot;selector&quot;: &quot;source.java&quot;,    &quot;variants&quot;: [        &#123;            &quot;name&quot;: &quot;Run in cmd&quot;,            &quot;shell_cmd&quot;: &quot;javac -encoding UTF-8 \\&quot;$&#123;file&#125;\\&quot; &amp;&amp; start cmd /c \\&quot;java --class-path \\&quot;$&#123;file_path&#125;\\&quot; \\&quot;$&#123;file_base_name&#125;\\&quot; &amp; pause\\&quot;&quot;        &#125;    ]&#125;\n配置详解：\n\njavac -encoding UTF-8: 强制使用 UTF-8 编码编译源文件，有效防止编译时的中文乱码。\nstart cmd /c: 启动一个新的 CMD 窗口运行 Java 程序，程序结束后通过 pause 暂停窗口，防止闪退。\n\n4. 运行使用 Sublime 打开 Java 文件，按下快捷键 Ctrl + Shift + B，选择 JavaC - Run in cmd 即可看到弹出的 CMD 窗口并正确输出中文。\n\n二、C++ 开发环境配置Windows 系统默认不包含 C++ 编译器，我们需要手动安装 MinGW。\n1. 安装 MinGW (GCC/G++)推荐使用轻量级的 MinGW 工具链。\n\n下载地址：MinGW-w64 GitHub Releases\n\n配置步骤：\n\n下载并解压压缩包（选择 x86_64-15.2.0-release-win32-seh-ucrt-rt_v13-rev0.7z）。\n将解压后文件夹内的 /bin 目录路径复制。\n将该路径添加到系统的 环境变量 -> Path 中。\n验证：在 CMD 执行 g++ -v，有输出即表示配置成功。\n\n2. 编写测试代码创建一个 Hello.cpp 文件：\n#include &lt;iostream&gt;int main(int argc, char const *argv[])&#123;    std::cout &lt;&lt; &quot;Hello World! 你好，世界！&quot;;    return 0;&#125;\n3. 拓展构建指令 (Build System)同样的方法，修改 C++ 的默认构建配置。\n\n在 Packages 目录下，用压缩软件打开 C++.sublime-package。\n找到并编辑 C++ Single File.sublime-build 文件。\n修改代码如下（注意 Run in cmd 部分）：\n\n\n&#123;  &quot;shell_cmd&quot;: &quot;g++ \\&quot;$&#123;file&#125;\\&quot; -o \\&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\\&quot;&quot;,  &quot;file_regex&quot;: &quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&quot;,  &quot;working_dir&quot;: &quot;$&#123;file_path&#125;&quot;,  &quot;selector&quot;: &quot;source.c++&quot;,  &quot;variants&quot;:  [    &#123;      &quot;name&quot;: &quot;Run&quot;,      &quot;shell_cmd&quot;: &quot;g++ \\&quot;$&#123;file&#125;\\&quot; -o \\&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\\&quot; &amp;&amp; \\&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\\&quot;&quot;,      &quot;interactive&quot;: true    &#125;,    &#123;      &quot;name&quot;: &quot;Run in cmd&quot;,      &quot;shell_cmd&quot;: &quot;g++ -fexec-charset=GBK \\&quot;$&#123;file&#125;\\&quot; -o \\&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\\&quot; &amp;&amp; start cmd /c \\&quot;\\&quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;\\&quot; &amp; pause\\&quot;&quot;    &#125;  ]&#125;\n关键配置解析：\n\n-fexec-charset=GBK: 这是一个非常重要的参数！Windows 的 CMD 窗口默认编码是 GBK，而 Sublime Text 默认是 UTF-8。如果不加这个参数，编译出的程序在 CMD 中运行时，中文会显示为乱码。该参数告诉编译器：请生成一个运行时输出 GBK 字符的 exe 文件。\n\n4. 运行使用 Ctrl + Shift + B 选择 C++ Single File - Run in cmd，即可体验完美的 C++ 编译运行环境。\n","categories":["开发环境","Windows"],"tags":["Sublime Text"]},{"title":"WSL2 全方位指南：安装、配置、迁移与网络优化","url":"/posts/ce55e54a.html","content":"借助适用于 Linux 的 Windows 子系统（WSL2），开发人员可以在 Windows 计算机上直接运行 GNU/Linux 环境（包括大多数命令行工具、实用工具和应用程序），且不会产生传统虚拟机或双启动设置的开销。\n\n官方文档参考：Microsoft Learn - 安装 WSL\n\n基础：开启 WSL 功能方法一：命令行一键安装（推荐）对于较新的 Windows 10 (2004+) 或 Windows 11，只需以 管理员身份 打开 PowerShell 并输入：\nwsl --install\n此命令将自动启用所需的可选组件，下载最新的 Linux 内核，将 WSL 2 设置为默认值，并安装 Ubuntu 发行版。\n方法二：手动启用如果你更习惯图形界面，可以在「Windows 功能」中手动开启。\n\nWin + s 搜索 “启用或关闭 Windows 功能”。\n勾选 “适用于 Linux 的 Windows 子系统”。\n点击确定并重启计算机。\n\n重启后，打开 PowerShell 输入 wsl -v 验证版本：\n\n注：如果 wsl -v 报错，提示无法解析命令，可能需要先执行 wsl --update 进行内核更新。\n\n管理：系统与更新常用管理命令 点击查看常用命令速查表 \n              \n              描述命令检查更新wsl --update查看在线可用系统wsl --list --online (或 wsl -l -o)查看已安装系统wsl --list --verbose (或 wsl -l -v)关闭所有系统wsl --shutdown停止系统wsl --terminate &lt;DistroName&gt;注销(删除)系统wsl --unregister &lt;DistroName&gt;导出系统wsl --export &lt;DistroName&gt; &lt;FileName&gt;导入系统wsl --import &lt;DistroName&gt; &lt;InstallLocation&gt; &lt;FileName&gt;FileName：默认为 .tar 格式。更多命令：基本 WSL 命令\n              \n            \n安装 Ubuntu\n查看可用列表：\n wsl --list --online\n\n安装指定版本：\n wsl --install Ubuntu\n\n设置默认系统（如果你安装了多个发行版）：\n wsl --set-default Ubuntu\n\n\n启动系统\n默认系统：直接在命令行输入 wsl。\n指定系统：输入 wsl -d &lt;发行版名称&gt;，例如 wsl -d Ubuntu。\n\n进阶：存储位置迁移WSL2 安装的 Linux 系统默认存储在 C 盘（%LOCALAPPDATA%\\Packages 下）。随着开发环境的膨胀，C 盘空间可能告急。我们可以将其导出并迁移到其他磁盘。\n操作步骤：\n\n停止 WSL 服务：\n wsl --shutdown\n\n导出系统备份：\n # 创建临时目录mkdir D:\\tmp# 导出 Ubuntu 到 tar 文件wsl --export Ubuntu D:\\tmp\\Ubuntu.tar\n\n注销当前系统（注意：这会删除 C 盘的原有系统）：\n wsl --unregister Ubuntu\n\n导入到新位置：\n # 创建新的存储目录mkdir D:\\WslDistro# 导入系统wsl --import Ubuntu D:\\WslDistro D:\\tmp\\Ubuntu.tar\n\n\n\n注意：用户身份重置问题使用 --import 恢复的系统，默认登录用户会变回 root。如果需要恢复默认登录为你的普通用户（例如 gabriel），\n\n需要在 Ubuntu 内部创建或修改 /etc/wsl.conf 文件（见下文配置）\n或者使用 Ubuntu config --default-user gabriel 命令设置默认用户\n\n\n配置：环境隔离与网络环境变量独立默认情况下，WSL 会继承 Windows 的 PATH 环境变量（例如你可以直接在 Linux 里调用 notepad.exe）。但这可能导致 PATH 变量过长或命令冲突。\n若需隔离环境，请进入 Ubuntu 系统，编辑 /etc/wsl.conf：\nsudo vim /etc/wsl.conf\n添加以下内容：\n[boot]systemd=true[user]# 确保这里填写你迁移前创建的用户名，否则导入后默认是 rootdefault=gabriel[interop]# 禁止将 Windows PATH 添加到 WSL 中appendWindowsPath=false\n应用宿主机代理 (Mirrored 模式)在旧版 WSL2 中，Linux 子系统拥有独立的虚拟网卡，导致无法直接共享 Windows 的 VPN 代理，也难以访问局域网设备。\nWindows 11 (22H2 及以上) 引入了 Mirrored (镜像) 网络模式，完美解决了这个问题。\n方法一：使用 GUI 设置（推荐）在 Windows 【开始】 菜单中找到 【WSL Settings】 应用，将网络模式修改为 Mirrored：\n方法二：使用配置文件（通用）如果找不到 GUI 设置，可以直接修改全局配置文件。在 Windows 用户主目录（C:\\Users\\&lt;你的用户名&gt;\\）下新建或编辑 .wslconfig 文件：\n[wsl2]networkingMode=mirrored\n生效设置：配置修改后，必须完全重启 WSL 才能生效：\nwsl --shutdown\n开启 Mirrored 模式后，WSL2 将直接复用宿主机的网络接口，此时宿主机的代理软件（如 Clash/V2Ray）开启 “TUN 模式” 或 “系统代理” 后，WSL2 即可直接通过代理联网，无需额外配置环境变量。\n","categories":["开发环境","Windows"],"tags":["WSL","Ubuntu"]},{"title":"Windows 终端改造计划：PowerShell 7 + Oh My Posh 极速美化","url":"/posts/7e710df8.html","content":"长期以来，Windows 默认的 PowerShell 5.1 无论是性能还是颜值都略显过时。通过 PowerShell 7 (跨平台核心版) 搭配 Windows Terminal 和 Oh My Posh，我们可以获得媲美 macOS/Linux 的终端体验。\n第一步：配置容器 (Windows Terminal)Windows 11 已默认预装 Windows Terminal。这是一个现代化的终端宿主应用。\n\n快速启动：Win + R 输入 wt。\n基础设置：建议在 设置 中开启以下功能：\n交互：自动将所选内容复制到剪贴板\n外观：在选项卡行中使用亚克力材料\n\n\n\n第二步：升级核心 (PowerShell 7)PowerShell 7 是基于 .NET Core 构建的跨平台版本，比系统自带的 5.1 启动更快，功能更强。\n\n官方文档：在 Windows 上安装 PowerShell\n\n1. 使用 winget 安装推荐使用微软官方包管理器 winget 进行安装。\n常见报错处理：如果提示找不到 winget 命令，请在旧版 PowerShell 中执行以下命令重置应用安装程序：Get-AppxPackage Microsoft.DesktopAppInstaller | Reset-AppxPackage\n\n执行安装命令：\n# 搜索版本winget search Microsoft.PowerShell# 安装稳定版winget install --id Microsoft.PowerShell\n2. 验证与集成安装完成后，程序位于 C:/Program Files/PowerShell/7/。\n打开 Windows Terminal -> 设置 -> 打开 JSON 文件。在 profiles -> list 数组中，添加以下配置块：\n&#123;    &quot;guid&quot;: &quot;&#123;36c5dc75-0ca3-42b8-881d-247330cd4477&#125;&quot;,     &quot;name&quot;: &quot;PowerShell 7.5&quot;,    &quot;commandline&quot;: &quot;C:\\\\Program Files\\\\PowerShell\\\\7\\\\pwsh.exe&quot;,    &quot;icon&quot;: &quot;C:\\\\Program Files\\\\PowerShell\\\\7\\\\assets\\\\Powershell_black.ico&quot;,    &quot;startingDirectory&quot;: &quot;%USERPROFILE%&quot;&#125;\n第三步：注入灵魂 (Oh My Posh)Oh My Posh 是一个全平台的终端提示符自定义引擎，它能让你的路径显示包含 Git 状态、执行时间、内存占用等信息。\n1. 安装程序继续使用 winget 安装（建议开启全局梯子，下载速度会快很多）：\nwinget install --id JanDeDobbeleer.OhMyPosh\n2. 字体配置 (关键步骤)Oh My Posh 的漂亮图标依赖于 Nerd Fonts 字体。如果没有正确安装字体，终端会出现大量乱码方框。\n\n推荐：Meslo LGM Nerd Font\n下载解压后，全选 .ttf 文件，右键 -> 安装。\n打开 Windows Terminal 设置 -> 默认值 -> 外观 -> 字体，选择 “MesloLGM Nerd Font”。\n\n 字体安装避坑指南（文件占用问题） \n              \n              若使用官方提供的 oh-my-posh font install 命令，有时会将字体安装到用户目录 (~\\AppData\\Local\\Microsoft\\Windows\\Fonts)，导致被系统核心进程 vcshost.exe 锁定，无法删除或覆盖。解决方案：Win + R 输入 regedit。定位到：HKEY_CURRENT_USER\\Software\\Microsoft\\Windows NT\\CurrentVersion\\Fonts。删除对应的字体注册表项。重启电脑后即可手动删除文件。\n              \n            \n3. 应用主题\n主题在线预览：https://ohmyposh.dev/docs/themes/\n\n我们需要修改 PowerShell 的配置文件 ($PROFILE) 来启用 Oh My Posh。\n在 PowerShell 7 中输入 notepad $PROFILE 打开（如果提示不存在，选择创建文件）。\n写入以下内容：\n# === 1. 环境变量与代理 (根据需要开启) ===# $env:HTTP_PROXY = &quot;http://127.0.0.1:10808&quot;# $env:HTTPS_PROXY = &quot;http://127.0.0.1:10808&quot;# $env:ALL_PROXY = &quot;socks5://127.0.0.1:10808&quot;# === 2. 启动 Oh My Posh ===# 在线主题预览：https://ohmyposh.dev/docs/themes/oh-my-posh init pwsh --config &#x27;https://github.com/JanDeDobbeleer/oh-my-posh/blob/main/themes/1_shell.omp.json&#x27; | Invoke-Expression\n保存后，在终端执行 .$PROFILE 刷新配置，即可看到效果。\n第四步：功能增强 (插件推荐)光好看还不够，我们还需要它好用。推荐安装以下两个模块：\n1. Terminal-Icons (图标增强)让 ls 或 dir 命令显示文件的图标（如 Docker 显示鲸鱼，JS 显示 JS 图标）。\n\n安装模块：\n  Install-Module -Name Terminal-Icons -Repository PSGallery -Force\n\n配置：\n  .$PROFILEImport-Module -Name Terminal-Icons\n\n\n2. ZLocation (历史路径导航)允许你快速导航到历史路径。\nInstall-Module -Name ZLocation -Force\n使用方法：（无需配置）\n\n跳转：z doc（跳转到包含 doc 的常用目录）\n后退：z - (跳回上一个目录)\n\n3. PSReadLine (自动补全)提供类似 Zsh 的历史命令预测和自动补全功能。\n\n安装模块：\n  Install-Module -Name PSReadLine -AllowPrerelease -Scope CurrentUser -Force -SkipPublisherCheck\n\n配置：\n  .$PROFILESet-PSReadLineOption -PredictionSource History   # 设置预测源为历史记录Set-PSReadLineOption -PredictionViewStyle InlineView # 设置预测显示风格 ( InlineView / ListView )Set-PSReadLineOption -EditMode Windows           # 设置键位模式\n\n\n4. PSFzf (模糊搜索)这是命令行界的“Spotlight”或“Everything”。允许你使用模糊搜索快速找到文件或历史命令。配合 PSReadLine 使用简直是绝杀。\n\n安装模块：\n  # 先安装 fzf 底层工具winget install junegunn.fzfInstall-Module -Name PSFzf -Force\n\n配置：\n  Set-PsFzfOption -PSReadlineChordProvider &#x27;Ctrl+t&#x27; -PSReadlineChordReverseHistory &#x27;Ctrl+r&#x27;\n\n使用方法：按下 Ctrl + T 键，当前目录下快速搜索文件。按下 Ctrl + R 键，快速搜索历史命令。\n\n\n最终配置文件# === 1. 环境变量与代理 (根据需要开启) ===# $env:HTTP_PROXY = &quot;http://127.0.0.1:10808&quot;# $env:HTTPS_PROXY = &quot;http://127.0.0.1:10808&quot;# $env:ALL_PROXY = &quot;socks5://127.0.0.1:10808&quot;# === 2. 启动 Oh My Posh ===# 在线主题预览：https://ohmyposh.dev/docs/themes/oh-my-posh init pwsh --config &#x27;https://github.com/JanDeDobbeleer/oh-my-posh/blob/main/themes/1_shell.omp.json&#x27; | Invoke-Expression# === 3.1 引入图标模块 ===Import-Module -Name Terminal-Icons# === 3.3 配置 PSReadLine ===Set-PSReadLineOption -PredictionSource History   # 设置预测源为历史记录Set-PSReadLineOption -PredictionViewStyle InlineView # 设置预测显示风格 ( InlineView / ListView )Set-PSReadLineOption -EditMode Windows           # 设置键位模式# === 3.4 配置 PSFzf ===Set-PsFzfOption -PSReadlineChordProvider &#x27;Ctrl+t&#x27; -PSReadlineChordReverseHistory &#x27;Ctrl+r&#x27;\n现在，你的 Windows 终端不仅拥有了黑客级的颜值，更拥有了极高的生产力。\n","categories":["开发环境","Windows"],"tags":["效率工具","PowerShell","Oh My Posh","Windows Terminal"]},{"title":"Windows 终端终极进化：Git + Zsh + Oh My Zsh 全攻略","url":"/posts/59e74bb9.html","content":"Windows 原生的 CMD 和 PowerShell 在体验上与 Unix/Linux 存在差距。本文将利用 Git Bash 作为基础，植入 Zsh shell，并结合 Windows Terminal 和 Oh My Zsh，打造一套既美观又高效的终端环境。\n第一步：安装 Git (基础环境)Git Bash 是 Windows 上最轻量的类 Unix 环境，我们将以它为宿主运行 Zsh。\n1. 下载与安装\n官方下载：git-scm.com/downloads\n\n下载后运行安装程序，建议一路保持默认 (Next) 即可完成安装。\n验证安装：打开 CMD 或 PowerShell，输入以下命令：\ngit -v# 输出例如：git version 2.52.0.windows.1\n2. 基础配置安装完成后，配置你的身份信息（用于提交代码）：\ngit config --global user.name &quot;你的用户名&quot;git config --global user.email &quot;你的邮箱地址&quot;# 推荐：防止 Windows/Linux 换行符混乱git config --global core.autocrlf true\n第二步：植入 Zsh ShellGit Bash 默认使用 Bash，我们需要手动下载并“植入” Zsh。\n1. 下载 Zsh 包我们需要从 MSYS2 仓库下载 Zsh 的二进制包。\n\n下载地址：MSYS2 Packages - Zsh\n\n在 File 处，点击链接下载，得到 zsh-5.x-x-x86_64.pkg.zst 的文件。\n2. 解压并安装注意： 此步骤需要管理员权限，且解压过程需要细心。\n\n\n解压文件：下载的文件通常需要解压两次（先解压 .zst ，再解压内部的 .pkg），直到看到 usr、etc 等文件夹。\n合并文件：将解压出来的所有文件（主要是 usr 目录下的内容），覆盖复制到 Git 的安装目录中。\nGit 默认安装路径：C:\\Program Files\\Git\n操作逻辑：将解压包 usr/ 下的所有文件 -> 复制到 -> C:\\Program Files\\Git\\usr\\ 下合并。\n\n\n\n3. 激活 Zsh打开 Git Bash，输入 zsh。如果出现配置向导，说明安装成功。按 0 退出向导（我们会用 Oh My Zsh 来生成配置文件）。\n4. 设置默认启动为了让 Git Bash 打开时自动进入 Zsh，需编辑 Bash 配置文件。\n在终端执行：notepad ~/.bashrc，填入以下内容：\nif [ -t 1 ]; then  exec zshfi\n第三步：安装 Oh My ZshOh My Zsh 是 Zsh 的配置框架，提供了丰富的主题和插件。\nsh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;\n看到大大的 “Oh My Zsh” 字符画，即表示安装成功。\n第四步：集成到 Windows Terminal (推荐)不要直接使用 Git Bash 的窗口，Windows Terminal 才是现代化的选择。\n1. 安装字体 (关键)Zsh 的许多主题依赖特殊图标。请下载并安装 Nerd Fonts。\n\n推荐：JetBrainsMono Nerd Font\n下载解压后，全选 .ttf 文件，右键 -> 安装。\n\n2. 添加配置文件打开 Windows Terminal -> 设置 -> 打开 JSON 文件。在 profiles -> list 数组中，添加以下配置块：\n&#123;    &quot;guid&quot;: &quot;&#123;2ece5bfe-50ed-5f3a-ab87-5cd4baafed2b&#125;&quot;,     &quot;name&quot;: &quot;Git Bash&quot;,    &quot;commandline&quot;: &quot;C:\\\\Program Files\\\\Git\\\\bin\\\\bash.exe -i -l&quot;,    &quot;icon&quot;: &quot;C:\\\\Program Files\\\\Git\\\\mingw64\\\\share\\\\git\\\\git-for-windows.ico&quot;,    &quot;startingDirectory&quot;: &quot;%USERPROFILE%&quot;,    &quot;font&quot;:     &#123;        &quot;face&quot;: &quot;JetBrainsMono NF&quot;    &#125;,    &quot;opacity&quot;: 90,    &quot;useAcrylic&quot;: true&#125;\n注意：请根据你的实际安装路径调整 commandline 和 icon。\n第五步：插件与美化编辑 Zsh 配置文件：notepad ~/.zshrc。\n1. 修改主题找到 ZSH_THEME 字段。\n\n默认：robbyrussell\n推荐：cloud (炫酷，需要 Nerd Fonts)\n在线主题预览：https://github.com/ohmyzsh/ohmyzsh/wiki/Themes\n\n\nZSH_THEME=&quot;cloud&quot;\n2. 安装高效率插件我们安装两个最神器的插件：自动建议 和 语法高亮。\n下载插件：\n# 进入插件目录cd ~/.oh-my-zsh/custom/plugins# 下载 zsh-autosuggestions (自动补全建议)git clone https://github.com/zsh-users/zsh-autosuggestions# 下载 zsh-syntax-highlighting (语法高亮)git clone https://github.com/zsh-users/zsh-syntax-highlighting\n启用插件：\n修改 ~/.zshrc 中的 plugins 字段（注意：括号内是空格分隔）：\nplugins=(git zsh-autosuggestions zsh-syntax-highlighting)\n3. 配置网络代理 (可选)如果你在拉取代码时网络不畅，可以在 ~/.zshrc 末尾添加代理别名：\n 点击展开代理配置代码 \n              \n              # === 代理设置 ===# 请修改为你的代理端口PROXY_HTTP=&quot;http://127.0.0.1:10808&quot;PROXY_SOCKS=&quot;socks5://127.0.0.1:10808&quot;proxy_on() &#123;  export http_proxy=&quot;$PROXY_HTTP&quot;  export https_proxy=&quot;$PROXY_HTTP&quot;  export all_proxy=&quot;$PROXY_SOCKS&quot;  echo &quot;🌐 Proxy ON: $PROXY_HTTP&quot;&#125;proxy_off() &#123;  unset http_proxy https_proxy all_proxy  echo &quot;❌ Proxy OFF&quot;&#125;proxy_status() &#123;  if [[ -n &quot;$http_proxy&quot; ]]; then    echo &quot;✅ Proxy ON ($PROXY_HTTP)&quot;  else    echo &quot;🚫 Proxy OFF&quot;  fi&#125;# 默认开启（可选）proxy_on\n              \n            \n最后，执行 source ~/.zshrc 让所有配置生效。现在，尽情享受你的 Windows 终端吧！\n","categories":["开发环境","Windows"],"tags":["效率工具","Windows Terminal","Git","Zsh","Oh My Zsh"]},{"title":"打造免费极速图床：PicGo + GitHub + jsDelivr 全流程指南","url":"/posts/c17ea3c3.html","content":"在 Markdown 写作或博客搭建中，图片的存储和引用一直是个痛点。将图片直接存放在本地会导致分享困难，而商业图床又面临收费或跑路的风险。\n本文将带你搭建一套 “GitHub (存储) + jsDelivr (加速) + PicGo (上传工具)” 的黄金组合，实现免费、稳定且全球访问极速的图床服务。\n第一步：创建 GitHub 仓库所谓的“图床”，本质上就是一个 Public (公开) 的 GitHub 仓库。\n\n登录 GitHub，点击右上角的 + 号，选择 New repository。\nRepository name：填写仓库名（例如：pic.cloud）。\nVisibility：必须选择 Public（私有仓库无法通过 CDN 访问）。\n点击 Create repository。\n\n此时，你已经拥有了一个云端存储空间。虽然你可以手动上传图片，但为了效率，我们需要工具辅助。\n第二步：获取 Access Token为了让 PicGo 有权限向你的仓库上传文件，我们需要生成一个访问令牌（Token）。\n\n点击 GitHub 头像 -&gt; Settings。\n在左侧菜单最下方找到 Developer settings -&gt; Personal access tokens -&gt; Tokens (classic)。\n点击右上角的 Generate new token (classic)。\n配置 Token：\nNote (名称)：随意填写，如 PicGo。\nExpiration (过期时间)：建议选择 No expiration (永不过期)，以免频繁更换。\nScopes (权限)：必须勾选 repo，这包含了上传文件所需的权限。\n\n\n点击底部的 Generate token。\n\n\n⚠️ 重要提示：生成的 Token 只会显示一次！请务必立即复制并保存到安全的地方。如果遗忘，只能重新生成。\n\n第三步：安装与配置 PicGoPicGo 是一款优秀的开源图片上传工具。\n1. 安装PicGo 的安装非常简单，直接从 GitHub Releases 下载最新版安装包，并双击安装。\n2. 配置 GitHub 图床打开 PicGo 主界面，进入 图床设置 -&gt; GitHub。如果侧边栏没有 GitHub，请在“PicGo设置”中勾选“显示GitHub”。\n点击 编辑（或新建配置），填入以下信息：\n\n\n\n\n字段\n说明与示例\n是否必填\n\n\n\n\n图床配置名\n随意填写，用于区分不同配置。例：pic.cloud\n是\n\n\n设定仓库名\n格式为 用户名/仓库名。例：lijiabao9/pic.cloud\n是\n\n\n设定分支名\n仓库的分支，新仓库默认为 main，旧仓库可能是 master。例：main\n是\n\n\n设定Token\n粘贴第二步中生成的 ghp_ 开头的字符串。\n是\n\n\n设定存储路径\n图片在仓库中的子目录，建议以 / 结尾。例：img/ 或 hexo/post/\n否\n\n\n设定自定义域名\n(关键) 配置 jsDelivr CDN 加速链接。格式：https://cdn.jsdelivr.net/gh/用户名/仓库名@分支名例：https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main\n否(强烈推荐)\n\n\n\n\n\n💡 关于自定义域名（CDN 加速）GitHub 的原始图片链接 (raw.githubusercontent.com) 在国内访问极不稳定。强烈建议配置 jsDelivr，格式严格遵循：https://cdn.jsdelivr.net/gh/【你的GitHub用户名】/【仓库名】@【分支名】\n\n点击 确定 并在列表中将其设置为 默认图床。\n第四步：极速工作流配置完成后，我们就可以体验行云流水的写作体验了。\n1. 快捷键上传推荐配合截图神器 Snipaste 使用：\n\n使用 Snipaste 截图 (F1) 并复制到剪贴板 (Ctrl + C)。\n使用 PicGo 快捷键上传（可在设置中修改为 Ctrl + Shift + G 顺手的键）。\nPicGo 上传成功后，会自动将 CDN 链接（Markdown 格式）写入剪贴板。\n在文章中直接粘贴 (Ctrl + V) 即可。\n\n2. 自动复制设置确保在 PicGo 设置 中开启了以下选项：\n\n[√] 时间戳重命名（可选，推荐开启，防止文件名冲突）\n[√] 上传后自动复制 URL\n\n3. 插件集成在 插件设置 中，搜索安装 webp 1.0.0 插件，启用该插件。上传图片时，此插件会自动将图片转为 .webp 格式。\n至此，一个免费、高速、稳定的图床环境就搭建完成了。\n","categories":["开发环境","Windows"],"tags":["GitHub","效率工具","PicGo","图床","Snipaste"]},{"title":"本地大模型终极指南：Ollama + Open WebUI 搭建私有 ChatGPT","url":"/posts/798e3348.html","content":"想要拥有一个完全隐私、离线可用且免费的 AI 助手？\n本文将带你通过 Ollama（后端模型服务）和 Open WebUI（前端交互界面）的组合，在本地电脑上搭建一套私有的 “ChatGPT”。\n第一部分：Ollama 环境搭建Ollama 是目前最流行的本地大模型运行工具，支持 Llama 3、Gemma、Mistral 等多种模型。\n1. 下载安装包前往官网下载 Windows 版本的安装程序：\n\n下载地址： https://ollama.com/download\n\n2. 进阶技巧：强制安装在 D 盘Ollama 默认会自动安装到 C 盘（用户目录）。为了节省系统盘空间，我们可以通过命令行参数强制修改安装位置。\n\n在 D 盘创建目标文件夹，例如：D:\\Ollama。\n将下载好的 OllamaSetup.exe 移动到该目录下。\n在该目录下打开命令提示符 (CMD) 或 PowerShell，执行以下命令：\n\nOllamaSetup.exe /DIR=D:\\Ollama\n安装完成后，Setup 引导程序即可删除。\n3. 配置环境变量为了在任意目录下都能使用 ollama 命令，我们需要检查或手动添加环境变量。\n\n操作： 将 Ollama 的安装目录（如 D:\\Ollama）添加到系统变量 PATH 中。\n\n4. 关键配置：修改模型存储路径大模型文件通常非常占用空间（几个 GB 到几十 GB 不等）。默认情况下，模型存储在 ~/.Ollama/models (C 盘)。\n打开 Ollama 的图形化界面，点击 Settings -&gt; Model location，修改模型存储路径为 D 盘的 D:\\Ollama\\models。\n5. 拉取并测试模型一切准备就绪，让我们运行第一个模型。你可以访问 Ollama 模型库 查看支持的模型列表。\n以 Google 最新的 gemma3 为例，在终端执行：\nollama run gemma3\n首次执行时，Ollama 会自动拉取模型文件。下载完成后，你就可以在终端直接与 AI 对话了。\n\n第二部分：Open WebUI 可视化界面搭建虽然终端可以使用 AI，但一个类似 ChatGPT 的网页界面能提供更好的体验（历史记录、Markdown 渲染、多模态支持）。我们将使用 Open WebUI。\n1. 环境依赖\nDocker Desktop：Open WebUI 基于 Docker 运行，请确保已安装 Docker。Docker Desktop 最佳实践：自定义安装路径与镜像加速配置\nOllama：确保上述 Ollama 服务已在运行。默认会监听 127.0.0.1:11434，请确保该端口未被其他程序占用。\n\n2. 部署 Open WebUI使用 Docker 一键部署。在终端执行以下命令：\ndocker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main\n命令详解：\n\n-p 3000:8080: 将容器的 8080 端口映射到本地的 3000 端口。\n--add-host=host.docker.internal:host-gateway: 关键参数，允许 Docker 容器内部访问宿主机（也就是你的 Windows 电脑）上的 Ollama 服务。\n-v open-webui:/app/backend/data: 数据持久化，确保你的聊天记录不会因重启容器而丢失。\n--restart always: 设置开机自启。\n\n3. 开始使用\n访问界面：打开浏览器，访问 http://localhost:3000。\n创建管理员账号：首次进入系统，界面会提示注册账号。\n注：这是完全运行在你本地数据库的账号，数据不会上传到云端。\n\n\n\n注册并登录后，你会看到一个熟悉的聊天界面。Open WebUI 会自动检测本地运行的 Ollama 模型。选择刚才下载的 gemma3，即可开始畅聊！\n\n至此，你已经拥有了一套完全属于自己的、无需联网（模型下载后）、无隐私泄露风险的 AI 生产力工具。\n","categories":["开发环境","Windows"],"tags":["Docker","Ollama","Open WebUI"]},{"title":"从零开始：域名购买、Cloudflare 托管与 Nginx 自动化 HTTPS 配置全指南","url":"/posts/e94f4538.html","content":"搭建一个安全的网站，从拥有一个域名开始。本文将带你走完：域名购买 -&gt; 接入 Cloudflare CDN -&gt; 服务器获取 SSL 证书 -&gt; Nginx 反向代理 的全套流程。\n第一步：域名购买 (SpaceShip)推荐使用 SpaceShip，它是 Namecheap 旗下的新平台，界面现代且价格透明。\n1. 选购技巧\n搜索策略：在首页搜索 6位数字 的 .xyz 域名（例如 131495.xyz）。\n价格陷阱：确保首年价格显示为 $0.67 左右。\n支付方式：支持 Visa/MasterCard 信用卡、支付宝等。\n\n注意续费价格：购买前请留意 Renewal Price。建议在结账时直接点击 Extend subscription，勾选 9 years，一次性买断 10 年，避免后续涨价烦恼。\n\n购买完成后，点击右上角 Launchpad -&gt; Domain Manager 即可看到你的域名。\n\n第二步：托管到 Cloudflare国内域名解析需要实名认证备案，且解析速度和功能不如 Cloudflare 强大。我们将 DNS 解析权移交给 Cloudflare。\n1. 接入站点\n登录 Cloudflare，点击 加入域。\n输入你的域名 131495.xyz，勾选 快速扫描 DNS 记录，点击 继续。\n选择 Free (免费计划)。\n\n2. 修改 NameServer (NS)Cloudflare 会分配两个 NS 地址（例如 xxxx.ns.cloudflare.com）。\n\n回到 SpaceShip 的 Domain Manager，点击 你的域名。\n找到 NameServers &amp; DNS 选项，点击 Nameservers 的 change。\n选择 Custom nameservers，填入 Cloudflare 提供的两个地址并保存。\n\n等待生效（通常几分钟到几小时），收到 Cloudflare 的邮件即代表托管成功。\n3. DNS 记录与代理状态在 Cloudflare 的域名管理页面，在 DNS -&gt; 记录 中配置解析。\n\nA 记录：将域名指向你服务器的 IPv4 地址。\nCNAME 记录：用于别名解析。\n\n关于“小黄云”（代理状态）：\n\n开启 (橙云)：流量经过 Cloudflare CDN。隐藏真实 IP，提供防护，支持 SSL。\n关闭 (灰云)：仅作为 DNS 解析。直连服务器，暴露真实 IP。\n\n\n4. 推荐的 Cloudflare 优化配置开启橙云代理后，建议调整以下设置以提升性能和安全：\n\nSSL/TLS -&gt; 概述：设置为 完全(严格) / Full (Strict)（最安全，要求源服务器有有效证书）\n安全性 -&gt; 设置：开启 自动程序攻击模式，连续脚本监视\n速度 -&gt; 配置：点击 建议 里的 启用所有可用配置，Cloudflare Fonts，Early Hints，0-RTT 连接恢复\n缓存 -&gt; 配置：CSAM 扫描工具，Crawler Hints，Always Online™\n规则 -&gt; 设置：开启以下功能\n添加 TLS 客户端身份验证标头\n添加访问者位置标头\n删除访问者 IP 标头\n添加泄露凭据检查标头\n删除 “X-Powered-By” 标头\n添加安全性标头\nURL 规范化 -&gt; 标准化传入到源服务器的 URL\n\n\n网络：开启 gRPC\nScrape Shiedld：Hotlink保护\n\n\n第三步：获取公开可信证书 (ACME)虽然 Cloudflare 提供源服务器证书，但为了通用性和灵活性（比如后续想切回灰云直连），推荐使用 acme.sh 申请 Let’s Encrypt 的泛域名证书。\n1. 获取 Cloudflare API Token我们需要授权 acme.sh 修改 Cloudflare 的 DNS 记录来完成域名验证。\n\n首页 -&gt; 管理账号 -&gt; 账号 API 令牌 -&gt; 创建令牌。\n使用模板：编辑区域 DNS。\n令牌名称：任意填写，比如 ACME 证书续期\n权限：选择 区域 -&gt; DSN -&gt; 编辑\n区域资源：选择 包括 -&gt; 特定区域 -&gt; 你的域名\n客户端IP地址筛选：（可选）可设置ip黑白名单\nTTL：（可选）可配置令牌有效期\n\n\n生成并复制 Token。\n\n2. 安装 acme.sh登录服务器，执行安装：\n# 安装依赖apt update &amp;&amp; apt install -y curl socat# 安装 acme.shcurl https://get.acme.sh | sh\n3. 配置环境变量将 API Token 导入环境变量，vi ~/.bashrc 添加：\n# 注意：CF_Token 是 Cloudflare 专用的变量名，不可更改export CF_Token=&quot;你的_API_Token_xxxxxxxxxxxxxx&quot;\n保存退出后，重新启动终端。\n4. 申请泛域名证书我们申请 ECC 算法的证书（更小更快），并同时包含主域名和泛域名：\n# 切换默认 CA 为 Let&#x27;s Encryptacme.sh --set-default-ca --server letsencrypt# 申请证书 (自动使用 CF_Token 进行 DNS-01 验证)acme.sh --issue --dns dns_cf -d &quot;131495.xyz&quot; -d &quot;*.131495.xyz&quot;\n成功后，证书文件会保存在 ~/.acme.sh/131495.xyz_ecc/ 目录下。\n5. 安装证书切勿直接使用 .acme.sh 目录下的文件。应使用 --install-cert 命令将证书复制到指定位置，并配置自动重载 Nginx。\n# 创建存放目录mkdir -p /cert/acme_131495.xyz/# 安装证书并指定重载命令acme.sh --install-cert -d &quot;131495.xyz&quot; \\  --cert-file       /cert/acme_131495.xyz/cert.pem \\  --key-file        /cert/acme_131495.xyz/key.pem \\  --fullchain-file  /cert/acme_131495.xyz/fullchain.pem \\  --ca-file         /cert/acme_131495.xyz/ca.cer \\  --reloadcmd       &quot;systemctl reload nginx&quot;\n\n第四步：Nginx 配置 HTTPS证书准备就绪，接下来配置 Nginx 反向代理。\n1. 安装 Nginxapt install nginx -y\n2. 默认配置修改修改配置文件：vi /etc/nginx/nginx.conf，\n\n增加默认 SSL/TLS 证书配置\n自定义的日志格式 proxy_json\n开启 gzip 配置\n\nnginx.confhttp &#123;        ##        # SSL Settings        ##        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE        ssl_prefer_server_ciphers on;                # 加密套件        ssl_ciphers HIGH:!aNULL:!MD5;                # 配置证书地址        ssl_certificate /cert/acme_131495.xyz/cert.pem;        ssl_certificate_key /cert/acme_131495.xyz/key.pem;                ##        # Logging Settings        ##                # 日志格式自定义        log_format proxy_json escape=json           &#x27;&#123;&#x27;            &#x27;&quot;timestamp&quot;: &quot;$time_iso8601&quot;, &#x27;            &#x27;&quot;request_id&quot;: &quot;$request_id&quot;, &#x27;            &#x27;&quot;client_ip&quot;: &quot;$remote_addr&quot;, &#x27;            &#x27;&quot;vhost&quot;: &quot;$host&quot;, &#x27;            &#x27;&quot;method&quot;: &quot;$request_method&quot;, &#x27;            &#x27;&quot;uri&quot;: &quot;$uri&quot;, &#x27;            &#x27;&quot;status&quot;: $status, &#x27;            &#x27;&quot;upstream&quot;: &#123;&#x27;                &#x27;&quot;addr&quot;: &quot;$upstream_addr&quot;, &#x27;                &#x27;&quot;status&quot;: &quot;$upstream_status&quot;, &#x27;                &#x27;&quot;response_time&quot;: &quot;$upstream_response_time&quot;, &#x27;                &#x27;&quot;connect_time&quot;: &quot;$upstream_connect_time&quot;&#x27;            &#x27;&#125;,&#x27;            &#x27;&quot;request_time&quot;: &quot;$request_time&quot;, &#x27;            &#x27;&quot;headers&quot;: &#123;&#x27;                &#x27;&quot;user_agent&quot;: &quot;$http_user_agent&quot;, &#x27;                &#x27;&quot;x_forwarded_for&quot;: &quot;$proxy_add_x_forwarded_for&quot;, &#x27;                &#x27;&quot;x_forwarded_proto&quot;: &quot;$scheme&quot;&#x27;            &#x27;&#125;&#x27;          &#x27;&#125;&#x27;;                  access_log /var/log/nginx/access.log;        ##        # Gzip Settings        ##        gzip on;        gzip_vary on;        gzip_proxied any;        gzip_comp_level 6;        gzip_buffers 16 8k;        gzip_http_version 1.1;        gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript&#125;\n修改配置文件：vi /etc/nginx/sites-available/default，强制使用 HTTPS：\ndefaultserver &#123;    listen 80 default_server;    listen [::]:80 default_server;        server_name _;        return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl default_server;    listen [::]:443 ssl default_server;        server_name _;    # 静态文件目录    root /var/www/html;    index index.html index.htm index.nginx-debian.html;    location / &#123;        try_files $uri $uri/ =404;    &#125;&#125;\n3. 准备 proxy_params为了让后端应用获取客户端真实 IP，建议创建一个代理参数文件：vi /etc/nginx/proxy_params\nproxy_paramsproxy_set_header Host $host;proxy_set_header X-Real-IP $remote_addr;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;proxy_set_header X-Forwarded-Proto $scheme;\n对应的 websocket 协议的代理参数文件：vi /etc/nginx/proxy_params_ws\nproxy_params_wsproxy_set_header Host $host;proxy_set_header X-Real-IP $remote_addr;proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;proxy_set_header X-Forwarded-Proto $scheme;proxy_http_version 1.1;proxy_set_header Upgrade $http_upgrade;proxy_set_header Connection &quot;upgrade&quot;;\n4. 配置站点 (虚拟主机)创建配置文件：vi /etc/nginx/sites-available/example.131495.xyz\nexample.131495.xyzserver &#123;    listen 443 ssl;    listen [::]:443 ssl;        # TODO: 修改为对应的子域名    server_name example.131495.xyz;        # TODO: 独立的日志配置    access_log /var/log/nginx/example.access.log proxy_json;    error_log /var/log/nginx/example.error.log;    # 反向代理设置    location / &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:8080;                # 代理参数        include /etc/nginx/proxy_params;    &#125;&#125;\n4. 启用配置并重启# 创建软链接启用站点ln -s /etc/nginx/sites-available/example.131495.xyz /etc/nginx/sites-enabled/# 检查配置语法nginx -t# 重启服务systemctl reload nginx\n\n至此，你的网站已经拥有了安全的 HTTPS 访问能力，并且证书会由 acme.sh 自动续期，Cloudflare 也会提供全球 CDN 加速与防护。\n","categories":["开发环境","网站运维"],"tags":["Nginx","Cloudflare","Domain","ACME","HTTPS"]},{"title":"Docker 核心语法速查：从容器管理到编排实战","url":"/posts/bdbe2a9.html","content":"Docker 是现代开发必不可少的工具。本文整理了高频使用的核心语法与实战案例，助你快速查阅。\n快速上手：启动 MySQL 容器这是最经典的入门案例，涵盖了端口映射、环境变量和后台运行等核心参数。\ndocker run -d \\  --name mysql \\  --restart always \\  -p 3306:3306 \\  -v /root/mysql/data:/var/lib/mysql \\  --network my-net \\  -e TZ=Asia/Shanghai \\  -e MYSQL_ROOT_PASSWORD=123456 \\  mysql:8.0\n参数详解：\n\n\n\n\n参数\n含义\n说明\n\n\n\n\n-d\nDetached\n后台静默运行容器\n\n\n--name\nName\n指定容器名称，后续可通过名称操作容器\n\n\n--restart\nRestart\nalways 表示开机自启或崩溃后自动重启\n\n\n-p\nPublish\n端口映射，格式：宿主机端口:容器内端口\n\n\n-v\nVolumes\n数据卷挂载，格式：宿主机路径:容器内路径\n\n\n--network\nNetwork\n指定容器加入的网络\n\n\n-e\nEnvironment\n设置环境变量（如时区、密码），具体变量需查阅镜像文档\n\n\nmysql:8.0\nImage\n指定镜像名称与 Tag（版本），不写 Tag 默认为 latest\n\n\n\n\n容器生命周期管理\n 常用命令速查表 \n              \n              操作命令示例说明拉取镜像docker pull mysql从仓库拉取镜像查看镜像docker images  docker rmi mysql列出所有镜像、删除指定镜像本地管理docker save -o mysql.tar mysql  docker load -i mysql.tar导出镜像到 tar 文件、导入镜像查看容器docker ps  docker ps -a  docker rm -f mysql查看正在运行的容器、查看所有容器、删除容器管理容器docker stop mysql  docker start mysql  docker restart mysql优雅停止、启动、重启容器查看日志docker logs -f -n 100 mysql实时查看最后100行日志进入容器docker exec -it mysql bash进入容器内部终端\n              \n            \n数据持久化 (挂载)容器删除后，其内部产生的数据会默认丢失。为了保存数据，我们需要进行挂载。\n方式一：数据卷 (Volumes)由 Docker 自动管理，存储在宿主机的特定目录下（通常是 /var/lib/docker/volumes/），路径较深，不便直接修改。\n# 创建并挂载docker run -d --name nginx -p 80:80 -v html_vol:/usr/share/nginx/html nginx\n常用命令：\n\ndocker volume create vol_name：创建数据卷\ndocker volume ls：列出所有数据卷\ndocker volume prune：清理无主的数据卷\ndocker volume inspect vol_name：查看指定数据卷的信息\ndocker volume rm vol_name：删除指定的数据卷\n\n方式二：目录挂载 (Bind Mounts) 【推荐】直接将宿主机的 指定路径 映射到容器内，修改宿主机文件即可实时影响容器，非常适合开发调试和配置文件管理。\n以 MySQL 为例，挂载数据、配置和初始化脚本：\ndocker run -d \\  --name mysql \\  -p 3306:3306 \\  -e TZ=Asia/Shanghai \\  -e MYSQL_ROOT_PASSWORD=123 \\  -v /root/mysql/data:/var/lib/mysql \\  -v /root/mysql/conf:/etc/mysql/conf.d \\  -v /root/mysql/init:/docker-entrypoint-initdb.d \\  mysql\n\n注意：目录挂载必须使用 绝对路径 或以 ./ 开头的相对路径。\n\n容器网络默认情况下，容器使用 bridge 模式，IP 是动态分配的。\n为了方便容器间通信（例如后端连接数据库），推荐自定义网络。加入同一自定义网络的容器，可以直接通过容器名互相访问，无需关心 IP 变化。\n常用命令：\n\ndocker network create my-net：创建自定义网络\ndocker network connect my-net mysql：将容器加入网络\ndocker network disconnect my-net mysql：将容器从网络中移除\ndocker network ls：列出所有网络\ndocker network prune：清理无用的网络\ndocker network inspect my-net：查看指定网络的信息\ndocker network rm my-net：删除指定的网络\n\n实战用法：\n# 创建容器时，通过 --network 参数加入自定义网络，网络不存在会自动创建docker run -d --name mysql --network my-net mysqldocker run -d --name nginx --network my-net nginx# 此时 nginx 内部可以直接 ping mysql\n镜像构建 (Dockerfile)镜像是应用程序及其运行环境的只读模板。构建镜像就是将代码、运行时、库和配置打包在一起的过程。\nDocker 镜像采用分层存储结构：\n常用 Dockerfile 指令：\n构建示例：Java 应用\n\n编写 Dockerfile 文件：\n Dockerfile# 1. 基础镜像FROM openjdk:11.0-jre-buster# 2. 设定时区ENV TZ=Asia/ShanghaiRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone# 3. 拷贝 jar 包COPY docker-demo.jar /app.jar# 4. 启动命令ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;/app.jar&quot;]\n注意：当前目录下，此时应当包括 docker-demo.jar 和 Dockerfile 文件。\n\n执行构建命令：\n # -t 指定名称和标签，. 表示上下文路径为当前目录docker build -t docker-demo:1.0 .\n\n\n容器编排 (Docker Compose)对于包含多个服务（如 Nginx + Java + MySQL）的复杂应用，使用 docker run 逐个启动非常繁琐且难以管理依赖。\nDocker Compose 通过 docker-compose.yml 文件定义服务集群，实现一键启停。\n示例配置 (docker-compose.yml)：\ndocker-compose.ymlservices:  mysql:    image: mysql:8.0    container_name: mysql    ports:      - &quot;3306:3306&quot;    environment:      TZ: Asia/Shanghai      MYSQL_ROOT_PASSWORD: 123456    volumes:      - &quot;./mysql/conf:/etc/mysql/conf.d&quot;      - &quot;./mysql/data:/var/lib/mysql&quot;    networks:      - hm-net  hmall:    build:      context: .      dockerfile: Dockerfile    container_name: hmall    ports:      - &quot;8080:8080&quot;    networks:      - hm-net    depends_on:      - mysql  # 等待 mysql 启动后再启动  nginx:    image: nginx    container_name: nginx    ports:      - &quot;18080:18080&quot;      - &quot;18081:18081&quot;    volumes:      - &quot;./nginx/nginx.conf:/etc/nginx/nginx.conf&quot;      - &quot;./nginx/html:/usr/share/nginx/html&quot;    depends_on:      - hmall    networks:      - hm-netnetworks:  hm-net:    name: hmall\n常用编排命令：\n\n一键部署(后台运行)：docker compose up -d\n查看集群状态：docker compose ps\n查看集群日志：docker compose logs -f\n一键销毁：docker compose down (会移除容器和网络)\n\n","categories":["编程语言","DevOps"],"tags":["Docker","语法手册"]},{"title":"SpringBoot 整合 Knife4j：从入门到精通 Swagger 接口文档","url":"/posts/7687e76b.html","content":"在前后端分离的开发模式中，一份实时更新、可调试的接口文档至关重要。\nKnife4j 是基于 Swagger/OpenAPI 构建的增强型接口文档工具，它提供了更符合国人习惯的 UI 界面和强大的调试功能。\n\n访问地址：配置完成后，浏览器访问：http://localhost:8080/doc.html注：某些网络环境下，直接使用 IP (127.0.0.1) 可能会导致跨域或静态资源加载问题，推荐优先使用 localhost。\n\n\n场景一：Spring Boot 2 (OpenAPI 2)适用于老项目或 JDK 1.8 环境，底层基于 Swagger 2 (OpenAPI 2) 规范。\n1. 引入依赖在 pom.xml 中添加 Knife4j 的 starter 依赖：\npom.xml&lt;dependency&gt;    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;    &lt;artifactId&gt;knife4j-openapi2-spring-boot-starter&lt;/artifactId&gt;    &lt;version&gt;4.5.0&lt;/version&gt;&lt;/dependency&gt;\n2. 配置文件 (YAML)无需编写 Java 配置类，直接在 application.yml 中开启增强模式：\napplication.ymlknife4j:  enable: true  openapi:    title: &quot;项目接口文档&quot;    description: &quot;基于 Knife4j 的后端接口服务&quot;    email: &quot;contact@example.com&quot;    concat: &quot;开发者名称&quot;    version: v1.0.0    group:      default:        group-name: 默认分组        api-rule: package        # ⚠️ 注意：此处需修改为你项目的 Controller 包路径        api-rule-resources:          - com.example.demo.web\n3. 常用注解 (Swagger 2)\n\n\n\n作用目标\n注解\n说明\n\n\n\n\n类 (Controller)\n@Api(tags = &quot;用户模块&quot;)\n标记控制器类的功能说明\n\n\n方法 (Method)\n@ApiOperation(&quot;新增用户&quot;)\n标记具体接口的功能说明\n\n\n参数 (Param)\n@ApiParam(&quot;用户ID&quot;)\n标记接口参数的含义\n\n\n实体类 (DTO)\n@ApiModel(description = &quot;用户信息&quot;)\n标记数据模型类\n\n\n字段 (Field)\n@ApiModelProperty(&quot;用户名&quot;)\n标记模型中的字段含义\n\n\n\n\n\n场景二：Spring Boot 3 (OpenAPI 3)适用于新项目，要求 JDK >= 17，底层基于 SpringDoc (OpenAPI 3) 规范。\n1. 引入依赖注意：Spring Boot 3 使用 Jakarta EE 规范，必须引入 jakarta 版本的 starter。\npom.xml&lt;dependency&gt;    &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;    &lt;artifactId&gt;knife4j-openapi3-jakarta-spring-boot-starter&lt;/artifactId&gt;    &lt;version&gt;4.5.0&lt;/version&gt;&lt;/dependency&gt;\n2. 配置文件 (YAML)Spring Boot 3 中，配置主要围绕 springdoc 进行，knife4j 仅作为 UI 增强配置。\napplication.yml# 1. SpringDoc 基础配置springdoc:  swagger-ui:    path: /swagger-ui.html    tags-sorter: alpha      # 接口分组排序规则    operations-sorter: alpha # 接口方法排序规则  api-docs:    path: /v3/api-docs      # OpenAPI 描述文件路径  group-configs:    - group: &#x27;default&#x27;      paths-to-match: &#x27;/**&#x27;      # ⚠️ 注意：此处需修改为你项目的 Controller 包路径      packages-to-scan: com.example.demo.web# 2. Knife4j 增强配置knife4j:  enable: true  setting:    language: zh_cn         # 默认中文\n3. 常用注解 (OpenAPI 3)OpenAPI 3 的注解更加语义化，与 Swagger 2 有较大区别：\n\n\n\n\n作用目标\n注解\n说明\n\n\n\n\n类 (Controller)\n@Tag(name = &quot;用户模块&quot;)\n对应 Swagger2 的 @Api\n\n\n方法 (Method)\n@Operation(summary = &quot;新增用户&quot;)\n对应 Swagger2 的 @ApiOperation\n\n\n参数 (Param)\n@Parameter(description = &quot;用户ID&quot;)\n对应 Swagger2 的 @ApiParam\n\n\n实体类 (DTO)\n@Schema(description = &quot;用户信息&quot;)\n对应 Swagger2 的 @ApiModel\n\n\n字段 (Field)\n@Schema(description = &quot;用户名&quot;)\n对应 Swagger2 的 @ApiModelProperty\n\n\n\n\n\n附录：注解迁移对照表如果你正在将老项目从 Spring Boot 2 升级到 3，可以参考下图进行注解替换：\n总结：\n\nSB2 使用 io.swagger.annotations.* 包。\nSB3 使用 io.swagger.v3.oas.annotations.* 包。\n大体原则是：Api 变成了 Tag 或 Operation，Model 变成了 Schema。\n\n","categories":["编程语言","Java"],"tags":["SpringBoot","Swagger","Knife4j"]},{"title":"SpringBoot 整合 MyBatis-Plus 全解：从入门到代码生成器","url":"/posts/b4f7cadb.html","content":"MyBatis-Plus (MP) 是一个 MyBatis 的增强工具，在 MyBatis 的基础上只做增强不做改变，为简化开发、提高效率而生。\n一、快速起步1. 引入依赖建议使用 BOM 管理版本，避免依赖冲突。以下基于 Spring Boot 3 + JDK 17 环境：\npom.xml&lt;dependencyManagement&gt;    &lt;dependencies&gt;        &lt;dependency&gt;            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;            &lt;artifactId&gt;mybatis-plus-bom&lt;/artifactId&gt;            &lt;version&gt;3.5.15&lt;/version&gt;            &lt;type&gt;pom&lt;/type&gt;            &lt;scope&gt;import&lt;/scope&gt;        &lt;/dependency&gt;    &lt;/dependencies&gt;&lt;/dependencyManagement&gt;&lt;dependencies&gt;    &lt;dependency&gt;        &lt;groupId&gt;com.baomidou&lt;/groupId&gt;        &lt;artifactId&gt;mybatis-plus-spring-boot3-starter&lt;/artifactId&gt;    &lt;/dependency&gt;    &lt;dependency&gt;        &lt;groupId&gt;com.baomidou&lt;/groupId&gt;        &lt;artifactId&gt;mybatis-plus-jsqlparser&lt;/artifactId&gt;    &lt;/dependency&gt;&lt;/dependencies&gt;\n2. 可选：全局配置 (YAML)MP 的配置项非常丰富，以下是推荐的生产环境配置：\napplication.ymlmybatis-plus:  mapper-locations: classpath*:mapper/**/*.xml  # Mapper XML 扫描路径  type-aliases-package: com.example.demo.entity # 实体类别名扫描包  configuration:    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl # 开启 SQL 日志打印 (生产环境建议关闭)    map-underscore-to-camel-case: true # 开启下划线转驼峰    default-enum-type-handler: com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler # 枚举自动映射  global-config:    db-config:      id-type: AUTO # 主键策略：数据库自增      logic-delete-field: deleted # 全局逻辑删除字段      logic-delete-value: 1 # 已删除值      logic-not-delete-value: 0 # 未删除值\n3. 说明：实体类规约MP 默认遵守 “约定优于配置” 的原则：\n\n类名 -> 表名 (驼峰转下划线)\n属性名 -> 字段名 (驼峰转下划线)\nid -> 主键\n\n若需自定义，可使用注解：\n@TableName(&quot;t_user&quot;) // 指定表名public class User &#123;    @TableId(type = IdType.AUTO) // 指定主键策略    private Long id;        @TableField(&quot;username&quot;) // 指定字段名    private String name;        @TableField(exist = false) // 标记非数据库字段    private String ignoreField;&#125;\n4. Mapper 接口继承 BaseMapper 即可获得通用的 CRUD 能力。\n@Mapperpublic interface UserMapper extends BaseMapper&lt;User&gt; &#123;    // 可以在这里编写自定义 SQL 方法&#125;\n\n二、核心功能详解1. Service 层 CRUD继承 IService 和 ServiceImpl，不仅拥有 Mapper 的能力，还扩展了批量操作。\npublic interface IUserService extends IService&lt;User&gt; &#123;&#125;@Servicepublic class UserServiceImpl extends ServiceImpl&lt;UserMapper, User&gt; implements IUserService &#123;    // 业务逻辑代码&#125;\n2. 链式调用 (Chain)MP 提供了类似 Stream 流的链式操作，代码更优雅。\n// 链式查询：查询 id=1 的用户userService.lambdaQuery().eq(User::getId, 1L).one();// 链式更新：将 id=1 的用户年龄改为 18userService.lambdaUpdate().eq(User::getId, 1L).set(User::getAge, 18).update();\n3. ActiveRecord 模式让实体类本身具备 CRUD 能力（需继承 Model）。\nUser user = new User();user.setName(&quot;Tom&quot;);user.insert(); // 直接调用 insert 方法保存自己\n4. Db Kit 工具类为了避免 service 循环注入，MP 提供了 Db 工具类。\nUser user2 = Db.getById(1L, User.class);// 等效于原本的User user1 = userService.getById(1L);\n\n三、条件构造器 (Wrapper)Wrapper 是 MP 的精髓，用于构建复杂的 WHERE 条件。推荐使用 LambdaWrapper 以避免魔法值。\n1. 类继承关系\n2. 实战示例// 构造条件：name 包含 &quot;Jack&quot; 且 age &gt; 20LambdaQueryWrapper&lt;User&gt; wrapper = Wrappers.lambdaQuery();wrapper.like(User::getName, &quot;Jack&quot;)       .gt(User::getAge, 20);List&lt;User&gt; users = userMapper.selectList(wrapper);\n3. 自定义 SQL 结合 Wrapper在复杂场景下，你可能需要手写 SQL，但又想复用 Wrapper 的条件。\nMapper 接口：\n// 使用 $&#123;ew.customSqlSegment&#125; 拼接 Wrapper 生成的 SQL@Select(&quot;SELECT * FROM t_user $&#123;ew.customSqlSegment&#125;&quot;)List&lt;User&gt; selectByCustomWrapper(@Param(Constants.WRAPPER) Wrapper&lt;User&gt; wrapper);\n\n四、自动化高级特性1. 自动填充 (Audit)自动维护 create_time, update_time 等字段。\n实体类配置：\n@TableField(fill = FieldFill.INSERT)private LocalDateTime createTime;@TableField(fill = FieldFill.INSERT_UPDATE)private LocalDateTime updateTime;\n处理器实现：\n@Componentpublic class MyMetaObjectHandler implements MetaObjectHandler &#123;    @Override    public void insertFill(MetaObject metaObject) &#123;        this.strictInsertFill(metaObject, &quot;createTime&quot;, LocalDateTime.class, LocalDateTime.now());        this.strictInsertFill(metaObject, &quot;updateTime&quot;, LocalDateTime.class, LocalDateTime.now());    &#125;    @Override    public void updateFill(MetaObject metaObject) &#123;        this.strictInsertFill(metaObject, &quot;updateTime&quot;, LocalDateTime.class, LocalDateTime.now());    &#125;&#125;\n2. 逻辑删除配置后，deleteById 会变成 UPDATE t_user SET deleted=1 WHERE id=?。\npublic class User &#123;    @TableLogic    private Integer deleted;&#125;\n\n⚠️ 注意：逻辑删除与数据库唯一索引存在冲突风险。建议逻辑删除字段使用 delete_time (时间戳) 或在唯一索引中包含逻辑删除字段。\n\n3. 枚举映射当实体类 User 的属性 gender，javaType 是枚举，columnType 是 int 时。\nMyBatis-Plus 提供了全局配置的枚举映射处理器，无需再写转换代码。\napplication.ymlmybatis-plus:  configuration:    default-enum-type-handler: com.baomidou.mybatisplus.core.handlers.MybatisEnumTypeHandler\n在对应的枚举类中，给对应属性添加注解 EnumValue：\n@Getter@AllArgsConstructorpublic enum Gender &#123;    MALE(1, &quot;男&quot;),    FEMALE(2, &quot;女&quot;),    ;    @com.baomidou.mybatisplus.annotation.EnumValue    private final Integer code;        @com.fasterxml.jackson.annotation.JsonValue    private final String description;&#125;\n4. JSON 字段映射利用 JacksonTypeHandler 自动实现 JSON 字符串与 Java 对象的互转。\n@TableName(autoResultMap = true) // 必须开启public class User &#123;    @TableField(typeHandler = JacksonTypeHandler.class)    private UserInfo info; // 数据库存 JSON，Java 用对象&#125;\n\n五、插件体系MP 的插件通过拦截器机制实现，需配置 MybatisPlusInterceptor。\n1. 插件配置类@Configurationpublic class MybatisPlusConfig &#123;    @Bean    public MybatisPlusInterceptor mybatisPlusInterceptor() &#123;        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();        // 1. 分页插件 (必须放在最后)        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));        return interceptor;    &#125;&#125;\n2. 分页查询// IPage 是分页结果，current 是当前页，size 是每页条数Page&lt;User&gt; page = new Page&lt;&gt;(1, 10);userService.page(page, new LambdaQueryWrapper&lt;User&gt;().gt(User::getAge, 18));System.out.println(&quot;总条数：&quot; + page.getTotal());System.out.println(&quot;当前页数据：&quot; + page.getRecords());\n\n六、代码生成器 (Generator)无需手写繁琐的 Entity、Mapper、Service 代码，一键生成。\n1. 引入依赖pom.xml&lt;dependency&gt;    &lt;groupId&gt;com.baomidou&lt;/groupId&gt;    &lt;artifactId&gt;mybatis-plus-generator&lt;/artifactId&gt;    &lt;version&gt;3.5.14&lt;/version&gt;&lt;/dependency&gt;&lt;dependency&gt;    &lt;groupId&gt;org.freemarker&lt;/groupId&gt;    &lt;artifactId&gt;freemarker&lt;/artifactId&gt;    &lt;version&gt;2.3.34&lt;/version&gt;&lt;/dependency&gt;\n2. 配置运行代码public class CodeGenerator &#123;    static void main() &#123;        // 数据库连接信息        String url = &quot;jdbc:mysql://localhost:3306/test&quot;;        String username = &quot;root&quot;;        String password = &quot;123456&quot;;        // 包名        String packageName = &quot;com.example.demo&quot;;        // 需要生成的表        String[] tables = &#123;&quot;user&quot;&#125;;        String projectPath = System.getProperty(&quot;user.dir&quot;);        FastAutoGenerator                // 数据库连接                .create(url, username, password)                // 全局配置                .globalConfig(builder -&gt; builder                        .author(&quot;Gabriel&quot;)  // 设置作者                        .enableSpringdoc()  // 开启 swagger 模式（OpenAPI2 使用 .enableSwagger()）                        .outputDir(projectPath + &quot;/src/main/java/&quot;) // 指定输出目录                        .disableOpenDir()   // 禁止打开输出目录                )                // 数据源配置                .dataSourceConfig(builder -&gt; builder                        .typeConvertHandler((globalConfig, typeRegistry, metaInfo) -&gt; &#123;                            int typeCode = metaInfo.getJdbcType().TYPE_CODE;                            // 自定义类型转换                            if (typeCode == Types.TINYINT || typeCode == Types.SMALLINT) &#123;                                return DbColumnType.INTEGER;                            &#125;                            return typeRegistry.getColumnType(metaInfo);                        &#125;)                )                // 包配置                .packageConfig(builder -&gt; builder                        .parent(packageName)    // 设置父包名                        .pathInfo(Collections.singletonMap(OutputFile.xml, projectPath + &quot;/src/main/resources/mapper&quot;)) // 设置 xml 文件输出目录                )                // 策略配置                .strategyConfig(builder -&gt; builder                        .addTablePrefix(&quot;t_&quot;)       // 删除表前缀                        .addFieldPrefix(&quot;is_&quot;)      // 删除字段前缀                        .addFieldSuffix(&quot;_flag&quot;)    // 删除字段后缀                        .addInclude(tables)         // 设置需要生成的表                        .controllerBuilder()                        .enableRestStyle()          // @Controller -&gt; @RestController                        .enableHyphenStyle()        // @RequestMapping(&quot;/managerUser&quot;) -&gt; @RequestMapping(&quot;/manager-user&quot;)                        .serviceBuilder()                        .mapperBuilder()                        .enableBaseResultMap()      // xml 生成 BaseResultMap                        .enableBaseColumnList()     // xml 生成 BaseColumnList                        .entityBuilder()                        .enableLombok()             // 添加 lombok 注解                        .enableSerialAnnotation()   // 添加 @Serial 注解（since JDK 14）                )                // 模板配置。默认的是Velocity引擎模板。需要引入对应模板的依赖                .templateEngine(new FreemarkerTemplateEngine())                // 执行                .execute();    &#125;&#125;\n","categories":["编程语言","Java"],"tags":["SpringBoot","MyBatis-Plus","ORM"]},{"title":"Markdown 语法速查手册：新手 5 分钟入门","url":"/posts/b973e285.html","content":"Markdown 是一种轻量级标记语言，语法十分简单，常用的标记符号不超过十个。它能让你专注于写作内容，而非复杂的排版格式。\n1. 标题语法要创建标题，在单词或短语前面添加井号（#），并紧跟一个空格。\n# 号的数量代表了标题的级别，Markdown 支持 1~6 级标题。\n 语法效果 \n              \n              Markdown 语法效果预览# 一级标题一级标题## 二级标题二级标题### 三级标题三级标题#### 四级标题四级标题##### 五级标题五级标题###### 六级标题六级标题\n              \n            \n2. 强调语法Markdown 使用星号 * 或下划线 _ 来标记需要强调的文本。\n\n要用 斜体 显示文本，在单词或短语前后添加一个星号 *。\n要 加粗 文本，在单词或短语的前后各添加两个星号 **。\n要同时用 粗体和斜体 突出显示文本，在单词或短语的前后各添加三个星号 ***。\n\n 语法效果 \n              \n              Markdonwn 语法效果预览Italicized text is the *cat’s meow*.Italicized text is the cat’s meow.I just love **bold text**.I just love bold text.This text is ***really important***.This text is really important.\n              \n            \n3. 引用语法要创建块引用（Blockquotes），在段落前添加一个 &gt; 符号，后面紧跟一个空格。引用块可以嵌套，也可以包含其他 Markdown 元素。\n 语法效果 \n              \n              &gt; I&#x27;ve got my heart set on reaching out to the world.&gt; &gt; I&#x27;m not in the mood to go back to the beginning.渲染效果如下所示：I’ve got my heart set on reaching out to the world.I’m not in the mood to go back to the beginning.\n              \n            \n4. 列表语法可以将多个条目组织成有序或无序列表。\n\n有序列表：在每个列表项前添加数字，并紧跟一个英文句点，再紧跟一个空格。数字不必按数学顺序排列，但列表将以数字 1 起始。\n无序列表：在每个列表项前面添加破折号 -、星号 * 或加号 +，后面紧跟一个空格。\n\n 有序列表 \n              \n              1. First item2. Second item3. Third item    1. Indented item    2. Indented item4. Fourth item渲染效果如下所示：First itemSecond itemThird itemIndented itemIndented itemFourth item\n              \n            \n 无序列表 \n              \n              - First item- Second item- Third item    - Indented item    - Indented item- Fourth item渲染效果如下所示：First itemSecond itemThird itemIndented itemIndented itemFourth item\n              \n            \n5. 代码语法\n行内代码：要将单词或短语表示为代码，将其包裹在反引号 (`) 中。\n代码块：在代码块前后行上使用三个反引号（```）。在首行的反引号后指定语言名称（如 json, python, java），可实现语法高亮。\n\n注意：如果 行内代码 包含行内代码，最外层请使用双反引号 (``) 包裹；如果 代码块 中包含代码块，最外层请使用四个反引号（````）包裹。\n\n 语法效果 \n              \n              Markdonwn 语法效果预览At the command prompt, type `nano`At the command prompt, type nano.``Use `code` in your Markdown file.``Use `code` in your Markdown file.代码块书写源码：```json&#123;  &quot;firstName&quot;: &quot;John&quot;,  &quot;lastName&quot;: &quot;Smith&quot;,  &quot;age&quot;: 25&#125;```代码块效果如下：&#123;  &quot;firstName&quot;: &quot;John&quot;,  &quot;lastName&quot;: &quot;Smith&quot;,  &quot;age&quot;: 25&#125;\n              \n            \n6. 分隔线语法要创建分隔线，在单独一行上使用三个或多个破折号 (---)、星号 (***) 或下划线 (___) ，并且行内不能包含其他内容。\n 语法效果 \n              \n              Try to put a blank line before...---...and after a horizontal rule.渲染效果如下所示：Try to put a blank line before……and after a horizontal rule.\n              \n            \n7. 链接语法链接文本放在 方括号 内，链接地址放在后面的 圆括号 中，链接 title（鼠标悬停提示）为可选内容。\n语法格式：[content](url title)\n 语法效果 \n              \n              这是一个链接 [Markdown 语法](https://markdown.com.cn &quot;最好的 markdown 教程&quot;)。渲染效果如下所示：这是一个链接 Markdown 语法。\n              \n            \n8. 图片语法添加图片的语法与链接非常相似，只需在最前面多添加一个感叹号 (!)。\n语法格式：![alt](url title)\n 语法效果 \n              \n              ![我的头像](https://cdn.jsdelivr.net/gh/lijiabao9/pic.cloud@main/hexo/info/avatar.webp &quot;这是我的头像&quot;)渲染效果如下所示：\n              \n            \n9. 转义字符语法如果要显示 Markdown 语法中使用的特殊字符（如 *, #, \\ 等），需在字符前面添加反斜杠 \\ 进行转义。\n 语法效果 \n              \n              \\* Without the backslash, this would be a bullet in an unordered list.渲染效果如下所示：* Without the backslash, this would be a bullet in an unordered list.\n              \n            \n10. 表格语法使用三个或多个连字符（---）创建表头分隔线，并使用管道符（|）分隔每一列。\n对齐方式：\n\n:--- 左对齐\n:---: 居中对齐\n---: 右对齐\n\n 语法效果 \n              \n              | 姓名  | 性别 ||:----|:---|| 李雷  | 男  || 韩梅梅 | 女  |渲染效果如下所示：姓名性别李雷男韩梅梅女\n              \n            \n11. 删除线语法要给文本添加删除线，请使用两个波浪号 ~~ 包裹文本。\n 语法效果 \n              \n              ~~世界是平坦的。~~ 我们现在知道世界是圆的。渲染效果如下所示：世界是平坦的。 我们现在知道世界是圆的。\n              \n            ","categories":["编程语言","RichText"],"tags":["语法手册","Markdown"]},{"title":"白嫖指南：免费获取 Microsoft 365 E3 开发者订阅 (含 5TB OneDrive)","url":"/posts/93201920.html","content":"Microsoft 365 E3 订阅通常是企业级的付费服务，但通过特定的开发者计划或 Symphony 试用链接，我们可以免费获取。\n核心权益：\n\nOffice 365 全家桶：支持激活本地桌面版 Word, Excel, PPT 等。\n25 个许可证：可以创建 25 个子账号，分发给亲友使用。\n5TB OneDrive：每个账号均可享受最高 5TB 的云存储空间。\n自动续期：保持账号活跃（如 API 调用），微软通常会按年自动续期。\n\n免责声明：本教程利用的是微软公开的试用/开发者链接（如 Symphony/Dev 渠道）。此类订阅存在不确定性，微软随时可能收回权益或封禁账号。请勿在 OneDrive 中存储没有任何备份的重要数据！建议仅作为从属/备用网盘或用于激活 Office 软件。\n\n\n第一步：创建空全局管理员我们需要先注册一个没有绑定任何订阅的“空壳”微软企业账号。\n\n访问注册链接：点击此处跳转注册页面\n\n验证邮箱：输入任意电子邮件，点击 下一步，如果提示账号不存在，点击 创建账号。\n\n填写信息：\n\n基本情况：随意填写，点击 下一步。\n登录方法：设置你的全局管理员前缀（如 admin）和 专用域名（xxxx.onmicrosoft.com）。\n重要：请务必牢记此处的用户名和密码，这是你的最高权限账号。\n\n\n\n跳过无关项：\n\n地址：随意填写（提示无法认证也不用管）。\n纳税人识别号：随意填写一个身份证号。\n关键点：当流程进行到 付款 或 添加支付方式 页面时，直接关闭网页，不要填写。\n\n\n\n此时，你已经拥有了一个空的全局管理员账号：admin@xxxx.onmicrosoft.com。\n\n第二步：激活 E3 订阅利用特定的 Promo 链接，将 E3 订阅挂载到刚才创建的账号上。\n\n访问购买链接：点击此处跳转 E3 Dev 订阅下单页(如果提示登录，请使用第一步创建的管理员账号登录)\n\n配置支付方式：在购物车页面，将付款方式切换为 Alipay (支付宝)，点击 Save。\n提示：这里虽然显示金额为 0 元，但仍需验证支付方式。选择支付宝是为了绕过信用卡验证，实际不会扣费，也无需扫码支付。\n\n\n完成下单：点击右侧的 Place order。当看到如下图提示，即表示“白嫖”成功！\n\n验证许可证：登录 Microsoft Admin Center，在首页即可看到 Office 365 E3 Developer 订阅已激活，包含 25 个许可证。\n\n卡 BUG 续期 (转为年付)：\n\n进入 Billing (账单) -&gt; Your products (你的产品)。\n点击 Office 365 E3 Develop 后的三个点 -&gt; Edit billing frequency (编辑账单频率)。\n切换为 Pay yearly (按年付费)，点击保存。\n效果：订阅结束时间通常会自动延长至一年后。\n\n\n\n进阶玩法 (备用链接)：如果不满足于 25 个账号，同一账号可以重复购买叠加。还可以尝试以下 200 万个许可证 的 Symphony 订阅（同一账号互斥，只能选一种）：\n\nE1 Symphony (后续可在产品中升级为 E3): 点击跳转\nE3 Symphony (推荐): 点击跳转\n\n\n\n第三步：扩容 OneDrive 至 5TB默认空间为 1TB，我们需要手动修改全局设置以解锁 5TB 权限。\n\n在 Admin Center 左侧导航栏，点击 SharePoint 进入独立管理后台。\n\n点击 Settings -&gt; OneDrive -&gt; Storage limit。\n\n将默认存储限制修改为 5120 (GB)，点击保存。\n\n\n\n第四步：创建子用户 (降低风险)强烈建议不要直接使用全局管理员账号进行日常使用，以降低风控概率。请创建子用户用于激活 Office 和存储数据。\n\n回到 Admin Center，点击 Users -&gt; Active users -&gt; Add a user。\n\n填写姓名、用户名，勾选分配 Office 365 E3 许可证，角色保持默认（User）即可。记得复制保存生成的子用户密码。\n\n检查空间：创建完成后，点击该用户 -&gt; OneDrive 选项卡，查看 “Storage used”。\n\n如果显示 1024GB，点击 Edit 手动改为 5120GB。\n如果显示“未初始化”，请使用该子账号登录一次 MySignins 即可触发初始化。\n\n\n\n\n第五步：在 Windows 上使用现在的子账号已经是一个功能完备的“工作账号”了，可以与你原本的“个人账号”完美共存。\n1. 系统级接入打开 Windows 设置 -&gt; 账户 -&gt; 登录工作或学校账号。点击 连接，输入子账号和密码登录，这将允许该账号 SSO 登录系统内的 Office 应用。\n2. 激活 Office打开 Word 或 Excel，点击左下角的 账号 -&gt; 切换许可证 -&gt; 选择刚刚添加的 E3 子账号。\n3. 挂载 OneDrive右键任务栏 OneDrive 图标 -&gt; 设置。选择 账户 -&gt; 添加账户，登录子账号后，你的文件资源管理器中会出现一个新的 OneDrive - &lt;你的组织名&gt; 文件夹，独享 5TB 空间。\n","categories":["资源分享","福利教程"],"tags":["Microsoft365","OneDrive","白嫖指南"]},{"title":"谷歌云 (GCP) 永久免费 VPS 申请指南","url":"/posts/94227163.html","content":"Google Cloud Platform (GCP) 的 “Always Free” 计划是目前市面上最稳定的免费 VPS 方案之一。\n只要配置得当，你可以永久免费使用一台 e2-micro 配置的云服务器。但 GCP 的计费规则复杂，稍有不慎（如选错网络层级、IP 未释放）就会产生费用。\n本文将手把手带你完成配置，并教你如何设置“扣费红线”。\n前提条件：你需要一张支持外币支付的信用卡（Visa/MasterCard）用于验证身份。注册后，必须升级为付费账号才能解锁完整的 Compute Engine 功能，但这并不意味着一定会扣费，只要我们在免费额度内使用即可。\n\n\n第一步：创建实例 (核心配置)登录 Google Cloud Console，在左侧导航栏找到 Compute Engine -&gt; 虚拟机实例，点击 创建实例。\n为了确保“零费用”，请严格按照以下参数进行选择：\n\n\n\n\n配置项\n必选参数\n说明\n\n\n\n\n区域 (Region)\nus-west1 (俄勒冈)  us-central1 (爱荷华)  us-east1 (南卡罗来纳)\n只能三选一，其他区域均收费。\n\n\n机器类型\ne2-micro\n(2 个 vCPU，1 GB 内存)。仅此型号免费。\n\n\n启动磁盘\n标准永久性磁盘\nSSD 会收费。\n\n\n磁盘大小\n30 GB\n免费额度上限为 30GB。\n\n\n\n\n避坑注意：\n\n在“数据保护”中，务必确认 关闭快照 (Snapshot) 和 备份 功能，这些都是额外的收费项。\n在“可观测性”选项卡中，建议 关闭 Ops Agent，以节省微型实例宝贵的内存资源，并避免潜在的日志存储费用。\n\n\n第二步：网络配置 (关键避坑点)这是最容易产生隐形费用的环节，请务必仔细配置。\n在创建页面的 网络 中：\n\n防火墙：勾选 允许 HTTP 流量 和 允许 HTTPS 流量。\n网络接口 (点击 default 展开)：\nIP 栈类型：选择 IPv4（单栈）。\n外部 IPv4 地址：选择 临时 (Ephemeral)。\n解释：不要选择“静态 IP”。如果你删除了实例但忘记释放静态 IP，谷歌会收取“IP 闲置费”。选择“临时”IP，只要你不销毁实例，IP 不会变。\n\n\n\n\n网络服务层级 (Network Service Tier)：\n务必切换为：标准 (Standard)。\n默认是“高级 (Premium)”，这是收费陷阱！\n说明：标准层级每月提供 200GB 的免费出站流量。这对于个人博客或轻量服务完全够用。\n注意：这 200GB 不包含回源到 CloudFlare 等 CDN 的流量，建议合理规划。\n\n\n\n\n第三步：设置预算报警 (最后一道防线)为了防止因误操作或流量超标导致信用卡被刷爆，我们需要设置一个极其敏感的预算提醒。\n\n点击左侧导航栏的 Billing (结算)。\n在菜单中选择 Budgets &amp; alerts (预算和提醒)，点击 Create budget (创建预算)。\n设置阈值：\n时间范围：月度 (Monthly)。\n金额：指定金额，建议设置为 0.1 (美元)。\n\n\n设置动作：\n勾选向“结算管理员”和“用户”发送电子邮件提醒。\n当费用达到 50%、90%、100% 时触发。\n\n\n\n\n配置完成至此，你已经拥有了一台永久免费的 Google Cloud 服务器。如果在邮箱中收到了 $0.01 的账单提醒，请立即登录后台检查是否开启了快照、高级网络层级或创建了额外的磁盘。\n","categories":["资源分享","福利教程"],"tags":["GoogleCloud","VPS","免费资源"]},{"title":"Microsoft 365 E3 进阶指南：绑定自定义域名并配置企业级 SMTP 发信","url":"/posts/57b282c7.html","content":"拥有了 Microsoft 365 E3 订阅后，我们不仅获得了 Office 全家桶，还解锁了企业级的 Exchange Online 服务。\n相比于个人版 Outlook 或 Gmail，企业版 Exchange 允许我们绑定自定义域名（如 admin@yourname.com），并提供极高的发信权重。\n本文将指导你将其配置为高送达率的 SMTP 服务，用于博客通知、Alist 消息推送等场景。\n第一步：域名绑定（推荐）1. 绑定自定义域名为了让发出的邮件看起来更专业（而不是显示 xxx.onmicrosoft.com），我们需要绑定自己的域名。\n\n进入管理中心：访问 M365 Admin Center，点击左侧导航栏的 Settings (设置) -&gt; Domains (域)。\n\n添加域名：点击 Add domain，输入你购买的域名（如 gabriel.edu.kg）。\n\n验证域名：\n\n自动验证 (推荐)：如果你的域名托管在 Cloudflare、GoDaddy 等主流平台，选择 “Sign in to…” 可自动添加 DNS 记录。\n手动验证：选择 “Add a TXT record”，将生成的 TXT 记录添加到你的 DNS 解析中。\n\n\n配置服务记录：验证通过后，系统会要求配置 Exchange 和其他服务的 DNS 记录。\n\n建议全选 (Exchange, Skype, DKIM 等)。\n（手动验证）按照提示在 DNS 服务商处添加生成的 MX, CNAME, TXT 记录。\n待状态显示为 Healthy 即为成功。\n\n\n\n\n2. 配置 DKIM 防止进垃圾箱 (重要)为了防止 Gmail、Outlook 等收件方将你的邮件标记为垃圾邮件，必须配置 DKIM (域名密钥识别邮件)。\n\n访问 Defender 防护中心：点击跳转 DKIM 配置页面\n\n启用 DKIM：\n\n在列表中点击你的自定义域名。\n将 Sign messages for this domain with DKIM signatures 的滑块切换为 Enable (开启)。\n\n\n添加 CNAME 记录：\n\n如果系统提示 “You need to create CNAME records…”，请按照提示在你的 DNS 服务商处添加 2 条 CNAME 记录。\n记录名通常为 selector1._domainkey 格式。\n\n\n再次启用：\n\nDNS 生效后（通常几分钟），回到此页面再次点击开启滑块。\n直到状态显示为绿色的 Status: Enabled。\n\n\n\n\n第二步：创建专用发信账户1. 新建用户为了安全起见，不要直接使用全局管理员账号进行 SMTP 发信。建议创建一个权限受限的专用账户（Service Account）。\n\n访问 M365 Admin Center，点击 Users (用户) -&gt; Active users (活跃用户)。\n\n点击 Add a user：\n\nFirst/Last name: 随意（如 Notification Bot）。\nUsername: 建议使用 noreply 或 mailer。\nDomain: 下拉选择刚才绑定的自定义域名。\nPassword: 自动生成或手动设置，务必记下此密码，且后续不要修改。\nLicenses: 必须勾选 Office 365 E3 Developer (否则没有 Exchange 邮箱功能)。\n\n\n\n\n2. 为用户开启 SMTP新创建的用户，默认可能未开启 SMTP 传输权限，需要手动启用。\n\n在用户列表中，点击刚才创建的 noreply 用户。\n\n在右侧弹出的详情页中，切换到 Mail (邮件) 选项卡。\n\n点击 Manage email apps (管理电子邮件应用) 链接。\n\n勾选最底部的 Authenticated SMTP (经过身份验证的 SMTP)。\n\n点击 Save changes 保存。\n\n\n生效时间提示：微软全球服务器同步可能需要时间。此处的修改通常 15 ~ 60 分钟 后才会完全生效。如果配置完立即测试连接失败，请喝杯咖啡稍后再试。\n\n\n方式一：配置 SMTP 发信1. 关闭安全默认值 (关键)Microsoft Entra ID（原 Azure AD）默认的安全策略会 全局阻止 SMTP 基础认证（Legacy Authentication）。如果不关闭此选项，SMTP 握手将一直失败。\n\n访问 Azure 门户：点击跳转 Microsoft Entra ID 概览页\n\n登录账号：使用你的 E3 全局管理员账号（admin@xxxx.onmicrosoft.com）登录。\n\n修改属性：在上方菜单栏点击 Properties (属性)。\n\n管理安全默认值：滚动到页面最底部，点击蓝色链接 Manage security defaults (管理安全默认值)。\n\n禁用策略：在右侧弹出的面板中，将 Security defaults 切换为 Disabled (禁用)。\n\nReason for disabling: 随意选择，例如 “Application requires legacy authentication”。\n点击 Save 保存。\n\n\n\n\n\n2. SMTP 配置参数速查现在，你可以将以下信息填入 Artalk、WordPress、UptimeKuma 等服务的邮件通知配置中：\n\n\n\n\n配置项\n值\n说明\n\n\n\n\nSMTP Host\nsmtp.office365.com\n发信服务器地址\n\n\nSMTP Port\n587\n端口 (推荐)\n\n\nEncryption\nSTARTTLS 或 TLS\n加密方式\n\n\nUsername\nnoreply@gabriel.edu.kg\n你的完整邮箱地址\n\n\nPassword\n********\n该用户的登录密码\n\n\n\n\n\n至此，一个高权重、高送达率且带有自定义域名的企业级 SMTP 服务就搭建完成了。\n方式二：配置 Azure 应用 (OAuth2 凭证)如果你计划使用 Microsoft Graph API 发信（如 Apprise, LobeChat, Alist），或者第三方应用支持 OAuth2 登录，你需要注册一个 Azure 应用来获取 Client ID 和 Client Secret。\n1. 注册应用\n访问 Azure AD 应用注册页面。\n点击 New registration。\nName: 填写应用名（如 MailBot），其他保持默认，点击 Register。\n在 Overview (概览) 页，复制并保存：Application (client) ID, Directory (tenant) ID\n\n2. 生成客户端密钥\n点击左侧 Certificates &amp; secrets (证书和密码) -&gt; Client secrets。\n点击 New client secret，设置过期时间（推荐 24 个月）。\n务必立即复制 Value 字段（刷新后将不可见）。注：若密钥含特殊字符，使用前建议进行 URL Encode。\n\n\n\n3. 配置 API 权限\n点击左侧 API permissions -&gt; Add a permission -&gt; Microsoft Graph。\n选择 Application permissions (应用级权限)。\n搜索并勾选 Mail.Send, Mail.ReadWrite，点击 Add permissions。\n回到权限列表，状态栏会显示 “Not granted for…”， \n点击列表上方的 Grant admin consent for &lt;组织名&gt; 按钮并确认。\n看到状态变为绿色的 Granted 即为配置成功。\n\n\n至此，你已经拥有了 SMTP 和 API 两种强大的发信方式。\n推荐：配置 Catch-all 无限邮箱除了基础发信，Exchange 还支持通过规则实现“无限别名”功能。配置后，你可以随意编造邮箱地址（如 test001@gabriel.edu.kg）用于注册不受信任的网站，所有邮件都会自动转发到你的主邮箱。\n\n访问 Exchange 管理中心：点击跳转 Exchange Admin Center。\n\n修改域名类型：\n\n在左侧导航栏点击 Mail flow (邮件流) -&gt; Accepted domains (接受的域)。\n点击你的主域名进入详情页。\n将 This accepted domain is 选项从 Authoritative 切换为 Internal relay (内部中继)。\n点击 Save 保存。\n\n\n创建转发规则：\n\n点击左侧导航栏 Mail flow (邮件流) -&gt; Rules (规则)。\n点击 Add a rule -&gt; Create a new rule。\nName: 随意填写，比如 Catch-all。\nApply this rule if: 选择 The recipient -&gt; address matches any of these text patterns。\nspecify text patterns: 输入正则表达式，例如 ^test.*@gabriel\\.edu\\.kg$。注：此正则表示匹配所有以 test 开头（如 test-app, test01）的邮箱地址。\n\n\nDo the following: 选择 Redirect the message to -&gt; these recipients，并在列表中选择你的主账号。\n后续 Settings 保持默认，点击 Finish。\n\n\n启用规则：\n\n新创建的规则默认处于 Disabled 状态。\n点击规则名称，在详情面板中将滑块切换为 Enabled。\n\n\n\n配置完成：现在，你可以直接使用 test001@gabriel.edu.kg 或 test-anything@gabriel.edu.kg 进行注册，邮件将自动投递到你的收件箱。\n\n","categories":["资源分享","进阶教程"],"tags":["Microsoft365","SMTP","Exchange"]},{"title":"极简主义统计：Umami 私有化部署与 Hexo 博客集成指南","url":"/posts/fdad30aa.html","content":"Umami 是一个简单、易用且注重隐私的开源网站分析替代方案。相比 Google Analytics，它更轻量，且完全由你自己掌握数据。\n本文将带你通过 Docker Compose 完成全流程部署。\n一、环境准备在开始之前，请确保你的服务器已就绪：\n\n服务器环境：已安装 Docker 和 Docker Compose。\n参考：Ubuntu 系统 Docker 安装全指南：官方源与国内镜像加速\n\n\n域名与证书：拥有一个域名并完成了 SSL 证书申请。\n参考：从零开始：域名购买、Cloudflare 托管与 Nginx 自动化 HTTPS 配置全指南\n\n\n\n\n二、Docker 服务部署1. 创建工作目录登录服务器，建立 Umami 的数据存储目录：\nmkdir -p /app/umamicd /app/umami\n2. 编写配置 (docker-compose.yml)创建并编辑配置文件：\nvim docker-compose.yml\n写入以下内容。请注意：\n\nAPP_SECRET：这是加密盐值，务必修改为随机字符串（可在终端运行 openssl rand -hex 32 生成）。\n端口映射：将宿主机的 20001 映射到容器的 3000。\n\ndocker-compose.ymlservices:  umami:    image: ghcr.io/umami-software/umami:latest    ports:      - &quot;20002:3000&quot;    environment:      DATABASE_URL: postgresql://umami:umami@db:5432/umami      APP_SECRET: replace-me-with-a-random-string  # &lt;--- 务必修改这里    depends_on:      db:        condition: service_healthy    init: true    restart: always    healthcheck:      test: [&quot;CMD-SHELL&quot;, &quot;curl http://localhost:3000/api/heartbeat&quot;]      interval: 5s      timeout: 5s      retries: 5  db:    image: postgres:15-alpine    environment:      POSTGRES_DB: umami      POSTGRES_USER: umami      POSTGRES_PASSWORD: umami    volumes:      - ./umami-db-data:/var/lib/postgresql/data # 数据持久化挂载    restart: always    healthcheck:      test: [&quot;CMD-SHELL&quot;, &quot;pg_isready -U $$&#123;POSTGRES_USER&#125; -d $$&#123;POSTGRES_DB&#125;&quot;]      interval: 5s      timeout: 5s      retries: 5\n3. 启动服务docker compose up -d\n此时，可以通过 http://服务器IP:20002 访问后台。但为了安全，我们接下配置 Nginx 反向代理。\n\n三、Nginx 反向代理与 HTTPS为了通过域名安全访问，我们需要配置 Nginx 反向代理。\n1. 编写 Nginx 配置创建配置文件 vi /etc/nginx/sites-available/umami.131495.xyz：\nserver &#123;    listen 80;    listen [::]:80;    server_name umami.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;        # TODO: 修改为对应的子域名    server_name umami.131495.xyz;        # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;        # TODO: 独立的日志配置    access_log /var/log/nginx/umami.access.log proxy_json;    error_log /var/log/nginx/umami.error.log;    # 反向代理设置    location / &#123;        # TODO: 修改为实际的服务地址        proxy_pass http://127.0.0.1:20002;                # 代理参数        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n2. 启用并重载# 创建软链接ln -s /etc/nginx/sites-available/umami.131495.xyz /etc/nginx/sites-enabled/# 测试并重启nginx -t &amp;&amp; systemctl reload nginx\n3. 域名DNS记录给域名添加对应的 A 记录，将 umami.131495.xyz 解析到服务器的 IP 地址。\n现在，你可以通过 https://umami.131495.xyz 访问了。\n\n四、初始化配置1. 修改默认密码访问 https://umami.131495.xyz。\n\n默认账号：admin\n默认密码：umami\n\n重要：登录后，立即点击左上角头像 -> Settings -> Profile -> Change password 修改密码。\n2. 添加网站在 Websites 页面点击 Add website，填入你的 网站名称 和 网站网址。\n保存后，点击列表中的 Edit 按钮，获取 Website ID（一串 UUID）。\n\n五、集成到 Hexo (Butterfly 主题)Butterfly 主题原生支持 Umami 统计，配置非常简单。\n1. 修改主题配置编辑 _config.butterfly.yml：\n_config.butterfly.yml# 关闭不蒜子 (可选，避免功能重复)busuanzi:  site_uv: false  site_pv: false  page_pv: false# 启用 Umamiumami_analytics:  enable: true  serverURL: https://umami.131495.xyz  # 你的 Umami 域名  website_id: xxxxx-xxxx-xxxx-xxxx-xxxxxxx # 刚刚获取的 UUID  script_name: script.js  option:  # 开启 PV/UV 展示 (需要 Token)  UV_PV:    site_uv: true    site_pv: true    page_pv: true    token: 填写访问令牌 # 下文说明如何获取\n2. 获取 Access Token (硬核方法)Butterfly 主题通过调用 Umami API 来展示页面访问量，这需要通过 Token 进行鉴权。\n目前最快捷的获取方法（针对自托管版）：\n\n用 Chrome 浏览器登录你的 Umami 后台。\n按 F12 打开开发者工具，切换到 Network (网络) 标签。\n刷新页面，随便点击一个 API 请求（如 stats 或 websites）。\n在 Request Headers (请求头) 中找到 Authorization 字段。\n复制 Bearer 后面的一长串字符，这就是你的 Token。\n\n或者通过调用登录 API 获取：参考 官方文档。\n3. 部署博客重新部署博客后，此时的访问量数据将由 Umami 接管。\n","categories":["创意工坊","服务搭建"],"tags":["Hexo","Docker","Nginx","Umami"]},{"title":"RustDesk 自建远程桌面服务：告别 TeamViewer，拥抱开源与速度","url":"/posts/aed46d6a.html","content":"RustDesk 是一款开源的远程桌面软件，旨在成为 TeamViewer 和 AnyDesk 的替代品。\n它最大的优势在于支持自建服务器。通过自建服务器，你可以拥有完全的数据掌控权，享受局域网般的低延迟体验，且无需支付昂贵的商业授权费用。\n核心组件解析在部署之前，我们需要了解 RustDesk 服务端的两个核心组件：\n\nhbbs (RustDesk ID/Rendezvous Server)\n\n心跳与信令服务器。\n主要负责设备的心跳保活、P2P 连接的打洞（NAT 穿透）、以及设备 ID 的注册与发现。\n客户端通过它来“找到”对方。\n\n\nhbbr (RustDesk Relay Server)\n\n中继服务器。\n当两个客户端无法建立直接的 P2P 连接（例如都在严格的 NAT 后）时，数据将通过此服务器进行转发。\n这是保证连接成功率的兜底方案。\n\n\n\n部署流程本教程基于 Docker Compose 部署，可参考：Ubuntu 系统 Docker 安装全指南：官方源与国内镜像加速。使用 network_mode: &quot;host&quot; 模式，这是官方推荐的最简配置，无需繁琐的端口映射。\n1. 创建工作目录mkdir -p /app/rustdeskcd /app/rustdesktouch docker-compose.yml\n2. 编写配置文件编辑 docker-compose.yml：\ndocker-compose.ymlservices:  hbbs:    image: rustdesk/rustdesk-server:latest    command: hbbs    volumes:      - ./data:/root    network_mode: &quot;host&quot;    depends_on:      - hbbr    restart: unless-stopped  hbbr:    image: rustdesk/rustdesk-server:latest    command: hbbr    volumes:      - ./data:/root    network_mode: &quot;host&quot;    restart: unless-stopped\n3. 启动服务docker compose up -d\n防火墙配置（关键）RustDesk 涉及的端口较多，防火墙配置错误是导致无法连接的最常见原因。\n请在云服务器的安全组或防火墙（UFW/IPTables）中放行以下端口：\n\n\n\n\n端口\n协议\n用途\n说明\n\n\n\n\n21115\nTCP\nHBBS\nNAT 类型测试\n\n\n21116\nTCP\nHBBS\nID 注册与心跳服务\n\n\n21116\nUDP\nHBBS\n重要： ID 注册与心跳（必须放行）\n\n\n21117\nTCP\nHBBR\n中继服务（数据转发）\n\n\n\n\n补充说明：\n\n21114：仅 Pro 版本（付费版）的 API 端口，开源版无需放行。\n21118 - 21119：用于支持网页版客户端（Web Client），如果不需要网页版可不放行。\n\n\n获取连接密钥 (Key)为了防止未经授权的人使用你的中继服务器消耗流量，我们需要获取服务器自动生成的公钥。\n服务启动后，密钥文件位于挂载的 ./data 目录中。\n# 查看公钥（注意是 .pub 结尾的文件）cat /app/rustdesk/data/id_ed25519.pub\n输出的字符串（如 8B/x+...=）即为 Key，复制保存。\n客户端配置下载 RustDesk 客户端（支持 Windows, Mac, Linux, Android, iOS）。\n\n打开客户端，点击 设置（右上角三条横线图标） -> 网络。\n找到顶部 ID / 中继服务器 选项。\n填入以下信息：\nID 服务器：填入你的服务器 IP（或域名）。\n中继服务器：填入你的服务器 IP（或域名）。\nAPI 服务器：留空（除非使用 Pro 版）。\nKey：填入上一步获取的公钥字符串。\n\n\n\n点击 应用。\n回到主界面，如果底部状态栏显示 “就绪”，且没有报错提示，说明连接自建服务器成功。现在你可以享受高清、流畅的远程控制体验了！\n","categories":["创意工坊","服务搭建"],"tags":["Docker","运维","RustDesk","远程桌面"]},{"title":"个人微信接收通知：基于 Docker 搭建企业微信推送服务","url":"/posts/d8044207.html","content":"在众多通知渠道中，微信无疑是国内用户触达率最高的。 但普通微信不开放 API，而公众号推送又受限于模板消息。\n目前最佳的解决方案是利用 企业微信 (WeCom)。通过创建一个属于自己的企业（个人免费），并开启“微信插件”，我们可以在个人微信中无缝接收来自“企业”应用的消息推送。\n为了简化鉴权流程（复杂的 Token 获取与缓存），我们将部署一个轻量级的中间件 lijiabao9/wecome-pusher，将其转化为简单的 Webhook 调用。\n第一步：企业微信端配置一切的前提是拥有一个企业微信账号。\n\n注册企业：访问 企业微信官网 注册一个组织（名称随意，如 我的家庭数据中心）。\n获取企业 ID (CorpID)：登录后台，点击 我的企业 -&gt; 企业信息，在最底部找到 企业 ID。\n创建应用：\n点击 应用管理 -&gt; 应用 -&gt; 自建 -&gt; 创建应用。\n应用名称：随意（如 ServerBot），可见范围：选择你自己或企业。\n创建完成后，进入应用详情页，获取 AgentId (应用 ID) 和 Secret (应用密钥)。\n注意：Secret 需要在手机端企业微信确认后查看。\n\n\n配置可信 IP (关键)：\n在应用详情页 -&gt; 开发者接口 -&gt; 企业可信 IP。\n点击配置，填入你即将部署 Docker 服务的服务器 公网 IP。\n注意：企业微信对此校验严格。配置 IP 前可能要求进行域名归属权验证（需将指定 txt 文件放置在你的域名根目录下）。\n\n\n\n创建机器人：\n手机端进入企业微信，选择一个群聊。\n设置里，消息推送，新建机器人，得到回调地址 WebHook。\n\n\n开启微信插件：\n点击左侧菜单 我的企业 -&gt; 微信插件。\n找到“邀请关注”，使用你的个人微信扫描大尺寸二维码。\n关注后，该企业应用的消息将直接出现在你个人微信的聊天列表中。\n\n\n\n\n第二步：Docker 部署中间件我们将使用 Docker Compose 部署 API 服务。\n\n创建目录：\n mkdir -p /app/wecome-pushercd /app/wecome-pusher\n\n配置文件：\n创建 docker-compose.yml：\n vi docker-compose.yml\n 填入配置：替换第一步得到的 CorpID、AgentId、Secret、WebHook，并修改 KEY，用于后续调用的验证。\n services:  core:    image: ghcr.io/lijiabao9/wecome-pusher:main    container_name: wecome-pusher-core    restart: unless-stopped    ports:      - &quot;8080:8080&quot;    environment:      # Webhook 通用配置      KEY: &quot;你的key&quot;      KIND_DEFAULT: &quot;app&quot;      TIMEZONE: &quot;Asia/Shanghai&quot;      # 企业微信应用消息      WECOM_CID: &quot;企业ID&quot;      WECOM_SECRET: &quot;应用Secret&quot;      WECOM_AID: &quot;应用ID&quot;      WECOM_TOUID: &quot;@all&quot;      APP_ENABLE_DUPLICATE_CHECK: 0      APP_DUPLICATE_CHECK_INTERVAL: 1800      # 企业微信群机器人      ROBOT_WEBHOOK: &quot;https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=你的机器人key&quot;      # Redis 配置      REDIS_ON: 1      REDIS_HOST: redis      REDIS_PORT: 6379      REDIS_EXPIRED: 7000      REDIS_KEY: wecom_access_token    depends_on:      - redis  redis:    image: redis:7-alpine    container_name: wecome-pusher-redis    restart: unless-stopped\n\n启动服务：\n docker compose up -d\n\n\n\n第三步：Nginx 反向代理为了通过 HTTPS 安全调用 Webhook，我们需要配置反代。\n\n创建配置：\n 假设域名为 api.131495.xyz。\n vi /etc/nginx/sites-available/api.131495.xyz\n server &#123;    listen 80;    listen [::]:80;    server_name api.131495.xyz;    return 301 https://$host$request_uri;&#125;server &#123;    listen 443 ssl;    listen [::]:443 ssl;    # TODO: 修改为对应的子域名    server_name api.131495.xyz;    # 证书配置    ssl_certificate /cert/acme_131495.xyz/cert.pem;    ssl_certificate_key /cert/acme_131495.xyz/key.pem;    ssl_ciphers HIGH:!aNULL:!MD5;    # TODO: 独立的日志配置    access_log /var/log/nginx/api.access.log proxy_json;    error_log /var/log/nginx/api.error.log;    # 反向代理设置    location /wecome &#123;        # 转发至本地 8080 端口        proxy_pass http://127.0.0.1:8080;        # 代理参数        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n\n重载 Nginx：\n ln -s /etc/nginx/sites-available/api.131495.xyz /etc/nginx/sites-enabled/nginx -t &amp;&amp; nginx -s reload\n\n\n\n第四步：调用测试服务启动后，接口地址格式如下：https://api.131495.xyz/wecome\n你可以直接在浏览器访问该 URL，或者使用 curl 测试：\ncurl &quot;https://api.131495.xyz/wecome?key=你的key&amp;kind=app&amp;msg=Hello_WeChat&quot;\n如果你的个人微信收到了来自 “企业微信” 应用的消息，即代表服务搭建成功！\n\n这个接口现在可以集成到 Uptime Kuma、Apprise 或任何支持 Webhook 的服务中使用了。\n","categories":["创意工坊","服务搭建"],"tags":["Docker","消息推送","企业微信","Webhook"]}]